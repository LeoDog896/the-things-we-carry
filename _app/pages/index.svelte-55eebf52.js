import{S as Fe,i as De,s as Ve,e as q,t as te,k as ve,c as j,a as _,h as ne,d as z,m as he,b as $,g as ee,I as K,n as ae,J as ye,j as Le,N as ze,X as Qe,w as Ze,V as Ke,W as Je}from"../chunks/index-8b31ec42.js";var ge=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},U={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(A,T){(function(R,x){A.exports=x()})(ge,function(){return function(M){var R={};function x(e){if(R[e])return R[e].exports;var l=R[e]={i:e,l:!1,exports:{}};return M[e].call(l.exports,l,l.exports,x),l.l=!0,l.exports}return x.m=M,x.c=R,x.d=function(e,l,n){x.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:n})},x.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},x.t=function(e,l){if(l&1&&(e=x(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(x.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var i in e)x.d(n,i,function(v){return e[v]}.bind(null,i));return n},x.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return x.d(l,"a",l),l},x.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},x.p="",x(x.s=21)}([function(M,R){var x={};M.exports=x,function(){x._nextId=0,x._seed=0,x._nowStartTime=+new Date,x._warnedOnce={},x._decomp=null,x.extend=function(l,n){var i,v;typeof n=="boolean"?(i=2,v=n):(i=1,v=!0);for(var o=i;o<arguments.length;o++){var u=arguments[o];if(u)for(var a in u)v&&u[a]&&u[a].constructor===Object&&(!l[a]||l[a].constructor===Object)?(l[a]=l[a]||{},x.extend(l[a],v,u[a])):l[a]=u[a]}return l},x.clone=function(l,n){return x.extend({},n,l)},x.keys=function(l){if(Object.keys)return Object.keys(l);var n=[];for(var i in l)n.push(i);return n},x.values=function(l){var n=[];if(Object.keys){for(var i=Object.keys(l),v=0;v<i.length;v++)n.push(l[i[v]]);return n}for(var o in l)n.push(l[o]);return n},x.get=function(l,n,i,v){n=n.split(".").slice(i,v);for(var o=0;o<n.length;o+=1)l=l[n[o]];return l},x.set=function(l,n,i,v,o){var u=n.split(".").slice(v,o);return x.get(l,n,0,-1)[u[u.length-1]]=i,i},x.shuffle=function(l){for(var n=l.length-1;n>0;n--){var i=Math.floor(x.random()*(n+1)),v=l[n];l[n]=l[i],l[i]=v}return l},x.choose=function(l){return l[Math.floor(x.random()*l.length)]},x.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},x.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},x.isFunction=function(l){return typeof l=="function"},x.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},x.isString=function(l){return toString.call(l)==="[object String]"},x.clamp=function(l,n,i){return l<n?n:l>i?i:l},x.sign=function(l){return l<0?-1:1},x.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-x._nowStartTime},x.random=function(l,n){return l=typeof l!="undefined"?l:0,n=typeof n!="undefined"?n:1,l+e()*(n-l)};var e=function(){return x._seed=(x._seed*9301+49297)%233280,x._seed/233280};x.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},x.logLevel=1,x.log=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.info=function(){console&&x.logLevel>0&&x.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warn=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");x._warnedOnce[l]||(x.warn(l),x._warnedOnce[l]=!0)},x.deprecated=function(l,n,i){l[n]=x.chain(function(){x.warnOnce("\u{1F505} deprecated \u{1F505}",i)},l[n])},x.nextId=function(){return x._nextId++},x.indexOf=function(l,n){if(l.indexOf)return l.indexOf(n);for(var i=0;i<l.length;i++)if(l[i]===n)return i;return-1},x.map=function(l,n){if(l.map)return l.map(n);for(var i=[],v=0;v<l.length;v+=1)i.push(n(l[v]));return i},x.topologicalSort=function(l){var n=[],i=[],v=[];for(var o in l)!i[o]&&!v[o]&&x._topologicalSort(o,i,v,l,n);return n},x._topologicalSort=function(l,n,i,v,o){var u=v[l]||[];i[l]=!0;for(var a=0;a<u.length;a+=1){var t=u[a];i[t]||n[t]||x._topologicalSort(t,n,i,v,o)}i[l]=!1,n[l]=!0,o.push(l)},x.chain=function(){for(var l=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?l.push.apply(l,i._chained):l.push(i)}var v=function(){for(var o,u=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)u[a]=arguments[a];for(a=0;a<l.length;a+=1){var r=l[a].apply(o,u);typeof r!="undefined"&&(o=r)}return o};return v._chained=l,v},x.chainPathBefore=function(l,n,i){return x.set(l,n,x.chain(i,x.get(l,n)))},x.chainPathAfter=function(l,n,i){return x.set(l,n,x.chain(x.get(l,n),i))},x.setDecomp=function(l){x._decomp=l},x.getDecomp=function(){var l=x._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof ge!="undefined"&&(l=ge.decomp)}catch{l=null}return l}}()},function(M,R){var x={};M.exports=x,function(){x.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&x.update(l,e),l},x.update=function(e,l,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<l.length;i++){var v=l[i];v.x>e.max.x&&(e.max.x=v.x),v.x<e.min.x&&(e.min.x=v.x),v.y>e.max.y&&(e.max.y=v.y),v.y<e.min.y&&(e.min.y=v.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},x.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},x.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},x.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},x.shift=function(e,l){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+n,e.min.y=l.y,e.max.y=l.y+i}}()},function(M,R){var x={};M.exports=x,function(){x.create=function(e,l){return{x:e||0,y:l||0}},x.clone=function(e){return{x:e.x,y:e.y}},x.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},x.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},x.rotate=function(e,l,n){var i=Math.cos(l),v=Math.sin(l);n||(n={});var o=e.x*i-e.y*v;return n.y=e.x*v+e.y*i,n.x=o,n},x.rotateAbout=function(e,l,n,i){var v=Math.cos(l),o=Math.sin(l);i||(i={});var u=n.x+((e.x-n.x)*v-(e.y-n.y)*o);return i.y=n.y+((e.x-n.x)*o+(e.y-n.y)*v),i.x=u,i},x.normalise=function(e){var l=x.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},x.dot=function(e,l){return e.x*l.x+e.y*l.y},x.cross=function(e,l){return e.x*l.y-e.y*l.x},x.cross3=function(e,l,n){return(l.x-e.x)*(n.y-e.y)-(l.y-e.y)*(n.x-e.x)},x.add=function(e,l,n){return n||(n={}),n.x=e.x+l.x,n.y=e.y+l.y,n},x.sub=function(e,l,n){return n||(n={}),n.x=e.x-l.x,n.y=e.y-l.y,n},x.mult=function(e,l){return{x:e.x*l,y:e.y*l}},x.div=function(e,l){return{x:e.x/l,y:e.y/l}},x.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},x.neg=function(e){return{x:-e.x,y:-e.y}},x.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},x._temp=[x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]}()},function(M,R,x){var e={};M.exports=e;var l=x(2),n=x(0);(function(){e.create=function(i,v){for(var o=[],u=0;u<i.length;u++){var a=i[u],t={x:a.x,y:a.y,index:u,body:v,isInternal:!1};o.push(t)}return o},e.fromPath=function(i,v){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return i.replace(o,function(a,t,r){u.push({x:parseFloat(t),y:parseFloat(r)})}),e.create(u,v)},e.centre=function(i){for(var v=e.area(i,!0),o={x:0,y:0},u,a,t,r=0;r<i.length;r++)t=(r+1)%i.length,u=l.cross(i[r],i[t]),a=l.mult(l.add(i[r],i[t]),u),o=l.add(o,a);return l.div(o,6*v)},e.mean=function(i){for(var v={x:0,y:0},o=0;o<i.length;o++)v.x+=i[o].x,v.y+=i[o].y;return l.div(v,i.length)},e.area=function(i,v){for(var o=0,u=i.length-1,a=0;a<i.length;a++)o+=(i[u].x-i[a].x)*(i[u].y+i[a].y),u=a;return v?o/2:Math.abs(o)/2},e.inertia=function(i,v){for(var o=0,u=0,a=i,t,r,s=0;s<a.length;s++)r=(s+1)%a.length,t=Math.abs(l.cross(a[r],a[s])),o+=t*(l.dot(a[r],a[r])+l.dot(a[r],a[s])+l.dot(a[s],a[s])),u+=t;return v/6*(o/u)},e.translate=function(i,v,o){o=typeof o!="undefined"?o:1;var u=i.length,a=v.x*o,t=v.y*o,r;for(r=0;r<u;r++)i[r].x+=a,i[r].y+=t;return i},e.rotate=function(i,v,o){if(v!==0){var u=Math.cos(v),a=Math.sin(v),t=o.x,r=o.y,s=i.length,c,m,P,S;for(S=0;S<s;S++)c=i[S],m=c.x-t,P=c.y-r,c.x=t+(m*u-P*a),c.y=r+(m*a+P*u);return i}},e.contains=function(i,v){for(var o=v.x,u=v.y,a=i.length,t=i[a-1],r,s=0;s<a;s++){if(r=i[s],(o-t.x)*(r.y-t.y)+(u-t.y)*(t.x-r.x)>0)return!1;t=r}return!0},e.scale=function(i,v,o,u){if(v===1&&o===1)return i;u=u||e.centre(i);for(var a,t,r=0;r<i.length;r++)a=i[r],t=l.sub(a,u),i[r].x=u.x+t.x*v,i[r].y=u.y+t.y*o;return i},e.chamfer=function(i,v,o,u,a){typeof v=="number"?v=[v]:v=v||[8],o=typeof o!="undefined"?o:-1,u=u||2,a=a||14;for(var t=[],r=0;r<i.length;r++){var s=i[r-1>=0?r-1:i.length-1],c=i[r],m=i[(r+1)%i.length],P=v[r<v.length?r:v.length-1];if(P===0){t.push(c);continue}var S=l.normalise({x:c.y-s.y,y:s.x-c.x}),h=l.normalise({x:m.y-c.y,y:c.x-m.x}),g=Math.sqrt(2*Math.pow(P,2)),d=l.mult(n.clone(S),P),f=l.normalise(l.mult(l.add(S,h),.5)),y=l.sub(c,l.mult(f,g)),p=o;o===-1&&(p=Math.pow(P,.32)*1.75),p=n.clamp(p,u,a),p%2===1&&(p+=1);for(var C=Math.acos(l.dot(S,h)),w=C/p,I=0;I<p;I++)t.push(l.add(l.rotate(d,w*I),y))}return t},e.clockwiseSort=function(i){var v=e.mean(i);return i.sort(function(o,u){return l.angle(v,o)-l.angle(v,u)}),i},e.isConvex=function(i){var v=0,o=i.length,u,a,t,r;if(o<3)return null;for(u=0;u<o;u++)if(a=(u+1)%o,t=(u+2)%o,r=(i[a].x-i[u].x)*(i[t].y-i[a].y),r-=(i[a].y-i[u].y)*(i[t].x-i[a].x),r<0?v|=1:r>0&&(v|=2),v===3)return!1;return v!==0?!0:null},e.hull=function(i){var v=[],o=[],u,a;for(i=i.slice(0),i.sort(function(t,r){var s=t.x-r.x;return s!==0?s:t.y-r.y}),a=0;a<i.length;a+=1){for(u=i[a];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(a=i.length-1;a>=0;a-=1){for(u=i[a];v.length>=2&&l.cross3(v[v.length-2],v[v.length-1],u)<=0;)v.pop();v.push(u)}return v.pop(),o.pop(),v.concat(o)}})()},function(M,R,x){var e={};M.exports=e;var l=x(0);(function(){e.on=function(n,i,v){for(var o=i.split(" "),u,a=0;a<o.length;a++)u=o[a],n.events=n.events||{},n.events[u]=n.events[u]||[],n.events[u].push(v);return v},e.off=function(n,i,v){if(!i){n.events={};return}typeof i=="function"&&(v=i,i=l.keys(n.events).join(" "));for(var o=i.split(" "),u=0;u<o.length;u++){var a=n.events[o[u]],t=[];if(v&&a)for(var r=0;r<a.length;r++)a[r]!==v&&t.push(a[r]);n.events[o[u]]=t}},e.trigger=function(n,i,v){var o,u,a,t,r=n.events;if(r&&l.keys(r).length>0){v||(v={}),o=i.split(" ");for(var s=0;s<o.length;s++)if(u=o[s],a=r[u],a){t=l.clone(v,!1),t.name=u,t.source=n;for(var c=0;c<a.length;c++)a[c].apply(n,[t])}}}})()},function(M,R,x){var e={};M.exports=e;var l=x(4),n=x(0),i=x(1),v=x(6);(function(){e.create=function(o){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,u,a,t){if(o.isModified=u,u&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),a&&o.parent&&e.setModified(o.parent,u,a,t),t)for(var r=0;r<o.composites.length;r++){var s=o.composites[r];e.setModified(s,u,a,t)}},e.add=function(o,u){var a=[].concat(u);l.trigger(o,"beforeAdd",{object:u});for(var t=0;t<a.length;t++){var r=a[t];switch(r.type){case"body":if(r.parent!==r){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,r);break;case"constraint":e.addConstraint(o,r);break;case"composite":e.addComposite(o,r);break;case"mouseConstraint":e.addConstraint(o,r.constraint);break}}return l.trigger(o,"afterAdd",{object:u}),o},e.remove=function(o,u,a){var t=[].concat(u);l.trigger(o,"beforeRemove",{object:u});for(var r=0;r<t.length;r++){var s=t[r];switch(s.type){case"body":e.removeBody(o,s,a);break;case"constraint":e.removeConstraint(o,s,a);break;case"composite":e.removeComposite(o,s,a);break;case"mouseConstraint":e.removeConstraint(o,s.constraint);break}}return l.trigger(o,"afterRemove",{object:u}),o},e.addComposite=function(o,u){return o.composites.push(u),u.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,u,a){var t=n.indexOf(o.composites,u);if(t!==-1&&e.removeCompositeAt(o,t),a)for(var r=0;r<o.composites.length;r++)e.removeComposite(o.composites[r],u,!0);return o},e.removeCompositeAt=function(o,u){return o.composites.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,u){return o.bodies.push(u),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,u,a){var t=n.indexOf(o.bodies,u);if(t!==-1&&e.removeBodyAt(o,t),a)for(var r=0;r<o.composites.length;r++)e.removeBody(o.composites[r],u,!0);return o},e.removeBodyAt=function(o,u){return o.bodies.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,u){return o.constraints.push(u),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,u,a){var t=n.indexOf(o.constraints,u);if(t!==-1&&e.removeConstraintAt(o,t),a)for(var r=0;r<o.composites.length;r++)e.removeConstraint(o.composites[r],u,!0);return o},e.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,u,a){if(a)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],u,!0);return u?o.bodies=o.bodies.filter(function(r){return r.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var u=[].concat(o.bodies),a=0;a<o.composites.length;a++)u=u.concat(e.allBodies(o.composites[a]));return o.cache&&(o.cache.allBodies=u),u},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var u=[].concat(o.constraints),a=0;a<o.composites.length;a++)u=u.concat(e.allConstraints(o.composites[a]));return o.cache&&(o.cache.allConstraints=u),u},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var u=[].concat(o.composites),a=0;a<o.composites.length;a++)u=u.concat(e.allComposites(o.composites[a]));return o.cache&&(o.cache.allComposites=u),u},e.get=function(o,u,a){var t,r;switch(a){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(r=t.filter(function(s){return s.id.toString()===u.toString()}),r.length===0?null:r[0]):null},e.move=function(o,u,a){return e.remove(o,u),e.add(a,u),o},e.rebase=function(o){for(var u=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),a=0;a<u.length;a++)u[a].id=n.nextId();return o},e.translate=function(o,u,a){for(var t=a?e.allBodies(o):o.bodies,r=0;r<t.length;r++)v.translate(t[r],u);return o},e.rotate=function(o,u,a,t){for(var r=Math.cos(u),s=Math.sin(u),c=t?e.allBodies(o):o.bodies,m=0;m<c.length;m++){var P=c[m],S=P.position.x-a.x,h=P.position.y-a.y;v.setPosition(P,{x:a.x+(S*r-h*s),y:a.y+(S*s+h*r)}),v.rotate(P,u)}return o},e.scale=function(o,u,a,t,r){for(var s=r?e.allBodies(o):o.bodies,c=0;c<s.length;c++){var m=s[c],P=m.position.x-t.x,S=m.position.y-t.y;v.setPosition(m,{x:t.x+P*u,y:t.y+S*a}),v.scale(m,u,a)}return o},e.bounds=function(o){for(var u=e.allBodies(o),a=[],t=0;t<u.length;t+=1){var r=u[t];a.push(r.bounds.min,r.bounds.max)}return i.create(a)}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(2),i=x(7);x(16);var v=x(0),o=x(1),u=x(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var r={id:v.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=v.extend(r,t);return a(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,r){r=r||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:r.axes||t.axes,area:r.area||t.area,mass:r.mass||t.mass,inertia:r.inertia||t.inertia});var s=t.isStatic?"#14151f":v.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),c=t.isStatic?"#555":"#ccc",m=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||c,t.render.lineWidth=t.render.lineWidth||m,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,r,s){var c;typeof r=="string"&&(c=r,r={},r[c]=s);for(c in r)if(!!Object.prototype.hasOwnProperty.call(r,c))switch(s=r[c],c){case"isStatic":e.setStatic(t,s);break;case"isSleeping":i.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[c]=s}},e.setStatic=function(t,r){for(var s=0;s<t.parts.length;s++){var c=t.parts[s];c.isStatic=r,r?(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia},c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null)}},e.setMass=function(t,r){var s=t.inertia/(t.mass/6);t.inertia=s*(r/6),t.inverseInertia=1/t.inertia,t.mass=r,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,r){e.setMass(t,r*t.area),t.density=r},e.setInertia=function(t,r){t.inertia=r,t.inverseInertia=1/t.inertia},e.setVertices=function(t,r){r[0].body===t?t.vertices=r:t.vertices=l.create(r,t),t.axes=u.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,r,s){var c;for(r=r.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,c=0;c<r.length;c++){var m=r[c];m!==t&&(m.parent=t,t.parts.push(m))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var P=[];for(c=0;c<r.length;c++)P=P.concat(r[c].vertices);l.clockwiseSort(P);var S=l.hull(P),h=l.centre(S);e.setVertices(t,S),l.translate(t.vertices,h)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,r,s){s?(t.positionPrev.x+=r.x,t.positionPrev.y+=r.y,t.position.x+=r.x,t.position.y+=r.y):(t.positionPrev.x=r.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=r.y-(t.position.y-t.positionPrev.y),t.position.x=r.x,t.position.y=r.y)},e.setPosition=function(t,r){var s=n.sub(r,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var c=0;c<t.parts.length;c++){var m=t.parts[c];m.position.x+=s.x,m.position.y+=s.y,l.translate(m.vertices,s),o.update(m.bounds,m.vertices,t.velocity)}},e.setAngle=function(t,r){var s=r-t.angle;t.anglePrev+=s;for(var c=0;c<t.parts.length;c++){var m=t.parts[c];m.angle+=s,l.rotate(m.vertices,s,t.position),u.rotate(m.axes,s),o.update(m.bounds,m.vertices,t.velocity),c>0&&n.rotateAbout(m.position,s,t.position,m.position)}},e.setVelocity=function(t,r){t.positionPrev.x=t.position.x-r.x,t.positionPrev.y=t.position.y-r.y,t.velocity.x=r.x,t.velocity.y=r.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,r){t.anglePrev=t.angle-r,t.angularVelocity=r,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,r){e.setPosition(t,n.add(t.position,r))},e.rotate=function(t,r,s){if(!s)e.setAngle(t,t.angle+r);else{var c=Math.cos(r),m=Math.sin(r),P=t.position.x-s.x,S=t.position.y-s.y;e.setPosition(t,{x:s.x+(P*c-S*m),y:s.y+(P*m+S*c)}),e.setAngle(t,t.angle+r)}},e.scale=function(t,r,s,c){var m=0,P=0;c=c||t.position;for(var S=0;S<t.parts.length;S++){var h=t.parts[S];l.scale(h.vertices,r,s,c),h.axes=u.fromVertices(h.vertices),h.area=l.area(h.vertices),e.setMass(h,t.density*h.area),l.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),e.setInertia(h,e._inertiaScale*l.inertia(h.vertices,h.mass)),l.translate(h.vertices,{x:h.position.x,y:h.position.y}),S>0&&(m+=h.area,P+=h.inertia),h.position.x=c.x+(h.position.x-c.x)*r,h.position.y=c.y+(h.position.y-c.y)*s,o.update(h.bounds,h.vertices,t.velocity)}t.parts.length>1&&(t.area=m,t.isStatic||(e.setMass(t,t.density*m),e.setInertia(t,P))),t.circleRadius&&(r===s?t.circleRadius*=r:t.circleRadius=null)},e.update=function(t,r,s,c){var m=Math.pow(r*s*t.timeScale,2),P=1-t.frictionAir*s*t.timeScale,S=t.position.x-t.positionPrev.x,h=t.position.y-t.positionPrev.y;t.velocity.x=S*P*c+t.force.x/t.mass*m,t.velocity.y=h*P*c+t.force.y/t.mass*m,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*P*c+t.torque/t.inertia*m,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var g=0;g<t.parts.length;g++){var d=t.parts[g];l.translate(d.vertices,t.velocity),g>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(d.vertices,t.angularVelocity,t.position),u.rotate(d.axes,t.angularVelocity),g>0&&n.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),o.update(d.bounds,d.vertices,t.velocity)}},e.applyForce=function(t,r,s){t.force.x+=s.x,t.force.y+=s.y;var c={x:r.x-t.position.x,y:r.y-t.position.y};t.torque+=c.x*s.y-c.y*s.x},e._totalProperties=function(t){for(var r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var c=t.parts[s],m=c.mass!==1/0?c.mass:1;r.mass+=m,r.area+=c.area,r.inertia+=c.inertia,r.centre=n.add(r.centre,n.mult(c.position,m))}return r.centre=n.div(r.centre,r.mass),r}})()},function(M,R,x){var e={};M.exports=e;var l=x(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var v=i*i*i,o=0;o<n.length;o++){var u=n[o],a=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var t=Math.min(u.motion,a),r=Math.max(u.motion,a);u.motion=e._minBias*t+(1-e._minBias)*r,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*v?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var v=i*i*i,o=0;o<n.length;o++){var u=n[o];if(!!u.isActive){var a=u.collision,t=a.bodyA.parent,r=a.bodyB.parent;if(!(t.isSleeping&&r.isSleeping||t.isStatic||r.isStatic)&&(t.isSleeping||r.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:r,c=s===t?r:t;!s.isStatic&&c.motion>e._motionWakeThreshold*v&&e.set(s,!1)}}}},e.set=function(n,i){var v=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,v||l.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,v&&l.trigger(n,"sleepEnd"))}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(9);(function(){var i=[],v={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(u,a){return{pair:null,collided:!1,bodyA:u,bodyB:a,parentA:u.parent,parentB:a.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,a,t){if(e._overlapAxes(v,u.vertices,a.vertices,u.axes),v.overlap<=0||(e._overlapAxes(o,a.vertices,u.vertices,a.axes),o.overlap<=0))return null;var r=t&&t.table[n.id(u,a)],s;r?s=r.collision:(s=e.create(u,a),s.collided=!0,s.bodyA=u.id<a.id?u:a,s.bodyB=u.id<a.id?a:u,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),u=s.bodyA,a=s.bodyB;var c;v.overlap<o.overlap?c=v:c=o;var m=s.normal,P=s.supports,S=c.axis,h=S.x,g=S.y;h*(a.position.x-u.position.x)+g*(a.position.y-u.position.y)<0?(m.x=h,m.y=g):(m.x=-h,m.y=-g),s.tangent.x=-m.y,s.tangent.y=m.x,s.depth=c.overlap,s.penetration.x=m.x*s.depth,s.penetration.y=m.y*s.depth;var d=e._findSupports(u,a,m,1),f=0;if(l.contains(u.vertices,d[0])&&(P[f++]=d[0]),l.contains(u.vertices,d[1])&&(P[f++]=d[1]),f<2){var y=e._findSupports(a,u,m,-1);l.contains(a.vertices,y[0])&&(P[f++]=y[0]),f<2&&l.contains(a.vertices,y[1])&&(P[f++]=y[1])}return f===0&&(P[f++]=d[0]),P.length=f,s},e._overlapAxes=function(u,a,t,r){var s=a.length,c=t.length,m=a[0].x,P=a[0].y,S=t[0].x,h=t[0].y,g=r.length,d=Number.MAX_VALUE,f=0,y,p,C,w,I,B;for(I=0;I<g;I++){var E=r[I],L=E.x,k=E.y,D=m*L+P*k,V=S*L+h*k,O=D,H=V;for(B=1;B<s;B+=1)w=a[B].x*L+a[B].y*k,w>O?O=w:w<D&&(D=w);for(B=1;B<c;B+=1)w=t[B].x*L+t[B].y*k,w>H?H=w:w<V&&(V=w);if(p=O-V,C=H-D,y=p<C?p:C,y<d&&(d=y,f=I,y<=0))break}u.axis=r[f],u.overlap=d},e._projectToAxis=function(u,a,t){for(var r=a[0].x*t.x+a[0].y*t.y,s=r,c=1;c<a.length;c+=1){var m=a[c].x*t.x+a[c].y*t.y;m>s?s=m:m<r&&(r=m)}u.min=r,u.max=s},e._findSupports=function(u,a,t,r){var s=a.vertices,c=s.length,m=u.position.x,P=u.position.y,S=t.x*r,h=t.y*r,g=Number.MAX_VALUE,d,f,y,p,C;for(C=0;C<c;C+=1)f=s[C],p=S*(m-f.x)+h*(P-f.y),p<g&&(g=p,d=f);return y=s[(c+d.index-1)%c],g=S*(m-y.x)+h*(P-y.y),f=s[(d.index+1)%c],S*(m-f.x)+h*(P-f.y)<g?(i[0]=d,i[1]=f,i):(i[0]=d,i[1]=y,i)}})()},function(M,R,x){var e={};M.exports=e;var l=x(17);(function(){e.create=function(n,i){var v=n.bodyA,o=n.bodyB,u={id:e.id(v,o),bodyA:v,bodyB:o,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:v.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,n,i),u},e.update=function(n,i,v){var o=n.contacts,u=i.supports,a=n.activeContacts,t=i.parentA,r=i.parentB,s=t.vertices.length;n.isActive=!0,n.timeUpdated=v,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+r.inverseMass,n.friction=t.friction<r.friction?t.friction:r.friction,n.frictionStatic=t.frictionStatic>r.frictionStatic?t.frictionStatic:r.frictionStatic,n.restitution=t.restitution>r.restitution?t.restitution:r.restitution,n.slop=t.slop>r.slop?t.slop:r.slop,i.pair=n,a.length=0;for(var c=0;c<u.length;c++){var m=u[c],P=m.body===t?m.index:s+m.index,S=o[P];S?a.push(S):a.push(o[P]=l.create(m))}},e.setActive=function(n,i,v){i?(n.isActive=!0,n.timeUpdated=v):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(2),i=x(7),v=x(1),o=x(11),u=x(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var r=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,c=n.magnitude(n.sub(r,s));t.length=typeof t.length!="undefined"?t.length:c,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var m={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(m.type="pin",m.anchors=!1):t.stiffness<.9&&(m.type="spring"),t.render=u.extend(m,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var r=a[t],s=r.constraintImpulse;r.isStatic||s.x===0&&s.y===0&&s.angle===0||(r.position.x+=s.x,r.position.y+=s.y,r.angle+=s.angle)}},e.solveAll=function(a,t){for(var r=0;r<a.length;r+=1){var s=a[r],c=!s.bodyA||s.bodyA&&s.bodyA.isStatic,m=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(c||m)&&e.solve(a[r],t)}for(r=0;r<a.length;r+=1)s=a[r],c=!s.bodyA||s.bodyA&&s.bodyA.isStatic,m=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!c&&!m&&e.solve(a[r],t)},e.solve=function(a,t){var r=a.bodyA,s=a.bodyB,c=a.pointA,m=a.pointB;if(!(!r&&!s)){r&&!r.isStatic&&(n.rotate(c,r.angle-a.angleA,c),a.angleA=r.angle),s&&!s.isStatic&&(n.rotate(m,s.angle-a.angleB,m),a.angleB=s.angle);var P=c,S=m;if(r&&(P=n.add(r.position,c)),s&&(S=n.add(s.position,m)),!(!P||!S)){var h=n.sub(P,S),g=n.magnitude(h);g<e._minLength&&(g=e._minLength);var d=(g-a.length)/g,f=a.stiffness<1?a.stiffness*t:a.stiffness,y=n.mult(h,d*f),p=(r?r.inverseMass:0)+(s?s.inverseMass:0),C=(r?r.inverseInertia:0)+(s?s.inverseInertia:0),w=p+C,I,B,E,L,k;if(a.damping){var D=n.create();E=n.div(h,g),k=n.sub(s&&n.sub(s.position,s.positionPrev)||D,r&&n.sub(r.position,r.positionPrev)||D),L=n.dot(E,k)}r&&!r.isStatic&&(B=r.inverseMass/p,r.constraintImpulse.x-=y.x*B,r.constraintImpulse.y-=y.y*B,r.position.x-=y.x*B,r.position.y-=y.y*B,a.damping&&(r.positionPrev.x-=a.damping*E.x*L*B,r.positionPrev.y-=a.damping*E.y*L*B),I=n.cross(c,y)/w*e._torqueDampen*r.inverseInertia*(1-a.angularStiffness),r.constraintImpulse.angle-=I,r.angle-=I),s&&!s.isStatic&&(B=s.inverseMass/p,s.constraintImpulse.x+=y.x*B,s.constraintImpulse.y+=y.y*B,s.position.x+=y.x*B,s.position.y+=y.y*B,a.damping&&(s.positionPrev.x+=a.damping*E.x*L*B,s.positionPrev.y+=a.damping*E.y*L*B),I=n.cross(m,y)/w*e._torqueDampen*s.inverseInertia*(1-a.angularStiffness),s.constraintImpulse.angle+=I,s.angle+=I)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var r=a[t],s=r.constraintImpulse;if(!(r.isStatic||s.x===0&&s.y===0&&s.angle===0)){i.set(r,!1);for(var c=0;c<r.parts.length;c++){var m=r.parts[c];l.translate(m.vertices,s),c>0&&(m.position.x+=s.x,m.position.y+=s.y),s.angle!==0&&(l.rotate(m.vertices,s.angle,r.position),o.rotate(m.axes,s.angle),c>0&&n.rotateAbout(m.position,s.angle,r.position,m.position)),v.update(m.bounds,m.vertices,r.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(M,R,x){var e={};M.exports=e;var l=x(2),n=x(0);(function(){e.fromVertices=function(i){for(var v={},o=0;o<i.length;o++){var u=(o+1)%i.length,a=l.normalise({x:i[u].y-i[o].y,y:i[o].x-i[u].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),v[t]=a}return n.values(v)},e.rotate=function(i,v){if(v!==0)for(var o=Math.cos(v),u=Math.sin(v),a=0;a<i.length;a++){var t=i[a],r;r=t.x*o-t.y*u,t.y=t.x*u+t.y*o,t.x=r}}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(0),i=x(6),v=x(1),o=x(2);(function(){e.rectangle=function(u,a,t,r,s){s=s||{};var c={label:"Rectangle Body",position:{x:u,y:a},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+r+" L 0 "+r)};if(s.chamfer){var m=s.chamfer;c.vertices=l.chamfer(c.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete s.chamfer}return i.create(n.extend({},c,s))},e.trapezoid=function(u,a,t,r,s,c){c=c||{},s*=.5;var m=(1-s*2)*t,P=t*s,S=P+m,h=S+P,g;s<.5?g="L 0 0 L "+P+" "+-r+" L "+S+" "+-r+" L "+h+" 0":g="L 0 0 L "+S+" "+-r+" L "+h+" 0";var d={label:"Trapezoid Body",position:{x:u,y:a},vertices:l.fromPath(g)};if(c.chamfer){var f=c.chamfer;d.vertices=l.chamfer(d.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete c.chamfer}return i.create(n.extend({},d,c))},e.circle=function(u,a,t,r,s){r=r||{};var c={label:"Circle Body",circleRadius:t};s=s||25;var m=Math.ceil(Math.max(10,Math.min(s,t)));return m%2===1&&(m+=1),e.polygon(u,a,m,t,n.extend({},c,r))},e.polygon=function(u,a,t,r,s){if(s=s||{},t<3)return e.circle(u,a,r,s);for(var c=2*Math.PI/t,m="",P=c*.5,S=0;S<t;S+=1){var h=P+S*c,g=Math.cos(h)*r,d=Math.sin(h)*r;m+="L "+g.toFixed(3)+" "+d.toFixed(3)+" "}var f={label:"Polygon Body",position:{x:u,y:a},vertices:l.fromPath(m)};if(s.chamfer){var y=s.chamfer;f.vertices=l.chamfer(f.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete s.chamfer}return i.create(n.extend({},f,s))},e.fromVertices=function(u,a,t,r,s,c,m,P){var S=n.getDecomp(),h,g,d,f,y,p,C,w,I,B,E;for(h=Boolean(S&&S.quickDecomp),r=r||{},d=[],s=typeof s!="undefined"?s:!1,c=typeof c!="undefined"?c:.01,m=typeof m!="undefined"?m:10,P=typeof P!="undefined"?P:.01,n.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(p=t[B],f=l.isConvex(p),y=!f,y&&!h&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),f||!h)f?p=l.clockwiseSort(p):p=l.hull(p),d.push({position:{x:u,y:a},vertices:p});else{var L=p.map(function(Z){return[Z.x,Z.y]});S.makeCCW(L),c!==!1&&S.removeCollinearPoints(L,c),P!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(L,P);var k=S.quickDecomp(L);for(C=0;C<k.length;C++){var D=k[C],V=D.map(function(Z){return{x:Z[0],y:Z[1]}});m>0&&l.area(V)<m||d.push({position:l.centre(V),vertices:V})}}for(C=0;C<d.length;C++)d[C]=i.create(n.extend(d[C],r));if(s){var O=5;for(C=0;C<d.length;C++){var H=d[C];for(w=C+1;w<d.length;w++){var G=d[w];if(v.overlaps(H.bounds,G.bounds)){var N=H.vertices,W=G.vertices;for(I=0;I<H.vertices.length;I++)for(E=0;E<G.vertices.length;E++){var Y=o.magnitudeSquared(o.sub(N[(I+1)%N.length],W[E])),Q=o.magnitudeSquared(o.sub(N[I],W[(E+1)%W.length]));Y<O&&Q<O&&(N[I].isInternal=!0,W[E].isInternal=!0)}}}}}return d.length>1?(g=i.create(n.extend({parts:d.slice(0)},r)),i.setPosition(g,{x:u,y:a}),g):d[0]}})()},function(M,R,x){var e={};M.exports=e;var l=x(0);(function(){e.create=function(n){var i={};return n||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(v){var o=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u&&(i.button=0,v.preventDefault()),i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=v},i.mousedown=function(v){var o=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u?(i.button=0,v.preventDefault()):i.button=v.button,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=v},i.mouseup=function(v){var o=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u&&v.preventDefault(),i.button=-1,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=v},i.mousewheel=function(v){i.wheelDelta=Math.max(-1,Math.min(1,v.wheelDelta||-v.detail)),v.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,v){var o=i.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,r=n.changedTouches,s,c;return r?(s=r[0].pageX-o.left-a,c=r[0].pageY-o.top-t):(s=n.pageX-o.left-a,c=n.pageY-o.top-t),{x:s/(i.clientWidth/(i.width||i.clientWidth)*v),y:c/(i.clientHeight/(i.height||i.clientHeight)*v)}}})()},function(M,R,x){var e={};M.exports=e;var l=x(0),n=x(8);(function(){e.create=function(i){var v={bodies:[],pairs:null};return l.extend(v,i)},e.setBodies=function(i,v){i.bodies=v.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var v=[],o=i.pairs,u=i.bodies,a=u.length,t=e.canCollide,r=n.collides,s,c;for(u.sort(e._compareBoundsX),s=0;s<a;s++){var m=u[s],P=m.bounds,S=m.bounds.max.x,h=m.bounds.max.y,g=m.bounds.min.y,d=m.isStatic||m.isSleeping,f=m.parts.length,y=f===1;for(c=s+1;c<a;c++){var p=u[c],C=p.bounds;if(C.min.x>S)break;if(!(h<C.min.y||g>C.max.y)&&!(d&&(p.isStatic||p.isSleeping))&&!!t(m.collisionFilter,p.collisionFilter)){var w=p.parts.length;if(y&&w===1){var I=r(m,p,o);I&&v.push(I)}else for(var B=f>1?1:0,E=w>1?1:0,L=B;L<f;L++)for(var k=m.parts[L],P=k.bounds,D=E;D<w;D++){var V=p.parts[D],C=V.bounds;if(!(P.min.x>C.max.x||P.max.x<C.min.x||P.max.y<C.min.y||P.min.y>C.max.y)){var I=r(k,V,o);I&&v.push(I)}}}}}return v},e.canCollide=function(i,v){return i.group===v.group&&i.group!==0?i.group>0:(i.mask&v.category)!==0&&(v.mask&i.category)!==0},e._compareBoundsX=function(i,v){return i.bounds.min.x-v.bounds.min.x}})()},function(M,R,x){var e={};M.exports=e;var l=x(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||l.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],v=e.versionParse(n.version).number,o=e.versionParse(i.version).number;v>o?(l.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):v<o?l.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&l.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var v=n.for&&e.dependencyParse(n.for);return!n.for||i.name===v.name&&e.versionSatisfies(i.version,v.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){l.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var v=e.dependencies(n),o=l.topologicalSort(v),u=[],a=0;a<o.length;a+=1)if(o[a]!==n.name){var t=e.resolve(o[a]);if(!t){u.push("\u274C "+o[a]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),n.used.push(t.name))}u.length>0&&l.info(u.join("  "))},e.dependencies=function(n,i){var v=e.dependencyParse(n),o=v.name;if(i=i||{},!(o in i)){n=e.resolve(n)||n,i[o]=l.map(n.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),r=e.resolve(a);return r&&!e.versionSatisfies(r.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(r),"does not satisfy",e.toString(t),"used by",e.toString(v)+"."),r._warned=!0,n._warned=!0):r||(l.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(v),"could not be resolved."),n._warned=!0),t.name});for(var u=0;u<i[o].length;u+=1)e.dependencies(i[o][u],i);return i}},e.dependencyParse=function(n){if(l.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||l.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||l.warn("Plugin.versionParse:",n,"is not a valid version or range.");var v=i.exec(n),o=Number(v[4]),u=Number(v[5]),a=Number(v[6]);return{isRange:Boolean(v[1]||v[2]),version:v[3],range:n,operator:v[1]||v[2]||"",major:o,minor:u,patch:a,parts:[o,u,a],prerelease:v[7],number:o*1e8+u*1e4+a}},e.versionSatisfies=function(n,i){i=i||"*";var v=e.versionParse(i),o=e.versionParse(n);if(v.isRange){if(v.operator==="*"||n==="*")return!0;if(v.operator===">")return o.number>v.number;if(v.operator===">=")return o.number>=v.number;if(v.operator==="~")return o.major===v.major&&o.minor===v.minor&&o.patch>=v.patch;if(v.operator==="^")return v.major>0?o.major===v.major&&o.number>=v.number:v.minor>0?o.minor===v.minor&&o.patch>=v.patch:o.patch===v.patch}return n===i||n==="*"}})()},function(M,R,x){var e={};M.exports=e;var l=x(0),n=x(5),i=x(1),v=x(4),o=x(2),u=x(13);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var g={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=l.extend(g,h);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=h.mouse,d.engine=h.engine,d.canvas=d.canvas||c(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),l.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(h){(function g(d){h.frameRequestId=a(g),r(h,d),e.world(h,d),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,d),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,d)})()},e.stop=function(h){t(h.frameRequestId)},e.setPixelRatio=function(h,g){var d=h.options,f=h.canvas;g==="auto"&&(g=m(f)),d.pixelRatio=g,f.setAttribute("data-pixel-ratio",g),f.width=d.width*g,f.height=d.height*g,f.style.width=d.width+"px",f.style.height=d.height+"px"},e.lookAt=function(h,g,d,f){f=typeof f!="undefined"?f:!0,g=l.isArray(g)?g:[g],d=d||{x:0,y:0};for(var y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},p=0;p<g.length;p+=1){var C=g[p],w=C.bounds?C.bounds.min:C.min||C.position||C,I=C.bounds?C.bounds.max:C.max||C.position||C;w&&I&&(w.x<y.min.x&&(y.min.x=w.x),I.x>y.max.x&&(y.max.x=I.x),w.y<y.min.y&&(y.min.y=w.y),I.y>y.max.y&&(y.max.y=I.y))}var B=y.max.x-y.min.x+2*d.x,E=y.max.y-y.min.y+2*d.y,L=h.canvas.height,k=h.canvas.width,D=k/L,V=B/E,O=1,H=1;V>D?H=V/D:O=D/V,h.options.hasBounds=!0,h.bounds.min.x=y.min.x,h.bounds.max.x=y.min.x+B*O,h.bounds.min.y=y.min.y,h.bounds.max.y=y.min.y+E*H,f&&(h.bounds.min.x+=B*.5-B*O*.5,h.bounds.max.x+=B*.5-B*O*.5,h.bounds.min.y+=E*.5-E*H*.5,h.bounds.max.y+=E*.5-E*H*.5),h.bounds.min.x-=d.x,h.bounds.max.x-=d.x,h.bounds.min.y-=d.y,h.bounds.max.y-=d.y,h.mouse&&(u.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),u.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){var g=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,f=g/h.options.width,y=d/h.options.height;h.context.setTransform(h.options.pixelRatio/f,0,0,h.options.pixelRatio/y,0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,g){var d=l.now(),f=h.engine,y=f.world,p=h.canvas,C=h.context,w=h.options,I=h.timing,B=n.allBodies(y),E=n.allConstraints(y),L=w.wireframes?w.wireframeBackground:w.background,k=[],D=[],V,O={timestamp:f.timing.timestamp};if(v.trigger(h,"beforeRender",O),h.currentBackground!==L&&S(h,L),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,p.width,p.height),C.globalCompositeOperation="source-over",w.hasBounds){for(V=0;V<B.length;V++){var H=B[V];i.overlaps(H.bounds,h.bounds)&&k.push(H)}for(V=0;V<E.length;V++){var G=E[V],N=G.bodyA,W=G.bodyB,Y=G.pointA,Q=G.pointB;N&&(Y=o.add(N.position,G.pointA)),W&&(Q=o.add(W.position,G.pointB)),!(!Y||!Q)&&(i.contains(h.bounds,Y)||i.contains(h.bounds,Q))&&D.push(G)}e.startViewTransform(h),h.mouse&&(u.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),u.setOffset(h.mouse,h.bounds.min))}else D=E,k=B,h.options.pixelRatio!==1&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!w.wireframes||f.enableSleeping&&w.showSleeping?e.bodies(h,k,C):(w.showConvexHulls&&e.bodyConvexHulls(h,k,C),e.bodyWireframes(h,k,C)),w.showBounds&&e.bodyBounds(h,k,C),(w.showAxes||w.showAngleIndicator)&&e.bodyAxes(h,k,C),w.showPositions&&e.bodyPositions(h,k,C),w.showVelocity&&e.bodyVelocity(h,k,C),w.showIds&&e.bodyIds(h,k,C),w.showSeparations&&e.separations(h,f.pairs.list,C),w.showCollisions&&e.collisions(h,f.pairs.list,C),w.showVertexNumbers&&e.vertexNumbers(h,k,C),w.showMousePosition&&e.mousePosition(h,h.mouse,C),e.constraints(D,C),w.hasBounds&&e.endViewTransform(h),v.trigger(h,"afterRender",O),I.lastElapsed=l.now()-d},e.stats=function(h,g,d){for(var f=h.engine,y=f.world,p=n.allBodies(y),C=0,w=55,I=44,B=0,E=0,L=0;L<p.length;L+=1)C+=p[L].parts.length;var k={Part:C,Body:p.length,Cons:n.allConstraints(y).length,Comp:n.allComposites(y).length,Pair:f.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(B,E,w*5.5,I),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var D in k){var V=k[D];g.fillStyle="#aaa",g.fillText(D,B+w,E+8),g.fillStyle="#eee",g.fillText(V,B+w,E+26),B+=w}},e.performance=function(h,g){var d=h.engine,f=h.timing,y=f.deltaHistory,p=f.elapsedHistory,C=f.timestampElapsedHistory,w=f.engineDeltaHistory,I=f.engineElapsedHistory,B=d.timing.lastDelta,E=s(y),L=s(p),k=s(w),D=s(I),V=s(C),O=V/E||0,H=1e3/E||0,G=4,N=12,W=60,Y=34,Q=10,Z=69;g.fillStyle="#0e0f19",g.fillRect(0,50,N*4+W*5+22,Y),e.status(g,Q,Z,W,G,y.length,Math.round(H)+" fps",H/e._goodFps,function(J){return y[J]/E-1}),e.status(g,Q+N+W,Z,W,G,w.length,B.toFixed(2)+" dt",e._goodDelta/B,function(J){return w[J]/k-1}),e.status(g,Q+(N+W)*2,Z,W,G,I.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(J){return I[J]/D-1}),e.status(g,Q+(N+W)*3,Z,W,G,p.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(J){return p[J]/L-1}),e.status(g,Q+(N+W)*4,Z,W,G,C.length,O.toFixed(2)+" x",O*O*O,function(J){return(C[J]/y[J]/O||0)-1})},e.status=function(h,g,d,f,y,p,C,w,I){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(g,d+7,f,1),h.beginPath(),h.moveTo(g,d+7-y*l.clamp(.4*I(0),-2,2));for(var B=0;B<f;B+=1)h.lineTo(g+B,d+7-(B<p?y*l.clamp(.4*I(B),-2,2):0));h.stroke(),h.fillStyle="hsl("+l.clamp(25+95*w,0,120)+",100%,60%)",h.fillRect(g,d-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(C,g+f,d-5)},e.constraints=function(h,g){for(var d=g,f=0;f<h.length;f++){var y=h[f];if(!(!y.render.visible||!y.pointA||!y.pointB)){var p=y.bodyA,C=y.bodyB,w,I;if(p?w=o.add(p.position,y.pointA):w=y.pointA,y.render.type==="pin")d.beginPath(),d.arc(w.x,w.y,3,0,2*Math.PI),d.closePath();else{if(C?I=o.add(C.position,y.pointB):I=y.pointB,d.beginPath(),d.moveTo(w.x,w.y),y.render.type==="spring")for(var B=o.sub(I,w),E=o.perp(o.normalise(B)),L=Math.ceil(l.clamp(y.length/5,12,20)),k,D=1;D<L;D+=1)k=D%2===0?1:-1,d.lineTo(w.x+B.x*(D/L)+E.x*k*4,w.y+B.y*(D/L)+E.y*k*4);d.lineTo(I.x,I.y)}y.render.lineWidth&&(d.lineWidth=y.render.lineWidth,d.strokeStyle=y.render.strokeStyle,d.stroke()),y.render.anchors&&(d.fillStyle=y.render.strokeStyle,d.beginPath(),d.arc(w.x,w.y,3,0,2*Math.PI),d.arc(I.x,I.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(h,g,d){var f=d;h.engine;var y=h.options,p=y.showInternalEdges||!y.wireframes,C,w,I,B;for(I=0;I<g.length;I++)if(C=g[I],!!C.render.visible){for(B=C.parts.length>1?1:0;B<C.parts.length;B++)if(w=C.parts[B],!!w.render.visible){if(y.showSleeping&&C.isSleeping?f.globalAlpha=.5*w.render.opacity:w.render.opacity!==1&&(f.globalAlpha=w.render.opacity),w.render.sprite&&w.render.sprite.texture&&!y.wireframes){var E=w.render.sprite,L=P(h,E.texture);f.translate(w.position.x,w.position.y),f.rotate(w.angle),f.drawImage(L,L.width*-E.xOffset*E.xScale,L.height*-E.yOffset*E.yScale,L.width*E.xScale,L.height*E.yScale),f.rotate(-w.angle),f.translate(-w.position.x,-w.position.y)}else{if(w.circleRadius)f.beginPath(),f.arc(w.position.x,w.position.y,w.circleRadius,0,2*Math.PI);else{f.beginPath(),f.moveTo(w.vertices[0].x,w.vertices[0].y);for(var k=1;k<w.vertices.length;k++)!w.vertices[k-1].isInternal||p?f.lineTo(w.vertices[k].x,w.vertices[k].y):f.moveTo(w.vertices[k].x,w.vertices[k].y),w.vertices[k].isInternal&&!p&&f.moveTo(w.vertices[(k+1)%w.vertices.length].x,w.vertices[(k+1)%w.vertices.length].y);f.lineTo(w.vertices[0].x,w.vertices[0].y),f.closePath()}y.wireframes?(f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()):(f.fillStyle=w.render.fillStyle,w.render.lineWidth&&(f.lineWidth=w.render.lineWidth,f.strokeStyle=w.render.strokeStyle,f.stroke()),f.fill())}f.globalAlpha=1}}},e.bodyWireframes=function(h,g,d){var f=d,y=h.options.showInternalEdges,p,C,w,I,B;for(f.beginPath(),w=0;w<g.length;w++)if(p=g[w],!!p.render.visible)for(B=p.parts.length>1?1:0;B<p.parts.length;B++){for(C=p.parts[B],f.moveTo(C.vertices[0].x,C.vertices[0].y),I=1;I<C.vertices.length;I++)!C.vertices[I-1].isInternal||y?f.lineTo(C.vertices[I].x,C.vertices[I].y):f.moveTo(C.vertices[I].x,C.vertices[I].y),C.vertices[I].isInternal&&!y&&f.moveTo(C.vertices[(I+1)%C.vertices.length].x,C.vertices[(I+1)%C.vertices.length].y);f.lineTo(C.vertices[0].x,C.vertices[0].y)}f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()},e.bodyConvexHulls=function(h,g,d){var f=d,y,p,C;for(f.beginPath(),p=0;p<g.length;p++)if(y=g[p],!(!y.render.visible||y.parts.length===1)){for(f.moveTo(y.vertices[0].x,y.vertices[0].y),C=1;C<y.vertices.length;C++)f.lineTo(y.vertices[C].x,y.vertices[C].y);f.lineTo(y.vertices[0].x,y.vertices[0].y)}f.lineWidth=1,f.strokeStyle="rgba(255,255,255,0.2)",f.stroke()},e.vertexNumbers=function(h,g,d){var f=d,y,p,C;for(y=0;y<g.length;y++){var w=g[y].parts;for(C=w.length>1?1:0;C<w.length;C++){var I=w[C];for(p=0;p<I.vertices.length;p++)f.fillStyle="rgba(255,255,255,0.2)",f.fillText(y+"_"+p,I.position.x+(I.vertices[p].x-I.position.x)*.8,I.position.y+(I.vertices[p].y-I.position.y)*.8)}}},e.mousePosition=function(h,g,d){var f=d;f.fillStyle="rgba(255,255,255,0.8)",f.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(h,g,d){var f=d;h.engine;var y=h.options;f.beginPath();for(var p=0;p<g.length;p++){var C=g[p];if(C.render.visible)for(var w=g[p].parts,I=w.length>1?1:0;I<w.length;I++){var B=w[I];f.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}y.wireframes?f.strokeStyle="rgba(255,255,255,0.08)":f.strokeStyle="rgba(0,0,0,0.1)",f.lineWidth=1,f.stroke()},e.bodyAxes=function(h,g,d){var f=d;h.engine;var y=h.options,p,C,w,I;for(f.beginPath(),C=0;C<g.length;C++){var B=g[C],E=B.parts;if(!!B.render.visible)if(y.showAxes)for(w=E.length>1?1:0;w<E.length;w++)for(p=E[w],I=0;I<p.axes.length;I++){var L=p.axes[I];f.moveTo(p.position.x,p.position.y),f.lineTo(p.position.x+L.x*20,p.position.y+L.y*20)}else for(w=E.length>1?1:0;w<E.length;w++)for(p=E[w],I=0;I<p.axes.length;I++)f.moveTo(p.position.x,p.position.y),f.lineTo((p.vertices[0].x+p.vertices[p.vertices.length-1].x)/2,(p.vertices[0].y+p.vertices[p.vertices.length-1].y)/2)}y.wireframes?(f.strokeStyle="indianred",f.lineWidth=1):(f.strokeStyle="rgba(255, 255, 255, 0.4)",f.globalCompositeOperation="overlay",f.lineWidth=2),f.stroke(),f.globalCompositeOperation="source-over"},e.bodyPositions=function(h,g,d){var f=d;h.engine;var y=h.options,p,C,w,I;for(f.beginPath(),w=0;w<g.length;w++)if(p=g[w],!!p.render.visible)for(I=0;I<p.parts.length;I++)C=p.parts[I],f.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),f.closePath();for(y.wireframes?f.fillStyle="indianred":f.fillStyle="rgba(0,0,0,0.5)",f.fill(),f.beginPath(),w=0;w<g.length;w++)p=g[w],p.render.visible&&(f.arc(p.positionPrev.x,p.positionPrev.y,2,0,2*Math.PI,!1),f.closePath());f.fillStyle="rgba(255,165,0,0.8)",f.fill()},e.bodyVelocity=function(h,g,d){var f=d;f.beginPath();for(var y=0;y<g.length;y++){var p=g[y];!p.render.visible||(f.moveTo(p.position.x,p.position.y),f.lineTo(p.position.x+(p.position.x-p.positionPrev.x)*2,p.position.y+(p.position.y-p.positionPrev.y)*2))}f.lineWidth=3,f.strokeStyle="cornflowerblue",f.stroke()},e.bodyIds=function(h,g,d){var f=d,y,p;for(y=0;y<g.length;y++)if(!!g[y].render.visible){var C=g[y].parts;for(p=C.length>1?1:0;p<C.length;p++){var w=C[p];f.font="12px Arial",f.fillStyle="rgba(255,255,255,0.5)",f.fillText(w.id,w.position.x+10,w.position.y-10)}}},e.collisions=function(h,g,d){var f=d,y=h.options,p,C,w,I;for(f.beginPath(),w=0;w<g.length;w++)if(p=g[w],!!p.isActive)for(C=p.collision,I=0;I<p.activeContacts.length;I++){var B=p.activeContacts[I],E=B.vertex;f.rect(E.x-1.5,E.y-1.5,3.5,3.5)}for(y.wireframes?f.fillStyle="rgba(255,255,255,0.7)":f.fillStyle="orange",f.fill(),f.beginPath(),w=0;w<g.length;w++)if(p=g[w],!!p.isActive&&(C=p.collision,p.activeContacts.length>0)){var L=p.activeContacts[0].vertex.x,k=p.activeContacts[0].vertex.y;p.activeContacts.length===2&&(L=(p.activeContacts[0].vertex.x+p.activeContacts[1].vertex.x)/2,k=(p.activeContacts[0].vertex.y+p.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?f.moveTo(L-C.normal.x*8,k-C.normal.y*8):f.moveTo(L+C.normal.x*8,k+C.normal.y*8),f.lineTo(L,k)}y.wireframes?f.strokeStyle="rgba(255,165,0,0.7)":f.strokeStyle="orange",f.lineWidth=1,f.stroke()},e.separations=function(h,g,d){var f=d,y=h.options,p,C,w,I,B;for(f.beginPath(),B=0;B<g.length;B++)if(p=g[B],!!p.isActive){C=p.collision,w=C.bodyA,I=C.bodyB;var E=1;!I.isStatic&&!w.isStatic&&(E=.5),I.isStatic&&(E=0),f.moveTo(I.position.x,I.position.y),f.lineTo(I.position.x-C.penetration.x*E,I.position.y-C.penetration.y*E),E=1,!I.isStatic&&!w.isStatic&&(E=.5),w.isStatic&&(E=0),f.moveTo(w.position.x,w.position.y),f.lineTo(w.position.x+C.penetration.x*E,w.position.y+C.penetration.y*E)}y.wireframes?f.strokeStyle="rgba(255,165,0,0.5)":f.strokeStyle="orange",f.stroke()},e.inspector=function(h,g){h.engine;var d=h.selected,f=h.render,y=f.options,p;if(y.hasBounds){var C=f.bounds.max.x-f.bounds.min.x,w=f.bounds.max.y-f.bounds.min.y,I=C/f.options.width,B=w/f.options.height;g.scale(1/I,1/B),g.translate(-f.bounds.min.x,-f.bounds.min.y)}for(var E=0;E<d.length;E++){var L=d[E].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),L.type){case"body":p=L.bounds,g.beginPath(),g.rect(Math.floor(p.min.x-3),Math.floor(p.min.y-3),Math.floor(p.max.x-p.min.x+6),Math.floor(p.max.y-p.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var k=L.pointA;L.bodyA&&(k=L.pointB),g.beginPath(),g.arc(k.x,k.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}h.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",p=h.selectBounds,g.beginPath(),g.rect(Math.floor(p.min.x),Math.floor(p.min.y),Math.floor(p.max.x-p.min.x),Math.floor(p.max.y-p.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),y.hasBounds&&g.setTransform(1,0,0,1,0,0)};var r=function(h,g){var d=h.engine,f=h.timing,y=f.historySize,p=d.timing.timestamp;f.delta=g-f.lastTime||e._goodDelta,f.lastTime=g,f.timestampElapsed=p-f.lastTimestamp||0,f.lastTimestamp=p,f.deltaHistory.unshift(f.delta),f.deltaHistory.length=Math.min(f.deltaHistory.length,y),f.engineDeltaHistory.unshift(d.timing.lastDelta),f.engineDeltaHistory.length=Math.min(f.engineDeltaHistory.length,y),f.timestampElapsedHistory.unshift(f.timestampElapsed),f.timestampElapsedHistory.length=Math.min(f.timestampElapsedHistory.length,y),f.engineElapsedHistory.unshift(d.timing.lastElapsed),f.engineElapsedHistory.length=Math.min(f.engineElapsedHistory.length,y),f.elapsedHistory.unshift(f.lastElapsed),f.elapsedHistory.length=Math.min(f.elapsedHistory.length,y)},s=function(h){for(var g=0,d=0;d<h.length;d+=1)g+=h[d];return g/h.length||0},c=function(h,g){var d=document.createElement("canvas");return d.width=h,d.height=g,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},m=function(h){var g=h.getContext("2d"),d=window.devicePixelRatio||1,f=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return d/f},P=function(h,g){var d=h.textures[g];return d||(d=h.textures[g]=new Image,d.src=g,d)},S=function(h,g){var d=g;/(jpg|gif|png)$/.test(g)&&(d="url("+g+")"),h.canvas.style.background=d,h.canvas.style.backgroundSize="contain",h.currentBackground=g}})()},function(M,R){var x={};M.exports=x,function(){x.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(M,R,x){var e={};M.exports=e;var l=x(7),n=x(19),i=x(14),v=x(20),o=x(4),u=x(5),a=x(10),t=x(0),r=x(6);(function(){e.create=function(s){s=s||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},m=t.extend(c,s);return m.world=s.world||u.create({label:"World"}),m.pairs=s.pairs||v.create(),m.detector=s.detector||i.create(),m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},e.update=function(s,c,m){var P=t.now();c=c||1e3/60,m=m||1;var S=s.world,h=s.detector,g=s.pairs,d=s.timing,f=d.timestamp,y;d.timestamp+=c*d.timeScale,d.lastDelta=c*d.timeScale;var p={timestamp:d.timestamp};o.trigger(s,"beforeUpdate",p);var C=u.allBodies(S),w=u.allConstraints(S);for(S.isModified&&i.setBodies(h,C),S.isModified&&u.setModified(S,!1,!1,!0),s.enableSleeping&&l.update(C,d.timeScale),e._bodiesApplyGravity(C,s.gravity),e._bodiesUpdate(C,c,d.timeScale,m,S.bounds),a.preSolveAll(C),y=0;y<s.constraintIterations;y++)a.solveAll(w,d.timeScale);a.postSolveAll(C),h.pairs=s.pairs;var I=i.collisions(h);for(v.update(g,I,f),s.enableSleeping&&l.afterCollisions(g.list,d.timeScale),g.collisionStart.length>0&&o.trigger(s,"collisionStart",{pairs:g.collisionStart}),n.preSolvePosition(g.list),y=0;y<s.positionIterations;y++)n.solvePosition(g.list,d.timeScale);for(n.postSolvePosition(C),a.preSolveAll(C),y=0;y<s.constraintIterations;y++)a.solveAll(w,d.timeScale);for(a.postSolveAll(C),n.preSolveVelocity(g.list),y=0;y<s.velocityIterations;y++)n.solveVelocity(g.list,d.timeScale);return g.collisionActive.length>0&&o.trigger(s,"collisionActive",{pairs:g.collisionActive}),g.collisionEnd.length>0&&o.trigger(s,"collisionEnd",{pairs:g.collisionEnd}),e._bodiesClearForces(C),o.trigger(s,"afterUpdate",p),s.timing.lastElapsed=t.now()-P,s},e.merge=function(s,c){if(t.extend(s,c),c.world){s.world=c.world,e.clear(s);for(var m=u.allBodies(s.world),P=0;P<m.length;P++){var S=m[P];l.set(S,!1),S.id=t.nextId()}}},e.clear=function(s){v.clear(s.pairs),i.clear(s.detector)},e._bodiesClearForces=function(s){for(var c=0;c<s.length;c++){var m=s[c];m.force.x=0,m.force.y=0,m.torque=0}},e._bodiesApplyGravity=function(s,c){var m=typeof c.scale!="undefined"?c.scale:.001;if(!(c.x===0&&c.y===0||m===0))for(var P=0;P<s.length;P++){var S=s[P];S.isStatic||S.isSleeping||(S.force.y+=S.mass*c.y*m,S.force.x+=S.mass*c.x*m)}},e._bodiesUpdate=function(s,c,m,P,S){for(var h=0;h<s.length;h++){var g=s[h];g.isStatic||g.isSleeping||r.update(g,c,m,P)}}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var v,o,u,a=i.length;for(v=0;v<a;v++)o=i[v],o.isActive&&(u=o.activeContacts.length,o.collision.parentA.totalContacts+=u,o.collision.parentB.totalContacts+=u)},e.solvePosition=function(i,v){var o,u,a,t,r,s,c,m,P=e._positionDampen,S=i.length;for(o=0;o<S;o++)u=i[o],!(!u.isActive||u.isSensor)&&(a=u.collision,t=a.parentA,r=a.parentB,s=a.normal,u.separation=s.x*(r.positionImpulse.x+a.penetration.x-t.positionImpulse.x)+s.y*(r.positionImpulse.y+a.penetration.y-t.positionImpulse.y));for(o=0;o<S;o++)u=i[o],!(!u.isActive||u.isSensor)&&(a=u.collision,t=a.parentA,r=a.parentB,s=a.normal,m=(u.separation-u.slop)*v,(t.isStatic||r.isStatic)&&(m*=2),t.isStatic||t.isSleeping||(c=P/t.totalContacts,t.positionImpulse.x+=s.x*m*c,t.positionImpulse.y+=s.y*m*c),r.isStatic||r.isSleeping||(c=P/r.totalContacts,r.positionImpulse.x-=s.x*m*c,r.positionImpulse.y-=s.y*m*c))},e.postSolvePosition=function(i){for(var v=e._positionWarming,o=i.length,u=l.translate,a=n.update,t=0;t<o;t++){var r=i[t],s=r.positionImpulse,c=s.x,m=s.y,P=r.velocity;if(r.totalContacts=0,c!==0||m!==0){for(var S=0;S<r.parts.length;S++){var h=r.parts[S];u(h.vertices,s),a(h.bounds,h.vertices,P),h.position.x+=c,h.position.y+=m}r.positionPrev.x+=c,r.positionPrev.y+=m,c*P.x+m*P.y<0?(s.x=0,s.y=0):(s.x*=v,s.y*=v)}}},e.preSolveVelocity=function(i){var v=i.length,o,u;for(o=0;o<v;o++){var a=i[o];if(!(!a.isActive||a.isSensor)){var t=a.activeContacts,r=t.length,s=a.collision,c=s.parentA,m=s.parentB,P=s.normal,S=s.tangent;for(u=0;u<r;u++){var h=t[u],g=h.vertex,d=h.normalImpulse,f=h.tangentImpulse;if(d!==0||f!==0){var y=P.x*d+S.x*f,p=P.y*d+S.y*f;c.isStatic||c.isSleeping||(c.positionPrev.x+=y*c.inverseMass,c.positionPrev.y+=p*c.inverseMass,c.anglePrev+=c.inverseInertia*((g.x-c.position.x)*p-(g.y-c.position.y)*y)),m.isStatic||m.isSleeping||(m.positionPrev.x-=y*m.inverseMass,m.positionPrev.y-=p*m.inverseMass,m.anglePrev-=m.inverseInertia*((g.x-m.position.x)*p-(g.y-m.position.y)*y))}}}}},e.solveVelocity=function(i,v){var o=v*v,u=e._restingThresh*o,a=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,r=Number.MAX_VALUE,s=i.length,c,m,P,S;for(P=0;P<s;P++){var h=i[P];if(!(!h.isActive||h.isSensor)){var g=h.collision,d=g.parentA,f=g.parentB,y=d.velocity,p=f.velocity,C=g.normal.x,w=g.normal.y,I=g.tangent.x,B=g.tangent.y,E=h.activeContacts,L=E.length,k=1/L,D=d.inverseMass+f.inverseMass,V=h.friction*h.frictionStatic*a*o;for(y.x=d.position.x-d.positionPrev.x,y.y=d.position.y-d.positionPrev.y,p.x=f.position.x-f.positionPrev.x,p.y=f.position.y-f.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,f.angularVelocity=f.angle-f.anglePrev,S=0;S<L;S++){var O=E[S],H=O.vertex,G=H.x-d.position.x,N=H.y-d.position.y,W=H.x-f.position.x,Y=H.y-f.position.y,Q=y.x-N*d.angularVelocity,Z=y.y+G*d.angularVelocity,J=p.x-Y*f.angularVelocity,Ge=p.y+W*f.angularVelocity,Me=Q-J,Ae=Z-Ge,ie=C*Me+w*Ae,b=I*Me+B*Ae,Ie=h.separation+ie,pe=Math.min(Ie,1);pe=Ie<0?0:pe;var Te=pe*V;b>Te||-b>Te?(m=b>0?b:-b,c=h.friction*(b>0?1:-1)*o,c<-m?c=-m:c>m&&(c=m)):(c=b,m=r);var Re=G*w-N*C,Be=W*w-Y*C,Ee=k/(D+d.inverseInertia*Re*Re+f.inverseInertia*Be*Be),fe=(1+h.restitution)*ie*Ee;if(c*=Ee,ie*ie>u&&ie<0)O.normalImpulse=0;else{var Ne=O.normalImpulse;O.normalImpulse+=fe,O.normalImpulse=Math.min(O.normalImpulse,0),fe=O.normalImpulse-Ne}if(b*b>t)O.tangentImpulse=0;else{var Ue=O.tangentImpulse;O.tangentImpulse+=c,O.tangentImpulse<-m&&(O.tangentImpulse=-m),O.tangentImpulse>m&&(O.tangentImpulse=m),c=O.tangentImpulse-Ue}var ue=C*fe+I*c,ce=w*fe+B*c;d.isStatic||d.isSleeping||(d.positionPrev.x+=ue*d.inverseMass,d.positionPrev.y+=ce*d.inverseMass,d.anglePrev+=(G*ce-N*ue)*d.inverseInertia),f.isStatic||f.isSleeping||(f.positionPrev.x-=ue*f.inverseMass,f.positionPrev.y-=ce*f.inverseMass,f.anglePrev-=(W*ce-Y*ue)*f.inverseInertia)}}}}})()},function(M,R,x){var e={};M.exports=e;var l=x(9),n=x(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,v,o){var u=i.list,a=u.length,t=i.table,r=v.length,s=i.collisionStart,c=i.collisionEnd,m=i.collisionActive,P,S,h,g;for(s.length=0,c.length=0,m.length=0,g=0;g<a;g++)u[g].confirmedActive=!1;for(g=0;g<r;g++)P=v[g],h=P.pair,h?(h.isActive?m.push(h):s.push(h),l.update(h,P,o),h.confirmedActive=!0):(h=l.create(P,o),t[h.id]=h,s.push(h),u.push(h));var d=[];for(a=u.length,g=0;g<a;g++)h=u[g],h.confirmedActive||(l.setActive(h,!1,o),c.push(h),!h.collision.bodyA.isSleeping&&!h.collision.bodyB.isSleeping&&d.push(g));for(g=0;g<d.length;g++)S=d[g]-g,h=u[S],u.splice(S,1),delete t[h.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(M,R,x){var e=M.exports=x(22);e.Axes=x(11),e.Bodies=x(12),e.Body=x(6),e.Bounds=x(1),e.Collision=x(8),e.Common=x(0),e.Composite=x(5),e.Composites=x(23),e.Constraint=x(10),e.Contact=x(17),e.Detector=x(14),e.Engine=x(18),e.Events=x(4),e.Grid=x(24),e.Mouse=x(13),e.MouseConstraint=x(25),e.Pair=x(9),e.Pairs=x(20),e.Plugin=x(15),e.Query=x(26),e.Render=x(16),e.Resolver=x(19),e.Runner=x(27),e.SAT=x(28),e.Sleeping=x(7),e.Svg=x(29),e.Vector=x(2),e.Vertices=x(3),e.World=x(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(M,R,x){var e={};M.exports=e;var l=x(15),n=x(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,v){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,v)},e.after=function(i,v){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,v)}})()},function(M,R,x){var e={};M.exports=e;var l=x(5),n=x(10),i=x(0),v=x(6),o=x(12),u=i.deprecated;(function(){e.stack=function(a,t,r,s,c,m,P){for(var S=l.create({label:"Stack"}),h=a,g=t,d,f=0,y=0;y<s;y++){for(var p=0,C=0;C<r;C++){var w=P(h,g,C,y,d,f);if(w){var I=w.bounds.max.y-w.bounds.min.y,B=w.bounds.max.x-w.bounds.min.x;I>p&&(p=I),v.translate(w,{x:B*.5,y:I*.5}),h=w.bounds.max.x+c,l.addBody(S,w),d=w,f+=1}else h+=c}g+=p+m,h=a}return S},e.chain=function(a,t,r,s,c,m){for(var P=a.bodies,S=1;S<P.length;S++){var h=P[S-1],g=P[S],d=h.bounds.max.y-h.bounds.min.y,f=h.bounds.max.x-h.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,p=g.bounds.max.x-g.bounds.min.x,C={bodyA:h,pointA:{x:f*t,y:d*r},bodyB:g,pointB:{x:p*s,y:y*c}},w=i.extend(C,m);l.addConstraint(a,n.create(w))}return a.label+=" Chain",a},e.mesh=function(a,t,r,s,c){var m=a.bodies,P,S,h,g,d;for(P=0;P<r;P++){for(S=1;S<t;S++)h=m[S-1+P*t],g=m[S+P*t],l.addConstraint(a,n.create(i.extend({bodyA:h,bodyB:g},c)));if(P>0)for(S=0;S<t;S++)h=m[S+(P-1)*t],g=m[S+P*t],l.addConstraint(a,n.create(i.extend({bodyA:h,bodyB:g},c))),s&&S>0&&(d=m[S-1+(P-1)*t],l.addConstraint(a,n.create(i.extend({bodyA:d,bodyB:g},c)))),s&&S<t-1&&(d=m[S+1+(P-1)*t],l.addConstraint(a,n.create(i.extend({bodyA:d,bodyB:g},c))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,r,s,c,m,P){return e.stack(a,t,r,s,c,m,function(S,h,g,d,f,y){var p=Math.min(s,Math.ceil(r/2)),C=f?f.bounds.max.x-f.bounds.min.x:0;if(!(d>p)){d=p-d;var w=d,I=r-1-d;if(!(g<w||g>I)){y===1&&v.translate(f,{x:(g+(r%2===1?1:-1))*C,y:0});var B=f?g*C:0;return P(a+B+g*c,h,g,d,f,y)}}})},e.newtonsCradle=function(a,t,r,s,c){for(var m=l.create({label:"Newtons Cradle"}),P=0;P<r;P++){var S=1.9,h=o.circle(a+P*(s*S),t+c,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=n.create({pointA:{x:a+P*(s*S),y:t},bodyB:h});l.addBody(m,h),l.addConstraint(m,g)}return m},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,r,s,c){var m=v.nextGroup(!0),P=20,S=-r*.5+P,h=r*.5-P,g=0,d=l.create({label:"Car"}),f=o.rectangle(a,t,r,s,{collisionFilter:{group:m},chamfer:{radius:s*.5},density:2e-4}),y=o.circle(a+S,t+g,c,{collisionFilter:{group:m},friction:.8}),p=o.circle(a+h,t+g,c,{collisionFilter:{group:m},friction:.8}),C=n.create({bodyB:f,pointB:{x:S,y:g},bodyA:y,stiffness:1,length:0}),w=n.create({bodyB:f,pointB:{x:h,y:g},bodyA:p,stiffness:1,length:0});return l.addBody(d,f),l.addBody(d,y),l.addBody(d,p),l.addConstraint(d,C),l.addConstraint(d,w),d},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,r,s,c,m,P,S,h,g){h=i.extend({inertia:1/0},h),g=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var d=e.stack(a,t,r,s,c,m,function(f,y){return o.circle(f,y,S,h)});return e.mesh(d,r,s,P,g),d.label="Soft Body",d},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(M,R,x){var e={};M.exports=e;var l=x(9),n=x(0),i=n.deprecated;(function(){e.create=function(v){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(o,v)},e.update=function(v,o,u,a){var t,r,s,c=u.world,m=v.buckets,P,S,h=!1;for(t=0;t<o.length;t++){var g=o[t];if(!(g.isSleeping&&!a)&&!(c.bounds&&(g.bounds.max.x<c.bounds.min.x||g.bounds.min.x>c.bounds.max.x||g.bounds.max.y<c.bounds.min.y||g.bounds.min.y>c.bounds.max.y))){var d=e._getRegion(v,g);if(!g.region||d.id!==g.region.id||a){(!g.region||a)&&(g.region=d);var f=e._regionUnion(d,g.region);for(r=f.startCol;r<=f.endCol;r++)for(s=f.startRow;s<=f.endRow;s++){S=e._getBucketId(r,s),P=m[S];var y=r>=d.startCol&&r<=d.endCol&&s>=d.startRow&&s<=d.endRow,p=r>=g.region.startCol&&r<=g.region.endCol&&s>=g.region.startRow&&s<=g.region.endRow;!y&&p&&p&&P&&e._bucketRemoveBody(v,P,g),(g.region===d||y&&!p||a)&&(P||(P=e._createBucket(m,S)),e._bucketAddBody(v,P,g))}g.region=d,h=!0}}}h&&(v.pairsList=e._createActivePairsList(v))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(v){v.buckets={},v.pairs={},v.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(v,o){var u=Math.min(v.startCol,o.startCol),a=Math.max(v.endCol,o.endCol),t=Math.min(v.startRow,o.startRow),r=Math.max(v.endRow,o.endRow);return e._createRegion(u,a,t,r)},e._getRegion=function(v,o){var u=o.bounds,a=Math.floor(u.min.x/v.bucketWidth),t=Math.floor(u.max.x/v.bucketWidth),r=Math.floor(u.min.y/v.bucketHeight),s=Math.floor(u.max.y/v.bucketHeight);return e._createRegion(a,t,r,s)},e._createRegion=function(v,o,u,a){return{id:v+","+o+","+u+","+a,startCol:v,endCol:o,startRow:u,endRow:a}},e._getBucketId=function(v,o){return"C"+v+"R"+o},e._createBucket=function(v,o){var u=v[o]=[];return u},e._bucketAddBody=function(v,o,u){var a=v.pairs,t=l.id,r=o.length,s;for(s=0;s<r;s++){var c=o[s];if(!(u.id===c.id||u.isStatic&&c.isStatic)){var m=t(u,c),P=a[m];P?P[2]+=1:a[m]=[u,c,1]}}o.push(u)},e._bucketRemoveBody=function(v,o,u){var a=v.pairs,t=l.id,r;o.splice(n.indexOf(o,u),1);var s=o.length;for(r=0;r<s;r++){var c=a[t(u,o[r])];c&&(c[2]-=1)}},e._createActivePairsList=function(v){var o,u=v.pairs,a=n.keys(u),t=a.length,r=[],s;for(s=0;s<t;s++)o=u[a[s]],o[2]>0?r.push(o):delete u[a[s]];return r}})()},function(M,R,x){var e={};M.exports=e;var l=x(3),n=x(7),i=x(13),v=x(4),o=x(14),u=x(10),a=x(5),t=x(0),r=x(1);(function(){e.create=function(s,c){var m=(s?s.mouse:null)||(c?c.mouse:null);m||(s&&s.render&&s.render.canvas?m=i.create(s.render.canvas):c&&c.element?m=i.create(c.element):(m=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var P=u.create({label:"Mouse Constraint",pointA:m.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:m,element:null,body:null,constraint:P,collisionFilter:{category:1,mask:4294967295,group:0}},h=t.extend(S,c);return v.on(s,"beforeUpdate",function(){var g=a.allBodies(s.world);e.update(h,g),e._triggerEvents(h)}),h},e.update=function(s,c){var m=s.mouse,P=s.constraint,S=s.body;if(m.button===0){if(P.bodyB)n.set(P.bodyB,!1),P.pointA=m.position;else for(var h=0;h<c.length;h++)if(S=c[h],r.contains(S.bounds,m.position)&&o.canCollide(S.collisionFilter,s.collisionFilter))for(var g=S.parts.length>1?1:0;g<S.parts.length;g++){var d=S.parts[g];if(l.contains(d.vertices,m.position)){P.pointA=m.position,P.bodyB=s.body=S,P.pointB={x:m.position.x-S.position.x,y:m.position.y-S.position.y},P.angleB=S.angle,n.set(S,!1),v.trigger(s,"startdrag",{mouse:m,body:S});break}}}else P.bodyB=s.body=null,P.pointB=null,S&&v.trigger(s,"enddrag",{mouse:m,body:S})},e._triggerEvents=function(s){var c=s.mouse,m=c.sourceEvents;m.mousemove&&v.trigger(s,"mousemove",{mouse:c}),m.mousedown&&v.trigger(s,"mousedown",{mouse:c}),m.mouseup&&v.trigger(s,"mouseup",{mouse:c}),i.clearSourceEvents(c)}})()},function(M,R,x){var e={};M.exports=e;var l=x(2),n=x(8),i=x(1),v=x(12),o=x(3);(function(){e.collides=function(u,a){for(var t=[],r=a.length,s=u.bounds,c=n.collides,m=i.overlaps,P=0;P<r;P++){var S=a[P],h=S.parts.length,g=h===1?0:1;if(m(S.bounds,s))for(var d=g;d<h;d++){var f=S.parts[d];if(m(f.bounds,s)){var y=c(f,u);if(y){t.push(y);break}}}}return t},e.ray=function(u,a,t,r){r=r||1e-100;for(var s=l.angle(a,t),c=l.magnitude(l.sub(a,t)),m=(t.x+a.x)*.5,P=(t.y+a.y)*.5,S=v.rectangle(m,P,c,r,{angle:s}),h=e.collides(S,u),g=0;g<h.length;g+=1){var d=h[g];d.body=d.bodyB=d.bodyA}return h},e.region=function(u,a,t){for(var r=[],s=0;s<u.length;s++){var c=u[s],m=i.overlaps(c.bounds,a);(m&&!t||!m&&t)&&r.push(c)}return r},e.point=function(u,a){for(var t=[],r=0;r<u.length;r++){var s=u[r];if(i.contains(s.bounds,a))for(var c=s.parts.length===1?0:1;c<s.parts.length;c++){var m=s.parts[c];if(i.contains(m.bounds,a)&&o.contains(m.vertices,a)){t.push(s);break}}}return t}})()},function(M,R,x){var e={};M.exports=e;var l=x(4),n=x(18),i=x(0);(function(){var v,o;if(typeof window!="undefined"&&(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!v){var u;v=function(a){u=setTimeout(function(){a(i.now())},1e3/60)},o=function(){clearTimeout(u)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},r=i.extend(t,a);return r.delta=r.delta||1e3/r.fps,r.deltaMin=r.deltaMin||1e3/r.fps,r.deltaMax=r.deltaMax||1e3/(r.fps*.5),r.fps=1e3/r.delta,r},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function r(s){a.frameRequestId=v(r),s&&a.enabled&&e.tick(a,t,s)}(),a},e.tick=function(a,t,r){var s=t.timing,c=1,m,P={timestamp:s.timestamp};l.trigger(a,"beforeTick",P),a.isFixed?m=a.delta:(m=r-a.timePrev||a.delta,a.timePrev=r,a.deltaHistory.push(m),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),m=Math.min.apply(null,a.deltaHistory),m=m<a.deltaMin?a.deltaMin:m,m=m>a.deltaMax?a.deltaMax:m,c=m/a.delta,a.delta=m),a.timeScalePrev!==0&&(c*=s.timeScale/a.timeScalePrev),s.timeScale===0&&(c=0),a.timeScalePrev=s.timeScale,a.correction=c,a.frameCounter+=1,r-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((r-a.counterTimestamp)/1e3),a.counterTimestamp=r,a.frameCounter=0),l.trigger(a,"tick",P),l.trigger(a,"beforeUpdate",P),n.update(t,m,c),l.trigger(a,"afterUpdate",P),l.trigger(a,"afterTick",P)},e.stop=function(a){o(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(M,R,x){var e={};M.exports=e;var l=x(8),n=x(0),i=n.deprecated;(function(){e.collides=function(v,o){return l.collides(v,o)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(M,R,x){var e={};M.exports=e,x(1);var l=x(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var v,o,u,a,t,r,s,c,m,P,S=[],h,g,d=0,f=0,y=0;i=i||15;var p=function(w,I,B){var E=B%2===1&&B>1;if(!m||w!=m.x||I!=m.y){m&&E?(h=m.x,g=m.y):(h=0,g=0);var L={x:h+w,y:g+I};(E||!m)&&(m=L),S.push(L),f=h+w,y=g+I}},C=function(w){var I=w.pathSegTypeAsLetter.toUpperCase();if(I!=="Z"){switch(I){case"M":case"L":case"T":case"C":case"S":case"Q":f=w.x,y=w.y;break;case"H":f=w.x;break;case"V":y=w.y;break}p(f,y,w.pathSegType)}};for(e._svgPathToAbsolute(n),u=n.getTotalLength(),r=[],v=0;v<n.pathSegList.numberOfItems;v+=1)r.push(n.pathSegList.getItem(v));for(s=r.concat();d<u;){if(P=n.getPathSegAtLength(d),t=r[P],t!=c){for(;s.length&&s[0]!=t;)C(s.shift());c=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=n.getPointAtLength(d),p(a.x,a.y,0);break}d+=i}for(v=0,o=s.length;v<o;++v)C(s[v]);return S},e._svgPathToAbsolute=function(n){for(var i,v,o,u,a,t,r=n.pathSegList,s=0,c=0,m=r.numberOfItems,P=0;P<m;++P){var S=r.getItem(P),h=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in S&&(s=S.x),"y"in S&&(c=S.y);else switch("x1"in S&&(o=s+S.x1),"x2"in S&&(a=s+S.x2),"y1"in S&&(u=c+S.y1),"y2"in S&&(t=c+S.y2),"x"in S&&(s+=S.x),"y"in S&&(c+=S.y),h){case"m":r.replaceItem(n.createSVGPathSegMovetoAbs(s,c),P);break;case"l":r.replaceItem(n.createSVGPathSegLinetoAbs(s,c),P);break;case"h":r.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(s),P);break;case"v":r.replaceItem(n.createSVGPathSegLinetoVerticalAbs(c),P);break;case"c":r.replaceItem(n.createSVGPathSegCurvetoCubicAbs(s,c,o,u,a,t),P);break;case"s":r.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(s,c,a,t),P);break;case"q":r.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(s,c,o,u),P);break;case"t":r.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(s,c),P);break;case"a":r.replaceItem(n.createSVGPathSegArcAbs(s,c,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),P);break;case"z":case"Z":s=i,c=v;break}(h=="M"||h=="m")&&(i=s,v=c)}}})()},function(M,R,x){var e={};M.exports=e;var l=x(5);x(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(U);var Xe={decomp:at,quickDecomp:re,isSimple:st,removeCollinearPoints:ot,removeDuplicatePoints:lt,makeCCW:_e};function $e(A,T,M){M=M||0;var R=[0,0],x,e,l,n,i,v,o;return x=A[1][1]-A[0][1],e=A[0][0]-A[1][0],l=x*A[0][0]+e*A[0][1],n=T[1][1]-T[0][1],i=T[0][0]-T[1][0],v=n*T[0][0]+i*T[0][1],o=x*i-n*e,de(o,0,M)||(R[0]=(i*l-e*v)/o,R[1]=(x*v-n*l)/o),R}function Se(A,T,M,R){var x=T[0]-A[0],e=T[1]-A[1],l=R[0]-M[0],n=R[1]-M[1];if(l*e-n*x===0)return!1;var i=(x*(M[1]-A[1])+e*(A[0]-M[0]))/(l*e-n*x),v=(l*(A[1]-M[1])+n*(M[0]-A[0]))/(n*x-l*e);return i>=0&&i<=1&&v>=0&&v<=1}function le(A,T,M){return(T[0]-A[0])*(M[1]-A[1])-(M[0]-A[0])*(T[1]-A[1])}function xe(A,T,M){return le(A,T,M)>0}function we(A,T,M){return le(A,T,M)>=0}function Oe(A,T,M){return le(A,T,M)<0}function se(A,T,M){return le(A,T,M)<=0}var Ye=[],be=[];function qe(A,T,M,R){if(R){var x=Ye,e=be;x[0]=T[0]-A[0],x[1]=T[1]-A[1],e[0]=M[0]-T[0],e[1]=M[1]-T[1];var l=x[0]*e[0]+x[1]*e[1],n=Math.sqrt(x[0]*x[0]+x[1]*x[1]),i=Math.sqrt(e[0]*e[0]+e[1]*e[1]),v=Math.acos(l/(n*i));return v<R}else return le(A,T,M)===0}function oe(A,T){var M=T[0]-A[0],R=T[1]-A[1];return M*M+R*R}function F(A,T){var M=A.length;return A[T<0?T%M+M:T%M]}function je(A){A.length=0}function X(A,T,M,R){for(var x=M;x<R;x++)A.push(T[x])}function _e(A){for(var T=0,M=A,R=1;R<A.length;++R)(M[R][1]<M[T][1]||M[R][1]===M[T][1]&&M[R][0]>M[T][0])&&(T=R);return xe(F(A,T-1),F(A,T),F(A,T+1))?!1:(et(A),!0)}function et(A){for(var T=[],M=A.length,R=0;R!==M;R++)T.push(A.pop());for(var R=0;R!==M;R++)A[R]=T[R]}function He(A,T){return Oe(F(A,T-1),F(A,T),F(A,T+1))}var tt=[],nt=[];function it(A,T,M){var R,x,e=tt,l=nt;if(we(F(A,T+1),F(A,T),F(A,M))&&se(F(A,T-1),F(A,T),F(A,M)))return!1;x=oe(F(A,T),F(A,M));for(var n=0;n!==A.length;++n)if(!((n+1)%A.length===T||n===T)&&we(F(A,T),F(A,M),F(A,n+1))&&se(F(A,T),F(A,M),F(A,n))&&(e[0]=F(A,T),e[1]=F(A,M),l[0]=F(A,n),l[1]=F(A,n+1),R=$e(e,l),oe(F(A,T),R)<x))return!1;return!0}function rt(A,T,M){for(var R=0;R!==A.length;++R)if(!(R===T||R===M||(R+1)%A.length===T||(R+1)%A.length===M)&&Se(F(A,T),F(A,M),F(A,R),F(A,R+1)))return!1;return!0}function me(A,T,M,R){var x=R||[];if(je(x),T<M)for(var e=T;e<=M;e++)x.push(A[e]);else{for(var e=0;e<=M;e++)x.push(A[e]);for(var e=T;e<A.length;e++)x.push(A[e])}return x}function Ce(A){for(var T=[],M=[],R=[],x=[],e=Number.MAX_VALUE,l=0;l<A.length;++l)if(He(A,l)){for(var n=0;n<A.length;++n)if(it(A,l,n)){M=Ce(me(A,l,n,x)),R=Ce(me(A,n,l,x));for(var i=0;i<R.length;i++)M.push(R[i]);M.length<e&&(T=M,e=M.length,T.push([F(A,l),F(A,n)]))}}return T}function at(A){var T=Ce(A);return T.length>0?We(A,T):[A]}function We(A,T){if(T.length===0)return[A];if(T instanceof Array&&T.length&&T[0]instanceof Array&&T[0].length===2&&T[0][0]instanceof Array){for(var M=[A],R=0;R<T.length;R++)for(var x=T[R],e=0;e<M.length;e++){var l=M[e],n=We(l,x);if(n){M.splice(e,1),M.push(n[0],n[1]);break}}return M}else{var x=T,R=A.indexOf(x[0]),e=A.indexOf(x[1]);return R!==-1&&e!==-1?[me(A,R,e),me(A,e,R)]:!1}}function st(A){var T=A,M;for(M=0;M<T.length-1;M++)for(var R=0;R<M-1;R++)if(Se(T[M],T[M+1],T[R],T[R+1]))return!1;for(M=1;M<T.length-2;M++)if(Se(T[0],T[T.length-1],T[M],T[M+1]))return!1;return!0}function ke(A,T,M,R,x){x=x||0;var e=T[1]-A[1],l=A[0]-T[0],n=e*A[0]+l*A[1],i=R[1]-M[1],v=M[0]-R[0],o=i*M[0]+v*M[1],u=e*v-i*l;return de(u,0,x)?[0,0]:[(v*n-l*o)/u,(e*o-i*n)/u]}function re(A,T,M,R,x,e,l){e=e||100,l=l||0,x=x||25,T=typeof T!="undefined"?T:[],M=M||[],R=R||[];var n=[0,0],i=[0,0],v=[0,0],o=0,u=0,a=0,t=0,r=0,s=0,c=0,m=[],P=[],S=A,h=A;if(h.length<3)return T;if(l++,l>e)return console.warn("quickDecomp: max level ("+e+") reached."),T;for(var g=0;g<A.length;++g)if(He(S,g)){M.push(S[g]),o=u=Number.MAX_VALUE;for(var d=0;d<A.length;++d)xe(F(S,g-1),F(S,g),F(S,d))&&se(F(S,g-1),F(S,g),F(S,d-1))&&(v=ke(F(S,g-1),F(S,g),F(S,d),F(S,d-1)),Oe(F(S,g+1),F(S,g),v)&&(a=oe(S[g],v),a<u&&(u=a,i=v,s=d))),xe(F(S,g+1),F(S,g),F(S,d+1))&&se(F(S,g+1),F(S,g),F(S,d))&&(v=ke(F(S,g+1),F(S,g),F(S,d),F(S,d+1)),xe(F(S,g-1),F(S,g),v)&&(a=oe(S[g],v),a<o&&(o=a,n=v,r=d)));if(s===(r+1)%A.length)v[0]=(i[0]+n[0])/2,v[1]=(i[1]+n[1])/2,R.push(v),g<r?(X(m,S,g,r+1),m.push(v),P.push(v),s!==0&&X(P,S,s,S.length),X(P,S,0,g+1)):(g!==0&&X(m,S,g,S.length),X(m,S,0,r+1),m.push(v),P.push(v),X(P,S,s,g+1));else{if(s>r&&(r+=A.length),t=Number.MAX_VALUE,r<s)return T;for(var d=s;d<=r;++d)we(F(S,g-1),F(S,g),F(S,d))&&se(F(S,g+1),F(S,g),F(S,d))&&(a=oe(F(S,g),F(S,d)),a<t&&rt(S,g,d)&&(t=a,c=d%A.length));g<c?(X(m,S,g,c+1),c!==0&&X(P,S,c,h.length),X(P,S,0,g+1)):(g!==0&&X(m,S,g,h.length),X(m,S,0,c+1),X(P,S,c,g+1))}return m.length<P.length?(re(m,T,M,R,x,e,l),re(P,T,M,R,x,e,l)):(re(P,T,M,R,x,e,l),re(m,T,M,R,x,e,l)),T}return T.push(A),T}function ot(A,T){for(var M=0,R=A.length-1;A.length>3&&R>=0;--R)qe(F(A,R-1),F(A,R),F(A,R+1),T)&&(A.splice(R%A.length,1),M++);return M}function lt(A,T){for(var M=A.length-1;M>=1;--M)for(var R=A[M],x=M-1;x>=0;--x)if(ft(R,A[x],T)){A.splice(M,1);continue}}function de(A,T,M){return M=M||0,Math.abs(A-T)<=M}function ft(A,T,M){return de(A[0],T[0],M)&&de(A[1],T[1],M)}function ut(A){let T,M,R,x,e,l;return{c(){T=q("div"),M=q("h1"),R=te("Shop"),x=ve(),e=q("p"),l=te("Cool buying thing"),this.h()},l(n){T=j(n,"DIV",{class:!0});var i=_(T);M=j(i,"H1",{class:!0});var v=_(M);R=ne(v,"Shop"),v.forEach(z),x=he(i),e=j(i,"P",{});var o=_(e);l=ne(o,"Cool buying thing"),o.forEach(z),i.forEach(z),this.h()},h(){$(M,"class","text-2xl"),$(T,"class","font-display")},m(n,i){ee(n,T,i),K(T,M),K(M,R),K(T,x),K(T,e),K(e,l)},p:ae,i:ae,o:ae,d(n){n&&z(T)}}}class ct extends Fe{constructor(T){super(),De(this,T,null,ut,Ve,{})}}var Pe={exports:{}};(function(A,T){(function(M,R){{var x=R();A&&A.exports&&(T=A.exports=x),T.randomColor=x}})(ge,function(){var M=null,R={};m();var x=[],e=function(f){if(f=f||{},f.seed!==void 0&&f.seed!==null&&f.seed===parseInt(f.seed,10))M=f.seed;else if(typeof f.seed=="string")M=g(f.seed);else{if(f.seed!==void 0&&f.seed!==null)throw new TypeError("The seed value must be an integer or string");M=null}var y,p,C;if(f.count!==null&&f.count!==void 0){for(var w=f.count,I=[],B=0;B<f.count;B++)x.push(!1);for(f.count=null;w>I.length;){var E=e(f);M!==null&&(f.seed=M),I.push(E)}return f.count=w,I}return y=l(f),p=n(y,f),C=i(y,p,f),v([y,p,C],f)};function l(f){if(x.length>0){var y=d(f.hue),p=r(y),C=(y[1]-y[0])/x.length,w=parseInt((p-y[0])/C);x[w]===!0?w=(w+2)%x.length:x[w]=!0;var I=(y[0]+w*C)%359,B=(y[0]+(w+1)*C)%359;return y=[I,B],p=r(y),p<0&&(p=360+p),p}else{var y=u(f.hue);return p=r(y),p<0&&(p=360+p),p}}function n(f,y){if(y.hue==="monochrome")return 0;if(y.luminosity==="random")return r([0,100]);var p=a(f),C=p[0],w=p[1];switch(y.luminosity){case"bright":C=55;break;case"dark":C=w-10;break;case"light":w=55;break}return r([C,w])}function i(f,y,p){var C=o(f,y),w=100;switch(p.luminosity){case"dark":w=C+20;break;case"light":C=(w+C)/2;break;case"random":C=0,w=100;break}return r([C,w])}function v(f,y){switch(y.format){case"hsvArray":return f;case"hslArray":return h(f);case"hsl":var p=h(f);return"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)";case"hsla":var C=h(f),B=y.alpha||Math.random();return"hsla("+C[0]+", "+C[1]+"%, "+C[2]+"%, "+B+")";case"rgbArray":return P(f);case"rgb":var w=P(f);return"rgb("+w.join(", ")+")";case"rgba":var I=P(f),B=y.alpha||Math.random();return"rgba("+I.join(", ")+", "+B+")";default:return s(f)}}function o(f,y){for(var p=t(f).lowerBounds,C=0;C<p.length-1;C++){var w=p[C][0],I=p[C][1],B=p[C+1][0],E=p[C+1][1];if(y>=w&&y<=B){var L=(E-I)/(B-w),k=I-L*w;return L*y+k}}return 0}function u(f){if(typeof parseInt(f)=="number"){var y=parseInt(f);if(y<360&&y>0)return[y,y]}if(typeof f=="string"){if(R[f]){var p=R[f];if(p.hueRange)return p.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var C=S(f)[0];return[C,C]}}return[0,360]}function a(f){return t(f).saturationRange}function t(f){f>=334&&f<=360&&(f-=360);for(var y in R){var p=R[y];if(p.hueRange&&f>=p.hueRange[0]&&f<=p.hueRange[1])return R[y]}return"Color not found"}function r(f){if(M===null){var y=.618033988749895,p=Math.random();return p+=y,p%=1,Math.floor(f[0]+p*(f[1]+1-f[0]))}else{var C=f[1]||1,w=f[0]||0;M=(M*9301+49297)%233280;var I=M/233280;return Math.floor(w+I*(C-w))}}function s(f){var y=P(f);function p(w){var I=w.toString(16);return I.length==1?"0"+I:I}var C="#"+p(y[0])+p(y[1])+p(y[2]);return C}function c(f,y,p){var C=p[0][0],w=p[p.length-1][0],I=p[p.length-1][1],B=p[0][1];R[f]={hueRange:y,lowerBounds:p,saturationRange:[C,w],brightnessRange:[I,B]}}function m(){c("monochrome",null,[[0,0],[100,0]]),c("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),c("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),c("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),c("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),c("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),c("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),c("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function P(f){var y=f[0];y===0&&(y=1),y===360&&(y=359),y=y/360;var p=f[1]/100,C=f[2]/100,w=Math.floor(y*6),I=y*6-w,B=C*(1-p),E=C*(1-I*p),L=C*(1-(1-I)*p),k=256,D=256,V=256;switch(w){case 0:k=C,D=L,V=B;break;case 1:k=E,D=C,V=B;break;case 2:k=B,D=C,V=L;break;case 3:k=B,D=E,V=C;break;case 4:k=L,D=B,V=C;break;case 5:k=C,D=B,V=E;break}var O=[Math.floor(k*255),Math.floor(D*255),Math.floor(V*255)];return O}function S(f){f=f.replace(/^#/,""),f=f.length===3?f.replace(/(.)/g,"$1$1"):f;var y=parseInt(f.substr(0,2),16)/255,p=parseInt(f.substr(2,2),16)/255,C=parseInt(f.substr(4,2),16)/255,w=Math.max(y,p,C),I=w-Math.min(y,p,C),B=w?I/w:0;switch(w){case y:return[60*((p-C)/I%6)||0,B,w];case p:return[60*((C-y)/I+2)||0,B,w];case C:return[60*((y-p)/I+4)||0,B,w]}}function h(f){var y=f[0],p=f[1]/100,C=f[2]/100,w=(2-p)*C;return[y,Math.round(p*C/(w<1?w:2-w)*1e4)/100,w/2*100]}function g(f){for(var y=0,p=0;p!==f.length&&!(y>=Number.MAX_SAFE_INTEGER);p++)y+=f.charCodeAt(p);return y}function d(f){if(isNaN(f)){if(typeof f=="string"){if(R[f]){var p=R[f];if(p.hueRange)return p.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var C=S(f)[0];return t(C).hueRange}}}else{var y=parseInt(f);if(y<360&&y>0)return t(f).hueRange}return[0,360]}return e})})(Pe,Pe.exports);var vt=Pe.exports;const{window:ht}=Ke;function gt(A){let T,M,R,x,e,l,n,i,v,o=A[1]==1?"":"s",u,a,t,r,s,c;return{c(){T=q("div"),M=q("div"),R=ve(),x=q("canvas"),e=ve(),l=q("div"),n=q("p"),i=te(A[1]),v=te(" block"),u=te(o),a=ve(),t=q("button"),r=te("Shop"),this.h()},l(m){T=j(m,"DIV",{class:!0});var P=_(T);M=j(P,"DIV",{class:!0}),_(M).forEach(z),P.forEach(z),R=he(m),x=j(m,"CANVAS",{width:!0,height:!0,class:!0}),_(x).forEach(z),e=he(m),l=j(m,"DIV",{class:!0});var S=_(l);n=j(S,"P",{class:!0});var h=_(n);i=ne(h,A[1]),v=ne(h," block"),u=ne(h,o),h.forEach(z),a=he(S),t=j(S,"BUTTON",{class:!0});var g=_(t);r=ne(g,"Shop"),g.forEach(z),S.forEach(z),this.h()},h(){$(M,"class","w-24 h-24 bg-black"),$(T,"class","fixed top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]"),$(x,"width",A[2]),$(x,"height",A[3]),$(x,"class","z--10"),$(n,"class","font-thin text-3xl border-b-[1px] pb-2 border-gray-200"),$(t,"class","w-min mt-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 active:bg-gray-400 rounded-lg"),$(l,"class","my-8 mx-auto text-center top-0 left-0 w-screen fixed flex flex-col items-center font-display")},m(m,P){ee(m,T,P),K(T,M),ee(m,R,P),ee(m,x,P),A[8](x),ee(m,e,P),ee(m,l,P),K(l,n),K(n,i),K(n,v),K(n,u),K(l,a),K(l,t),K(t,r),s||(c=[ye(ht,"resize",A[7]),ye(M,"click",A[6]),ye(t,"click",A[4])],s=!0)},p(m,[P]){P&4&&$(x,"width",m[2]),P&8&&$(x,"height",m[3]),P&2&&Le(i,m[1]),P&2&&o!==(o=m[1]==1?"":"s")&&Le(u,o)},i:ae,o:ae,d(m){m&&z(T),m&&z(R),m&&z(x),A[8](null),m&&z(e),m&&z(l),s=!1,ze(c)}}}function xt(A,T,M){const{open:R}=Qe("simple-modal"),x=()=>R(ct,{},{transitionWindowProps:{duration:50}});let e,l,n;function i(){n&&U.exports.World.remove(l.world,n),n=U.exports.Bodies.rectangle(o/2,u,o,20,{isStatic:!0}),n.render.fillStyle="#444",U.exports.Composite.add(l.world,[n])}Ze(()=>{M(2,o=window.innerWidth),M(3,u=window.innerHeight),l=U.exports.Engine.create(),U.exports.Common.setDecomp(Xe),U.exports.Events.on(l,"beforeUpdate",()=>{const P=U.exports.Composite.allBodies(l.world);for(const S of P)!S.isStatic&&S.position.y>u&&(U.exports.World.remove(l.world,S),M(1,v--,v))});const c=U.exports.Runner.create();c.isFixed=!0,U.exports.Runner.run(c,l),i();const m=e.getContext("2d");(function P(){const S=U.exports.Composite.allBodies(l.world);window.requestAnimationFrame(P),m.fillStyle="#ffffff",m.fillRect(0,0,e.width,e.height);for(const h of S)for(const g of h.parts){const d=g.vertices;m.beginPath(),m.moveTo(d[0].x,d[0].y);for(const f of d)m.lineTo(f.x,f.y);m.lineTo(d[0].x,d[0].y),m.closePath(),m.lineWidth=0,m.strokeStyle="rgba(1, 1, 1, 0)",m.globalAlpha=g.render.opacity,m.fillStyle=g.render.fillStyle,m.fill()}})()});let v=0,o=600,u=600;const a=(c,m)=>Math.random()*(m-c+1)+c;function t(){M(1,v++,v);const c=U.exports.Bodies.circle(a(60,o-60),0,a(8,16));U.exports.Body.setMass(c,.05),c.restitution=1,c.render.fillStyle=vt({hue:"monochrome",luminosity:"light"}),U.exports.World.add(l.world,c)}const r=()=>{M(2,o=window.innerWidth),M(3,u=window.innerHeight),i()};function s(c){Je[c?"unshift":"push"](()=>{e=c,M(0,e)})}return[e,v,o,u,x,i,t,r,s]}class dt extends Fe{constructor(T){super(),De(this,T,xt,gt,Ve,{})}}export{dt as default};

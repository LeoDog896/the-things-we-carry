import{S as Le,i as ke,s as Fe,e as De,c as Ve,a as Oe,d as we,b as ne,g as He,K as le,n as Ce,L as We,w as Ne,M as Ge,N as Ue}from"../chunks/index-5eba58fb.js";var ie=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ze={decomp:et,quickDecomp:Y,isSimple:tt,removeCollinearPoints:nt,removeDuplicatePoints:it,makeCCW:Xe};function Qe(I,T,M){M=M||0;var B=[0,0],g,e,l,a,n,v,o;return g=I[1][1]-I[0][1],e=I[0][0]-I[1][0],l=g*I[0][0]+e*I[0][1],a=T[1][1]-T[0][1],n=T[0][0]-T[1][0],v=a*T[0][0]+n*T[0][1],o=g*n-a*e,se(o,0,M)||(B[0]=(n*l-e*v)/o,B[1]=(g*v-a*l)/o),B}function ue(I,T,M,B){var g=T[0]-I[0],e=T[1]-I[1],l=B[0]-M[0],a=B[1]-M[1];if(l*e-a*g===0)return!1;var n=(g*(M[1]-I[1])+e*(I[0]-M[0]))/(l*e-a*g),v=(l*(I[1]-M[1])+a*(M[0]-I[0]))/(a*g-l*e);return n>=0&&n<=1&&v>=0&&v<=1}function b(I,T,M){return(T[0]-I[0])*(M[1]-I[1])-(M[0]-I[0])*(T[1]-I[1])}function re(I,T,M){return b(I,T,M)>0}function ce(I,T,M){return b(I,T,M)>=0}function Ae(I,T,M){return b(I,T,M)<0}function q(I,T,M){return b(I,T,M)<=0}var Ze=[],Ke=[];function $e(I,T,M,B){if(B){var g=Ze,e=Ke;g[0]=T[0]-I[0],g[1]=T[1]-I[1],e[0]=M[0]-T[0],e[1]=M[1]-T[1];var l=g[0]*e[0]+g[1]*e[1],a=Math.sqrt(g[0]*g[0]+g[1]*g[1]),n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),v=Math.acos(l/(a*n));return v<B}else return b(I,T,M)===0}function j(I,T){var M=T[0]-I[0],B=T[1]-I[1];return M*M+B*B}function F(I,T){var M=I.length;return I[T<0?T%M+M:T%M]}function Je(I){I.length=0}function K(I,T,M,B){for(var g=M;g<B;g++)I.push(T[g])}function Xe(I){for(var T=0,M=I,B=1;B<I.length;++B)(M[B][1]<M[T][1]||M[B][1]===M[T][1]&&M[B][0]>M[T][0])&&(T=B);return re(F(I,T-1),F(I,T),F(I,T+1))?!1:(Ye(I),!0)}function Ye(I){for(var T=[],M=I.length,B=0;B!==M;B++)T.push(I.pop());for(var B=0;B!==M;B++)I[B]=T[B]}function Ie(I,T){return Ae(F(I,T-1),F(I,T),F(I,T+1))}var qe=[],je=[];function be(I,T,M){var B,g,e=qe,l=je;if(ce(F(I,T+1),F(I,T),F(I,M))&&q(F(I,T-1),F(I,T),F(I,M)))return!1;g=j(F(I,T),F(I,M));for(var a=0;a!==I.length;++a)if(!((a+1)%I.length===T||a===T)&&ce(F(I,T),F(I,M),F(I,a+1))&&q(F(I,T),F(I,M),F(I,a))&&(e[0]=F(I,T),e[1]=F(I,M),l[0]=F(I,a),l[1]=F(I,a+1),B=Qe(e,l),j(F(I,T),B)<g))return!1;return!0}function _e(I,T,M){for(var B=0;B!==I.length;++B)if(!(B===T||B===M||(B+1)%I.length===T||(B+1)%I.length===M)&&ue(F(I,T),F(I,M),F(I,B),F(I,B+1)))return!1;return!0}function ae(I,T,M,B){var g=B||[];if(Je(g),T<M)for(var e=T;e<=M;e++)g.push(I[e]);else{for(var e=0;e<=M;e++)g.push(I[e]);for(var e=T;e<I.length;e++)g.push(I[e])}return g}function ve(I){for(var T=[],M=[],B=[],g=[],e=Number.MAX_VALUE,l=0;l<I.length;++l)if(Ie(I,l)){for(var a=0;a<I.length;++a)if(be(I,l,a)){M=ve(ae(I,l,a,g)),B=ve(ae(I,a,l,g));for(var n=0;n<B.length;n++)M.push(B[n]);M.length<e&&(T=M,e=M.length,T.push([F(I,l),F(I,a)]))}}return T}function et(I){var T=ve(I);return T.length>0?Te(I,T):[I]}function Te(I,T){if(T.length===0)return[I];if(T instanceof Array&&T.length&&T[0]instanceof Array&&T[0].length===2&&T[0][0]instanceof Array){for(var M=[I],B=0;B<T.length;B++)for(var g=T[B],e=0;e<M.length;e++){var l=M[e],a=Te(l,g);if(a){M.splice(e,1),M.push(a[0],a[1]);break}}return M}else{var g=T,B=I.indexOf(g[0]),e=I.indexOf(g[1]);return B!==-1&&e!==-1?[ae(I,B,e),ae(I,e,B)]:!1}}function tt(I){var T=I,M;for(M=0;M<T.length-1;M++)for(var B=0;B<M-1;B++)if(ue(T[M],T[M+1],T[B],T[B+1]))return!1;for(M=1;M<T.length-2;M++)if(ue(T[0],T[T.length-1],T[M],T[M+1]))return!1;return!0}function Pe(I,T,M,B,g){g=g||0;var e=T[1]-I[1],l=I[0]-T[0],a=e*I[0]+l*I[1],n=B[1]-M[1],v=M[0]-B[0],o=n*M[0]+v*M[1],u=e*v-n*l;return se(u,0,g)?[0,0]:[(v*a-l*o)/u,(e*o-n*a)/u]}function Y(I,T,M,B,g,e,l){e=e||100,l=l||0,g=g||25,T=typeof T!="undefined"?T:[],M=M||[],B=B||[];var a=[0,0],n=[0,0],v=[0,0],o=0,u=0,i=0,t=0,r=0,s=0,h=0,m=[],P=[],C=I,x=I;if(x.length<3)return T;if(l++,l>e)return console.warn("quickDecomp: max level ("+e+") reached."),T;for(var c=0;c<I.length;++c)if(Ie(C,c)){M.push(C[c]),o=u=Number.MAX_VALUE;for(var d=0;d<I.length;++d)re(F(C,c-1),F(C,c),F(C,d))&&q(F(C,c-1),F(C,c),F(C,d-1))&&(v=Pe(F(C,c-1),F(C,c),F(C,d),F(C,d-1)),Ae(F(C,c+1),F(C,c),v)&&(i=j(C[c],v),i<u&&(u=i,n=v,s=d))),re(F(C,c+1),F(C,c),F(C,d+1))&&q(F(C,c+1),F(C,c),F(C,d))&&(v=Pe(F(C,c+1),F(C,c),F(C,d),F(C,d+1)),re(F(C,c-1),F(C,c),v)&&(i=j(C[c],v),i<o&&(o=i,a=v,r=d)));if(s===(r+1)%I.length)v[0]=(n[0]+a[0])/2,v[1]=(n[1]+a[1])/2,B.push(v),c<r?(K(m,C,c,r+1),m.push(v),P.push(v),s!==0&&K(P,C,s,C.length),K(P,C,0,c+1)):(c!==0&&K(m,C,c,C.length),K(m,C,0,r+1),m.push(v),P.push(v),K(P,C,s,c+1));else{if(s>r&&(r+=I.length),t=Number.MAX_VALUE,r<s)return T;for(var d=s;d<=r;++d)ce(F(C,c-1),F(C,c),F(C,d))&&q(F(C,c+1),F(C,c),F(C,d))&&(i=j(F(C,c),F(C,d)),i<t&&_e(C,c,d)&&(t=i,h=d%I.length));c<h?(K(m,C,c,h+1),h!==0&&K(P,C,h,x.length),K(P,C,0,c+1)):(c!==0&&K(m,C,c,x.length),K(m,C,0,h+1),K(P,C,h,c+1))}return m.length<P.length?(Y(m,T,M,B,g,e,l),Y(P,T,M,B,g,e,l)):(Y(P,T,M,B,g,e,l),Y(m,T,M,B,g,e,l)),T}return T.push(I),T}function nt(I,T){for(var M=0,B=I.length-1;I.length>3&&B>=0;--B)$e(F(I,B-1),F(I,B),F(I,B+1),T)&&(I.splice(B%I.length,1),M++);return M}function it(I,T){for(var M=I.length-1;M>=1;--M)for(var B=I[M],g=M-1;g>=0;--g)if(rt(B,I[g],T)){I.splice(M,1);continue}}function se(I,T,M){return M=M||0,Math.abs(I-T)<=M}function rt(I,T,M){return se(I[0],T[0],M)&&se(I[1],T[1],M)}var H={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,T){(function(B,g){I.exports=g()})(ie,function(){return function(M){var B={};function g(e){if(B[e])return B[e].exports;var l=B[e]={i:e,l:!1,exports:{}};return M[e].call(l.exports,l,l.exports,g),l.l=!0,l.exports}return g.m=M,g.c=B,g.d=function(e,l,a){g.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:a})},g.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,l){if(l&1&&(e=g(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var a=Object.create(null);if(g.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var n in e)g.d(a,n,function(v){return e[v]}.bind(null,n));return a},g.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(l,"a",l),l},g.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},g.p="",g(g.s=21)}([function(M,B){var g={};M.exports=g,function(){g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(l,a){var n,v;typeof a=="boolean"?(n=2,v=a):(n=1,v=!0);for(var o=n;o<arguments.length;o++){var u=arguments[o];if(u)for(var i in u)v&&u[i]&&u[i].constructor===Object&&(!l[i]||l[i].constructor===Object)?(l[i]=l[i]||{},g.extend(l[i],v,u[i])):l[i]=u[i]}return l},g.clone=function(l,a){return g.extend({},a,l)},g.keys=function(l){if(Object.keys)return Object.keys(l);var a=[];for(var n in l)a.push(n);return a},g.values=function(l){var a=[];if(Object.keys){for(var n=Object.keys(l),v=0;v<n.length;v++)a.push(l[n[v]]);return a}for(var o in l)a.push(l[o]);return a},g.get=function(l,a,n,v){a=a.split(".").slice(n,v);for(var o=0;o<a.length;o+=1)l=l[a[o]];return l},g.set=function(l,a,n,v,o){var u=a.split(".").slice(v,o);return g.get(l,a,0,-1)[u[u.length-1]]=n,n},g.shuffle=function(l){for(var a=l.length-1;a>0;a--){var n=Math.floor(g.random()*(a+1)),v=l[a];l[a]=l[n],l[n]=v}return l},g.choose=function(l){return l[Math.floor(g.random()*l.length)]},g.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},g.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},g.isFunction=function(l){return typeof l=="function"},g.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},g.isString=function(l){return toString.call(l)==="[object String]"},g.clamp=function(l,a,n){return l<a?a:l>n?n:l},g.sign=function(l){return l<0?-1:1},g.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(l,a){return l=typeof l!="undefined"?l:0,a=typeof a!="undefined"?a:1,l+e()*(a-l)};var e=function(){return g._seed=(g._seed*9301+49297)%233280,g._seed/233280};g.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[l]||(g.warn(l),g._warnedOnce[l]=!0)},g.deprecated=function(l,a,n){l[a]=g.chain(function(){g.warnOnce("\u{1F505} deprecated \u{1F505}",n)},l[a])},g.nextId=function(){return g._nextId++},g.indexOf=function(l,a){if(l.indexOf)return l.indexOf(a);for(var n=0;n<l.length;n++)if(l[n]===a)return n;return-1},g.map=function(l,a){if(l.map)return l.map(a);for(var n=[],v=0;v<l.length;v+=1)n.push(a(l[v]));return n},g.topologicalSort=function(l){var a=[],n=[],v=[];for(var o in l)!n[o]&&!v[o]&&g._topologicalSort(o,n,v,l,a);return a},g._topologicalSort=function(l,a,n,v,o){var u=v[l]||[];n[l]=!0;for(var i=0;i<u.length;i+=1){var t=u[i];n[t]||a[t]||g._topologicalSort(t,a,n,v,o)}n[l]=!1,a[l]=!0,o.push(l)},g.chain=function(){for(var l=[],a=0;a<arguments.length;a+=1){var n=arguments[a];n._chained?l.push.apply(l,n._chained):l.push(n)}var v=function(){for(var o,u=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)u[i]=arguments[i];for(i=0;i<l.length;i+=1){var r=l[i].apply(o,u);typeof r!="undefined"&&(o=r)}return o};return v._chained=l,v},g.chainPathBefore=function(l,a,n){return g.set(l,a,g.chain(n,g.get(l,a)))},g.chainPathAfter=function(l,a,n){return g.set(l,a,g.chain(g.get(l,a),n))},g.setDecomp=function(l){g._decomp=l},g.getDecomp=function(){var l=g._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof ie!="undefined"&&(l=ie.decomp)}catch{l=null}return l}}()},function(M,B){var g={};M.exports=g,function(){g.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(l,e),l},g.update=function(e,l,a){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<l.length;n++){var v=l[n];v.x>e.max.x&&(e.max.x=v.x),v.x<e.min.x&&(e.min.x=v.x),v.y>e.max.y&&(e.max.y=v.y),v.y<e.min.y&&(e.min.y=v.y)}a&&(a.x>0?e.max.x+=a.x:e.min.x+=a.x,a.y>0?e.max.y+=a.y:e.min.y+=a.y)},g.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},g.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},g.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},g.shift=function(e,l){var a=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+a,e.min.y=l.y,e.max.y=l.y+n}}()},function(M,B){var g={};M.exports=g,function(){g.create=function(e,l){return{x:e||0,y:l||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,l,a){var n=Math.cos(l),v=Math.sin(l);a||(a={});var o=e.x*n-e.y*v;return a.y=e.x*v+e.y*n,a.x=o,a},g.rotateAbout=function(e,l,a,n){var v=Math.cos(l),o=Math.sin(l);n||(n={});var u=a.x+((e.x-a.x)*v-(e.y-a.y)*o);return n.y=a.y+((e.x-a.x)*o+(e.y-a.y)*v),n.x=u,n},g.normalise=function(e){var l=g.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},g.dot=function(e,l){return e.x*l.x+e.y*l.y},g.cross=function(e,l){return e.x*l.y-e.y*l.x},g.cross3=function(e,l,a){return(l.x-e.x)*(a.y-e.y)-(l.y-e.y)*(a.x-e.x)},g.add=function(e,l,a){return a||(a={}),a.x=e.x+l.x,a.y=e.y+l.y,a},g.sub=function(e,l,a){return a||(a={}),a.x=e.x-l.x,a.y=e.y-l.y,a},g.mult=function(e,l){return{x:e.x*l,y:e.y*l}},g.div=function(e,l){return{x:e.x/l,y:e.y/l}},g.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},function(M,B,g){var e={};M.exports=e;var l=g(2),a=g(0);(function(){e.create=function(n,v){for(var o=[],u=0;u<n.length;u++){var i=n[u],t={x:i.x,y:i.y,index:u,body:v,isInternal:!1};o.push(t)}return o},e.fromPath=function(n,v){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return n.replace(o,function(i,t,r){u.push({x:parseFloat(t),y:parseFloat(r)})}),e.create(u,v)},e.centre=function(n){for(var v=e.area(n,!0),o={x:0,y:0},u,i,t,r=0;r<n.length;r++)t=(r+1)%n.length,u=l.cross(n[r],n[t]),i=l.mult(l.add(n[r],n[t]),u),o=l.add(o,i);return l.div(o,6*v)},e.mean=function(n){for(var v={x:0,y:0},o=0;o<n.length;o++)v.x+=n[o].x,v.y+=n[o].y;return l.div(v,n.length)},e.area=function(n,v){for(var o=0,u=n.length-1,i=0;i<n.length;i++)o+=(n[u].x-n[i].x)*(n[u].y+n[i].y),u=i;return v?o/2:Math.abs(o)/2},e.inertia=function(n,v){for(var o=0,u=0,i=n,t,r,s=0;s<i.length;s++)r=(s+1)%i.length,t=Math.abs(l.cross(i[r],i[s])),o+=t*(l.dot(i[r],i[r])+l.dot(i[r],i[s])+l.dot(i[s],i[s])),u+=t;return v/6*(o/u)},e.translate=function(n,v,o){o=typeof o!="undefined"?o:1;var u=n.length,i=v.x*o,t=v.y*o,r;for(r=0;r<u;r++)n[r].x+=i,n[r].y+=t;return n},e.rotate=function(n,v,o){if(v!==0){var u=Math.cos(v),i=Math.sin(v),t=o.x,r=o.y,s=n.length,h,m,P,C;for(C=0;C<s;C++)h=n[C],m=h.x-t,P=h.y-r,h.x=t+(m*u-P*i),h.y=r+(m*i+P*u);return n}},e.contains=function(n,v){for(var o=v.x,u=v.y,i=n.length,t=n[i-1],r,s=0;s<i;s++){if(r=n[s],(o-t.x)*(r.y-t.y)+(u-t.y)*(t.x-r.x)>0)return!1;t=r}return!0},e.scale=function(n,v,o,u){if(v===1&&o===1)return n;u=u||e.centre(n);for(var i,t,r=0;r<n.length;r++)i=n[r],t=l.sub(i,u),n[r].x=u.x+t.x*v,n[r].y=u.y+t.y*o;return n},e.chamfer=function(n,v,o,u,i){typeof v=="number"?v=[v]:v=v||[8],o=typeof o!="undefined"?o:-1,u=u||2,i=i||14;for(var t=[],r=0;r<n.length;r++){var s=n[r-1>=0?r-1:n.length-1],h=n[r],m=n[(r+1)%n.length],P=v[r<v.length?r:v.length-1];if(P===0){t.push(h);continue}var C=l.normalise({x:h.y-s.y,y:s.x-h.x}),x=l.normalise({x:m.y-h.y,y:h.x-m.x}),c=Math.sqrt(2*Math.pow(P,2)),d=l.mult(a.clone(C),P),f=l.normalise(l.mult(l.add(C,x),.5)),y=l.sub(h,l.mult(f,c)),p=o;o===-1&&(p=Math.pow(P,.32)*1.75),p=a.clamp(p,u,i),p%2===1&&(p+=1);for(var w=Math.acos(l.dot(C,x)),S=w/p,A=0;A<p;A++)t.push(l.add(l.rotate(d,S*A),y))}return t},e.clockwiseSort=function(n){var v=e.mean(n);return n.sort(function(o,u){return l.angle(v,o)-l.angle(v,u)}),n},e.isConvex=function(n){var v=0,o=n.length,u,i,t,r;if(o<3)return null;for(u=0;u<o;u++)if(i=(u+1)%o,t=(u+2)%o,r=(n[i].x-n[u].x)*(n[t].y-n[i].y),r-=(n[i].y-n[u].y)*(n[t].x-n[i].x),r<0?v|=1:r>0&&(v|=2),v===3)return!1;return v!==0?!0:null},e.hull=function(n){var v=[],o=[],u,i;for(n=n.slice(0),n.sort(function(t,r){var s=t.x-r.x;return s!==0?s:t.y-r.y}),i=0;i<n.length;i+=1){for(u=n[i];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],u)<=0;)o.pop();o.push(u)}for(i=n.length-1;i>=0;i-=1){for(u=n[i];v.length>=2&&l.cross3(v[v.length-2],v[v.length-1],u)<=0;)v.pop();v.push(u)}return v.pop(),o.pop(),v.concat(o)}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e.on=function(a,n,v){for(var o=n.split(" "),u,i=0;i<o.length;i++)u=o[i],a.events=a.events||{},a.events[u]=a.events[u]||[],a.events[u].push(v);return v},e.off=function(a,n,v){if(!n){a.events={};return}typeof n=="function"&&(v=n,n=l.keys(a.events).join(" "));for(var o=n.split(" "),u=0;u<o.length;u++){var i=a.events[o[u]],t=[];if(v&&i)for(var r=0;r<i.length;r++)i[r]!==v&&t.push(i[r]);a.events[o[u]]=t}},e.trigger=function(a,n,v){var o,u,i,t,r=a.events;if(r&&l.keys(r).length>0){v||(v={}),o=n.split(" ");for(var s=0;s<o.length;s++)if(u=o[s],i=r[u],i){t=l.clone(v,!1),t.name=u,t.source=a;for(var h=0;h<i.length;h++)i[h].apply(a,[t])}}}})()},function(M,B,g){var e={};M.exports=e;var l=g(4),a=g(0),n=g(1),v=g(6);(function(){e.create=function(o){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,u,i,t){if(o.isModified=u,u&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),i&&o.parent&&e.setModified(o.parent,u,i,t),t)for(var r=0;r<o.composites.length;r++){var s=o.composites[r];e.setModified(s,u,i,t)}},e.add=function(o,u){var i=[].concat(u);l.trigger(o,"beforeAdd",{object:u});for(var t=0;t<i.length;t++){var r=i[t];switch(r.type){case"body":if(r.parent!==r){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,r);break;case"constraint":e.addConstraint(o,r);break;case"composite":e.addComposite(o,r);break;case"mouseConstraint":e.addConstraint(o,r.constraint);break}}return l.trigger(o,"afterAdd",{object:u}),o},e.remove=function(o,u,i){var t=[].concat(u);l.trigger(o,"beforeRemove",{object:u});for(var r=0;r<t.length;r++){var s=t[r];switch(s.type){case"body":e.removeBody(o,s,i);break;case"constraint":e.removeConstraint(o,s,i);break;case"composite":e.removeComposite(o,s,i);break;case"mouseConstraint":e.removeConstraint(o,s.constraint);break}}return l.trigger(o,"afterRemove",{object:u}),o},e.addComposite=function(o,u){return o.composites.push(u),u.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,u,i){var t=a.indexOf(o.composites,u);if(t!==-1&&e.removeCompositeAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeComposite(o.composites[r],u,!0);return o},e.removeCompositeAt=function(o,u){return o.composites.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,u){return o.bodies.push(u),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,u,i){var t=a.indexOf(o.bodies,u);if(t!==-1&&e.removeBodyAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeBody(o.composites[r],u,!0);return o},e.removeBodyAt=function(o,u){return o.bodies.splice(u,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,u){return o.constraints.push(u),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,u,i){var t=a.indexOf(o.constraints,u);if(t!==-1&&e.removeConstraintAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeConstraint(o.composites[r],u,!0);return o},e.removeConstraintAt=function(o,u){return o.constraints.splice(u,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,u,i){if(i)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],u,!0);return u?o.bodies=o.bodies.filter(function(r){return r.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var u=[].concat(o.bodies),i=0;i<o.composites.length;i++)u=u.concat(e.allBodies(o.composites[i]));return o.cache&&(o.cache.allBodies=u),u},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var u=[].concat(o.constraints),i=0;i<o.composites.length;i++)u=u.concat(e.allConstraints(o.composites[i]));return o.cache&&(o.cache.allConstraints=u),u},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var u=[].concat(o.composites),i=0;i<o.composites.length;i++)u=u.concat(e.allComposites(o.composites[i]));return o.cache&&(o.cache.allComposites=u),u},e.get=function(o,u,i){var t,r;switch(i){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(r=t.filter(function(s){return s.id.toString()===u.toString()}),r.length===0?null:r[0]):null},e.move=function(o,u,i){return e.remove(o,u),e.add(i,u),o},e.rebase=function(o){for(var u=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),i=0;i<u.length;i++)u[i].id=a.nextId();return o},e.translate=function(o,u,i){for(var t=i?e.allBodies(o):o.bodies,r=0;r<t.length;r++)v.translate(t[r],u);return o},e.rotate=function(o,u,i,t){for(var r=Math.cos(u),s=Math.sin(u),h=t?e.allBodies(o):o.bodies,m=0;m<h.length;m++){var P=h[m],C=P.position.x-i.x,x=P.position.y-i.y;v.setPosition(P,{x:i.x+(C*r-x*s),y:i.y+(C*s+x*r)}),v.rotate(P,u)}return o},e.scale=function(o,u,i,t,r){for(var s=r?e.allBodies(o):o.bodies,h=0;h<s.length;h++){var m=s[h],P=m.position.x-t.x,C=m.position.y-t.y;v.setPosition(m,{x:t.x+P*u,y:t.y+C*i}),v.scale(m,u,i)}return o},e.bounds=function(o){for(var u=e.allBodies(o),i=[],t=0;t<u.length;t+=1){var r=u[t];i.push(r.bounds.min,r.bounds.max)}return n.create(i)}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(2),n=g(7);g(16);var v=g(0),o=g(1),u=g(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var r={id:v.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=v.extend(r,t);return i(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var i=function(t,r){r=r||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:r.axes||t.axes,area:r.area||t.area,mass:r.mass||t.mass,inertia:r.inertia||t.inertia});var s=t.isStatic?"#14151f":v.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),h=t.isStatic?"#555":"#ccc",m=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||h,t.render.lineWidth=t.render.lineWidth||m,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,r,s){var h;typeof r=="string"&&(h=r,r={},r[h]=s);for(h in r)if(!!Object.prototype.hasOwnProperty.call(r,h))switch(s=r[h],h){case"isStatic":e.setStatic(t,s);break;case"isSleeping":n.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[h]=s}},e.setStatic=function(t,r){for(var s=0;s<t.parts.length;s++){var h=t.parts[s];h.isStatic=r,r?(h._original={restitution:h.restitution,friction:h.friction,mass:h.mass,inertia:h.inertia,density:h.density,inverseMass:h.inverseMass,inverseInertia:h.inverseInertia},h.restitution=0,h.friction=1,h.mass=h.inertia=h.density=1/0,h.inverseMass=h.inverseInertia=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.angularVelocity=0,h.speed=0,h.angularSpeed=0,h.motion=0):h._original&&(h.restitution=h._original.restitution,h.friction=h._original.friction,h.mass=h._original.mass,h.inertia=h._original.inertia,h.density=h._original.density,h.inverseMass=h._original.inverseMass,h.inverseInertia=h._original.inverseInertia,h._original=null)}},e.setMass=function(t,r){var s=t.inertia/(t.mass/6);t.inertia=s*(r/6),t.inverseInertia=1/t.inertia,t.mass=r,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,r){e.setMass(t,r*t.area),t.density=r},e.setInertia=function(t,r){t.inertia=r,t.inverseInertia=1/t.inertia},e.setVertices=function(t,r){r[0].body===t?t.vertices=r:t.vertices=l.create(r,t),t.axes=u.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,r,s){var h;for(r=r.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,h=0;h<r.length;h++){var m=r[h];m!==t&&(m.parent=t,t.parts.push(m))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var P=[];for(h=0;h<r.length;h++)P=P.concat(r[h].vertices);l.clockwiseSort(P);var C=l.hull(P),x=l.centre(C);e.setVertices(t,C),l.translate(t.vertices,x)}var c=e._totalProperties(t);t.area=c.area,t.parent=t,t.position.x=c.centre.x,t.position.y=c.centre.y,t.positionPrev.x=c.centre.x,t.positionPrev.y=c.centre.y,e.setMass(t,c.mass),e.setInertia(t,c.inertia),e.setPosition(t,c.centre)}},e.setCentre=function(t,r,s){s?(t.positionPrev.x+=r.x,t.positionPrev.y+=r.y,t.position.x+=r.x,t.position.y+=r.y):(t.positionPrev.x=r.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=r.y-(t.position.y-t.positionPrev.y),t.position.x=r.x,t.position.y=r.y)},e.setPosition=function(t,r){var s=a.sub(r,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var h=0;h<t.parts.length;h++){var m=t.parts[h];m.position.x+=s.x,m.position.y+=s.y,l.translate(m.vertices,s),o.update(m.bounds,m.vertices,t.velocity)}},e.setAngle=function(t,r){var s=r-t.angle;t.anglePrev+=s;for(var h=0;h<t.parts.length;h++){var m=t.parts[h];m.angle+=s,l.rotate(m.vertices,s,t.position),u.rotate(m.axes,s),o.update(m.bounds,m.vertices,t.velocity),h>0&&a.rotateAbout(m.position,s,t.position,m.position)}},e.setVelocity=function(t,r){t.positionPrev.x=t.position.x-r.x,t.positionPrev.y=t.position.y-r.y,t.velocity.x=r.x,t.velocity.y=r.y,t.speed=a.magnitude(t.velocity)},e.setAngularVelocity=function(t,r){t.anglePrev=t.angle-r,t.angularVelocity=r,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,r){e.setPosition(t,a.add(t.position,r))},e.rotate=function(t,r,s){if(!s)e.setAngle(t,t.angle+r);else{var h=Math.cos(r),m=Math.sin(r),P=t.position.x-s.x,C=t.position.y-s.y;e.setPosition(t,{x:s.x+(P*h-C*m),y:s.y+(P*m+C*h)}),e.setAngle(t,t.angle+r)}},e.scale=function(t,r,s,h){var m=0,P=0;h=h||t.position;for(var C=0;C<t.parts.length;C++){var x=t.parts[C];l.scale(x.vertices,r,s,h),x.axes=u.fromVertices(x.vertices),x.area=l.area(x.vertices),e.setMass(x,t.density*x.area),l.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),e.setInertia(x,e._inertiaScale*l.inertia(x.vertices,x.mass)),l.translate(x.vertices,{x:x.position.x,y:x.position.y}),C>0&&(m+=x.area,P+=x.inertia),x.position.x=h.x+(x.position.x-h.x)*r,x.position.y=h.y+(x.position.y-h.y)*s,o.update(x.bounds,x.vertices,t.velocity)}t.parts.length>1&&(t.area=m,t.isStatic||(e.setMass(t,t.density*m),e.setInertia(t,P))),t.circleRadius&&(r===s?t.circleRadius*=r:t.circleRadius=null)},e.update=function(t,r,s,h){var m=Math.pow(r*s*t.timeScale,2),P=1-t.frictionAir*s*t.timeScale,C=t.position.x-t.positionPrev.x,x=t.position.y-t.positionPrev.y;t.velocity.x=C*P*h+t.force.x/t.mass*m,t.velocity.y=x*P*h+t.force.y/t.mass*m,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*P*h+t.torque/t.inertia*m,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=a.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var c=0;c<t.parts.length;c++){var d=t.parts[c];l.translate(d.vertices,t.velocity),c>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(d.vertices,t.angularVelocity,t.position),u.rotate(d.axes,t.angularVelocity),c>0&&a.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),o.update(d.bounds,d.vertices,t.velocity)}},e.applyForce=function(t,r,s){t.force.x+=s.x,t.force.y+=s.y;var h={x:r.x-t.position.x,y:r.y-t.position.y};t.torque+=h.x*s.y-h.y*s.x},e._totalProperties=function(t){for(var r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var h=t.parts[s],m=h.mass!==1/0?h.mass:1;r.mass+=m,r.area+=h.area,r.inertia+=h.inertia,r.centre=a.add(r.centre,a.mult(h.position,m))}return r.centre=a.div(r.centre,r.mass),r}})()},function(M,B,g){var e={};M.exports=e;var l=g(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(a,n){for(var v=n*n*n,o=0;o<a.length;o++){var u=a[o],i=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var t=Math.min(u.motion,i),r=Math.max(u.motion,i);u.motion=e._minBias*t+(1-e._minBias)*r,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*v?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(a,n){for(var v=n*n*n,o=0;o<a.length;o++){var u=a[o];if(!!u.isActive){var i=u.collision,t=i.bodyA.parent,r=i.bodyB.parent;if(!(t.isSleeping&&r.isSleeping||t.isStatic||r.isStatic)&&(t.isSleeping||r.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:r,h=s===t?r:t;!s.isStatic&&h.motion>e._motionWakeThreshold*v&&e.set(s,!1)}}}},e.set=function(a,n){var v=a.isSleeping;n?(a.isSleeping=!0,a.sleepCounter=a.sleepThreshold,a.positionImpulse.x=0,a.positionImpulse.y=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.speed=0,a.angularSpeed=0,a.motion=0,v||l.trigger(a,"sleepStart")):(a.isSleeping=!1,a.sleepCounter=0,v&&l.trigger(a,"sleepEnd"))}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(9);(function(){var n=[],v={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(u,i){return{pair:null,collided:!1,bodyA:u,bodyB:i,parentA:u.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,i,t){if(e._overlapAxes(v,u.vertices,i.vertices,u.axes),v.overlap<=0||(e._overlapAxes(o,i.vertices,u.vertices,i.axes),o.overlap<=0))return null;var r=t&&t.table[a.id(u,i)],s;r?s=r.collision:(s=e.create(u,i),s.collided=!0,s.bodyA=u.id<i.id?u:i,s.bodyB=u.id<i.id?i:u,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),u=s.bodyA,i=s.bodyB;var h;v.overlap<o.overlap?h=v:h=o;var m=s.normal,P=s.supports,C=h.axis,x=C.x,c=C.y;x*(i.position.x-u.position.x)+c*(i.position.y-u.position.y)<0?(m.x=x,m.y=c):(m.x=-x,m.y=-c),s.tangent.x=-m.y,s.tangent.y=m.x,s.depth=h.overlap,s.penetration.x=m.x*s.depth,s.penetration.y=m.y*s.depth;var d=e._findSupports(u,i,m,1),f=0;if(l.contains(u.vertices,d[0])&&(P[f++]=d[0]),l.contains(u.vertices,d[1])&&(P[f++]=d[1]),f<2){var y=e._findSupports(i,u,m,-1);l.contains(i.vertices,y[0])&&(P[f++]=y[0]),f<2&&l.contains(i.vertices,y[1])&&(P[f++]=y[1])}return f===0&&(P[f++]=d[0]),P.length=f,s},e._overlapAxes=function(u,i,t,r){var s=i.length,h=t.length,m=i[0].x,P=i[0].y,C=t[0].x,x=t[0].y,c=r.length,d=Number.MAX_VALUE,f=0,y,p,w,S,A,R;for(A=0;A<c;A++){var E=r[A],L=E.x,k=E.y,D=m*L+P*k,V=C*L+x*k,O=D,W=V;for(R=1;R<s;R+=1)S=i[R].x*L+i[R].y*k,S>O?O=S:S<D&&(D=S);for(R=1;R<h;R+=1)S=t[R].x*L+t[R].y*k,S>W?W=S:S<V&&(V=S);if(p=O-V,w=W-D,y=p<w?p:w,y<d&&(d=y,f=A,y<=0))break}u.axis=r[f],u.overlap=d},e._projectToAxis=function(u,i,t){for(var r=i[0].x*t.x+i[0].y*t.y,s=r,h=1;h<i.length;h+=1){var m=i[h].x*t.x+i[h].y*t.y;m>s?s=m:m<r&&(r=m)}u.min=r,u.max=s},e._findSupports=function(u,i,t,r){var s=i.vertices,h=s.length,m=u.position.x,P=u.position.y,C=t.x*r,x=t.y*r,c=Number.MAX_VALUE,d,f,y,p,w;for(w=0;w<h;w+=1)f=s[w],p=C*(m-f.x)+x*(P-f.y),p<c&&(c=p,d=f);return y=s[(h+d.index-1)%h],c=C*(m-y.x)+x*(P-y.y),f=s[(d.index+1)%h],C*(m-f.x)+x*(P-f.y)<c?(n[0]=d,n[1]=f,n):(n[0]=d,n[1]=y,n)}})()},function(M,B,g){var e={};M.exports=e;var l=g(17);(function(){e.create=function(a,n){var v=a.bodyA,o=a.bodyB,u={id:e.id(v,o),bodyA:v,bodyB:o,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:v.isSensor||o.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,a,n),u},e.update=function(a,n,v){var o=a.contacts,u=n.supports,i=a.activeContacts,t=n.parentA,r=n.parentB,s=t.vertices.length;a.isActive=!0,a.timeUpdated=v,a.collision=n,a.separation=n.depth,a.inverseMass=t.inverseMass+r.inverseMass,a.friction=t.friction<r.friction?t.friction:r.friction,a.frictionStatic=t.frictionStatic>r.frictionStatic?t.frictionStatic:r.frictionStatic,a.restitution=t.restitution>r.restitution?t.restitution:r.restitution,a.slop=t.slop>r.slop?t.slop:r.slop,n.pair=a,i.length=0;for(var h=0;h<u.length;h++){var m=u[h],P=m.body===t?m.index:s+m.index,C=o[P];C?i.push(C):i.push(o[P]=l.create(m))}},e.setActive=function(a,n,v){n?(a.isActive=!0,a.timeUpdated=v):(a.isActive=!1,a.activeContacts.length=0)},e.id=function(a,n){return a.id<n.id?"A"+a.id+"B"+n.id:"A"+n.id+"B"+a.id}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(2),n=g(7),v=g(1),o=g(11),u=g(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var r=t.bodyA?a.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?a.add(t.bodyB.position,t.pointB):t.pointB,h=a.magnitude(a.sub(r,s));t.length=typeof t.length!="undefined"?t.length:h,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var m={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(m.type="pin",m.anchors=!1):t.stiffness<.9&&(m.type="spring"),t.render=u.extend(m,t.render),t},e.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var r=i[t],s=r.constraintImpulse;r.isStatic||s.x===0&&s.y===0&&s.angle===0||(r.position.x+=s.x,r.position.y+=s.y,r.angle+=s.angle)}},e.solveAll=function(i,t){for(var r=0;r<i.length;r+=1){var s=i[r],h=!s.bodyA||s.bodyA&&s.bodyA.isStatic,m=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(h||m)&&e.solve(i[r],t)}for(r=0;r<i.length;r+=1)s=i[r],h=!s.bodyA||s.bodyA&&s.bodyA.isStatic,m=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!h&&!m&&e.solve(i[r],t)},e.solve=function(i,t){var r=i.bodyA,s=i.bodyB,h=i.pointA,m=i.pointB;if(!(!r&&!s)){r&&!r.isStatic&&(a.rotate(h,r.angle-i.angleA,h),i.angleA=r.angle),s&&!s.isStatic&&(a.rotate(m,s.angle-i.angleB,m),i.angleB=s.angle);var P=h,C=m;if(r&&(P=a.add(r.position,h)),s&&(C=a.add(s.position,m)),!(!P||!C)){var x=a.sub(P,C),c=a.magnitude(x);c<e._minLength&&(c=e._minLength);var d=(c-i.length)/c,f=i.stiffness<1?i.stiffness*t:i.stiffness,y=a.mult(x,d*f),p=(r?r.inverseMass:0)+(s?s.inverseMass:0),w=(r?r.inverseInertia:0)+(s?s.inverseInertia:0),S=p+w,A,R,E,L,k;if(i.damping){var D=a.create();E=a.div(x,c),k=a.sub(s&&a.sub(s.position,s.positionPrev)||D,r&&a.sub(r.position,r.positionPrev)||D),L=a.dot(E,k)}r&&!r.isStatic&&(R=r.inverseMass/p,r.constraintImpulse.x-=y.x*R,r.constraintImpulse.y-=y.y*R,r.position.x-=y.x*R,r.position.y-=y.y*R,i.damping&&(r.positionPrev.x-=i.damping*E.x*L*R,r.positionPrev.y-=i.damping*E.y*L*R),A=a.cross(h,y)/S*e._torqueDampen*r.inverseInertia*(1-i.angularStiffness),r.constraintImpulse.angle-=A,r.angle-=A),s&&!s.isStatic&&(R=s.inverseMass/p,s.constraintImpulse.x+=y.x*R,s.constraintImpulse.y+=y.y*R,s.position.x+=y.x*R,s.position.y+=y.y*R,i.damping&&(s.positionPrev.x+=i.damping*E.x*L*R,s.positionPrev.y+=i.damping*E.y*L*R),A=a.cross(m,y)/S*e._torqueDampen*s.inverseInertia*(1-i.angularStiffness),s.constraintImpulse.angle+=A,s.angle+=A)}}},e.postSolveAll=function(i){for(var t=0;t<i.length;t++){var r=i[t],s=r.constraintImpulse;if(!(r.isStatic||s.x===0&&s.y===0&&s.angle===0)){n.set(r,!1);for(var h=0;h<r.parts.length;h++){var m=r.parts[h];l.translate(m.vertices,s),h>0&&(m.position.x+=s.x,m.position.y+=s.y),s.angle!==0&&(l.rotate(m.vertices,s.angle,r.position),o.rotate(m.axes,s.angle),h>0&&a.rotateAbout(m.position,s.angle,r.position,m.position)),v.update(m.bounds,m.vertices,r.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+i.pointA.x,y:(i.bodyA?i.bodyA.position.y:0)+i.pointA.y}},e.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+i.pointB.x,y:(i.bodyB?i.bodyB.position.y:0)+i.pointB.y}}})()},function(M,B,g){var e={};M.exports=e;var l=g(2),a=g(0);(function(){e.fromVertices=function(n){for(var v={},o=0;o<n.length;o++){var u=(o+1)%n.length,i=l.normalise({x:n[u].y-n[o].y,y:n[o].x-n[u].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),v[t]=i}return a.values(v)},e.rotate=function(n,v){if(v!==0)for(var o=Math.cos(v),u=Math.sin(v),i=0;i<n.length;i++){var t=n[i],r;r=t.x*o-t.y*u,t.y=t.x*u+t.y*o,t.x=r}}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(0),n=g(6),v=g(1),o=g(2);(function(){e.rectangle=function(u,i,t,r,s){s=s||{};var h={label:"Rectangle Body",position:{x:u,y:i},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+r+" L 0 "+r)};if(s.chamfer){var m=s.chamfer;h.vertices=l.chamfer(h.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete s.chamfer}return n.create(a.extend({},h,s))},e.trapezoid=function(u,i,t,r,s,h){h=h||{},s*=.5;var m=(1-s*2)*t,P=t*s,C=P+m,x=C+P,c;s<.5?c="L 0 0 L "+P+" "+-r+" L "+C+" "+-r+" L "+x+" 0":c="L 0 0 L "+C+" "+-r+" L "+x+" 0";var d={label:"Trapezoid Body",position:{x:u,y:i},vertices:l.fromPath(c)};if(h.chamfer){var f=h.chamfer;d.vertices=l.chamfer(d.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete h.chamfer}return n.create(a.extend({},d,h))},e.circle=function(u,i,t,r,s){r=r||{};var h={label:"Circle Body",circleRadius:t};s=s||25;var m=Math.ceil(Math.max(10,Math.min(s,t)));return m%2===1&&(m+=1),e.polygon(u,i,m,t,a.extend({},h,r))},e.polygon=function(u,i,t,r,s){if(s=s||{},t<3)return e.circle(u,i,r,s);for(var h=2*Math.PI/t,m="",P=h*.5,C=0;C<t;C+=1){var x=P+C*h,c=Math.cos(x)*r,d=Math.sin(x)*r;m+="L "+c.toFixed(3)+" "+d.toFixed(3)+" "}var f={label:"Polygon Body",position:{x:u,y:i},vertices:l.fromPath(m)};if(s.chamfer){var y=s.chamfer;f.vertices=l.chamfer(f.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete s.chamfer}return n.create(a.extend({},f,s))},e.fromVertices=function(u,i,t,r,s,h,m,P){var C=a.getDecomp(),x,c,d,f,y,p,w,S,A,R,E;for(x=Boolean(C&&C.quickDecomp),r=r||{},d=[],s=typeof s!="undefined"?s:!1,h=typeof h!="undefined"?h:.01,m=typeof m!="undefined"?m:10,P=typeof P!="undefined"?P:.01,a.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(p=t[R],f=l.isConvex(p),y=!f,y&&!x&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),f||!x)f?p=l.clockwiseSort(p):p=l.hull(p),d.push({position:{x:u,y:i},vertices:p});else{var L=p.map(function(Q){return[Q.x,Q.y]});C.makeCCW(L),h!==!1&&C.removeCollinearPoints(L,h),P!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(L,P);var k=C.quickDecomp(L);for(w=0;w<k.length;w++){var D=k[w],V=D.map(function(Q){return{x:Q[0],y:Q[1]}});m>0&&l.area(V)<m||d.push({position:l.centre(V),vertices:V})}}for(w=0;w<d.length;w++)d[w]=n.create(a.extend(d[w],r));if(s){var O=5;for(w=0;w<d.length;w++){var W=d[w];for(S=w+1;S<d.length;S++){var G=d[S];if(v.overlaps(W.bounds,G.bounds)){var U=W.vertices,N=G.vertices;for(A=0;A<W.vertices.length;A++)for(E=0;E<G.vertices.length;E++){var $=o.magnitudeSquared(o.sub(U[(A+1)%U.length],N[E])),z=o.magnitudeSquared(o.sub(U[A],N[(E+1)%N.length]));$<O&&z<O&&(U[A].isInternal=!0,N[E].isInternal=!0)}}}}}return d.length>1?(c=n.create(a.extend({parts:d.slice(0)},r)),n.setPosition(c,{x:u,y:i}),c):d[0]}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e.create=function(a){var n={};return a||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=a||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(v){var o=e._getRelativeMousePosition(v,n.element,n.pixelRatio),u=v.changedTouches;u&&(n.button=0,v.preventDefault()),n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=v},n.mousedown=function(v){var o=e._getRelativeMousePosition(v,n.element,n.pixelRatio),u=v.changedTouches;u?(n.button=0,v.preventDefault()):n.button=v.button,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=v},n.mouseup=function(v){var o=e._getRelativeMousePosition(v,n.element,n.pixelRatio),u=v.changedTouches;u&&v.preventDefault(),n.button=-1,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=v},n.mousewheel=function(v){n.wheelDelta=Math.max(-1,Math.min(1,v.wheelDelta||-v.detail)),v.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(a,n){a.element=n,n.addEventListener("mousemove",a.mousemove),n.addEventListener("mousedown",a.mousedown),n.addEventListener("mouseup",a.mouseup),n.addEventListener("mousewheel",a.mousewheel),n.addEventListener("DOMMouseScroll",a.mousewheel),n.addEventListener("touchmove",a.mousemove),n.addEventListener("touchstart",a.mousedown),n.addEventListener("touchend",a.mouseup)},e.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},e.setOffset=function(a,n){a.offset.x=n.x,a.offset.y=n.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e.setScale=function(a,n){a.scale.x=n.x,a.scale.y=n.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},e._getRelativeMousePosition=function(a,n,v){var o=n.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,r=a.changedTouches,s,h;return r?(s=r[0].pageX-o.left-i,h=r[0].pageY-o.top-t):(s=a.pageX-o.left-i,h=a.pageY-o.top-t),{x:s/(n.clientWidth/(n.width||n.clientWidth)*v),y:h/(n.clientHeight/(n.height||n.clientHeight)*v)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(0),a=g(8);(function(){e.create=function(n){var v={bodies:[],pairs:null};return l.extend(v,n)},e.setBodies=function(n,v){n.bodies=v.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var v=[],o=n.pairs,u=n.bodies,i=u.length,t=e.canCollide,r=a.collides,s,h;for(u.sort(e._compareBoundsX),s=0;s<i;s++){var m=u[s],P=m.bounds,C=m.bounds.max.x,x=m.bounds.max.y,c=m.bounds.min.y,d=m.isStatic||m.isSleeping,f=m.parts.length,y=f===1;for(h=s+1;h<i;h++){var p=u[h],w=p.bounds;if(w.min.x>C)break;if(!(x<w.min.y||c>w.max.y)&&!(d&&(p.isStatic||p.isSleeping))&&!!t(m.collisionFilter,p.collisionFilter)){var S=p.parts.length;if(y&&S===1){var A=r(m,p,o);A&&v.push(A)}else for(var R=f>1?1:0,E=S>1?1:0,L=R;L<f;L++)for(var k=m.parts[L],P=k.bounds,D=E;D<S;D++){var V=p.parts[D],w=V.bounds;if(!(P.min.x>w.max.x||P.max.x<w.min.x||P.max.y<w.min.y||P.min.y>w.max.y)){var A=r(k,V,o);A&&v.push(A)}}}}}return v},e.canCollide=function(n,v){return n.group===v.group&&n.group!==0?n.group>0:(n.mask&v.category)!==0&&(v.mask&n.category)!==0},e._compareBoundsX=function(n,v){return n.bounds.min.x-v.bounds.min.x}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e._registry={},e.register=function(a){if(e.isPlugin(a)||l.warn("Plugin.register:",e.toString(a),"does not implement all required fields."),a.name in e._registry){var n=e._registry[a.name],v=e.versionParse(a.version).number,o=e.versionParse(n.version).number;v>o?(l.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(a)),e._registry[a.name]=a):v<o?l.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(a)):a!==n&&l.warn("Plugin.register:",e.toString(a),"is already registered to different plugin object")}else e._registry[a.name]=a;return a},e.resolve=function(a){return e._registry[e.dependencyParse(a).name]},e.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},e.isPlugin=function(a){return a&&a.name&&a.version&&a.install},e.isUsed=function(a,n){return a.used.indexOf(n)>-1},e.isFor=function(a,n){var v=a.for&&e.dependencyParse(a.for);return!a.for||n.name===v.name&&e.versionSatisfies(n.version,v.range)},e.use=function(a,n){if(a.uses=(a.uses||[]).concat(n||[]),a.uses.length===0){l.warn("Plugin.use:",e.toString(a),"does not specify any dependencies to install.");return}for(var v=e.dependencies(a),o=l.topologicalSort(v),u=[],i=0;i<o.length;i+=1)if(o[i]!==a.name){var t=e.resolve(o[i]);if(!t){u.push("\u274C "+o[i]);continue}e.isUsed(a,t.name)||(e.isFor(t,a)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(a)+"."),t._warned=!0),t.install?t.install(a):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),a.used.push(t.name))}u.length>0&&l.info(u.join("  "))},e.dependencies=function(a,n){var v=e.dependencyParse(a),o=v.name;if(n=n||{},!(o in n)){a=e.resolve(a)||a,n[o]=l.map(a.uses||[],function(i){e.isPlugin(i)&&e.register(i);var t=e.dependencyParse(i),r=e.resolve(i);return r&&!e.versionSatisfies(r.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(r),"does not satisfy",e.toString(t),"used by",e.toString(v)+"."),r._warned=!0,a._warned=!0):r||(l.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(v),"could not be resolved."),a._warned=!0),t.name});for(var u=0;u<n[o].length;u+=1)e.dependencies(n[o][u],n);return n}},e.dependencyParse=function(a){if(l.isString(a)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(a)||l.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},e.versionParse=function(a){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(a)||l.warn("Plugin.versionParse:",a,"is not a valid version or range.");var v=n.exec(a),o=Number(v[4]),u=Number(v[5]),i=Number(v[6]);return{isRange:Boolean(v[1]||v[2]),version:v[3],range:a,operator:v[1]||v[2]||"",major:o,minor:u,patch:i,parts:[o,u,i],prerelease:v[7],number:o*1e8+u*1e4+i}},e.versionSatisfies=function(a,n){n=n||"*";var v=e.versionParse(n),o=e.versionParse(a);if(v.isRange){if(v.operator==="*"||a==="*")return!0;if(v.operator===">")return o.number>v.number;if(v.operator===">=")return o.number>=v.number;if(v.operator==="~")return o.major===v.major&&o.minor===v.minor&&o.patch>=v.patch;if(v.operator==="^")return v.major>0?o.major===v.major&&o.number>=v.number:v.minor>0?o.minor===v.minor&&o.patch>=v.patch:o.patch===v.patch}return a===n||a==="*"}})()},function(M,B,g){var e={};M.exports=e;var l=g(0),a=g(5),n=g(1),v=g(4),o=g(2),u=g(13);(function(){var i,t;typeof window!="undefined"&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(x){window.setTimeout(function(){x(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(x){var c={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!x.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=l.extend(c,x);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=x.mouse,d.engine=x.engine,d.canvas=d.canvas||h(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),l.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(x){(function c(d){x.frameRequestId=i(c),r(x,d),e.world(x,d),(x.options.showStats||x.options.showDebug)&&e.stats(x,x.context,d),(x.options.showPerformance||x.options.showDebug)&&e.performance(x,x.context,d)})()},e.stop=function(x){t(x.frameRequestId)},e.setPixelRatio=function(x,c){var d=x.options,f=x.canvas;c==="auto"&&(c=m(f)),d.pixelRatio=c,f.setAttribute("data-pixel-ratio",c),f.width=d.width*c,f.height=d.height*c,f.style.width=d.width+"px",f.style.height=d.height+"px"},e.lookAt=function(x,c,d,f){f=typeof f!="undefined"?f:!0,c=l.isArray(c)?c:[c],d=d||{x:0,y:0};for(var y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},p=0;p<c.length;p+=1){var w=c[p],S=w.bounds?w.bounds.min:w.min||w.position||w,A=w.bounds?w.bounds.max:w.max||w.position||w;S&&A&&(S.x<y.min.x&&(y.min.x=S.x),A.x>y.max.x&&(y.max.x=A.x),S.y<y.min.y&&(y.min.y=S.y),A.y>y.max.y&&(y.max.y=A.y))}var R=y.max.x-y.min.x+2*d.x,E=y.max.y-y.min.y+2*d.y,L=x.canvas.height,k=x.canvas.width,D=k/L,V=R/E,O=1,W=1;V>D?W=V/D:O=D/V,x.options.hasBounds=!0,x.bounds.min.x=y.min.x,x.bounds.max.x=y.min.x+R*O,x.bounds.min.y=y.min.y,x.bounds.max.y=y.min.y+E*W,f&&(x.bounds.min.x+=R*.5-R*O*.5,x.bounds.max.x+=R*.5-R*O*.5,x.bounds.min.y+=E*.5-E*W*.5,x.bounds.max.y+=E*.5-E*W*.5),x.bounds.min.x-=d.x,x.bounds.max.x-=d.x,x.bounds.min.y-=d.y,x.bounds.max.y-=d.y,x.mouse&&(u.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.canvas.width,y:(x.bounds.max.y-x.bounds.min.y)/x.canvas.height}),u.setOffset(x.mouse,x.bounds.min))},e.startViewTransform=function(x){var c=x.bounds.max.x-x.bounds.min.x,d=x.bounds.max.y-x.bounds.min.y,f=c/x.options.width,y=d/x.options.height;x.context.setTransform(x.options.pixelRatio/f,0,0,x.options.pixelRatio/y,0,0),x.context.translate(-x.bounds.min.x,-x.bounds.min.y)},e.endViewTransform=function(x){x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0)},e.world=function(x,c){var d=l.now(),f=x.engine,y=f.world,p=x.canvas,w=x.context,S=x.options,A=x.timing,R=a.allBodies(y),E=a.allConstraints(y),L=S.wireframes?S.wireframeBackground:S.background,k=[],D=[],V,O={timestamp:f.timing.timestamp};if(v.trigger(x,"beforeRender",O),x.currentBackground!==L&&C(x,L),w.globalCompositeOperation="source-in",w.fillStyle="transparent",w.fillRect(0,0,p.width,p.height),w.globalCompositeOperation="source-over",S.hasBounds){for(V=0;V<R.length;V++){var W=R[V];n.overlaps(W.bounds,x.bounds)&&k.push(W)}for(V=0;V<E.length;V++){var G=E[V],U=G.bodyA,N=G.bodyB,$=G.pointA,z=G.pointB;U&&($=o.add(U.position,G.pointA)),N&&(z=o.add(N.position,G.pointB)),!(!$||!z)&&(n.contains(x.bounds,$)||n.contains(x.bounds,z))&&D.push(G)}e.startViewTransform(x),x.mouse&&(u.setScale(x.mouse,{x:(x.bounds.max.x-x.bounds.min.x)/x.options.width,y:(x.bounds.max.y-x.bounds.min.y)/x.options.height}),u.setOffset(x.mouse,x.bounds.min))}else D=E,k=R,x.options.pixelRatio!==1&&x.context.setTransform(x.options.pixelRatio,0,0,x.options.pixelRatio,0,0);!S.wireframes||f.enableSleeping&&S.showSleeping?e.bodies(x,k,w):(S.showConvexHulls&&e.bodyConvexHulls(x,k,w),e.bodyWireframes(x,k,w)),S.showBounds&&e.bodyBounds(x,k,w),(S.showAxes||S.showAngleIndicator)&&e.bodyAxes(x,k,w),S.showPositions&&e.bodyPositions(x,k,w),S.showVelocity&&e.bodyVelocity(x,k,w),S.showIds&&e.bodyIds(x,k,w),S.showSeparations&&e.separations(x,f.pairs.list,w),S.showCollisions&&e.collisions(x,f.pairs.list,w),S.showVertexNumbers&&e.vertexNumbers(x,k,w),S.showMousePosition&&e.mousePosition(x,x.mouse,w),e.constraints(D,w),S.hasBounds&&e.endViewTransform(x),v.trigger(x,"afterRender",O),A.lastElapsed=l.now()-d},e.stats=function(x,c,d){for(var f=x.engine,y=f.world,p=a.allBodies(y),w=0,S=55,A=44,R=0,E=0,L=0;L<p.length;L+=1)w+=p[L].parts.length;var k={Part:w,Body:p.length,Cons:a.allConstraints(y).length,Comp:a.allComposites(y).length,Pair:f.pairs.list.length};c.fillStyle="#0e0f19",c.fillRect(R,E,S*5.5,A),c.font="12px Arial",c.textBaseline="top",c.textAlign="right";for(var D in k){var V=k[D];c.fillStyle="#aaa",c.fillText(D,R+S,E+8),c.fillStyle="#eee",c.fillText(V,R+S,E+26),R+=S}},e.performance=function(x,c){var d=x.engine,f=x.timing,y=f.deltaHistory,p=f.elapsedHistory,w=f.timestampElapsedHistory,S=f.engineDeltaHistory,A=f.engineElapsedHistory,R=d.timing.lastDelta,E=s(y),L=s(p),k=s(S),D=s(A),V=s(w),O=V/E||0,W=1e3/E||0,G=4,U=12,N=60,$=34,z=10,Q=69;c.fillStyle="#0e0f19",c.fillRect(0,50,U*4+N*5+22,$),e.status(c,z,Q,N,G,y.length,Math.round(W)+" fps",W/e._goodFps,function(Z){return y[Z]/E-1}),e.status(c,z+U+N,Q,N,G,S.length,R.toFixed(2)+" dt",e._goodDelta/R,function(Z){return S[Z]/k-1}),e.status(c,z+(U+N)*2,Q,N,G,A.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(Z){return A[Z]/D-1}),e.status(c,z+(U+N)*3,Q,N,G,p.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(Z){return p[Z]/L-1}),e.status(c,z+(U+N)*4,Q,N,G,w.length,O.toFixed(2)+" x",O*O*O,function(Z){return(w[Z]/y[Z]/O||0)-1})},e.status=function(x,c,d,f,y,p,w,S,A){x.strokeStyle="#888",x.fillStyle="#444",x.lineWidth=1,x.fillRect(c,d+7,f,1),x.beginPath(),x.moveTo(c,d+7-y*l.clamp(.4*A(0),-2,2));for(var R=0;R<f;R+=1)x.lineTo(c+R,d+7-(R<p?y*l.clamp(.4*A(R),-2,2):0));x.stroke(),x.fillStyle="hsl("+l.clamp(25+95*S,0,120)+",100%,60%)",x.fillRect(c,d-7,4,4),x.font="12px Arial",x.textBaseline="middle",x.textAlign="right",x.fillStyle="#eee",x.fillText(w,c+f,d-5)},e.constraints=function(x,c){for(var d=c,f=0;f<x.length;f++){var y=x[f];if(!(!y.render.visible||!y.pointA||!y.pointB)){var p=y.bodyA,w=y.bodyB,S,A;if(p?S=o.add(p.position,y.pointA):S=y.pointA,y.render.type==="pin")d.beginPath(),d.arc(S.x,S.y,3,0,2*Math.PI),d.closePath();else{if(w?A=o.add(w.position,y.pointB):A=y.pointB,d.beginPath(),d.moveTo(S.x,S.y),y.render.type==="spring")for(var R=o.sub(A,S),E=o.perp(o.normalise(R)),L=Math.ceil(l.clamp(y.length/5,12,20)),k,D=1;D<L;D+=1)k=D%2===0?1:-1,d.lineTo(S.x+R.x*(D/L)+E.x*k*4,S.y+R.y*(D/L)+E.y*k*4);d.lineTo(A.x,A.y)}y.render.lineWidth&&(d.lineWidth=y.render.lineWidth,d.strokeStyle=y.render.strokeStyle,d.stroke()),y.render.anchors&&(d.fillStyle=y.render.strokeStyle,d.beginPath(),d.arc(S.x,S.y,3,0,2*Math.PI),d.arc(A.x,A.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(x,c,d){var f=d;x.engine;var y=x.options,p=y.showInternalEdges||!y.wireframes,w,S,A,R;for(A=0;A<c.length;A++)if(w=c[A],!!w.render.visible){for(R=w.parts.length>1?1:0;R<w.parts.length;R++)if(S=w.parts[R],!!S.render.visible){if(y.showSleeping&&w.isSleeping?f.globalAlpha=.5*S.render.opacity:S.render.opacity!==1&&(f.globalAlpha=S.render.opacity),S.render.sprite&&S.render.sprite.texture&&!y.wireframes){var E=S.render.sprite,L=P(x,E.texture);f.translate(S.position.x,S.position.y),f.rotate(S.angle),f.drawImage(L,L.width*-E.xOffset*E.xScale,L.height*-E.yOffset*E.yScale,L.width*E.xScale,L.height*E.yScale),f.rotate(-S.angle),f.translate(-S.position.x,-S.position.y)}else{if(S.circleRadius)f.beginPath(),f.arc(S.position.x,S.position.y,S.circleRadius,0,2*Math.PI);else{f.beginPath(),f.moveTo(S.vertices[0].x,S.vertices[0].y);for(var k=1;k<S.vertices.length;k++)!S.vertices[k-1].isInternal||p?f.lineTo(S.vertices[k].x,S.vertices[k].y):f.moveTo(S.vertices[k].x,S.vertices[k].y),S.vertices[k].isInternal&&!p&&f.moveTo(S.vertices[(k+1)%S.vertices.length].x,S.vertices[(k+1)%S.vertices.length].y);f.lineTo(S.vertices[0].x,S.vertices[0].y),f.closePath()}y.wireframes?(f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()):(f.fillStyle=S.render.fillStyle,S.render.lineWidth&&(f.lineWidth=S.render.lineWidth,f.strokeStyle=S.render.strokeStyle,f.stroke()),f.fill())}f.globalAlpha=1}}},e.bodyWireframes=function(x,c,d){var f=d,y=x.options.showInternalEdges,p,w,S,A,R;for(f.beginPath(),S=0;S<c.length;S++)if(p=c[S],!!p.render.visible)for(R=p.parts.length>1?1:0;R<p.parts.length;R++){for(w=p.parts[R],f.moveTo(w.vertices[0].x,w.vertices[0].y),A=1;A<w.vertices.length;A++)!w.vertices[A-1].isInternal||y?f.lineTo(w.vertices[A].x,w.vertices[A].y):f.moveTo(w.vertices[A].x,w.vertices[A].y),w.vertices[A].isInternal&&!y&&f.moveTo(w.vertices[(A+1)%w.vertices.length].x,w.vertices[(A+1)%w.vertices.length].y);f.lineTo(w.vertices[0].x,w.vertices[0].y)}f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()},e.bodyConvexHulls=function(x,c,d){var f=d,y,p,w;for(f.beginPath(),p=0;p<c.length;p++)if(y=c[p],!(!y.render.visible||y.parts.length===1)){for(f.moveTo(y.vertices[0].x,y.vertices[0].y),w=1;w<y.vertices.length;w++)f.lineTo(y.vertices[w].x,y.vertices[w].y);f.lineTo(y.vertices[0].x,y.vertices[0].y)}f.lineWidth=1,f.strokeStyle="rgba(255,255,255,0.2)",f.stroke()},e.vertexNumbers=function(x,c,d){var f=d,y,p,w;for(y=0;y<c.length;y++){var S=c[y].parts;for(w=S.length>1?1:0;w<S.length;w++){var A=S[w];for(p=0;p<A.vertices.length;p++)f.fillStyle="rgba(255,255,255,0.2)",f.fillText(y+"_"+p,A.position.x+(A.vertices[p].x-A.position.x)*.8,A.position.y+(A.vertices[p].y-A.position.y)*.8)}}},e.mousePosition=function(x,c,d){var f=d;f.fillStyle="rgba(255,255,255,0.8)",f.fillText(c.position.x+"  "+c.position.y,c.position.x+5,c.position.y-5)},e.bodyBounds=function(x,c,d){var f=d;x.engine;var y=x.options;f.beginPath();for(var p=0;p<c.length;p++){var w=c[p];if(w.render.visible)for(var S=c[p].parts,A=S.length>1?1:0;A<S.length;A++){var R=S[A];f.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}y.wireframes?f.strokeStyle="rgba(255,255,255,0.08)":f.strokeStyle="rgba(0,0,0,0.1)",f.lineWidth=1,f.stroke()},e.bodyAxes=function(x,c,d){var f=d;x.engine;var y=x.options,p,w,S,A;for(f.beginPath(),w=0;w<c.length;w++){var R=c[w],E=R.parts;if(!!R.render.visible)if(y.showAxes)for(S=E.length>1?1:0;S<E.length;S++)for(p=E[S],A=0;A<p.axes.length;A++){var L=p.axes[A];f.moveTo(p.position.x,p.position.y),f.lineTo(p.position.x+L.x*20,p.position.y+L.y*20)}else for(S=E.length>1?1:0;S<E.length;S++)for(p=E[S],A=0;A<p.axes.length;A++)f.moveTo(p.position.x,p.position.y),f.lineTo((p.vertices[0].x+p.vertices[p.vertices.length-1].x)/2,(p.vertices[0].y+p.vertices[p.vertices.length-1].y)/2)}y.wireframes?(f.strokeStyle="indianred",f.lineWidth=1):(f.strokeStyle="rgba(255, 255, 255, 0.4)",f.globalCompositeOperation="overlay",f.lineWidth=2),f.stroke(),f.globalCompositeOperation="source-over"},e.bodyPositions=function(x,c,d){var f=d;x.engine;var y=x.options,p,w,S,A;for(f.beginPath(),S=0;S<c.length;S++)if(p=c[S],!!p.render.visible)for(A=0;A<p.parts.length;A++)w=p.parts[A],f.arc(w.position.x,w.position.y,3,0,2*Math.PI,!1),f.closePath();for(y.wireframes?f.fillStyle="indianred":f.fillStyle="rgba(0,0,0,0.5)",f.fill(),f.beginPath(),S=0;S<c.length;S++)p=c[S],p.render.visible&&(f.arc(p.positionPrev.x,p.positionPrev.y,2,0,2*Math.PI,!1),f.closePath());f.fillStyle="rgba(255,165,0,0.8)",f.fill()},e.bodyVelocity=function(x,c,d){var f=d;f.beginPath();for(var y=0;y<c.length;y++){var p=c[y];!p.render.visible||(f.moveTo(p.position.x,p.position.y),f.lineTo(p.position.x+(p.position.x-p.positionPrev.x)*2,p.position.y+(p.position.y-p.positionPrev.y)*2))}f.lineWidth=3,f.strokeStyle="cornflowerblue",f.stroke()},e.bodyIds=function(x,c,d){var f=d,y,p;for(y=0;y<c.length;y++)if(!!c[y].render.visible){var w=c[y].parts;for(p=w.length>1?1:0;p<w.length;p++){var S=w[p];f.font="12px Arial",f.fillStyle="rgba(255,255,255,0.5)",f.fillText(S.id,S.position.x+10,S.position.y-10)}}},e.collisions=function(x,c,d){var f=d,y=x.options,p,w,S,A;for(f.beginPath(),S=0;S<c.length;S++)if(p=c[S],!!p.isActive)for(w=p.collision,A=0;A<p.activeContacts.length;A++){var R=p.activeContacts[A],E=R.vertex;f.rect(E.x-1.5,E.y-1.5,3.5,3.5)}for(y.wireframes?f.fillStyle="rgba(255,255,255,0.7)":f.fillStyle="orange",f.fill(),f.beginPath(),S=0;S<c.length;S++)if(p=c[S],!!p.isActive&&(w=p.collision,p.activeContacts.length>0)){var L=p.activeContacts[0].vertex.x,k=p.activeContacts[0].vertex.y;p.activeContacts.length===2&&(L=(p.activeContacts[0].vertex.x+p.activeContacts[1].vertex.x)/2,k=(p.activeContacts[0].vertex.y+p.activeContacts[1].vertex.y)/2),w.bodyB===w.supports[0].body||w.bodyA.isStatic===!0?f.moveTo(L-w.normal.x*8,k-w.normal.y*8):f.moveTo(L+w.normal.x*8,k+w.normal.y*8),f.lineTo(L,k)}y.wireframes?f.strokeStyle="rgba(255,165,0,0.7)":f.strokeStyle="orange",f.lineWidth=1,f.stroke()},e.separations=function(x,c,d){var f=d,y=x.options,p,w,S,A,R;for(f.beginPath(),R=0;R<c.length;R++)if(p=c[R],!!p.isActive){w=p.collision,S=w.bodyA,A=w.bodyB;var E=1;!A.isStatic&&!S.isStatic&&(E=.5),A.isStatic&&(E=0),f.moveTo(A.position.x,A.position.y),f.lineTo(A.position.x-w.penetration.x*E,A.position.y-w.penetration.y*E),E=1,!A.isStatic&&!S.isStatic&&(E=.5),S.isStatic&&(E=0),f.moveTo(S.position.x,S.position.y),f.lineTo(S.position.x+w.penetration.x*E,S.position.y+w.penetration.y*E)}y.wireframes?f.strokeStyle="rgba(255,165,0,0.5)":f.strokeStyle="orange",f.stroke()},e.inspector=function(x,c){x.engine;var d=x.selected,f=x.render,y=f.options,p;if(y.hasBounds){var w=f.bounds.max.x-f.bounds.min.x,S=f.bounds.max.y-f.bounds.min.y,A=w/f.options.width,R=S/f.options.height;c.scale(1/A,1/R),c.translate(-f.bounds.min.x,-f.bounds.min.y)}for(var E=0;E<d.length;E++){var L=d[E].data;switch(c.translate(.5,.5),c.lineWidth=1,c.strokeStyle="rgba(255,165,0,0.9)",c.setLineDash([1,2]),L.type){case"body":p=L.bounds,c.beginPath(),c.rect(Math.floor(p.min.x-3),Math.floor(p.min.y-3),Math.floor(p.max.x-p.min.x+6),Math.floor(p.max.y-p.min.y+6)),c.closePath(),c.stroke();break;case"constraint":var k=L.pointA;L.bodyA&&(k=L.pointB),c.beginPath(),c.arc(k.x,k.y,10,0,2*Math.PI),c.closePath(),c.stroke();break}c.setLineDash([]),c.translate(-.5,-.5)}x.selectStart!==null&&(c.translate(.5,.5),c.lineWidth=1,c.strokeStyle="rgba(255,165,0,0.6)",c.fillStyle="rgba(255,165,0,0.1)",p=x.selectBounds,c.beginPath(),c.rect(Math.floor(p.min.x),Math.floor(p.min.y),Math.floor(p.max.x-p.min.x),Math.floor(p.max.y-p.min.y)),c.closePath(),c.stroke(),c.fill(),c.translate(-.5,-.5)),y.hasBounds&&c.setTransform(1,0,0,1,0,0)};var r=function(x,c){var d=x.engine,f=x.timing,y=f.historySize,p=d.timing.timestamp;f.delta=c-f.lastTime||e._goodDelta,f.lastTime=c,f.timestampElapsed=p-f.lastTimestamp||0,f.lastTimestamp=p,f.deltaHistory.unshift(f.delta),f.deltaHistory.length=Math.min(f.deltaHistory.length,y),f.engineDeltaHistory.unshift(d.timing.lastDelta),f.engineDeltaHistory.length=Math.min(f.engineDeltaHistory.length,y),f.timestampElapsedHistory.unshift(f.timestampElapsed),f.timestampElapsedHistory.length=Math.min(f.timestampElapsedHistory.length,y),f.engineElapsedHistory.unshift(d.timing.lastElapsed),f.engineElapsedHistory.length=Math.min(f.engineElapsedHistory.length,y),f.elapsedHistory.unshift(f.lastElapsed),f.elapsedHistory.length=Math.min(f.elapsedHistory.length,y)},s=function(x){for(var c=0,d=0;d<x.length;d+=1)c+=x[d];return c/x.length||0},h=function(x,c){var d=document.createElement("canvas");return d.width=x,d.height=c,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},m=function(x){var c=x.getContext("2d"),d=window.devicePixelRatio||1,f=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1;return d/f},P=function(x,c){var d=x.textures[c];return d||(d=x.textures[c]=new Image,d.src=c,d)},C=function(x,c){var d=c;/(jpg|gif|png)$/.test(c)&&(d="url("+c+")"),x.canvas.style.background=d,x.canvas.style.backgroundSize="contain",x.currentBackground=c}})()},function(M,B){var g={};M.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(M,B,g){var e={};M.exports=e;var l=g(7),a=g(19),n=g(14),v=g(20),o=g(4),u=g(5),i=g(10),t=g(0),r=g(6);(function(){e.create=function(s){s=s||{};var h={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},m=t.extend(h,s);return m.world=s.world||u.create({label:"World"}),m.pairs=s.pairs||v.create(),m.detector=s.detector||n.create(),m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},e.update=function(s,h,m){var P=t.now();h=h||1e3/60,m=m||1;var C=s.world,x=s.detector,c=s.pairs,d=s.timing,f=d.timestamp,y;d.timestamp+=h*d.timeScale,d.lastDelta=h*d.timeScale;var p={timestamp:d.timestamp};o.trigger(s,"beforeUpdate",p);var w=u.allBodies(C),S=u.allConstraints(C);for(C.isModified&&n.setBodies(x,w),C.isModified&&u.setModified(C,!1,!1,!0),s.enableSleeping&&l.update(w,d.timeScale),e._bodiesApplyGravity(w,s.gravity),e._bodiesUpdate(w,h,d.timeScale,m,C.bounds),i.preSolveAll(w),y=0;y<s.constraintIterations;y++)i.solveAll(S,d.timeScale);i.postSolveAll(w),x.pairs=s.pairs;var A=n.collisions(x);for(v.update(c,A,f),s.enableSleeping&&l.afterCollisions(c.list,d.timeScale),c.collisionStart.length>0&&o.trigger(s,"collisionStart",{pairs:c.collisionStart}),a.preSolvePosition(c.list),y=0;y<s.positionIterations;y++)a.solvePosition(c.list,d.timeScale);for(a.postSolvePosition(w),i.preSolveAll(w),y=0;y<s.constraintIterations;y++)i.solveAll(S,d.timeScale);for(i.postSolveAll(w),a.preSolveVelocity(c.list),y=0;y<s.velocityIterations;y++)a.solveVelocity(c.list,d.timeScale);return c.collisionActive.length>0&&o.trigger(s,"collisionActive",{pairs:c.collisionActive}),c.collisionEnd.length>0&&o.trigger(s,"collisionEnd",{pairs:c.collisionEnd}),e._bodiesClearForces(w),o.trigger(s,"afterUpdate",p),s.timing.lastElapsed=t.now()-P,s},e.merge=function(s,h){if(t.extend(s,h),h.world){s.world=h.world,e.clear(s);for(var m=u.allBodies(s.world),P=0;P<m.length;P++){var C=m[P];l.set(C,!1),C.id=t.nextId()}}},e.clear=function(s){v.clear(s.pairs),n.clear(s.detector)},e._bodiesClearForces=function(s){for(var h=0;h<s.length;h++){var m=s[h];m.force.x=0,m.force.y=0,m.torque=0}},e._bodiesApplyGravity=function(s,h){var m=typeof h.scale!="undefined"?h.scale:.001;if(!(h.x===0&&h.y===0||m===0))for(var P=0;P<s.length;P++){var C=s[P];C.isStatic||C.isSleeping||(C.force.y+=C.mass*h.y*m,C.force.x+=C.mass*h.x*m)}},e._bodiesUpdate=function(s,h,m,P,C){for(var x=0;x<s.length;x++){var c=s[x];c.isStatic||c.isSleeping||r.update(c,h,m,P)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var v,o,u,i=n.length;for(v=0;v<i;v++)o=n[v],o.isActive&&(u=o.activeContacts.length,o.collision.parentA.totalContacts+=u,o.collision.parentB.totalContacts+=u)},e.solvePosition=function(n,v){var o,u,i,t,r,s,h,m,P=e._positionDampen,C=n.length;for(o=0;o<C;o++)u=n[o],!(!u.isActive||u.isSensor)&&(i=u.collision,t=i.parentA,r=i.parentB,s=i.normal,u.separation=s.x*(r.positionImpulse.x+i.penetration.x-t.positionImpulse.x)+s.y*(r.positionImpulse.y+i.penetration.y-t.positionImpulse.y));for(o=0;o<C;o++)u=n[o],!(!u.isActive||u.isSensor)&&(i=u.collision,t=i.parentA,r=i.parentB,s=i.normal,m=(u.separation-u.slop)*v,(t.isStatic||r.isStatic)&&(m*=2),t.isStatic||t.isSleeping||(h=P/t.totalContacts,t.positionImpulse.x+=s.x*m*h,t.positionImpulse.y+=s.y*m*h),r.isStatic||r.isSleeping||(h=P/r.totalContacts,r.positionImpulse.x-=s.x*m*h,r.positionImpulse.y-=s.y*m*h))},e.postSolvePosition=function(n){for(var v=e._positionWarming,o=n.length,u=l.translate,i=a.update,t=0;t<o;t++){var r=n[t],s=r.positionImpulse,h=s.x,m=s.y,P=r.velocity;if(r.totalContacts=0,h!==0||m!==0){for(var C=0;C<r.parts.length;C++){var x=r.parts[C];u(x.vertices,s),i(x.bounds,x.vertices,P),x.position.x+=h,x.position.y+=m}r.positionPrev.x+=h,r.positionPrev.y+=m,h*P.x+m*P.y<0?(s.x=0,s.y=0):(s.x*=v,s.y*=v)}}},e.preSolveVelocity=function(n){var v=n.length,o,u;for(o=0;o<v;o++){var i=n[o];if(!(!i.isActive||i.isSensor)){var t=i.activeContacts,r=t.length,s=i.collision,h=s.parentA,m=s.parentB,P=s.normal,C=s.tangent;for(u=0;u<r;u++){var x=t[u],c=x.vertex,d=x.normalImpulse,f=x.tangentImpulse;if(d!==0||f!==0){var y=P.x*d+C.x*f,p=P.y*d+C.y*f;h.isStatic||h.isSleeping||(h.positionPrev.x+=y*h.inverseMass,h.positionPrev.y+=p*h.inverseMass,h.anglePrev+=h.inverseInertia*((c.x-h.position.x)*p-(c.y-h.position.y)*y)),m.isStatic||m.isSleeping||(m.positionPrev.x-=y*m.inverseMass,m.positionPrev.y-=p*m.inverseMass,m.anglePrev-=m.inverseInertia*((c.x-m.position.x)*p-(c.y-m.position.y)*y))}}}}},e.solveVelocity=function(n,v){var o=v*v,u=e._restingThresh*o,i=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,r=Number.MAX_VALUE,s=n.length,h,m,P,C;for(P=0;P<s;P++){var x=n[P];if(!(!x.isActive||x.isSensor)){var c=x.collision,d=c.parentA,f=c.parentB,y=d.velocity,p=f.velocity,w=c.normal.x,S=c.normal.y,A=c.tangent.x,R=c.tangent.y,E=x.activeContacts,L=E.length,k=1/L,D=d.inverseMass+f.inverseMass,V=x.friction*x.frictionStatic*i*o;for(y.x=d.position.x-d.positionPrev.x,y.y=d.position.y-d.positionPrev.y,p.x=f.position.x-f.positionPrev.x,p.y=f.position.y-f.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,f.angularVelocity=f.angle-f.anglePrev,C=0;C<L;C++){var O=E[C],W=O.vertex,G=W.x-d.position.x,U=W.y-d.position.y,N=W.x-f.position.x,$=W.y-f.position.y,z=y.x-U*d.angularVelocity,Q=y.y+G*d.angularVelocity,Z=p.x-$*f.angularVelocity,Be=p.y+N*f.angularVelocity,ge=z-Z,xe=Q-Be,X=w*ge+S*xe,J=A*ge+R*xe,de=x.separation+X,oe=Math.min(de,1);oe=de<0?0:oe;var me=oe*V;J>me||-J>me?(m=J>0?J:-J,h=x.friction*(J>0?1:-1)*o,h<-m?h=-m:h>m&&(h=m)):(h=J,m=r);var pe=G*S-U*w,ye=N*S-$*w,Se=k/(D+d.inverseInertia*pe*pe+f.inverseInertia*ye*ye),_=(1+x.restitution)*X*Se;if(h*=Se,X*X>u&&X<0)O.normalImpulse=0;else{var Re=O.normalImpulse;O.normalImpulse+=_,O.normalImpulse=Math.min(O.normalImpulse,0),_=O.normalImpulse-Re}if(J*J>t)O.tangentImpulse=0;else{var Ee=O.tangentImpulse;O.tangentImpulse+=h,O.tangentImpulse<-m&&(O.tangentImpulse=-m),O.tangentImpulse>m&&(O.tangentImpulse=m),h=O.tangentImpulse-Ee}var ee=w*_+A*h,te=S*_+R*h;d.isStatic||d.isSleeping||(d.positionPrev.x+=ee*d.inverseMass,d.positionPrev.y+=te*d.inverseMass,d.anglePrev+=(G*te-U*ee)*d.inverseInertia),f.isStatic||f.isSleeping||(f.positionPrev.x-=ee*f.inverseMass,f.positionPrev.y-=te*f.inverseMass,f.anglePrev-=(N*te-$*ee)*f.inverseInertia)}}}}})()},function(M,B,g){var e={};M.exports=e;var l=g(9),a=g(0);(function(){e.create=function(n){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,v,o){var u=n.list,i=u.length,t=n.table,r=v.length,s=n.collisionStart,h=n.collisionEnd,m=n.collisionActive,P,C,x,c;for(s.length=0,h.length=0,m.length=0,c=0;c<i;c++)u[c].confirmedActive=!1;for(c=0;c<r;c++)P=v[c],x=P.pair,x?(x.isActive?m.push(x):s.push(x),l.update(x,P,o),x.confirmedActive=!0):(x=l.create(P,o),t[x.id]=x,s.push(x),u.push(x));var d=[];for(i=u.length,c=0;c<i;c++)x=u[c],x.confirmedActive||(l.setActive(x,!1,o),h.push(x),!x.collision.bodyA.isSleeping&&!x.collision.bodyB.isSleeping&&d.push(c));for(c=0;c<d.length;c++)C=d[c]-c,x=u[C],u.splice(C,1),delete t[x.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(M,B,g){var e=M.exports=g(22);e.Axes=g(11),e.Bodies=g(12),e.Body=g(6),e.Bounds=g(1),e.Collision=g(8),e.Common=g(0),e.Composite=g(5),e.Composites=g(23),e.Constraint=g(10),e.Contact=g(17),e.Detector=g(14),e.Engine=g(18),e.Events=g(4),e.Grid=g(24),e.Mouse=g(13),e.MouseConstraint=g(25),e.Pair=g(9),e.Pairs=g(20),e.Plugin=g(15),e.Query=g(26),e.Render=g(16),e.Resolver=g(19),e.Runner=g(27),e.SAT=g(28),e.Sleeping=g(7),e.Svg=g(29),e.Vector=g(2),e.Vertices=g(3),e.World=g(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(M,B,g){var e={};M.exports=e;var l=g(15),a=g(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,v){return n=n.replace(/^Matter./,""),a.chainPathBefore(e,n,v)},e.after=function(n,v){return n=n.replace(/^Matter./,""),a.chainPathAfter(e,n,v)}})()},function(M,B,g){var e={};M.exports=e;var l=g(5),a=g(10),n=g(0),v=g(6),o=g(12),u=n.deprecated;(function(){e.stack=function(i,t,r,s,h,m,P){for(var C=l.create({label:"Stack"}),x=i,c=t,d,f=0,y=0;y<s;y++){for(var p=0,w=0;w<r;w++){var S=P(x,c,w,y,d,f);if(S){var A=S.bounds.max.y-S.bounds.min.y,R=S.bounds.max.x-S.bounds.min.x;A>p&&(p=A),v.translate(S,{x:R*.5,y:A*.5}),x=S.bounds.max.x+h,l.addBody(C,S),d=S,f+=1}else x+=h}c+=p+m,x=i}return C},e.chain=function(i,t,r,s,h,m){for(var P=i.bodies,C=1;C<P.length;C++){var x=P[C-1],c=P[C],d=x.bounds.max.y-x.bounds.min.y,f=x.bounds.max.x-x.bounds.min.x,y=c.bounds.max.y-c.bounds.min.y,p=c.bounds.max.x-c.bounds.min.x,w={bodyA:x,pointA:{x:f*t,y:d*r},bodyB:c,pointB:{x:p*s,y:y*h}},S=n.extend(w,m);l.addConstraint(i,a.create(S))}return i.label+=" Chain",i},e.mesh=function(i,t,r,s,h){var m=i.bodies,P,C,x,c,d;for(P=0;P<r;P++){for(C=1;C<t;C++)x=m[C-1+P*t],c=m[C+P*t],l.addConstraint(i,a.create(n.extend({bodyA:x,bodyB:c},h)));if(P>0)for(C=0;C<t;C++)x=m[C+(P-1)*t],c=m[C+P*t],l.addConstraint(i,a.create(n.extend({bodyA:x,bodyB:c},h))),s&&C>0&&(d=m[C-1+(P-1)*t],l.addConstraint(i,a.create(n.extend({bodyA:d,bodyB:c},h)))),s&&C<t-1&&(d=m[C+1+(P-1)*t],l.addConstraint(i,a.create(n.extend({bodyA:d,bodyB:c},h))))}return i.label+=" Mesh",i},e.pyramid=function(i,t,r,s,h,m,P){return e.stack(i,t,r,s,h,m,function(C,x,c,d,f,y){var p=Math.min(s,Math.ceil(r/2)),w=f?f.bounds.max.x-f.bounds.min.x:0;if(!(d>p)){d=p-d;var S=d,A=r-1-d;if(!(c<S||c>A)){y===1&&v.translate(f,{x:(c+(r%2===1?1:-1))*w,y:0});var R=f?c*w:0;return P(i+R+c*h,x,c,d,f,y)}}})},e.newtonsCradle=function(i,t,r,s,h){for(var m=l.create({label:"Newtons Cradle"}),P=0;P<r;P++){var C=1.9,x=o.circle(i+P*(s*C),t+h,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=a.create({pointA:{x:i+P*(s*C),y:t},bodyB:x});l.addBody(m,x),l.addConstraint(m,c)}return m},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(i,t,r,s,h){var m=v.nextGroup(!0),P=20,C=-r*.5+P,x=r*.5-P,c=0,d=l.create({label:"Car"}),f=o.rectangle(i,t,r,s,{collisionFilter:{group:m},chamfer:{radius:s*.5},density:2e-4}),y=o.circle(i+C,t+c,h,{collisionFilter:{group:m},friction:.8}),p=o.circle(i+x,t+c,h,{collisionFilter:{group:m},friction:.8}),w=a.create({bodyB:f,pointB:{x:C,y:c},bodyA:y,stiffness:1,length:0}),S=a.create({bodyB:f,pointB:{x,y:c},bodyA:p,stiffness:1,length:0});return l.addBody(d,f),l.addBody(d,y),l.addBody(d,p),l.addConstraint(d,w),l.addConstraint(d,S),d},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(i,t,r,s,h,m,P,C,x,c){x=n.extend({inertia:1/0},x),c=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},c);var d=e.stack(i,t,r,s,h,m,function(f,y){return o.circle(f,y,C,x)});return e.mesh(d,r,s,P,c),d.label="Soft Body",d},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(M,B,g){var e={};M.exports=e;var l=g(9),a=g(0),n=a.deprecated;(function(){e.create=function(v){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(o,v)},e.update=function(v,o,u,i){var t,r,s,h=u.world,m=v.buckets,P,C,x=!1;for(t=0;t<o.length;t++){var c=o[t];if(!(c.isSleeping&&!i)&&!(h.bounds&&(c.bounds.max.x<h.bounds.min.x||c.bounds.min.x>h.bounds.max.x||c.bounds.max.y<h.bounds.min.y||c.bounds.min.y>h.bounds.max.y))){var d=e._getRegion(v,c);if(!c.region||d.id!==c.region.id||i){(!c.region||i)&&(c.region=d);var f=e._regionUnion(d,c.region);for(r=f.startCol;r<=f.endCol;r++)for(s=f.startRow;s<=f.endRow;s++){C=e._getBucketId(r,s),P=m[C];var y=r>=d.startCol&&r<=d.endCol&&s>=d.startRow&&s<=d.endRow,p=r>=c.region.startCol&&r<=c.region.endCol&&s>=c.region.startRow&&s<=c.region.endRow;!y&&p&&p&&P&&e._bucketRemoveBody(v,P,c),(c.region===d||y&&!p||i)&&(P||(P=e._createBucket(m,C)),e._bucketAddBody(v,P,c))}c.region=d,x=!0}}}x&&(v.pairsList=e._createActivePairsList(v))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(v){v.buckets={},v.pairs={},v.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(v,o){var u=Math.min(v.startCol,o.startCol),i=Math.max(v.endCol,o.endCol),t=Math.min(v.startRow,o.startRow),r=Math.max(v.endRow,o.endRow);return e._createRegion(u,i,t,r)},e._getRegion=function(v,o){var u=o.bounds,i=Math.floor(u.min.x/v.bucketWidth),t=Math.floor(u.max.x/v.bucketWidth),r=Math.floor(u.min.y/v.bucketHeight),s=Math.floor(u.max.y/v.bucketHeight);return e._createRegion(i,t,r,s)},e._createRegion=function(v,o,u,i){return{id:v+","+o+","+u+","+i,startCol:v,endCol:o,startRow:u,endRow:i}},e._getBucketId=function(v,o){return"C"+v+"R"+o},e._createBucket=function(v,o){var u=v[o]=[];return u},e._bucketAddBody=function(v,o,u){var i=v.pairs,t=l.id,r=o.length,s;for(s=0;s<r;s++){var h=o[s];if(!(u.id===h.id||u.isStatic&&h.isStatic)){var m=t(u,h),P=i[m];P?P[2]+=1:i[m]=[u,h,1]}}o.push(u)},e._bucketRemoveBody=function(v,o,u){var i=v.pairs,t=l.id,r;o.splice(a.indexOf(o,u),1);var s=o.length;for(r=0;r<s;r++){var h=i[t(u,o[r])];h&&(h[2]-=1)}},e._createActivePairsList=function(v){var o,u=v.pairs,i=a.keys(u),t=i.length,r=[],s;for(s=0;s<t;s++)o=u[i[s]],o[2]>0?r.push(o):delete u[i[s]];return r}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),a=g(7),n=g(13),v=g(4),o=g(14),u=g(10),i=g(5),t=g(0),r=g(1);(function(){e.create=function(s,h){var m=(s?s.mouse:null)||(h?h.mouse:null);m||(s&&s.render&&s.render.canvas?m=n.create(s.render.canvas):h&&h.element?m=n.create(h.element):(m=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var P=u.create({label:"Mouse Constraint",pointA:m.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:m,element:null,body:null,constraint:P,collisionFilter:{category:1,mask:4294967295,group:0}},x=t.extend(C,h);return v.on(s,"beforeUpdate",function(){var c=i.allBodies(s.world);e.update(x,c),e._triggerEvents(x)}),x},e.update=function(s,h){var m=s.mouse,P=s.constraint,C=s.body;if(m.button===0){if(P.bodyB)a.set(P.bodyB,!1),P.pointA=m.position;else for(var x=0;x<h.length;x++)if(C=h[x],r.contains(C.bounds,m.position)&&o.canCollide(C.collisionFilter,s.collisionFilter))for(var c=C.parts.length>1?1:0;c<C.parts.length;c++){var d=C.parts[c];if(l.contains(d.vertices,m.position)){P.pointA=m.position,P.bodyB=s.body=C,P.pointB={x:m.position.x-C.position.x,y:m.position.y-C.position.y},P.angleB=C.angle,a.set(C,!1),v.trigger(s,"startdrag",{mouse:m,body:C});break}}}else P.bodyB=s.body=null,P.pointB=null,C&&v.trigger(s,"enddrag",{mouse:m,body:C})},e._triggerEvents=function(s){var h=s.mouse,m=h.sourceEvents;m.mousemove&&v.trigger(s,"mousemove",{mouse:h}),m.mousedown&&v.trigger(s,"mousedown",{mouse:h}),m.mouseup&&v.trigger(s,"mouseup",{mouse:h}),n.clearSourceEvents(h)}})()},function(M,B,g){var e={};M.exports=e;var l=g(2),a=g(8),n=g(1),v=g(12),o=g(3);(function(){e.collides=function(u,i){for(var t=[],r=i.length,s=u.bounds,h=a.collides,m=n.overlaps,P=0;P<r;P++){var C=i[P],x=C.parts.length,c=x===1?0:1;if(m(C.bounds,s))for(var d=c;d<x;d++){var f=C.parts[d];if(m(f.bounds,s)){var y=h(f,u);if(y){t.push(y);break}}}}return t},e.ray=function(u,i,t,r){r=r||1e-100;for(var s=l.angle(i,t),h=l.magnitude(l.sub(i,t)),m=(t.x+i.x)*.5,P=(t.y+i.y)*.5,C=v.rectangle(m,P,h,r,{angle:s}),x=e.collides(C,u),c=0;c<x.length;c+=1){var d=x[c];d.body=d.bodyB=d.bodyA}return x},e.region=function(u,i,t){for(var r=[],s=0;s<u.length;s++){var h=u[s],m=n.overlaps(h.bounds,i);(m&&!t||!m&&t)&&r.push(h)}return r},e.point=function(u,i){for(var t=[],r=0;r<u.length;r++){var s=u[r];if(n.contains(s.bounds,i))for(var h=s.parts.length===1?0:1;h<s.parts.length;h++){var m=s.parts[h];if(n.contains(m.bounds,i)&&o.contains(m.vertices,i)){t.push(s);break}}}return t}})()},function(M,B,g){var e={};M.exports=e;var l=g(4),a=g(18),n=g(0);(function(){var v,o;if(typeof window!="undefined"&&(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!v){var u;v=function(i){u=setTimeout(function(){i(n.now())},1e3/60)},o=function(){clearTimeout(u)}}e.create=function(i){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},r=n.extend(t,i);return r.delta=r.delta||1e3/r.fps,r.deltaMin=r.deltaMin||1e3/r.fps,r.deltaMax=r.deltaMax||1e3/(r.fps*.5),r.fps=1e3/r.delta,r},e.run=function(i,t){return typeof i.positionIterations!="undefined"&&(t=i,i=e.create()),function r(s){i.frameRequestId=v(r),s&&i.enabled&&e.tick(i,t,s)}(),i},e.tick=function(i,t,r){var s=t.timing,h=1,m,P={timestamp:s.timestamp};l.trigger(i,"beforeTick",P),i.isFixed?m=i.delta:(m=r-i.timePrev||i.delta,i.timePrev=r,i.deltaHistory.push(m),i.deltaHistory=i.deltaHistory.slice(-i.deltaSampleSize),m=Math.min.apply(null,i.deltaHistory),m=m<i.deltaMin?i.deltaMin:m,m=m>i.deltaMax?i.deltaMax:m,h=m/i.delta,i.delta=m),i.timeScalePrev!==0&&(h*=s.timeScale/i.timeScalePrev),s.timeScale===0&&(h=0),i.timeScalePrev=s.timeScale,i.correction=h,i.frameCounter+=1,r-i.counterTimestamp>=1e3&&(i.fps=i.frameCounter*((r-i.counterTimestamp)/1e3),i.counterTimestamp=r,i.frameCounter=0),l.trigger(i,"tick",P),l.trigger(i,"beforeUpdate",P),a.update(t,m,h),l.trigger(i,"afterUpdate",P),l.trigger(i,"afterTick",P)},e.stop=function(i){o(i.frameRequestId)},e.start=function(i,t){e.run(i,t)}})()},function(M,B,g){var e={};M.exports=e;var l=g(8),a=g(0),n=a.deprecated;(function(){e.collides=function(v,o){return l.collides(v,o)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(M,B,g){var e={};M.exports=e,g(1);var l=g(0);(function(){e.pathToVertices=function(a,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var v,o,u,i,t,r,s,h,m,P,C=[],x,c,d=0,f=0,y=0;n=n||15;var p=function(S,A,R){var E=R%2===1&&R>1;if(!m||S!=m.x||A!=m.y){m&&E?(x=m.x,c=m.y):(x=0,c=0);var L={x:x+S,y:c+A};(E||!m)&&(m=L),C.push(L),f=x+S,y=c+A}},w=function(S){var A=S.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":f=S.x,y=S.y;break;case"H":f=S.x;break;case"V":y=S.y;break}p(f,y,S.pathSegType)}};for(e._svgPathToAbsolute(a),u=a.getTotalLength(),r=[],v=0;v<a.pathSegList.numberOfItems;v+=1)r.push(a.pathSegList.getItem(v));for(s=r.concat();d<u;){if(P=a.getPathSegAtLength(d),t=r[P],t!=h){for(;s.length&&s[0]!=t;)w(s.shift());h=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=a.getPointAtLength(d),p(i.x,i.y,0);break}d+=n}for(v=0,o=s.length;v<o;++v)w(s[v]);return C},e._svgPathToAbsolute=function(a){for(var n,v,o,u,i,t,r=a.pathSegList,s=0,h=0,m=r.numberOfItems,P=0;P<m;++P){var C=r.getItem(P),x=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(x))"x"in C&&(s=C.x),"y"in C&&(h=C.y);else switch("x1"in C&&(o=s+C.x1),"x2"in C&&(i=s+C.x2),"y1"in C&&(u=h+C.y1),"y2"in C&&(t=h+C.y2),"x"in C&&(s+=C.x),"y"in C&&(h+=C.y),x){case"m":r.replaceItem(a.createSVGPathSegMovetoAbs(s,h),P);break;case"l":r.replaceItem(a.createSVGPathSegLinetoAbs(s,h),P);break;case"h":r.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(s),P);break;case"v":r.replaceItem(a.createSVGPathSegLinetoVerticalAbs(h),P);break;case"c":r.replaceItem(a.createSVGPathSegCurvetoCubicAbs(s,h,o,u,i,t),P);break;case"s":r.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(s,h,i,t),P);break;case"q":r.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(s,h,o,u),P);break;case"t":r.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(s,h),P);break;case"a":r.replaceItem(a.createSVGPathSegArcAbs(s,h,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),P);break;case"z":case"Z":s=n,h=v;break}(x=="M"||x=="m")&&(n=s,v=h)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(5);g(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(H);var he={exports:{}};(function(I,T){(function(M,B){{var g=B();I&&I.exports&&(T=I.exports=g),T.randomColor=g}})(ie,function(){var M=null,B={};m();var g=[],e=function(f){if(f=f||{},f.seed!==void 0&&f.seed!==null&&f.seed===parseInt(f.seed,10))M=f.seed;else if(typeof f.seed=="string")M=c(f.seed);else{if(f.seed!==void 0&&f.seed!==null)throw new TypeError("The seed value must be an integer or string");M=null}var y,p,w;if(f.count!==null&&f.count!==void 0){for(var S=f.count,A=[],R=0;R<f.count;R++)g.push(!1);for(f.count=null;S>A.length;){var E=e(f);M!==null&&(f.seed=M),A.push(E)}return f.count=S,A}return y=l(f),p=a(y,f),w=n(y,p,f),v([y,p,w],f)};function l(f){if(g.length>0){var y=d(f.hue),p=r(y),w=(y[1]-y[0])/g.length,S=parseInt((p-y[0])/w);g[S]===!0?S=(S+2)%g.length:g[S]=!0;var A=(y[0]+S*w)%359,R=(y[0]+(S+1)*w)%359;return y=[A,R],p=r(y),p<0&&(p=360+p),p}else{var y=u(f.hue);return p=r(y),p<0&&(p=360+p),p}}function a(f,y){if(y.hue==="monochrome")return 0;if(y.luminosity==="random")return r([0,100]);var p=i(f),w=p[0],S=p[1];switch(y.luminosity){case"bright":w=55;break;case"dark":w=S-10;break;case"light":S=55;break}return r([w,S])}function n(f,y,p){var w=o(f,y),S=100;switch(p.luminosity){case"dark":S=w+20;break;case"light":w=(S+w)/2;break;case"random":w=0,S=100;break}return r([w,S])}function v(f,y){switch(y.format){case"hsvArray":return f;case"hslArray":return x(f);case"hsl":var p=x(f);return"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)";case"hsla":var w=x(f),R=y.alpha||Math.random();return"hsla("+w[0]+", "+w[1]+"%, "+w[2]+"%, "+R+")";case"rgbArray":return P(f);case"rgb":var S=P(f);return"rgb("+S.join(", ")+")";case"rgba":var A=P(f),R=y.alpha||Math.random();return"rgba("+A.join(", ")+", "+R+")";default:return s(f)}}function o(f,y){for(var p=t(f).lowerBounds,w=0;w<p.length-1;w++){var S=p[w][0],A=p[w][1],R=p[w+1][0],E=p[w+1][1];if(y>=S&&y<=R){var L=(E-A)/(R-S),k=A-L*S;return L*y+k}}return 0}function u(f){if(typeof parseInt(f)=="number"){var y=parseInt(f);if(y<360&&y>0)return[y,y]}if(typeof f=="string"){if(B[f]){var p=B[f];if(p.hueRange)return p.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var w=C(f)[0];return[w,w]}}return[0,360]}function i(f){return t(f).saturationRange}function t(f){f>=334&&f<=360&&(f-=360);for(var y in B){var p=B[y];if(p.hueRange&&f>=p.hueRange[0]&&f<=p.hueRange[1])return B[y]}return"Color not found"}function r(f){if(M===null){var y=.618033988749895,p=Math.random();return p+=y,p%=1,Math.floor(f[0]+p*(f[1]+1-f[0]))}else{var w=f[1]||1,S=f[0]||0;M=(M*9301+49297)%233280;var A=M/233280;return Math.floor(S+A*(w-S))}}function s(f){var y=P(f);function p(S){var A=S.toString(16);return A.length==1?"0"+A:A}var w="#"+p(y[0])+p(y[1])+p(y[2]);return w}function h(f,y,p){var w=p[0][0],S=p[p.length-1][0],A=p[p.length-1][1],R=p[0][1];B[f]={hueRange:y,lowerBounds:p,saturationRange:[w,S],brightnessRange:[A,R]}}function m(){h("monochrome",null,[[0,0],[100,0]]),h("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),h("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),h("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),h("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),h("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),h("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),h("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function P(f){var y=f[0];y===0&&(y=1),y===360&&(y=359),y=y/360;var p=f[1]/100,w=f[2]/100,S=Math.floor(y*6),A=y*6-S,R=w*(1-p),E=w*(1-A*p),L=w*(1-(1-A)*p),k=256,D=256,V=256;switch(S){case 0:k=w,D=L,V=R;break;case 1:k=E,D=w,V=R;break;case 2:k=R,D=w,V=L;break;case 3:k=R,D=E,V=w;break;case 4:k=L,D=R,V=w;break;case 5:k=w,D=R,V=E;break}var O=[Math.floor(k*255),Math.floor(D*255),Math.floor(V*255)];return O}function C(f){f=f.replace(/^#/,""),f=f.length===3?f.replace(/(.)/g,"$1$1"):f;var y=parseInt(f.substr(0,2),16)/255,p=parseInt(f.substr(2,2),16)/255,w=parseInt(f.substr(4,2),16)/255,S=Math.max(y,p,w),A=S-Math.min(y,p,w),R=S?A/S:0;switch(S){case y:return[60*((p-w)/A%6)||0,R,S];case p:return[60*((w-y)/A+2)||0,R,S];case w:return[60*((y-p)/A+4)||0,R,S]}}function x(f){var y=f[0],p=f[1]/100,w=f[2]/100,S=(2-p)*w;return[y,Math.round(p*w/(S<1?S:2-S)*1e4)/100,S/2*100]}function c(f){for(var y=0,p=0;p!==f.length&&!(y>=Number.MAX_SAFE_INTEGER);p++)y+=f.charCodeAt(p);return y}function d(f){if(isNaN(f)){if(typeof f=="string"){if(B[f]){var p=B[f];if(p.hueRange)return p.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var w=C(f)[0];return t(w).hueRange}}}else{var y=parseInt(f);if(y<360&&y>0)return t(f).hueRange}return[0,360]}return e})})(he,he.exports);var Me=he.exports;const{window:fe}=Ge;function at(I){let T,M,B;return{c(){T=De("canvas"),this.h()},l(g){T=Ve(g,"CANVAS",{width:!0,height:!0}),Oe(T).forEach(we),this.h()},h(){ne(T,"width",I[0]),ne(T,"height",I[1])},m(g,e){He(g,T,e),I[7](T),M||(B=[le(fe,"resize",I[6]),le(fe,"keydown",I[4]),le(fe,"keyup",I[5])],M=!0)},p(g,[e]){e&1&&ne(T,"width",g[0]),e&2&&ne(T,"height",g[1])},i:Ce,o:Ce,d(g){g&&we(T),I[7](null),M=!1,We(B)}}}function st(I,T,M){const B={left:!1,right:!1,defense:!1};let g,e,l,a,n,v,o=800,u=600,i;const t=[{x:0,y:160},{x:80,y:160},{x:100,y:50},{x:60,y:80},{x:20,y:80},{x:-20,y:50},{x:0,y:160}],r=[{x:0,y:160},{x:80,y:160},{x:100,y:50},{x:60,y:80},{x:20,y:80},{x:-20,y:50},{x:0,y:160}];function s(){[l,v,a,n].forEach(c=>{c&&H.exports.World.remove(e.world,c)}),l=H.exports.Bodies.rectangle(0,u,o*4,60,{isStatic:!0}),v=H.exports.Bodies.rectangle(0,0,o*4,60,{isStatic:!0}),a=H.exports.Bodies.rectangle(0,60,60,u*4,{isStatic:!0}),n=H.exports.Bodies.rectangle(o,60,60,u*4,{isStatic:!0}),H.exports.Composite.add(e.world,[l,v,a,n])}const h=(c,d)=>Math.floor(Math.random()*(d-c+1))+c;Ne(()=>{M(0,o=window.innerWidth),M(1,u=window.innerHeight),e=H.exports.Engine.create(),H.exports.Common.setDecomp(ze),g=H.exports.Bodies.fromVertices(400,u-60,[t]),H.exports.Body.setVertices(g,t);const c=H.exports.Runner.create(),d=(w,S)=>w.bodyA==S||w.bodyB==S,f=(w,S)=>w.bodyA!=S&&w.bodyB!=S,y=(w,S)=>{if(w.bodyA!=S)return w.bodyA;if(w.bodyB!=S)return w.bodyB};H.exports.Runner.run(c,e),s(),H.exports.Composite.add(e.world,[g]),H.exports.Events.on(e,"collisionStart",function(w){w.pairs.forEach(S=>{if(d(S,l)&&f(S,g)){H.exports.World.remove(e.world,y(S,l));return}})}),H.exports.Events.on(e,"beforeUpdate",function(w){!B.defense&&g.vertices==r&&H.exports.Body.setVertices(g,t),B.defense?(H.exports.Body.setVertices(g,t),H.exports.Body.setInertia(g,1/0)):B.left?H.exports.Body.setVelocity(g,{x:-5,y:0}):B.right&&H.exports.Body.setVelocity(g,{x:5,y:0})}),H.exports.Body.setInertia(g,1/0),setInterval(()=>{if(!document.hasFocus())return;const w=h(60,o-60),S=H.exports.Bodies.rectangle(w,60,h(8,16),h(8,16));H.exports.Composite.add(e.world,S)},100);const p=i.getContext("2d");(function w(){const S=H.exports.Composite.allBodies(e.world);window.requestAnimationFrame(w),p.fillStyle="#fff",p.fillRect(0,0,i.width,i.height);for(const A of S)for(const R of A.parts){const E=R.vertices;p.beginPath(),p.moveTo(E[0].x,E[0].y);for(const L of E)p.lineTo(L.x,L.y);p.lineTo(E[0].x,E[0].y),p.closePath(),A==l||A==v||A==a||A==n?p.fillStyle="#444":A==g?p.fillStyle=Me({seed:R.id,hue:"monochrome"}):p.fillStyle=Me({seed:A.id}),p.fill()}})()});function m(c){c.key==" "&&(B.defense=!0),c.key=="ArrowRight"&&(B.right=!0),c.key=="ArrowLeft"&&(B.left=!0)}function P(c){c.key==" "&&(B.defense=!1),c.key=="ArrowRight"&&(B.right=!1),c.key=="ArrowLeft"&&(B.left=!1)}const C=()=>{M(0,o=window.innerWidth),M(1,u=window.innerHeight),s()};function x(c){Ue[c?"unshift":"push"](()=>{i=c,M(2,i)})}return[o,u,i,s,m,P,C,x]}class lt extends Le{constructor(T){super(),ke(this,T,st,at,Fe,{})}}export{lt as default};

import{S as Te,i as Be,s as Re,E as j,K as ve,L as He,M as Ee,N as Y,w as We,k as Ne,e as Ge,x as Ue,m as ze,c as $e,a as Qe,d as ce,b as ae,y as Ze,g as Me,q as Ke,o as Je,B as Xe,v as Ye,O as qe,P as je}from"../chunks/index-f2971943.js";import{w as be}from"../chunks/index-cf299545.js";var se=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_e={decomp:ct,quickDecomp:b,isSimple:vt,removeCollinearPoints:ht,removeDuplicatePoints:gt,makeCCW:at};function et(A,B,M){M=M||0;var I=[0,0],c,e,o,n,i,v,l;return c=A[1][1]-A[0][1],e=A[0][0]-A[1][0],o=c*A[0][0]+e*A[0][1],n=B[1][1]-B[0][1],i=B[0][0]-B[1][0],v=n*B[0][0]+i*B[0][1],l=c*i-n*e,fe(l,0,M)||(I[0]=(i*o-e*v)/l,I[1]=(c*v-n*o)/l),I}function he(A,B,M,I){var c=B[0]-A[0],e=B[1]-A[1],o=I[0]-M[0],n=I[1]-M[1];if(o*e-n*c===0)return!1;var i=(c*(M[1]-A[1])+e*(A[0]-M[0]))/(o*e-n*c),v=(o*(A[1]-M[1])+n*(M[0]-A[0]))/(n*c-o*e);return i>=0&&i<=1&&v>=0&&v<=1}function te(A,B,M){return(B[0]-A[0])*(M[1]-A[1])-(M[0]-A[0])*(B[1]-A[1])}function oe(A,B,M){return te(A,B,M)>0}function ge(A,B,M){return te(A,B,M)>=0}function Le(A,B,M){return te(A,B,M)<0}function _(A,B,M){return te(A,B,M)<=0}var tt=[],nt=[];function it(A,B,M,I){if(I){var c=tt,e=nt;c[0]=B[0]-A[0],c[1]=B[1]-A[1],e[0]=M[0]-B[0],e[1]=M[1]-B[1];var o=c[0]*e[0]+c[1]*e[1],n=Math.sqrt(c[0]*c[0]+c[1]*c[1]),i=Math.sqrt(e[0]*e[0]+e[1]*e[1]),v=Math.acos(o/(n*i));return v<I}else return te(A,B,M)===0}function ee(A,B){var M=B[0]-A[0],I=B[1]-A[1];return M*M+I*I}function F(A,B){var M=A.length;return A[B<0?B%M+M:B%M]}function rt(A){A.length=0}function Z(A,B,M,I){for(var c=M;c<I;c++)A.push(B[c])}function at(A){for(var B=0,M=A,I=1;I<A.length;++I)(M[I][1]<M[B][1]||M[I][1]===M[B][1]&&M[I][0]>M[B][0])&&(B=I);return oe(F(A,B-1),F(A,B),F(A,B+1))?!1:(st(A),!0)}function st(A){for(var B=[],M=A.length,I=0;I!==M;I++)B.push(A.pop());for(var I=0;I!==M;I++)A[I]=B[I]}function ke(A,B){return Le(F(A,B-1),F(A,B),F(A,B+1))}var ot=[],lt=[];function ft(A,B,M){var I,c,e=ot,o=lt;if(ge(F(A,B+1),F(A,B),F(A,M))&&_(F(A,B-1),F(A,B),F(A,M)))return!1;c=ee(F(A,B),F(A,M));for(var n=0;n!==A.length;++n)if(!((n+1)%A.length===B||n===B)&&ge(F(A,B),F(A,M),F(A,n+1))&&_(F(A,B),F(A,M),F(A,n))&&(e[0]=F(A,B),e[1]=F(A,M),o[0]=F(A,n),o[1]=F(A,n+1),I=et(e,o),ee(F(A,B),I)<c))return!1;return!0}function ut(A,B,M){for(var I=0;I!==A.length;++I)if(!(I===B||I===M||(I+1)%A.length===B||(I+1)%A.length===M)&&he(F(A,B),F(A,M),F(A,I),F(A,I+1)))return!1;return!0}function le(A,B,M,I){var c=I||[];if(rt(c),B<M)for(var e=B;e<=M;e++)c.push(A[e]);else{for(var e=0;e<=M;e++)c.push(A[e]);for(var e=B;e<A.length;e++)c.push(A[e])}return c}function xe(A){for(var B=[],M=[],I=[],c=[],e=Number.MAX_VALUE,o=0;o<A.length;++o)if(ke(A,o)){for(var n=0;n<A.length;++n)if(ft(A,o,n)){M=xe(le(A,o,n,c)),I=xe(le(A,n,o,c));for(var i=0;i<I.length;i++)M.push(I[i]);M.length<e&&(B=M,e=M.length,B.push([F(A,o),F(A,n)]))}}return B}function ct(A){var B=xe(A);return B.length>0?Fe(A,B):[A]}function Fe(A,B){if(B.length===0)return[A];if(B instanceof Array&&B.length&&B[0]instanceof Array&&B[0].length===2&&B[0][0]instanceof Array){for(var M=[A],I=0;I<B.length;I++)for(var c=B[I],e=0;e<M.length;e++){var o=M[e],n=Fe(o,c);if(n){M.splice(e,1),M.push(n[0],n[1]);break}}return M}else{var c=B,I=A.indexOf(c[0]),e=A.indexOf(c[1]);return I!==-1&&e!==-1?[le(A,I,e),le(A,e,I)]:!1}}function vt(A){var B=A,M;for(M=0;M<B.length-1;M++)for(var I=0;I<M-1;I++)if(he(B[M],B[M+1],B[I],B[I+1]))return!1;for(M=1;M<B.length-2;M++)if(he(B[0],B[B.length-1],B[M],B[M+1]))return!1;return!0}function Ae(A,B,M,I,c){c=c||0;var e=B[1]-A[1],o=A[0]-B[0],n=e*A[0]+o*A[1],i=I[1]-M[1],v=M[0]-I[0],l=i*M[0]+v*M[1],u=e*v-i*o;return fe(u,0,c)?[0,0]:[(v*n-o*l)/u,(e*l-i*n)/u]}function b(A,B,M,I,c,e,o){e=e||100,o=o||0,c=c||25,B=typeof B!="undefined"?B:[],M=M||[],I=I||[];var n=[0,0],i=[0,0],v=[0,0],l=0,u=0,a=0,t=0,r=0,s=0,h=0,d=[],P=[],w=A,g=A;if(g.length<3)return B;if(o++,o>e)return console.warn("quickDecomp: max level ("+e+") reached."),B;for(var x=0;x<A.length;++x)if(ke(w,x)){M.push(w[x]),l=u=Number.MAX_VALUE;for(var m=0;m<A.length;++m)oe(F(w,x-1),F(w,x),F(w,m))&&_(F(w,x-1),F(w,x),F(w,m-1))&&(v=Ae(F(w,x-1),F(w,x),F(w,m),F(w,m-1)),Le(F(w,x+1),F(w,x),v)&&(a=ee(w[x],v),a<u&&(u=a,i=v,s=m))),oe(F(w,x+1),F(w,x),F(w,m+1))&&_(F(w,x+1),F(w,x),F(w,m))&&(v=Ae(F(w,x+1),F(w,x),F(w,m),F(w,m+1)),oe(F(w,x-1),F(w,x),v)&&(a=ee(w[x],v),a<l&&(l=a,n=v,r=m)));if(s===(r+1)%A.length)v[0]=(i[0]+n[0])/2,v[1]=(i[1]+n[1])/2,I.push(v),x<r?(Z(d,w,x,r+1),d.push(v),P.push(v),s!==0&&Z(P,w,s,w.length),Z(P,w,0,x+1)):(x!==0&&Z(d,w,x,w.length),Z(d,w,0,r+1),d.push(v),P.push(v),Z(P,w,s,x+1));else{if(s>r&&(r+=A.length),t=Number.MAX_VALUE,r<s)return B;for(var m=s;m<=r;++m)ge(F(w,x-1),F(w,x),F(w,m))&&_(F(w,x+1),F(w,x),F(w,m))&&(a=ee(F(w,x),F(w,m)),a<t&&ut(w,x,m)&&(t=a,h=m%A.length));x<h?(Z(d,w,x,h+1),h!==0&&Z(P,w,h,g.length),Z(P,w,0,x+1)):(x!==0&&Z(d,w,x,g.length),Z(d,w,0,h+1),Z(P,w,h,x+1))}return d.length<P.length?(b(d,B,M,I,c,e,o),b(P,B,M,I,c,e,o)):(b(P,B,M,I,c,e,o),b(d,B,M,I,c,e,o)),B}return B.push(A),B}function ht(A,B){for(var M=0,I=A.length-1;A.length>3&&I>=0;--I)it(F(A,I-1),F(A,I),F(A,I+1),B)&&(A.splice(I%A.length,1),M++);return M}function gt(A,B){for(var M=A.length-1;M>=1;--M)for(var I=A[M],c=M-1;c>=0;--c)if(xt(I,A[c],B)){A.splice(M,1);continue}}function fe(A,B,M){return M=M||0,Math.abs(A-B)<=M}function xt(A,B,M){return fe(A[0],B[0],M)&&fe(A[1],B[1],M)}var W={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(A,B){(function(I,c){A.exports=c()})(se,function(){return function(M){var I={};function c(e){if(I[e])return I[e].exports;var o=I[e]={i:e,l:!1,exports:{}};return M[e].call(o.exports,o,o.exports,c),o.l=!0,o.exports}return c.m=M,c.c=I,c.d=function(e,o,n){c.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},c.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,o){if(o&1&&(e=c(e)),o&8||o&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),o&2&&typeof e!="string")for(var i in e)c.d(n,i,function(v){return e[v]}.bind(null,i));return n},c.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(o,"a",o),o},c.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},c.p="",c(c.s=21)}([function(M,I){var c={};M.exports=c,function(){c._nextId=0,c._seed=0,c._nowStartTime=+new Date,c._warnedOnce={},c._decomp=null,c.extend=function(o,n){var i,v;typeof n=="boolean"?(i=2,v=n):(i=1,v=!0);for(var l=i;l<arguments.length;l++){var u=arguments[l];if(u)for(var a in u)v&&u[a]&&u[a].constructor===Object&&(!o[a]||o[a].constructor===Object)?(o[a]=o[a]||{},c.extend(o[a],v,u[a])):o[a]=u[a]}return o},c.clone=function(o,n){return c.extend({},n,o)},c.keys=function(o){if(Object.keys)return Object.keys(o);var n=[];for(var i in o)n.push(i);return n},c.values=function(o){var n=[];if(Object.keys){for(var i=Object.keys(o),v=0;v<i.length;v++)n.push(o[i[v]]);return n}for(var l in o)n.push(o[l]);return n},c.get=function(o,n,i,v){n=n.split(".").slice(i,v);for(var l=0;l<n.length;l+=1)o=o[n[l]];return o},c.set=function(o,n,i,v,l){var u=n.split(".").slice(v,l);return c.get(o,n,0,-1)[u[u.length-1]]=i,i},c.shuffle=function(o){for(var n=o.length-1;n>0;n--){var i=Math.floor(c.random()*(n+1)),v=o[n];o[n]=o[i],o[i]=v}return o},c.choose=function(o){return o[Math.floor(c.random()*o.length)]},c.isElement=function(o){return typeof HTMLElement!="undefined"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},c.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},c.isFunction=function(o){return typeof o=="function"},c.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},c.isString=function(o){return toString.call(o)==="[object String]"},c.clamp=function(o,n,i){return o<n?n:o>i?i:o},c.sign=function(o){return o<0?-1:1},c.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-c._nowStartTime},c.random=function(o,n){return o=typeof o!="undefined"?o:0,n=typeof n!="undefined"?n:1,o+e()*(n-o)};var e=function(){return c._seed=(c._seed*9301+49297)%233280,c._seed/233280};c.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},c.logLevel=1,c.log=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.info=function(){console&&c.logLevel>0&&c.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warn=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");c._warnedOnce[o]||(c.warn(o),c._warnedOnce[o]=!0)},c.deprecated=function(o,n,i){o[n]=c.chain(function(){c.warnOnce("\u{1F505} deprecated \u{1F505}",i)},o[n])},c.nextId=function(){return c._nextId++},c.indexOf=function(o,n){if(o.indexOf)return o.indexOf(n);for(var i=0;i<o.length;i++)if(o[i]===n)return i;return-1},c.map=function(o,n){if(o.map)return o.map(n);for(var i=[],v=0;v<o.length;v+=1)i.push(n(o[v]));return i},c.topologicalSort=function(o){var n=[],i=[],v=[];for(var l in o)!i[l]&&!v[l]&&c._topologicalSort(l,i,v,o,n);return n},c._topologicalSort=function(o,n,i,v,l){var u=v[o]||[];i[o]=!0;for(var a=0;a<u.length;a+=1){var t=u[a];i[t]||n[t]||c._topologicalSort(t,n,i,v,l)}i[o]=!1,n[o]=!0,l.push(o)},c.chain=function(){for(var o=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?o.push.apply(o,i._chained):o.push(i)}var v=function(){for(var l,u=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)u[a]=arguments[a];for(a=0;a<o.length;a+=1){var r=o[a].apply(l,u);typeof r!="undefined"&&(l=r)}return l};return v._chained=o,v},c.chainPathBefore=function(o,n,i){return c.set(o,n,c.chain(i,c.get(o,n)))},c.chainPathAfter=function(o,n,i){return c.set(o,n,c.chain(c.get(o,n),i))},c.setDecomp=function(o){c._decomp=o},c.getDecomp=function(){var o=c._decomp;try{!o&&typeof window!="undefined"&&(o=window.decomp),!o&&typeof se!="undefined"&&(o=se.decomp)}catch{o=null}return o}}()},function(M,I){var c={};M.exports=c,function(){c.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&c.update(o,e),o},c.update=function(e,o,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<o.length;i++){var v=o[i];v.x>e.max.x&&(e.max.x=v.x),v.x<e.min.x&&(e.min.x=v.x),v.y>e.max.y&&(e.max.y=v.y),v.y<e.min.y&&(e.min.y=v.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},c.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},c.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},c.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},c.shift=function(e,o){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+n,e.min.y=o.y,e.max.y=o.y+i}}()},function(M,I){var c={};M.exports=c,function(){c.create=function(e,o){return{x:e||0,y:o||0}},c.clone=function(e){return{x:e.x,y:e.y}},c.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},c.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},c.rotate=function(e,o,n){var i=Math.cos(o),v=Math.sin(o);n||(n={});var l=e.x*i-e.y*v;return n.y=e.x*v+e.y*i,n.x=l,n},c.rotateAbout=function(e,o,n,i){var v=Math.cos(o),l=Math.sin(o);i||(i={});var u=n.x+((e.x-n.x)*v-(e.y-n.y)*l);return i.y=n.y+((e.x-n.x)*l+(e.y-n.y)*v),i.x=u,i},c.normalise=function(e){var o=c.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},c.dot=function(e,o){return e.x*o.x+e.y*o.y},c.cross=function(e,o){return e.x*o.y-e.y*o.x},c.cross3=function(e,o,n){return(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x)},c.add=function(e,o,n){return n||(n={}),n.x=e.x+o.x,n.y=e.y+o.y,n},c.sub=function(e,o,n){return n||(n={}),n.x=e.x-o.x,n.y=e.y-o.y,n},c.mult=function(e,o){return{x:e.x*o,y:e.y*o}},c.div=function(e,o){return{x:e.x/o,y:e.y/o}},c.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},c.neg=function(e){return{x:-e.x,y:-e.y}},c.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},c._temp=[c.create(),c.create(),c.create(),c.create(),c.create(),c.create()]}()},function(M,I,c){var e={};M.exports=e;var o=c(2),n=c(0);(function(){e.create=function(i,v){for(var l=[],u=0;u<i.length;u++){var a=i[u],t={x:a.x,y:a.y,index:u,body:v,isInternal:!1};l.push(t)}return l},e.fromPath=function(i,v){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return i.replace(l,function(a,t,r){u.push({x:parseFloat(t),y:parseFloat(r)})}),e.create(u,v)},e.centre=function(i){for(var v=e.area(i,!0),l={x:0,y:0},u,a,t,r=0;r<i.length;r++)t=(r+1)%i.length,u=o.cross(i[r],i[t]),a=o.mult(o.add(i[r],i[t]),u),l=o.add(l,a);return o.div(l,6*v)},e.mean=function(i){for(var v={x:0,y:0},l=0;l<i.length;l++)v.x+=i[l].x,v.y+=i[l].y;return o.div(v,i.length)},e.area=function(i,v){for(var l=0,u=i.length-1,a=0;a<i.length;a++)l+=(i[u].x-i[a].x)*(i[u].y+i[a].y),u=a;return v?l/2:Math.abs(l)/2},e.inertia=function(i,v){for(var l=0,u=0,a=i,t,r,s=0;s<a.length;s++)r=(s+1)%a.length,t=Math.abs(o.cross(a[r],a[s])),l+=t*(o.dot(a[r],a[r])+o.dot(a[r],a[s])+o.dot(a[s],a[s])),u+=t;return v/6*(l/u)},e.translate=function(i,v,l){l=typeof l!="undefined"?l:1;var u=i.length,a=v.x*l,t=v.y*l,r;for(r=0;r<u;r++)i[r].x+=a,i[r].y+=t;return i},e.rotate=function(i,v,l){if(v!==0){var u=Math.cos(v),a=Math.sin(v),t=l.x,r=l.y,s=i.length,h,d,P,w;for(w=0;w<s;w++)h=i[w],d=h.x-t,P=h.y-r,h.x=t+(d*u-P*a),h.y=r+(d*a+P*u);return i}},e.contains=function(i,v){for(var l=v.x,u=v.y,a=i.length,t=i[a-1],r,s=0;s<a;s++){if(r=i[s],(l-t.x)*(r.y-t.y)+(u-t.y)*(t.x-r.x)>0)return!1;t=r}return!0},e.scale=function(i,v,l,u){if(v===1&&l===1)return i;u=u||e.centre(i);for(var a,t,r=0;r<i.length;r++)a=i[r],t=o.sub(a,u),i[r].x=u.x+t.x*v,i[r].y=u.y+t.y*l;return i},e.chamfer=function(i,v,l,u,a){typeof v=="number"?v=[v]:v=v||[8],l=typeof l!="undefined"?l:-1,u=u||2,a=a||14;for(var t=[],r=0;r<i.length;r++){var s=i[r-1>=0?r-1:i.length-1],h=i[r],d=i[(r+1)%i.length],P=v[r<v.length?r:v.length-1];if(P===0){t.push(h);continue}var w=o.normalise({x:h.y-s.y,y:s.x-h.x}),g=o.normalise({x:d.y-h.y,y:h.x-d.x}),x=Math.sqrt(2*Math.pow(P,2)),m=o.mult(n.clone(w),P),f=o.normalise(o.mult(o.add(w,g),.5)),p=o.sub(h,o.mult(f,x)),y=l;l===-1&&(y=Math.pow(P,.32)*1.75),y=n.clamp(y,u,a),y%2===1&&(y+=1);for(var C=Math.acos(o.dot(w,g)),S=C/y,T=0;T<y;T++)t.push(o.add(o.rotate(m,S*T),p))}return t},e.clockwiseSort=function(i){var v=e.mean(i);return i.sort(function(l,u){return o.angle(v,l)-o.angle(v,u)}),i},e.isConvex=function(i){var v=0,l=i.length,u,a,t,r;if(l<3)return null;for(u=0;u<l;u++)if(a=(u+1)%l,t=(u+2)%l,r=(i[a].x-i[u].x)*(i[t].y-i[a].y),r-=(i[a].y-i[u].y)*(i[t].x-i[a].x),r<0?v|=1:r>0&&(v|=2),v===3)return!1;return v!==0?!0:null},e.hull=function(i){var v=[],l=[],u,a;for(i=i.slice(0),i.sort(function(t,r){var s=t.x-r.x;return s!==0?s:t.y-r.y}),a=0;a<i.length;a+=1){for(u=i[a];l.length>=2&&o.cross3(l[l.length-2],l[l.length-1],u)<=0;)l.pop();l.push(u)}for(a=i.length-1;a>=0;a-=1){for(u=i[a];v.length>=2&&o.cross3(v[v.length-2],v[v.length-1],u)<=0;)v.pop();v.push(u)}return v.pop(),l.pop(),v.concat(l)}})()},function(M,I,c){var e={};M.exports=e;var o=c(0);(function(){e.on=function(n,i,v){for(var l=i.split(" "),u,a=0;a<l.length;a++)u=l[a],n.events=n.events||{},n.events[u]=n.events[u]||[],n.events[u].push(v);return v},e.off=function(n,i,v){if(!i){n.events={};return}typeof i=="function"&&(v=i,i=o.keys(n.events).join(" "));for(var l=i.split(" "),u=0;u<l.length;u++){var a=n.events[l[u]],t=[];if(v&&a)for(var r=0;r<a.length;r++)a[r]!==v&&t.push(a[r]);n.events[l[u]]=t}},e.trigger=function(n,i,v){var l,u,a,t,r=n.events;if(r&&o.keys(r).length>0){v||(v={}),l=i.split(" ");for(var s=0;s<l.length;s++)if(u=l[s],a=r[u],a){t=o.clone(v,!1),t.name=u,t.source=n;for(var h=0;h<a.length;h++)a[h].apply(n,[t])}}}})()},function(M,I,c){var e={};M.exports=e;var o=c(4),n=c(0),i=c(1),v=c(6);(function(){e.create=function(l){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},e.setModified=function(l,u,a,t){if(l.isModified=u,u&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),a&&l.parent&&e.setModified(l.parent,u,a,t),t)for(var r=0;r<l.composites.length;r++){var s=l.composites[r];e.setModified(s,u,a,t)}},e.add=function(l,u){var a=[].concat(u);o.trigger(l,"beforeAdd",{object:u});for(var t=0;t<a.length;t++){var r=a[t];switch(r.type){case"body":if(r.parent!==r){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(l,r);break;case"constraint":e.addConstraint(l,r);break;case"composite":e.addComposite(l,r);break;case"mouseConstraint":e.addConstraint(l,r.constraint);break}}return o.trigger(l,"afterAdd",{object:u}),l},e.remove=function(l,u,a){var t=[].concat(u);o.trigger(l,"beforeRemove",{object:u});for(var r=0;r<t.length;r++){var s=t[r];switch(s.type){case"body":e.removeBody(l,s,a);break;case"constraint":e.removeConstraint(l,s,a);break;case"composite":e.removeComposite(l,s,a);break;case"mouseConstraint":e.removeConstraint(l,s.constraint);break}}return o.trigger(l,"afterRemove",{object:u}),l},e.addComposite=function(l,u){return l.composites.push(u),u.parent=l,e.setModified(l,!0,!0,!1),l},e.removeComposite=function(l,u,a){var t=n.indexOf(l.composites,u);if(t!==-1&&e.removeCompositeAt(l,t),a)for(var r=0;r<l.composites.length;r++)e.removeComposite(l.composites[r],u,!0);return l},e.removeCompositeAt=function(l,u){return l.composites.splice(u,1),e.setModified(l,!0,!0,!1),l},e.addBody=function(l,u){return l.bodies.push(u),e.setModified(l,!0,!0,!1),l},e.removeBody=function(l,u,a){var t=n.indexOf(l.bodies,u);if(t!==-1&&e.removeBodyAt(l,t),a)for(var r=0;r<l.composites.length;r++)e.removeBody(l.composites[r],u,!0);return l},e.removeBodyAt=function(l,u){return l.bodies.splice(u,1),e.setModified(l,!0,!0,!1),l},e.addConstraint=function(l,u){return l.constraints.push(u),e.setModified(l,!0,!0,!1),l},e.removeConstraint=function(l,u,a){var t=n.indexOf(l.constraints,u);if(t!==-1&&e.removeConstraintAt(l,t),a)for(var r=0;r<l.composites.length;r++)e.removeConstraint(l.composites[r],u,!0);return l},e.removeConstraintAt=function(l,u){return l.constraints.splice(u,1),e.setModified(l,!0,!0,!1),l},e.clear=function(l,u,a){if(a)for(var t=0;t<l.composites.length;t++)e.clear(l.composites[t],u,!0);return u?l.bodies=l.bodies.filter(function(r){return r.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,e.setModified(l,!0,!0,!1),l},e.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var u=[].concat(l.bodies),a=0;a<l.composites.length;a++)u=u.concat(e.allBodies(l.composites[a]));return l.cache&&(l.cache.allBodies=u),u},e.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var u=[].concat(l.constraints),a=0;a<l.composites.length;a++)u=u.concat(e.allConstraints(l.composites[a]));return l.cache&&(l.cache.allConstraints=u),u},e.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var u=[].concat(l.composites),a=0;a<l.composites.length;a++)u=u.concat(e.allComposites(l.composites[a]));return l.cache&&(l.cache.allComposites=u),u},e.get=function(l,u,a){var t,r;switch(a){case"body":t=e.allBodies(l);break;case"constraint":t=e.allConstraints(l);break;case"composite":t=e.allComposites(l).concat(l);break}return t?(r=t.filter(function(s){return s.id.toString()===u.toString()}),r.length===0?null:r[0]):null},e.move=function(l,u,a){return e.remove(l,u),e.add(a,u),l},e.rebase=function(l){for(var u=e.allBodies(l).concat(e.allConstraints(l)).concat(e.allComposites(l)),a=0;a<u.length;a++)u[a].id=n.nextId();return l},e.translate=function(l,u,a){for(var t=a?e.allBodies(l):l.bodies,r=0;r<t.length;r++)v.translate(t[r],u);return l},e.rotate=function(l,u,a,t){for(var r=Math.cos(u),s=Math.sin(u),h=t?e.allBodies(l):l.bodies,d=0;d<h.length;d++){var P=h[d],w=P.position.x-a.x,g=P.position.y-a.y;v.setPosition(P,{x:a.x+(w*r-g*s),y:a.y+(w*s+g*r)}),v.rotate(P,u)}return l},e.scale=function(l,u,a,t,r){for(var s=r?e.allBodies(l):l.bodies,h=0;h<s.length;h++){var d=s[h],P=d.position.x-t.x,w=d.position.y-t.y;v.setPosition(d,{x:t.x+P*u,y:t.y+w*a}),v.scale(d,u,a)}return l},e.bounds=function(l){for(var u=e.allBodies(l),a=[],t=0;t<u.length;t+=1){var r=u[t];a.push(r.bounds.min,r.bounds.max)}return i.create(a)}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(2),i=c(7);c(16);var v=c(0),l=c(1),u=c(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var r={id:v.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=v.extend(r,t);return a(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,r){r=r||{},e.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),l.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:r.axes||t.axes,area:r.area||t.area,mass:r.mass||t.mass,inertia:r.inertia||t.inertia});var s=t.isStatic?"#14151f":v.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),h=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||h,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,r,s){var h;typeof r=="string"&&(h=r,r={},r[h]=s);for(h in r)if(!!Object.prototype.hasOwnProperty.call(r,h))switch(s=r[h],h){case"isStatic":e.setStatic(t,s);break;case"isSleeping":i.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[h]=s}},e.setStatic=function(t,r){for(var s=0;s<t.parts.length;s++){var h=t.parts[s];h.isStatic=r,r?(h._original={restitution:h.restitution,friction:h.friction,mass:h.mass,inertia:h.inertia,density:h.density,inverseMass:h.inverseMass,inverseInertia:h.inverseInertia},h.restitution=0,h.friction=1,h.mass=h.inertia=h.density=1/0,h.inverseMass=h.inverseInertia=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.angularVelocity=0,h.speed=0,h.angularSpeed=0,h.motion=0):h._original&&(h.restitution=h._original.restitution,h.friction=h._original.friction,h.mass=h._original.mass,h.inertia=h._original.inertia,h.density=h._original.density,h.inverseMass=h._original.inverseMass,h.inverseInertia=h._original.inverseInertia,h._original=null)}},e.setMass=function(t,r){var s=t.inertia/(t.mass/6);t.inertia=s*(r/6),t.inverseInertia=1/t.inertia,t.mass=r,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,r){e.setMass(t,r*t.area),t.density=r},e.setInertia=function(t,r){t.inertia=r,t.inverseInertia=1/t.inertia},e.setVertices=function(t,r){r[0].body===t?t.vertices=r:t.vertices=o.create(r,t),t.axes=u.fromVertices(t.vertices),t.area=o.area(t.vertices),e.setMass(t,t.density*t.area);var s=o.centre(t.vertices);o.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,r,s){var h;for(r=r.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,h=0;h<r.length;h++){var d=r[h];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var P=[];for(h=0;h<r.length;h++)P=P.concat(r[h].vertices);o.clockwiseSort(P);var w=o.hull(P),g=o.centre(w);e.setVertices(t,w),o.translate(t.vertices,g)}var x=e._totalProperties(t);t.area=x.area,t.parent=t,t.position.x=x.centre.x,t.position.y=x.centre.y,t.positionPrev.x=x.centre.x,t.positionPrev.y=x.centre.y,e.setMass(t,x.mass),e.setInertia(t,x.inertia),e.setPosition(t,x.centre)}},e.setCentre=function(t,r,s){s?(t.positionPrev.x+=r.x,t.positionPrev.y+=r.y,t.position.x+=r.x,t.position.y+=r.y):(t.positionPrev.x=r.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=r.y-(t.position.y-t.positionPrev.y),t.position.x=r.x,t.position.y=r.y)},e.setPosition=function(t,r){var s=n.sub(r,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var h=0;h<t.parts.length;h++){var d=t.parts[h];d.position.x+=s.x,d.position.y+=s.y,o.translate(d.vertices,s),l.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,r){var s=r-t.angle;t.anglePrev+=s;for(var h=0;h<t.parts.length;h++){var d=t.parts[h];d.angle+=s,o.rotate(d.vertices,s,t.position),u.rotate(d.axes,s),l.update(d.bounds,d.vertices,t.velocity),h>0&&n.rotateAbout(d.position,s,t.position,d.position)}},e.setVelocity=function(t,r){t.positionPrev.x=t.position.x-r.x,t.positionPrev.y=t.position.y-r.y,t.velocity.x=r.x,t.velocity.y=r.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,r){t.anglePrev=t.angle-r,t.angularVelocity=r,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,r){e.setPosition(t,n.add(t.position,r))},e.rotate=function(t,r,s){if(!s)e.setAngle(t,t.angle+r);else{var h=Math.cos(r),d=Math.sin(r),P=t.position.x-s.x,w=t.position.y-s.y;e.setPosition(t,{x:s.x+(P*h-w*d),y:s.y+(P*d+w*h)}),e.setAngle(t,t.angle+r)}},e.scale=function(t,r,s,h){var d=0,P=0;h=h||t.position;for(var w=0;w<t.parts.length;w++){var g=t.parts[w];o.scale(g.vertices,r,s,h),g.axes=u.fromVertices(g.vertices),g.area=o.area(g.vertices),e.setMass(g,t.density*g.area),o.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),e.setInertia(g,e._inertiaScale*o.inertia(g.vertices,g.mass)),o.translate(g.vertices,{x:g.position.x,y:g.position.y}),w>0&&(d+=g.area,P+=g.inertia),g.position.x=h.x+(g.position.x-h.x)*r,g.position.y=h.y+(g.position.y-h.y)*s,l.update(g.bounds,g.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,P))),t.circleRadius&&(r===s?t.circleRadius*=r:t.circleRadius=null)},e.update=function(t,r,s,h){var d=Math.pow(r*s*t.timeScale,2),P=1-t.frictionAir*s*t.timeScale,w=t.position.x-t.positionPrev.x,g=t.position.y-t.positionPrev.y;t.velocity.x=w*P*h+t.force.x/t.mass*d,t.velocity.y=g*P*h+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*P*h+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var x=0;x<t.parts.length;x++){var m=t.parts[x];o.translate(m.vertices,t.velocity),x>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(m.vertices,t.angularVelocity,t.position),u.rotate(m.axes,t.angularVelocity),x>0&&n.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),l.update(m.bounds,m.vertices,t.velocity)}},e.applyForce=function(t,r,s){t.force.x+=s.x,t.force.y+=s.y;var h={x:r.x-t.position.x,y:r.y-t.position.y};t.torque+=h.x*s.y-h.y*s.x},e._totalProperties=function(t){for(var r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var h=t.parts[s],d=h.mass!==1/0?h.mass:1;r.mass+=d,r.area+=h.area,r.inertia+=h.inertia,r.centre=n.add(r.centre,n.mult(h.position,d))}return r.centre=n.div(r.centre,r.mass),r}})()},function(M,I,c){var e={};M.exports=e;var o=c(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var v=i*i*i,l=0;l<n.length;l++){var u=n[l],a=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var t=Math.min(u.motion,a),r=Math.max(u.motion,a);u.motion=e._minBias*t+(1-e._minBias)*r,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*v?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var v=i*i*i,l=0;l<n.length;l++){var u=n[l];if(!!u.isActive){var a=u.collision,t=a.bodyA.parent,r=a.bodyB.parent;if(!(t.isSleeping&&r.isSleeping||t.isStatic||r.isStatic)&&(t.isSleeping||r.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:r,h=s===t?r:t;!s.isStatic&&h.motion>e._motionWakeThreshold*v&&e.set(s,!1)}}}},e.set=function(n,i){var v=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,v||o.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,v&&o.trigger(n,"sleepEnd"))}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(9);(function(){var i=[],v={overlap:0,axis:null},l={overlap:0,axis:null};e.create=function(u,a){return{pair:null,collided:!1,bodyA:u,bodyB:a,parentA:u.parent,parentB:a.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(u,a,t){if(e._overlapAxes(v,u.vertices,a.vertices,u.axes),v.overlap<=0||(e._overlapAxes(l,a.vertices,u.vertices,a.axes),l.overlap<=0))return null;var r=t&&t.table[n.id(u,a)],s;r?s=r.collision:(s=e.create(u,a),s.collided=!0,s.bodyA=u.id<a.id?u:a,s.bodyB=u.id<a.id?a:u,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),u=s.bodyA,a=s.bodyB;var h;v.overlap<l.overlap?h=v:h=l;var d=s.normal,P=s.supports,w=h.axis,g=w.x,x=w.y;g*(a.position.x-u.position.x)+x*(a.position.y-u.position.y)<0?(d.x=g,d.y=x):(d.x=-g,d.y=-x),s.tangent.x=-d.y,s.tangent.y=d.x,s.depth=h.overlap,s.penetration.x=d.x*s.depth,s.penetration.y=d.y*s.depth;var m=e._findSupports(u,a,d,1),f=0;if(o.contains(u.vertices,m[0])&&(P[f++]=m[0]),o.contains(u.vertices,m[1])&&(P[f++]=m[1]),f<2){var p=e._findSupports(a,u,d,-1);o.contains(a.vertices,p[0])&&(P[f++]=p[0]),f<2&&o.contains(a.vertices,p[1])&&(P[f++]=p[1])}return f===0&&(P[f++]=m[0]),P.length=f,s},e._overlapAxes=function(u,a,t,r){var s=a.length,h=t.length,d=a[0].x,P=a[0].y,w=t[0].x,g=t[0].y,x=r.length,m=Number.MAX_VALUE,f=0,p,y,C,S,T,R;for(T=0;T<x;T++){var E=r[T],L=E.x,k=E.y,D=d*L+P*k,V=w*L+g*k,O=D,H=V;for(R=1;R<s;R+=1)S=a[R].x*L+a[R].y*k,S>O?O=S:S<D&&(D=S);for(R=1;R<h;R+=1)S=t[R].x*L+t[R].y*k,S>H?H=S:S<V&&(V=S);if(y=O-V,C=H-D,p=y<C?y:C,p<m&&(m=p,f=T,p<=0))break}u.axis=r[f],u.overlap=m},e._projectToAxis=function(u,a,t){for(var r=a[0].x*t.x+a[0].y*t.y,s=r,h=1;h<a.length;h+=1){var d=a[h].x*t.x+a[h].y*t.y;d>s?s=d:d<r&&(r=d)}u.min=r,u.max=s},e._findSupports=function(u,a,t,r){var s=a.vertices,h=s.length,d=u.position.x,P=u.position.y,w=t.x*r,g=t.y*r,x=Number.MAX_VALUE,m,f,p,y,C;for(C=0;C<h;C+=1)f=s[C],y=w*(d-f.x)+g*(P-f.y),y<x&&(x=y,m=f);return p=s[(h+m.index-1)%h],x=w*(d-p.x)+g*(P-p.y),f=s[(m.index+1)%h],w*(d-f.x)+g*(P-f.y)<x?(i[0]=m,i[1]=f,i):(i[0]=m,i[1]=p,i)}})()},function(M,I,c){var e={};M.exports=e;var o=c(17);(function(){e.create=function(n,i){var v=n.bodyA,l=n.bodyB,u={id:e.id(v,l),bodyA:v,bodyB:l,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:v.isSensor||l.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(u,n,i),u},e.update=function(n,i,v){var l=n.contacts,u=i.supports,a=n.activeContacts,t=i.parentA,r=i.parentB,s=t.vertices.length;n.isActive=!0,n.timeUpdated=v,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+r.inverseMass,n.friction=t.friction<r.friction?t.friction:r.friction,n.frictionStatic=t.frictionStatic>r.frictionStatic?t.frictionStatic:r.frictionStatic,n.restitution=t.restitution>r.restitution?t.restitution:r.restitution,n.slop=t.slop>r.slop?t.slop:r.slop,i.pair=n,a.length=0;for(var h=0;h<u.length;h++){var d=u[h],P=d.body===t?d.index:s+d.index,w=l[P];w?a.push(w):a.push(l[P]=o.create(d))}},e.setActive=function(n,i,v){i?(n.isActive=!0,n.timeUpdated=v):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(2),i=c(7),v=c(1),l=c(11),u=c(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var r=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,h=n.magnitude(n.sub(r,s));t.length=typeof t.length!="undefined"?t.length:h,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=u.extend(d,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var r=a[t],s=r.constraintImpulse;r.isStatic||s.x===0&&s.y===0&&s.angle===0||(r.position.x+=s.x,r.position.y+=s.y,r.angle+=s.angle)}},e.solveAll=function(a,t){for(var r=0;r<a.length;r+=1){var s=a[r],h=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(h||d)&&e.solve(a[r],t)}for(r=0;r<a.length;r+=1)s=a[r],h=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!h&&!d&&e.solve(a[r],t)},e.solve=function(a,t){var r=a.bodyA,s=a.bodyB,h=a.pointA,d=a.pointB;if(!(!r&&!s)){r&&!r.isStatic&&(n.rotate(h,r.angle-a.angleA,h),a.angleA=r.angle),s&&!s.isStatic&&(n.rotate(d,s.angle-a.angleB,d),a.angleB=s.angle);var P=h,w=d;if(r&&(P=n.add(r.position,h)),s&&(w=n.add(s.position,d)),!(!P||!w)){var g=n.sub(P,w),x=n.magnitude(g);x<e._minLength&&(x=e._minLength);var m=(x-a.length)/x,f=a.stiffness<1?a.stiffness*t:a.stiffness,p=n.mult(g,m*f),y=(r?r.inverseMass:0)+(s?s.inverseMass:0),C=(r?r.inverseInertia:0)+(s?s.inverseInertia:0),S=y+C,T,R,E,L,k;if(a.damping){var D=n.create();E=n.div(g,x),k=n.sub(s&&n.sub(s.position,s.positionPrev)||D,r&&n.sub(r.position,r.positionPrev)||D),L=n.dot(E,k)}r&&!r.isStatic&&(R=r.inverseMass/y,r.constraintImpulse.x-=p.x*R,r.constraintImpulse.y-=p.y*R,r.position.x-=p.x*R,r.position.y-=p.y*R,a.damping&&(r.positionPrev.x-=a.damping*E.x*L*R,r.positionPrev.y-=a.damping*E.y*L*R),T=n.cross(h,p)/S*e._torqueDampen*r.inverseInertia*(1-a.angularStiffness),r.constraintImpulse.angle-=T,r.angle-=T),s&&!s.isStatic&&(R=s.inverseMass/y,s.constraintImpulse.x+=p.x*R,s.constraintImpulse.y+=p.y*R,s.position.x+=p.x*R,s.position.y+=p.y*R,a.damping&&(s.positionPrev.x+=a.damping*E.x*L*R,s.positionPrev.y+=a.damping*E.y*L*R),T=n.cross(d,p)/S*e._torqueDampen*s.inverseInertia*(1-a.angularStiffness),s.constraintImpulse.angle+=T,s.angle+=T)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var r=a[t],s=r.constraintImpulse;if(!(r.isStatic||s.x===0&&s.y===0&&s.angle===0)){i.set(r,!1);for(var h=0;h<r.parts.length;h++){var d=r.parts[h];o.translate(d.vertices,s),h>0&&(d.position.x+=s.x,d.position.y+=s.y),s.angle!==0&&(o.rotate(d.vertices,s.angle,r.position),l.rotate(d.axes,s.angle),h>0&&n.rotateAbout(d.position,s.angle,r.position,d.position)),v.update(d.bounds,d.vertices,r.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(M,I,c){var e={};M.exports=e;var o=c(2),n=c(0);(function(){e.fromVertices=function(i){for(var v={},l=0;l<i.length;l++){var u=(l+1)%i.length,a=o.normalise({x:i[u].y-i[l].y,y:i[l].x-i[u].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),v[t]=a}return n.values(v)},e.rotate=function(i,v){if(v!==0)for(var l=Math.cos(v),u=Math.sin(v),a=0;a<i.length;a++){var t=i[a],r;r=t.x*l-t.y*u,t.y=t.x*u+t.y*l,t.x=r}}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(0),i=c(6),v=c(1),l=c(2);(function(){e.rectangle=function(u,a,t,r,s){s=s||{};var h={label:"Rectangle Body",position:{x:u,y:a},vertices:o.fromPath("L 0 0 L "+t+" 0 L "+t+" "+r+" L 0 "+r)};if(s.chamfer){var d=s.chamfer;h.vertices=o.chamfer(h.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete s.chamfer}return i.create(n.extend({},h,s))},e.trapezoid=function(u,a,t,r,s,h){h=h||{},s*=.5;var d=(1-s*2)*t,P=t*s,w=P+d,g=w+P,x;s<.5?x="L 0 0 L "+P+" "+-r+" L "+w+" "+-r+" L "+g+" 0":x="L 0 0 L "+w+" "+-r+" L "+g+" 0";var m={label:"Trapezoid Body",position:{x:u,y:a},vertices:o.fromPath(x)};if(h.chamfer){var f=h.chamfer;m.vertices=o.chamfer(m.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete h.chamfer}return i.create(n.extend({},m,h))},e.circle=function(u,a,t,r,s){r=r||{};var h={label:"Circle Body",circleRadius:t};s=s||25;var d=Math.ceil(Math.max(10,Math.min(s,t)));return d%2===1&&(d+=1),e.polygon(u,a,d,t,n.extend({},h,r))},e.polygon=function(u,a,t,r,s){if(s=s||{},t<3)return e.circle(u,a,r,s);for(var h=2*Math.PI/t,d="",P=h*.5,w=0;w<t;w+=1){var g=P+w*h,x=Math.cos(g)*r,m=Math.sin(g)*r;d+="L "+x.toFixed(3)+" "+m.toFixed(3)+" "}var f={label:"Polygon Body",position:{x:u,y:a},vertices:o.fromPath(d)};if(s.chamfer){var p=s.chamfer;f.vertices=o.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete s.chamfer}return i.create(n.extend({},f,s))},e.fromVertices=function(u,a,t,r,s,h,d,P){var w=n.getDecomp(),g,x,m,f,p,y,C,S,T,R,E;for(g=Boolean(w&&w.quickDecomp),r=r||{},m=[],s=typeof s!="undefined"?s:!1,h=typeof h!="undefined"?h:.01,d=typeof d!="undefined"?d:10,P=typeof P!="undefined"?P:.01,n.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(y=t[R],f=o.isConvex(y),p=!f,p&&!g&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),f||!g)f?y=o.clockwiseSort(y):y=o.hull(y),m.push({position:{x:u,y:a},vertices:y});else{var L=y.map(function($){return[$.x,$.y]});w.makeCCW(L),h!==!1&&w.removeCollinearPoints(L,h),P!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(L,P);var k=w.quickDecomp(L);for(C=0;C<k.length;C++){var D=k[C],V=D.map(function($){return{x:$[0],y:$[1]}});d>0&&o.area(V)<d||m.push({position:o.centre(V),vertices:V})}}for(C=0;C<m.length;C++)m[C]=i.create(n.extend(m[C],r));if(s){var O=5;for(C=0;C<m.length;C++){var H=m[C];for(S=C+1;S<m.length;S++){var G=m[S];if(v.overlaps(H.bounds,G.bounds)){var U=H.vertices,N=G.vertices;for(T=0;T<H.vertices.length;T++)for(E=0;E<G.vertices.length;E++){var K=l.magnitudeSquared(l.sub(U[(T+1)%U.length],N[E])),z=l.magnitudeSquared(l.sub(U[T],N[(E+1)%N.length]));K<O&&z<O&&(U[T].isInternal=!0,N[E].isInternal=!0)}}}}}return m.length>1?(x=i.create(n.extend({parts:m.slice(0)},r)),i.setPosition(x,{x:u,y:a}),x):m[0]}})()},function(M,I,c){var e={};M.exports=e;var o=c(0);(function(){e.create=function(n){var i={};return n||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(v){var l=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u&&(i.button=0,v.preventDefault()),i.absolute.x=l.x,i.absolute.y=l.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=v},i.mousedown=function(v){var l=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u?(i.button=0,v.preventDefault()):i.button=v.button,i.absolute.x=l.x,i.absolute.y=l.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=v},i.mouseup=function(v){var l=e._getRelativeMousePosition(v,i.element,i.pixelRatio),u=v.changedTouches;u&&v.preventDefault(),i.button=-1,i.absolute.x=l.x,i.absolute.y=l.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=v},i.mousewheel=function(v){i.wheelDelta=Math.max(-1,Math.min(1,v.wheelDelta||-v.detail)),v.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,v){var l=i.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,r=n.changedTouches,s,h;return r?(s=r[0].pageX-l.left-a,h=r[0].pageY-l.top-t):(s=n.pageX-l.left-a,h=n.pageY-l.top-t),{x:s/(i.clientWidth/(i.width||i.clientWidth)*v),y:h/(i.clientHeight/(i.height||i.clientHeight)*v)}}})()},function(M,I,c){var e={};M.exports=e;var o=c(0),n=c(8);(function(){e.create=function(i){var v={bodies:[],pairs:null};return o.extend(v,i)},e.setBodies=function(i,v){i.bodies=v.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var v=[],l=i.pairs,u=i.bodies,a=u.length,t=e.canCollide,r=n.collides,s,h;for(u.sort(e._compareBoundsX),s=0;s<a;s++){var d=u[s],P=d.bounds,w=d.bounds.max.x,g=d.bounds.max.y,x=d.bounds.min.y,m=d.isStatic||d.isSleeping,f=d.parts.length,p=f===1;for(h=s+1;h<a;h++){var y=u[h],C=y.bounds;if(C.min.x>w)break;if(!(g<C.min.y||x>C.max.y)&&!(m&&(y.isStatic||y.isSleeping))&&!!t(d.collisionFilter,y.collisionFilter)){var S=y.parts.length;if(p&&S===1){var T=r(d,y,l);T&&v.push(T)}else for(var R=f>1?1:0,E=S>1?1:0,L=R;L<f;L++)for(var k=d.parts[L],P=k.bounds,D=E;D<S;D++){var V=y.parts[D],C=V.bounds;if(!(P.min.x>C.max.x||P.max.x<C.min.x||P.max.y<C.min.y||P.min.y>C.max.y)){var T=r(k,V,l);T&&v.push(T)}}}}}return v},e.canCollide=function(i,v){return i.group===v.group&&i.group!==0?i.group>0:(i.mask&v.category)!==0&&(v.mask&i.category)!==0},e._compareBoundsX=function(i,v){return i.bounds.min.x-v.bounds.min.x}})()},function(M,I,c){var e={};M.exports=e;var o=c(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||o.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],v=e.versionParse(n.version).number,l=e.versionParse(i.version).number;v>l?(o.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):v<l?o.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&o.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var v=n.for&&e.dependencyParse(n.for);return!n.for||i.name===v.name&&e.versionSatisfies(i.version,v.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){o.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var v=e.dependencies(n),l=o.topologicalSort(v),u=[],a=0;a<l.length;a+=1)if(l[a]!==n.name){var t=e.resolve(l[a]);if(!t){u.push("\u274C "+l[a]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(o.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(o.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),n.used.push(t.name))}u.length>0&&o.info(u.join("  "))},e.dependencies=function(n,i){var v=e.dependencyParse(n),l=v.name;if(i=i||{},!(l in i)){n=e.resolve(n)||n,i[l]=o.map(n.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),r=e.resolve(a);return r&&!e.versionSatisfies(r.version,t.range)?(o.warn("Plugin.dependencies:",e.toString(r),"does not satisfy",e.toString(t),"used by",e.toString(v)+"."),r._warned=!0,n._warned=!0):r||(o.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(v),"could not be resolved."),n._warned=!0),t.name});for(var u=0;u<i[l].length;u+=1)e.dependencies(i[l][u],i);return i}},e.dependencyParse=function(n){if(o.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||o.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||o.warn("Plugin.versionParse:",n,"is not a valid version or range.");var v=i.exec(n),l=Number(v[4]),u=Number(v[5]),a=Number(v[6]);return{isRange:Boolean(v[1]||v[2]),version:v[3],range:n,operator:v[1]||v[2]||"",major:l,minor:u,patch:a,parts:[l,u,a],prerelease:v[7],number:l*1e8+u*1e4+a}},e.versionSatisfies=function(n,i){i=i||"*";var v=e.versionParse(i),l=e.versionParse(n);if(v.isRange){if(v.operator==="*"||n==="*")return!0;if(v.operator===">")return l.number>v.number;if(v.operator===">=")return l.number>=v.number;if(v.operator==="~")return l.major===v.major&&l.minor===v.minor&&l.patch>=v.patch;if(v.operator==="^")return v.major>0?l.major===v.major&&l.number>=v.number:v.minor>0?l.minor===v.minor&&l.patch>=v.patch:l.patch===v.patch}return n===i||n==="*"}})()},function(M,I,c){var e={};M.exports=e;var o=c(0),n=c(5),i=c(1),v=c(4),l=c(2),u=c(13);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var x={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=o.extend(x,g);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=g.mouse,m.engine=g.engine,m.canvas=m.canvas||h(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),o.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(g){(function x(m){g.frameRequestId=a(x),r(g,m),e.world(g,m),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,m),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,m)})()},e.stop=function(g){t(g.frameRequestId)},e.setPixelRatio=function(g,x){var m=g.options,f=g.canvas;x==="auto"&&(x=d(f)),m.pixelRatio=x,f.setAttribute("data-pixel-ratio",x),f.width=m.width*x,f.height=m.height*x,f.style.width=m.width+"px",f.style.height=m.height+"px"},e.lookAt=function(g,x,m,f){f=typeof f!="undefined"?f:!0,x=o.isArray(x)?x:[x],m=m||{x:0,y:0};for(var p={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},y=0;y<x.length;y+=1){var C=x[y],S=C.bounds?C.bounds.min:C.min||C.position||C,T=C.bounds?C.bounds.max:C.max||C.position||C;S&&T&&(S.x<p.min.x&&(p.min.x=S.x),T.x>p.max.x&&(p.max.x=T.x),S.y<p.min.y&&(p.min.y=S.y),T.y>p.max.y&&(p.max.y=T.y))}var R=p.max.x-p.min.x+2*m.x,E=p.max.y-p.min.y+2*m.y,L=g.canvas.height,k=g.canvas.width,D=k/L,V=R/E,O=1,H=1;V>D?H=V/D:O=D/V,g.options.hasBounds=!0,g.bounds.min.x=p.min.x,g.bounds.max.x=p.min.x+R*O,g.bounds.min.y=p.min.y,g.bounds.max.y=p.min.y+E*H,f&&(g.bounds.min.x+=R*.5-R*O*.5,g.bounds.max.x+=R*.5-R*O*.5,g.bounds.min.y+=E*.5-E*H*.5,g.bounds.max.y+=E*.5-E*H*.5),g.bounds.min.x-=m.x,g.bounds.max.x-=m.x,g.bounds.min.y-=m.y,g.bounds.max.y-=m.y,g.mouse&&(u.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),u.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var x=g.bounds.max.x-g.bounds.min.x,m=g.bounds.max.y-g.bounds.min.y,f=x/g.options.width,p=m/g.options.height;g.context.setTransform(g.options.pixelRatio/f,0,0,g.options.pixelRatio/p,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,x){var m=o.now(),f=g.engine,p=f.world,y=g.canvas,C=g.context,S=g.options,T=g.timing,R=n.allBodies(p),E=n.allConstraints(p),L=S.wireframes?S.wireframeBackground:S.background,k=[],D=[],V,O={timestamp:f.timing.timestamp};if(v.trigger(g,"beforeRender",O),g.currentBackground!==L&&w(g,L),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,y.width,y.height),C.globalCompositeOperation="source-over",S.hasBounds){for(V=0;V<R.length;V++){var H=R[V];i.overlaps(H.bounds,g.bounds)&&k.push(H)}for(V=0;V<E.length;V++){var G=E[V],U=G.bodyA,N=G.bodyB,K=G.pointA,z=G.pointB;U&&(K=l.add(U.position,G.pointA)),N&&(z=l.add(N.position,G.pointB)),!(!K||!z)&&(i.contains(g.bounds,K)||i.contains(g.bounds,z))&&D.push(G)}e.startViewTransform(g),g.mouse&&(u.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),u.setOffset(g.mouse,g.bounds.min))}else D=E,k=R,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!S.wireframes||f.enableSleeping&&S.showSleeping?e.bodies(g,k,C):(S.showConvexHulls&&e.bodyConvexHulls(g,k,C),e.bodyWireframes(g,k,C)),S.showBounds&&e.bodyBounds(g,k,C),(S.showAxes||S.showAngleIndicator)&&e.bodyAxes(g,k,C),S.showPositions&&e.bodyPositions(g,k,C),S.showVelocity&&e.bodyVelocity(g,k,C),S.showIds&&e.bodyIds(g,k,C),S.showSeparations&&e.separations(g,f.pairs.list,C),S.showCollisions&&e.collisions(g,f.pairs.list,C),S.showVertexNumbers&&e.vertexNumbers(g,k,C),S.showMousePosition&&e.mousePosition(g,g.mouse,C),e.constraints(D,C),S.hasBounds&&e.endViewTransform(g),v.trigger(g,"afterRender",O),T.lastElapsed=o.now()-m},e.stats=function(g,x,m){for(var f=g.engine,p=f.world,y=n.allBodies(p),C=0,S=55,T=44,R=0,E=0,L=0;L<y.length;L+=1)C+=y[L].parts.length;var k={Part:C,Body:y.length,Cons:n.allConstraints(p).length,Comp:n.allComposites(p).length,Pair:f.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(R,E,S*5.5,T),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var D in k){var V=k[D];x.fillStyle="#aaa",x.fillText(D,R+S,E+8),x.fillStyle="#eee",x.fillText(V,R+S,E+26),R+=S}},e.performance=function(g,x){var m=g.engine,f=g.timing,p=f.deltaHistory,y=f.elapsedHistory,C=f.timestampElapsedHistory,S=f.engineDeltaHistory,T=f.engineElapsedHistory,R=m.timing.lastDelta,E=s(p),L=s(y),k=s(S),D=s(T),V=s(C),O=V/E||0,H=1e3/E||0,G=4,U=12,N=60,K=34,z=10,$=69;x.fillStyle="#0e0f19",x.fillRect(0,50,U*4+N*5+22,K),e.status(x,z,$,N,G,p.length,Math.round(H)+" fps",H/e._goodFps,function(Q){return p[Q]/E-1}),e.status(x,z+U+N,$,N,G,S.length,R.toFixed(2)+" dt",e._goodDelta/R,function(Q){return S[Q]/k-1}),e.status(x,z+(U+N)*2,$,N,G,T.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(Q){return T[Q]/D-1}),e.status(x,z+(U+N)*3,$,N,G,y.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(Q){return y[Q]/L-1}),e.status(x,z+(U+N)*4,$,N,G,C.length,O.toFixed(2)+" x",O*O*O,function(Q){return(C[Q]/p[Q]/O||0)-1})},e.status=function(g,x,m,f,p,y,C,S,T){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(x,m+7,f,1),g.beginPath(),g.moveTo(x,m+7-p*o.clamp(.4*T(0),-2,2));for(var R=0;R<f;R+=1)g.lineTo(x+R,m+7-(R<y?p*o.clamp(.4*T(R),-2,2):0));g.stroke(),g.fillStyle="hsl("+o.clamp(25+95*S,0,120)+",100%,60%)",g.fillRect(x,m-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(C,x+f,m-5)},e.constraints=function(g,x){for(var m=x,f=0;f<g.length;f++){var p=g[f];if(!(!p.render.visible||!p.pointA||!p.pointB)){var y=p.bodyA,C=p.bodyB,S,T;if(y?S=l.add(y.position,p.pointA):S=p.pointA,p.render.type==="pin")m.beginPath(),m.arc(S.x,S.y,3,0,2*Math.PI),m.closePath();else{if(C?T=l.add(C.position,p.pointB):T=p.pointB,m.beginPath(),m.moveTo(S.x,S.y),p.render.type==="spring")for(var R=l.sub(T,S),E=l.perp(l.normalise(R)),L=Math.ceil(o.clamp(p.length/5,12,20)),k,D=1;D<L;D+=1)k=D%2===0?1:-1,m.lineTo(S.x+R.x*(D/L)+E.x*k*4,S.y+R.y*(D/L)+E.y*k*4);m.lineTo(T.x,T.y)}p.render.lineWidth&&(m.lineWidth=p.render.lineWidth,m.strokeStyle=p.render.strokeStyle,m.stroke()),p.render.anchors&&(m.fillStyle=p.render.strokeStyle,m.beginPath(),m.arc(S.x,S.y,3,0,2*Math.PI),m.arc(T.x,T.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(g,x,m){var f=m;g.engine;var p=g.options,y=p.showInternalEdges||!p.wireframes,C,S,T,R;for(T=0;T<x.length;T++)if(C=x[T],!!C.render.visible){for(R=C.parts.length>1?1:0;R<C.parts.length;R++)if(S=C.parts[R],!!S.render.visible){if(p.showSleeping&&C.isSleeping?f.globalAlpha=.5*S.render.opacity:S.render.opacity!==1&&(f.globalAlpha=S.render.opacity),S.render.sprite&&S.render.sprite.texture&&!p.wireframes){var E=S.render.sprite,L=P(g,E.texture);f.translate(S.position.x,S.position.y),f.rotate(S.angle),f.drawImage(L,L.width*-E.xOffset*E.xScale,L.height*-E.yOffset*E.yScale,L.width*E.xScale,L.height*E.yScale),f.rotate(-S.angle),f.translate(-S.position.x,-S.position.y)}else{if(S.circleRadius)f.beginPath(),f.arc(S.position.x,S.position.y,S.circleRadius,0,2*Math.PI);else{f.beginPath(),f.moveTo(S.vertices[0].x,S.vertices[0].y);for(var k=1;k<S.vertices.length;k++)!S.vertices[k-1].isInternal||y?f.lineTo(S.vertices[k].x,S.vertices[k].y):f.moveTo(S.vertices[k].x,S.vertices[k].y),S.vertices[k].isInternal&&!y&&f.moveTo(S.vertices[(k+1)%S.vertices.length].x,S.vertices[(k+1)%S.vertices.length].y);f.lineTo(S.vertices[0].x,S.vertices[0].y),f.closePath()}p.wireframes?(f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()):(f.fillStyle=S.render.fillStyle,S.render.lineWidth&&(f.lineWidth=S.render.lineWidth,f.strokeStyle=S.render.strokeStyle,f.stroke()),f.fill())}f.globalAlpha=1}}},e.bodyWireframes=function(g,x,m){var f=m,p=g.options.showInternalEdges,y,C,S,T,R;for(f.beginPath(),S=0;S<x.length;S++)if(y=x[S],!!y.render.visible)for(R=y.parts.length>1?1:0;R<y.parts.length;R++){for(C=y.parts[R],f.moveTo(C.vertices[0].x,C.vertices[0].y),T=1;T<C.vertices.length;T++)!C.vertices[T-1].isInternal||p?f.lineTo(C.vertices[T].x,C.vertices[T].y):f.moveTo(C.vertices[T].x,C.vertices[T].y),C.vertices[T].isInternal&&!p&&f.moveTo(C.vertices[(T+1)%C.vertices.length].x,C.vertices[(T+1)%C.vertices.length].y);f.lineTo(C.vertices[0].x,C.vertices[0].y)}f.lineWidth=1,f.strokeStyle="#bbb",f.stroke()},e.bodyConvexHulls=function(g,x,m){var f=m,p,y,C;for(f.beginPath(),y=0;y<x.length;y++)if(p=x[y],!(!p.render.visible||p.parts.length===1)){for(f.moveTo(p.vertices[0].x,p.vertices[0].y),C=1;C<p.vertices.length;C++)f.lineTo(p.vertices[C].x,p.vertices[C].y);f.lineTo(p.vertices[0].x,p.vertices[0].y)}f.lineWidth=1,f.strokeStyle="rgba(255,255,255,0.2)",f.stroke()},e.vertexNumbers=function(g,x,m){var f=m,p,y,C;for(p=0;p<x.length;p++){var S=x[p].parts;for(C=S.length>1?1:0;C<S.length;C++){var T=S[C];for(y=0;y<T.vertices.length;y++)f.fillStyle="rgba(255,255,255,0.2)",f.fillText(p+"_"+y,T.position.x+(T.vertices[y].x-T.position.x)*.8,T.position.y+(T.vertices[y].y-T.position.y)*.8)}}},e.mousePosition=function(g,x,m){var f=m;f.fillStyle="rgba(255,255,255,0.8)",f.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},e.bodyBounds=function(g,x,m){var f=m;g.engine;var p=g.options;f.beginPath();for(var y=0;y<x.length;y++){var C=x[y];if(C.render.visible)for(var S=x[y].parts,T=S.length>1?1:0;T<S.length;T++){var R=S[T];f.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}p.wireframes?f.strokeStyle="rgba(255,255,255,0.08)":f.strokeStyle="rgba(0,0,0,0.1)",f.lineWidth=1,f.stroke()},e.bodyAxes=function(g,x,m){var f=m;g.engine;var p=g.options,y,C,S,T;for(f.beginPath(),C=0;C<x.length;C++){var R=x[C],E=R.parts;if(!!R.render.visible)if(p.showAxes)for(S=E.length>1?1:0;S<E.length;S++)for(y=E[S],T=0;T<y.axes.length;T++){var L=y.axes[T];f.moveTo(y.position.x,y.position.y),f.lineTo(y.position.x+L.x*20,y.position.y+L.y*20)}else for(S=E.length>1?1:0;S<E.length;S++)for(y=E[S],T=0;T<y.axes.length;T++)f.moveTo(y.position.x,y.position.y),f.lineTo((y.vertices[0].x+y.vertices[y.vertices.length-1].x)/2,(y.vertices[0].y+y.vertices[y.vertices.length-1].y)/2)}p.wireframes?(f.strokeStyle="indianred",f.lineWidth=1):(f.strokeStyle="rgba(255, 255, 255, 0.4)",f.globalCompositeOperation="overlay",f.lineWidth=2),f.stroke(),f.globalCompositeOperation="source-over"},e.bodyPositions=function(g,x,m){var f=m;g.engine;var p=g.options,y,C,S,T;for(f.beginPath(),S=0;S<x.length;S++)if(y=x[S],!!y.render.visible)for(T=0;T<y.parts.length;T++)C=y.parts[T],f.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),f.closePath();for(p.wireframes?f.fillStyle="indianred":f.fillStyle="rgba(0,0,0,0.5)",f.fill(),f.beginPath(),S=0;S<x.length;S++)y=x[S],y.render.visible&&(f.arc(y.positionPrev.x,y.positionPrev.y,2,0,2*Math.PI,!1),f.closePath());f.fillStyle="rgba(255,165,0,0.8)",f.fill()},e.bodyVelocity=function(g,x,m){var f=m;f.beginPath();for(var p=0;p<x.length;p++){var y=x[p];!y.render.visible||(f.moveTo(y.position.x,y.position.y),f.lineTo(y.position.x+(y.position.x-y.positionPrev.x)*2,y.position.y+(y.position.y-y.positionPrev.y)*2))}f.lineWidth=3,f.strokeStyle="cornflowerblue",f.stroke()},e.bodyIds=function(g,x,m){var f=m,p,y;for(p=0;p<x.length;p++)if(!!x[p].render.visible){var C=x[p].parts;for(y=C.length>1?1:0;y<C.length;y++){var S=C[y];f.font="12px Arial",f.fillStyle="rgba(255,255,255,0.5)",f.fillText(S.id,S.position.x+10,S.position.y-10)}}},e.collisions=function(g,x,m){var f=m,p=g.options,y,C,S,T;for(f.beginPath(),S=0;S<x.length;S++)if(y=x[S],!!y.isActive)for(C=y.collision,T=0;T<y.activeContacts.length;T++){var R=y.activeContacts[T],E=R.vertex;f.rect(E.x-1.5,E.y-1.5,3.5,3.5)}for(p.wireframes?f.fillStyle="rgba(255,255,255,0.7)":f.fillStyle="orange",f.fill(),f.beginPath(),S=0;S<x.length;S++)if(y=x[S],!!y.isActive&&(C=y.collision,y.activeContacts.length>0)){var L=y.activeContacts[0].vertex.x,k=y.activeContacts[0].vertex.y;y.activeContacts.length===2&&(L=(y.activeContacts[0].vertex.x+y.activeContacts[1].vertex.x)/2,k=(y.activeContacts[0].vertex.y+y.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?f.moveTo(L-C.normal.x*8,k-C.normal.y*8):f.moveTo(L+C.normal.x*8,k+C.normal.y*8),f.lineTo(L,k)}p.wireframes?f.strokeStyle="rgba(255,165,0,0.7)":f.strokeStyle="orange",f.lineWidth=1,f.stroke()},e.separations=function(g,x,m){var f=m,p=g.options,y,C,S,T,R;for(f.beginPath(),R=0;R<x.length;R++)if(y=x[R],!!y.isActive){C=y.collision,S=C.bodyA,T=C.bodyB;var E=1;!T.isStatic&&!S.isStatic&&(E=.5),T.isStatic&&(E=0),f.moveTo(T.position.x,T.position.y),f.lineTo(T.position.x-C.penetration.x*E,T.position.y-C.penetration.y*E),E=1,!T.isStatic&&!S.isStatic&&(E=.5),S.isStatic&&(E=0),f.moveTo(S.position.x,S.position.y),f.lineTo(S.position.x+C.penetration.x*E,S.position.y+C.penetration.y*E)}p.wireframes?f.strokeStyle="rgba(255,165,0,0.5)":f.strokeStyle="orange",f.stroke()},e.inspector=function(g,x){g.engine;var m=g.selected,f=g.render,p=f.options,y;if(p.hasBounds){var C=f.bounds.max.x-f.bounds.min.x,S=f.bounds.max.y-f.bounds.min.y,T=C/f.options.width,R=S/f.options.height;x.scale(1/T,1/R),x.translate(-f.bounds.min.x,-f.bounds.min.y)}for(var E=0;E<m.length;E++){var L=m[E].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),L.type){case"body":y=L.bounds,x.beginPath(),x.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var k=L.pointA;L.bodyA&&(k=L.pointB),x.beginPath(),x.arc(k.x,k.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}g.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",y=g.selectBounds,x.beginPath(),x.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),p.hasBounds&&x.setTransform(1,0,0,1,0,0)};var r=function(g,x){var m=g.engine,f=g.timing,p=f.historySize,y=m.timing.timestamp;f.delta=x-f.lastTime||e._goodDelta,f.lastTime=x,f.timestampElapsed=y-f.lastTimestamp||0,f.lastTimestamp=y,f.deltaHistory.unshift(f.delta),f.deltaHistory.length=Math.min(f.deltaHistory.length,p),f.engineDeltaHistory.unshift(m.timing.lastDelta),f.engineDeltaHistory.length=Math.min(f.engineDeltaHistory.length,p),f.timestampElapsedHistory.unshift(f.timestampElapsed),f.timestampElapsedHistory.length=Math.min(f.timestampElapsedHistory.length,p),f.engineElapsedHistory.unshift(m.timing.lastElapsed),f.engineElapsedHistory.length=Math.min(f.engineElapsedHistory.length,p),f.elapsedHistory.unshift(f.lastElapsed),f.elapsedHistory.length=Math.min(f.elapsedHistory.length,p)},s=function(g){for(var x=0,m=0;m<g.length;m+=1)x+=g[m];return x/g.length||0},h=function(g,x){var m=document.createElement("canvas");return m.width=g,m.height=x,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},d=function(g){var x=g.getContext("2d"),m=window.devicePixelRatio||1,f=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return m/f},P=function(g,x){var m=g.textures[x];return m||(m=g.textures[x]=new Image,m.src=x,m)},w=function(g,x){var m=x;/(jpg|gif|png)$/.test(x)&&(m="url("+x+")"),g.canvas.style.background=m,g.canvas.style.backgroundSize="contain",g.currentBackground=x}})()},function(M,I){var c={};M.exports=c,function(){c.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(M,I,c){var e={};M.exports=e;var o=c(7),n=c(19),i=c(14),v=c(20),l=c(4),u=c(5),a=c(10),t=c(0),r=c(6);(function(){e.create=function(s){s=s||{};var h={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(h,s);return d.world=s.world||u.create({label:"World"}),d.pairs=s.pairs||v.create(),d.detector=s.detector||i.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(s,h,d){var P=t.now();h=h||1e3/60,d=d||1;var w=s.world,g=s.detector,x=s.pairs,m=s.timing,f=m.timestamp,p;m.timestamp+=h*m.timeScale,m.lastDelta=h*m.timeScale;var y={timestamp:m.timestamp};l.trigger(s,"beforeUpdate",y);var C=u.allBodies(w),S=u.allConstraints(w);for(w.isModified&&i.setBodies(g,C),w.isModified&&u.setModified(w,!1,!1,!0),s.enableSleeping&&o.update(C,m.timeScale),e._bodiesApplyGravity(C,s.gravity),e._bodiesUpdate(C,h,m.timeScale,d,w.bounds),a.preSolveAll(C),p=0;p<s.constraintIterations;p++)a.solveAll(S,m.timeScale);a.postSolveAll(C),g.pairs=s.pairs;var T=i.collisions(g);for(v.update(x,T,f),s.enableSleeping&&o.afterCollisions(x.list,m.timeScale),x.collisionStart.length>0&&l.trigger(s,"collisionStart",{pairs:x.collisionStart}),n.preSolvePosition(x.list),p=0;p<s.positionIterations;p++)n.solvePosition(x.list,m.timeScale);for(n.postSolvePosition(C),a.preSolveAll(C),p=0;p<s.constraintIterations;p++)a.solveAll(S,m.timeScale);for(a.postSolveAll(C),n.preSolveVelocity(x.list),p=0;p<s.velocityIterations;p++)n.solveVelocity(x.list,m.timeScale);return x.collisionActive.length>0&&l.trigger(s,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&l.trigger(s,"collisionEnd",{pairs:x.collisionEnd}),e._bodiesClearForces(C),l.trigger(s,"afterUpdate",y),s.timing.lastElapsed=t.now()-P,s},e.merge=function(s,h){if(t.extend(s,h),h.world){s.world=h.world,e.clear(s);for(var d=u.allBodies(s.world),P=0;P<d.length;P++){var w=d[P];o.set(w,!1),w.id=t.nextId()}}},e.clear=function(s){v.clear(s.pairs),i.clear(s.detector)},e._bodiesClearForces=function(s){for(var h=0;h<s.length;h++){var d=s[h];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(s,h){var d=typeof h.scale!="undefined"?h.scale:.001;if(!(h.x===0&&h.y===0||d===0))for(var P=0;P<s.length;P++){var w=s[P];w.isStatic||w.isSleeping||(w.force.y+=w.mass*h.y*d,w.force.x+=w.mass*h.x*d)}},e._bodiesUpdate=function(s,h,d,P,w){for(var g=0;g<s.length;g++){var x=s[g];x.isStatic||x.isSleeping||r.update(x,h,d,P)}}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var v,l,u,a=i.length;for(v=0;v<a;v++)l=i[v],l.isActive&&(u=l.activeContacts.length,l.collision.parentA.totalContacts+=u,l.collision.parentB.totalContacts+=u)},e.solvePosition=function(i,v){var l,u,a,t,r,s,h,d,P=e._positionDampen,w=i.length;for(l=0;l<w;l++)u=i[l],!(!u.isActive||u.isSensor)&&(a=u.collision,t=a.parentA,r=a.parentB,s=a.normal,u.separation=s.x*(r.positionImpulse.x+a.penetration.x-t.positionImpulse.x)+s.y*(r.positionImpulse.y+a.penetration.y-t.positionImpulse.y));for(l=0;l<w;l++)u=i[l],!(!u.isActive||u.isSensor)&&(a=u.collision,t=a.parentA,r=a.parentB,s=a.normal,d=(u.separation-u.slop)*v,(t.isStatic||r.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(h=P/t.totalContacts,t.positionImpulse.x+=s.x*d*h,t.positionImpulse.y+=s.y*d*h),r.isStatic||r.isSleeping||(h=P/r.totalContacts,r.positionImpulse.x-=s.x*d*h,r.positionImpulse.y-=s.y*d*h))},e.postSolvePosition=function(i){for(var v=e._positionWarming,l=i.length,u=o.translate,a=n.update,t=0;t<l;t++){var r=i[t],s=r.positionImpulse,h=s.x,d=s.y,P=r.velocity;if(r.totalContacts=0,h!==0||d!==0){for(var w=0;w<r.parts.length;w++){var g=r.parts[w];u(g.vertices,s),a(g.bounds,g.vertices,P),g.position.x+=h,g.position.y+=d}r.positionPrev.x+=h,r.positionPrev.y+=d,h*P.x+d*P.y<0?(s.x=0,s.y=0):(s.x*=v,s.y*=v)}}},e.preSolveVelocity=function(i){var v=i.length,l,u;for(l=0;l<v;l++){var a=i[l];if(!(!a.isActive||a.isSensor)){var t=a.activeContacts,r=t.length,s=a.collision,h=s.parentA,d=s.parentB,P=s.normal,w=s.tangent;for(u=0;u<r;u++){var g=t[u],x=g.vertex,m=g.normalImpulse,f=g.tangentImpulse;if(m!==0||f!==0){var p=P.x*m+w.x*f,y=P.y*m+w.y*f;h.isStatic||h.isSleeping||(h.positionPrev.x+=p*h.inverseMass,h.positionPrev.y+=y*h.inverseMass,h.anglePrev+=h.inverseInertia*((x.x-h.position.x)*y-(x.y-h.position.y)*p)),d.isStatic||d.isSleeping||(d.positionPrev.x-=p*d.inverseMass,d.positionPrev.y-=y*d.inverseMass,d.anglePrev-=d.inverseInertia*((x.x-d.position.x)*y-(x.y-d.position.y)*p))}}}}},e.solveVelocity=function(i,v){var l=v*v,u=e._restingThresh*l,a=e._frictionNormalMultiplier,t=e._restingThreshTangent*l,r=Number.MAX_VALUE,s=i.length,h,d,P,w;for(P=0;P<s;P++){var g=i[P];if(!(!g.isActive||g.isSensor)){var x=g.collision,m=x.parentA,f=x.parentB,p=m.velocity,y=f.velocity,C=x.normal.x,S=x.normal.y,T=x.tangent.x,R=x.tangent.y,E=g.activeContacts,L=E.length,k=1/L,D=m.inverseMass+f.inverseMass,V=g.friction*g.frictionStatic*a*l;for(p.x=m.position.x-m.positionPrev.x,p.y=m.position.y-m.positionPrev.y,y.x=f.position.x-f.positionPrev.x,y.y=f.position.y-f.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,f.angularVelocity=f.angle-f.anglePrev,w=0;w<L;w++){var O=E[w],H=O.vertex,G=H.x-m.position.x,U=H.y-m.position.y,N=H.x-f.position.x,K=H.y-f.position.y,z=p.x-U*m.angularVelocity,$=p.y+G*m.angularVelocity,Q=y.x-K*f.angularVelocity,De=y.y+N*f.angularVelocity,de=z-Q,pe=$-De,q=C*de+S*pe,J=T*de+R*pe,ye=g.separation+q,ue=Math.min(ye,1);ue=ye<0?0:ue;var Se=ue*V;J>Se||-J>Se?(d=J>0?J:-J,h=g.friction*(J>0?1:-1)*l,h<-d?h=-d:h>d&&(h=d)):(h=J,d=r);var we=G*S-U*C,Ce=N*S-K*C,Pe=k/(D+m.inverseInertia*we*we+f.inverseInertia*Ce*Ce),ne=(1+g.restitution)*q*Pe;if(h*=Pe,q*q>u&&q<0)O.normalImpulse=0;else{var Ve=O.normalImpulse;O.normalImpulse+=ne,O.normalImpulse=Math.min(O.normalImpulse,0),ne=O.normalImpulse-Ve}if(J*J>t)O.tangentImpulse=0;else{var Oe=O.tangentImpulse;O.tangentImpulse+=h,O.tangentImpulse<-d&&(O.tangentImpulse=-d),O.tangentImpulse>d&&(O.tangentImpulse=d),h=O.tangentImpulse-Oe}var ie=C*ne+T*h,re=S*ne+R*h;m.isStatic||m.isSleeping||(m.positionPrev.x+=ie*m.inverseMass,m.positionPrev.y+=re*m.inverseMass,m.anglePrev+=(G*re-U*ie)*m.inverseInertia),f.isStatic||f.isSleeping||(f.positionPrev.x-=ie*f.inverseMass,f.positionPrev.y-=re*f.inverseMass,f.anglePrev-=(N*re-K*ie)*f.inverseInertia)}}}}})()},function(M,I,c){var e={};M.exports=e;var o=c(9),n=c(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,v,l){var u=i.list,a=u.length,t=i.table,r=v.length,s=i.collisionStart,h=i.collisionEnd,d=i.collisionActive,P,w,g,x;for(s.length=0,h.length=0,d.length=0,x=0;x<a;x++)u[x].confirmedActive=!1;for(x=0;x<r;x++)P=v[x],g=P.pair,g?(g.isActive?d.push(g):s.push(g),o.update(g,P,l),g.confirmedActive=!0):(g=o.create(P,l),t[g.id]=g,s.push(g),u.push(g));var m=[];for(a=u.length,x=0;x<a;x++)g=u[x],g.confirmedActive||(o.setActive(g,!1,l),h.push(g),!g.collision.bodyA.isSleeping&&!g.collision.bodyB.isSleeping&&m.push(x));for(x=0;x<m.length;x++)w=m[x]-x,g=u[w],u.splice(w,1),delete t[g.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(M,I,c){var e=M.exports=c(22);e.Axes=c(11),e.Bodies=c(12),e.Body=c(6),e.Bounds=c(1),e.Collision=c(8),e.Common=c(0),e.Composite=c(5),e.Composites=c(23),e.Constraint=c(10),e.Contact=c(17),e.Detector=c(14),e.Engine=c(18),e.Events=c(4),e.Grid=c(24),e.Mouse=c(13),e.MouseConstraint=c(25),e.Pair=c(9),e.Pairs=c(20),e.Plugin=c(15),e.Query=c(26),e.Render=c(16),e.Resolver=c(19),e.Runner=c(27),e.SAT=c(28),e.Sleeping=c(7),e.Svg=c(29),e.Vector=c(2),e.Vertices=c(3),e.World=c(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(M,I,c){var e={};M.exports=e;var o=c(15),n=c(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){o.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,v){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,v)},e.after=function(i,v){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,v)}})()},function(M,I,c){var e={};M.exports=e;var o=c(5),n=c(10),i=c(0),v=c(6),l=c(12),u=i.deprecated;(function(){e.stack=function(a,t,r,s,h,d,P){for(var w=o.create({label:"Stack"}),g=a,x=t,m,f=0,p=0;p<s;p++){for(var y=0,C=0;C<r;C++){var S=P(g,x,C,p,m,f);if(S){var T=S.bounds.max.y-S.bounds.min.y,R=S.bounds.max.x-S.bounds.min.x;T>y&&(y=T),v.translate(S,{x:R*.5,y:T*.5}),g=S.bounds.max.x+h,o.addBody(w,S),m=S,f+=1}else g+=h}x+=y+d,g=a}return w},e.chain=function(a,t,r,s,h,d){for(var P=a.bodies,w=1;w<P.length;w++){var g=P[w-1],x=P[w],m=g.bounds.max.y-g.bounds.min.y,f=g.bounds.max.x-g.bounds.min.x,p=x.bounds.max.y-x.bounds.min.y,y=x.bounds.max.x-x.bounds.min.x,C={bodyA:g,pointA:{x:f*t,y:m*r},bodyB:x,pointB:{x:y*s,y:p*h}},S=i.extend(C,d);o.addConstraint(a,n.create(S))}return a.label+=" Chain",a},e.mesh=function(a,t,r,s,h){var d=a.bodies,P,w,g,x,m;for(P=0;P<r;P++){for(w=1;w<t;w++)g=d[w-1+P*t],x=d[w+P*t],o.addConstraint(a,n.create(i.extend({bodyA:g,bodyB:x},h)));if(P>0)for(w=0;w<t;w++)g=d[w+(P-1)*t],x=d[w+P*t],o.addConstraint(a,n.create(i.extend({bodyA:g,bodyB:x},h))),s&&w>0&&(m=d[w-1+(P-1)*t],o.addConstraint(a,n.create(i.extend({bodyA:m,bodyB:x},h)))),s&&w<t-1&&(m=d[w+1+(P-1)*t],o.addConstraint(a,n.create(i.extend({bodyA:m,bodyB:x},h))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,r,s,h,d,P){return e.stack(a,t,r,s,h,d,function(w,g,x,m,f,p){var y=Math.min(s,Math.ceil(r/2)),C=f?f.bounds.max.x-f.bounds.min.x:0;if(!(m>y)){m=y-m;var S=m,T=r-1-m;if(!(x<S||x>T)){p===1&&v.translate(f,{x:(x+(r%2===1?1:-1))*C,y:0});var R=f?x*C:0;return P(a+R+x*h,g,x,m,f,p)}}})},e.newtonsCradle=function(a,t,r,s,h){for(var d=o.create({label:"Newtons Cradle"}),P=0;P<r;P++){var w=1.9,g=l.circle(a+P*(s*w),t+h,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=n.create({pointA:{x:a+P*(s*w),y:t},bodyB:g});o.addBody(d,g),o.addConstraint(d,x)}return d},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,r,s,h){var d=v.nextGroup(!0),P=20,w=-r*.5+P,g=r*.5-P,x=0,m=o.create({label:"Car"}),f=l.rectangle(a,t,r,s,{collisionFilter:{group:d},chamfer:{radius:s*.5},density:2e-4}),p=l.circle(a+w,t+x,h,{collisionFilter:{group:d},friction:.8}),y=l.circle(a+g,t+x,h,{collisionFilter:{group:d},friction:.8}),C=n.create({bodyB:f,pointB:{x:w,y:x},bodyA:p,stiffness:1,length:0}),S=n.create({bodyB:f,pointB:{x:g,y:x},bodyA:y,stiffness:1,length:0});return o.addBody(m,f),o.addBody(m,p),o.addBody(m,y),o.addConstraint(m,C),o.addConstraint(m,S),m},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,r,s,h,d,P,w,g,x){g=i.extend({inertia:1/0},g),x=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var m=e.stack(a,t,r,s,h,d,function(f,p){return l.circle(f,p,w,g)});return e.mesh(m,r,s,P,x),m.label="Soft Body",m},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(M,I,c){var e={};M.exports=e;var o=c(9),n=c(0),i=n.deprecated;(function(){e.create=function(v){var l={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(l,v)},e.update=function(v,l,u,a){var t,r,s,h=u.world,d=v.buckets,P,w,g=!1;for(t=0;t<l.length;t++){var x=l[t];if(!(x.isSleeping&&!a)&&!(h.bounds&&(x.bounds.max.x<h.bounds.min.x||x.bounds.min.x>h.bounds.max.x||x.bounds.max.y<h.bounds.min.y||x.bounds.min.y>h.bounds.max.y))){var m=e._getRegion(v,x);if(!x.region||m.id!==x.region.id||a){(!x.region||a)&&(x.region=m);var f=e._regionUnion(m,x.region);for(r=f.startCol;r<=f.endCol;r++)for(s=f.startRow;s<=f.endRow;s++){w=e._getBucketId(r,s),P=d[w];var p=r>=m.startCol&&r<=m.endCol&&s>=m.startRow&&s<=m.endRow,y=r>=x.region.startCol&&r<=x.region.endCol&&s>=x.region.startRow&&s<=x.region.endRow;!p&&y&&y&&P&&e._bucketRemoveBody(v,P,x),(x.region===m||p&&!y||a)&&(P||(P=e._createBucket(d,w)),e._bucketAddBody(v,P,x))}x.region=m,g=!0}}}g&&(v.pairsList=e._createActivePairsList(v))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(v){v.buckets={},v.pairs={},v.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(v,l){var u=Math.min(v.startCol,l.startCol),a=Math.max(v.endCol,l.endCol),t=Math.min(v.startRow,l.startRow),r=Math.max(v.endRow,l.endRow);return e._createRegion(u,a,t,r)},e._getRegion=function(v,l){var u=l.bounds,a=Math.floor(u.min.x/v.bucketWidth),t=Math.floor(u.max.x/v.bucketWidth),r=Math.floor(u.min.y/v.bucketHeight),s=Math.floor(u.max.y/v.bucketHeight);return e._createRegion(a,t,r,s)},e._createRegion=function(v,l,u,a){return{id:v+","+l+","+u+","+a,startCol:v,endCol:l,startRow:u,endRow:a}},e._getBucketId=function(v,l){return"C"+v+"R"+l},e._createBucket=function(v,l){var u=v[l]=[];return u},e._bucketAddBody=function(v,l,u){var a=v.pairs,t=o.id,r=l.length,s;for(s=0;s<r;s++){var h=l[s];if(!(u.id===h.id||u.isStatic&&h.isStatic)){var d=t(u,h),P=a[d];P?P[2]+=1:a[d]=[u,h,1]}}l.push(u)},e._bucketRemoveBody=function(v,l,u){var a=v.pairs,t=o.id,r;l.splice(n.indexOf(l,u),1);var s=l.length;for(r=0;r<s;r++){var h=a[t(u,l[r])];h&&(h[2]-=1)}},e._createActivePairsList=function(v){var l,u=v.pairs,a=n.keys(u),t=a.length,r=[],s;for(s=0;s<t;s++)l=u[a[s]],l[2]>0?r.push(l):delete u[a[s]];return r}})()},function(M,I,c){var e={};M.exports=e;var o=c(3),n=c(7),i=c(13),v=c(4),l=c(14),u=c(10),a=c(5),t=c(0),r=c(1);(function(){e.create=function(s,h){var d=(s?s.mouse:null)||(h?h.mouse:null);d||(s&&s.render&&s.render.canvas?d=i.create(s.render.canvas):h&&h.element?d=i.create(h.element):(d=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var P=u.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:P,collisionFilter:{category:1,mask:4294967295,group:0}},g=t.extend(w,h);return v.on(s,"beforeUpdate",function(){var x=a.allBodies(s.world);e.update(g,x),e._triggerEvents(g)}),g},e.update=function(s,h){var d=s.mouse,P=s.constraint,w=s.body;if(d.button===0){if(P.bodyB)n.set(P.bodyB,!1),P.pointA=d.position;else for(var g=0;g<h.length;g++)if(w=h[g],r.contains(w.bounds,d.position)&&l.canCollide(w.collisionFilter,s.collisionFilter))for(var x=w.parts.length>1?1:0;x<w.parts.length;x++){var m=w.parts[x];if(o.contains(m.vertices,d.position)){P.pointA=d.position,P.bodyB=s.body=w,P.pointB={x:d.position.x-w.position.x,y:d.position.y-w.position.y},P.angleB=w.angle,n.set(w,!1),v.trigger(s,"startdrag",{mouse:d,body:w});break}}}else P.bodyB=s.body=null,P.pointB=null,w&&v.trigger(s,"enddrag",{mouse:d,body:w})},e._triggerEvents=function(s){var h=s.mouse,d=h.sourceEvents;d.mousemove&&v.trigger(s,"mousemove",{mouse:h}),d.mousedown&&v.trigger(s,"mousedown",{mouse:h}),d.mouseup&&v.trigger(s,"mouseup",{mouse:h}),i.clearSourceEvents(h)}})()},function(M,I,c){var e={};M.exports=e;var o=c(2),n=c(8),i=c(1),v=c(12),l=c(3);(function(){e.collides=function(u,a){for(var t=[],r=a.length,s=u.bounds,h=n.collides,d=i.overlaps,P=0;P<r;P++){var w=a[P],g=w.parts.length,x=g===1?0:1;if(d(w.bounds,s))for(var m=x;m<g;m++){var f=w.parts[m];if(d(f.bounds,s)){var p=h(f,u);if(p){t.push(p);break}}}}return t},e.ray=function(u,a,t,r){r=r||1e-100;for(var s=o.angle(a,t),h=o.magnitude(o.sub(a,t)),d=(t.x+a.x)*.5,P=(t.y+a.y)*.5,w=v.rectangle(d,P,h,r,{angle:s}),g=e.collides(w,u),x=0;x<g.length;x+=1){var m=g[x];m.body=m.bodyB=m.bodyA}return g},e.region=function(u,a,t){for(var r=[],s=0;s<u.length;s++){var h=u[s],d=i.overlaps(h.bounds,a);(d&&!t||!d&&t)&&r.push(h)}return r},e.point=function(u,a){for(var t=[],r=0;r<u.length;r++){var s=u[r];if(i.contains(s.bounds,a))for(var h=s.parts.length===1?0:1;h<s.parts.length;h++){var d=s.parts[h];if(i.contains(d.bounds,a)&&l.contains(d.vertices,a)){t.push(s);break}}}return t}})()},function(M,I,c){var e={};M.exports=e;var o=c(4),n=c(18),i=c(0);(function(){var v,l;if(typeof window!="undefined"&&(v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!v){var u;v=function(a){u=setTimeout(function(){a(i.now())},1e3/60)},l=function(){clearTimeout(u)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},r=i.extend(t,a);return r.delta=r.delta||1e3/r.fps,r.deltaMin=r.deltaMin||1e3/r.fps,r.deltaMax=r.deltaMax||1e3/(r.fps*.5),r.fps=1e3/r.delta,r},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function r(s){a.frameRequestId=v(r),s&&a.enabled&&e.tick(a,t,s)}(),a},e.tick=function(a,t,r){var s=t.timing,h=1,d,P={timestamp:s.timestamp};o.trigger(a,"beforeTick",P),a.isFixed?d=a.delta:(d=r-a.timePrev||a.delta,a.timePrev=r,a.deltaHistory.push(d),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),d=Math.min.apply(null,a.deltaHistory),d=d<a.deltaMin?a.deltaMin:d,d=d>a.deltaMax?a.deltaMax:d,h=d/a.delta,a.delta=d),a.timeScalePrev!==0&&(h*=s.timeScale/a.timeScalePrev),s.timeScale===0&&(h=0),a.timeScalePrev=s.timeScale,a.correction=h,a.frameCounter+=1,r-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((r-a.counterTimestamp)/1e3),a.counterTimestamp=r,a.frameCounter=0),o.trigger(a,"tick",P),o.trigger(a,"beforeUpdate",P),n.update(t,d,h),o.trigger(a,"afterUpdate",P),o.trigger(a,"afterTick",P)},e.stop=function(a){l(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(M,I,c){var e={};M.exports=e;var o=c(8),n=c(0),i=n.deprecated;(function(){e.collides=function(v,l){return o.collides(v,l)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(M,I,c){var e={};M.exports=e,c(1);var o=c(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var v,l,u,a,t,r,s,h,d,P,w=[],g,x,m=0,f=0,p=0;i=i||15;var y=function(S,T,R){var E=R%2===1&&R>1;if(!d||S!=d.x||T!=d.y){d&&E?(g=d.x,x=d.y):(g=0,x=0);var L={x:g+S,y:x+T};(E||!d)&&(d=L),w.push(L),f=g+S,p=x+T}},C=function(S){var T=S.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":f=S.x,p=S.y;break;case"H":f=S.x;break;case"V":p=S.y;break}y(f,p,S.pathSegType)}};for(e._svgPathToAbsolute(n),u=n.getTotalLength(),r=[],v=0;v<n.pathSegList.numberOfItems;v+=1)r.push(n.pathSegList.getItem(v));for(s=r.concat();m<u;){if(P=n.getPathSegAtLength(m),t=r[P],t!=h){for(;s.length&&s[0]!=t;)C(s.shift());h=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=n.getPointAtLength(m),y(a.x,a.y,0);break}m+=i}for(v=0,l=s.length;v<l;++v)C(s[v]);return w},e._svgPathToAbsolute=function(n){for(var i,v,l,u,a,t,r=n.pathSegList,s=0,h=0,d=r.numberOfItems,P=0;P<d;++P){var w=r.getItem(P),g=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(g))"x"in w&&(s=w.x),"y"in w&&(h=w.y);else switch("x1"in w&&(l=s+w.x1),"x2"in w&&(a=s+w.x2),"y1"in w&&(u=h+w.y1),"y2"in w&&(t=h+w.y2),"x"in w&&(s+=w.x),"y"in w&&(h+=w.y),g){case"m":r.replaceItem(n.createSVGPathSegMovetoAbs(s,h),P);break;case"l":r.replaceItem(n.createSVGPathSegLinetoAbs(s,h),P);break;case"h":r.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(s),P);break;case"v":r.replaceItem(n.createSVGPathSegLinetoVerticalAbs(h),P);break;case"c":r.replaceItem(n.createSVGPathSegCurvetoCubicAbs(s,h,l,u,a,t),P);break;case"s":r.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(s,h,a,t),P);break;case"q":r.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(s,h,l,u),P);break;case"t":r.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(s,h),P);break;case"a":r.replaceItem(n.createSVGPathSegArcAbs(s,h,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),P);break;case"z":case"Z":s=i,h=v;break}(g=="M"||g=="m")&&(i=s,v=h)}}})()},function(M,I,c){var e={};M.exports=e;var o=c(5);c(0),function(){e.create=o.create,e.add=o.add,e.remove=o.remove,e.clear=o.clear,e.addComposite=o.addComposite,e.addBody=o.addBody,e.addConstraint=o.addConstraint}()}])})})(W);var me={exports:{}};(function(A,B){(function(M,I){{var c=I();A&&A.exports&&(B=A.exports=c),B.randomColor=c}})(se,function(){var M=null,I={};d();var c=[],e=function(f){if(f=f||{},f.seed!==void 0&&f.seed!==null&&f.seed===parseInt(f.seed,10))M=f.seed;else if(typeof f.seed=="string")M=x(f.seed);else{if(f.seed!==void 0&&f.seed!==null)throw new TypeError("The seed value must be an integer or string");M=null}var p,y,C;if(f.count!==null&&f.count!==void 0){for(var S=f.count,T=[],R=0;R<f.count;R++)c.push(!1);for(f.count=null;S>T.length;){var E=e(f);M!==null&&(f.seed=M),T.push(E)}return f.count=S,T}return p=o(f),y=n(p,f),C=i(p,y,f),v([p,y,C],f)};function o(f){if(c.length>0){var p=m(f.hue),y=r(p),C=(p[1]-p[0])/c.length,S=parseInt((y-p[0])/C);c[S]===!0?S=(S+2)%c.length:c[S]=!0;var T=(p[0]+S*C)%359,R=(p[0]+(S+1)*C)%359;return p=[T,R],y=r(p),y<0&&(y=360+y),y}else{var p=u(f.hue);return y=r(p),y<0&&(y=360+y),y}}function n(f,p){if(p.hue==="monochrome")return 0;if(p.luminosity==="random")return r([0,100]);var y=a(f),C=y[0],S=y[1];switch(p.luminosity){case"bright":C=55;break;case"dark":C=S-10;break;case"light":S=55;break}return r([C,S])}function i(f,p,y){var C=l(f,p),S=100;switch(y.luminosity){case"dark":S=C+20;break;case"light":C=(S+C)/2;break;case"random":C=0,S=100;break}return r([C,S])}function v(f,p){switch(p.format){case"hsvArray":return f;case"hslArray":return g(f);case"hsl":var y=g(f);return"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)";case"hsla":var C=g(f),R=p.alpha||Math.random();return"hsla("+C[0]+", "+C[1]+"%, "+C[2]+"%, "+R+")";case"rgbArray":return P(f);case"rgb":var S=P(f);return"rgb("+S.join(", ")+")";case"rgba":var T=P(f),R=p.alpha||Math.random();return"rgba("+T.join(", ")+", "+R+")";default:return s(f)}}function l(f,p){for(var y=t(f).lowerBounds,C=0;C<y.length-1;C++){var S=y[C][0],T=y[C][1],R=y[C+1][0],E=y[C+1][1];if(p>=S&&p<=R){var L=(E-T)/(R-S),k=T-L*S;return L*p+k}}return 0}function u(f){if(typeof parseInt(f)=="number"){var p=parseInt(f);if(p<360&&p>0)return[p,p]}if(typeof f=="string"){if(I[f]){var y=I[f];if(y.hueRange)return y.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var C=w(f)[0];return[C,C]}}return[0,360]}function a(f){return t(f).saturationRange}function t(f){f>=334&&f<=360&&(f-=360);for(var p in I){var y=I[p];if(y.hueRange&&f>=y.hueRange[0]&&f<=y.hueRange[1])return I[p]}return"Color not found"}function r(f){if(M===null){var p=.618033988749895,y=Math.random();return y+=p,y%=1,Math.floor(f[0]+y*(f[1]+1-f[0]))}else{var C=f[1]||1,S=f[0]||0;M=(M*9301+49297)%233280;var T=M/233280;return Math.floor(S+T*(C-S))}}function s(f){var p=P(f);function y(S){var T=S.toString(16);return T.length==1?"0"+T:T}var C="#"+y(p[0])+y(p[1])+y(p[2]);return C}function h(f,p,y){var C=y[0][0],S=y[y.length-1][0],T=y[y.length-1][1],R=y[0][1];I[f]={hueRange:p,lowerBounds:y,saturationRange:[C,S],brightnessRange:[T,R]}}function d(){h("monochrome",null,[[0,0],[100,0]]),h("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),h("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),h("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),h("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),h("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),h("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),h("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function P(f){var p=f[0];p===0&&(p=1),p===360&&(p=359),p=p/360;var y=f[1]/100,C=f[2]/100,S=Math.floor(p*6),T=p*6-S,R=C*(1-y),E=C*(1-T*y),L=C*(1-(1-T)*y),k=256,D=256,V=256;switch(S){case 0:k=C,D=L,V=R;break;case 1:k=E,D=C,V=R;break;case 2:k=R,D=C,V=L;break;case 3:k=R,D=E,V=C;break;case 4:k=L,D=R,V=C;break;case 5:k=C,D=R,V=E;break}var O=[Math.floor(k*255),Math.floor(D*255),Math.floor(V*255)];return O}function w(f){f=f.replace(/^#/,""),f=f.length===3?f.replace(/(.)/g,"$1$1"):f;var p=parseInt(f.substr(0,2),16)/255,y=parseInt(f.substr(2,2),16)/255,C=parseInt(f.substr(4,2),16)/255,S=Math.max(p,y,C),T=S-Math.min(p,y,C),R=S?T/S:0;switch(S){case p:return[60*((y-C)/T%6)||0,R,S];case y:return[60*((C-p)/T+2)||0,R,S];case C:return[60*((p-y)/T+4)||0,R,S]}}function g(f){var p=f[0],y=f[1]/100,C=f[2]/100,S=(2-y)*C;return[p,Math.round(y*C/(S<1?S:2-S)*1e4)/100,S/2*100]}function x(f){for(var p=0,y=0;y!==f.length&&!(p>=Number.MAX_SAFE_INTEGER);y++)p+=f.charCodeAt(y);return p}function m(f){if(isNaN(f)){if(typeof f=="string"){if(I[f]){var y=I[f];if(y.hueRange)return y.hueRange}else if(f.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var C=w(f)[0];return t(C).hueRange}}}else{var p=parseInt(f);if(p<360&&p>0)return t(f).hueRange}return[0,360]}return e})})(me,me.exports);var Ie=me.exports;const X=be({left:!1,right:!1,jump:!1});function mt(A){let B,M;return{c:j,l:j,m(I,c){B||(M=[ve(window,"keydown",A[0]),ve(window,"keyup",A[1])],B=!0)},p:j,i:j,o:j,d(I){B=!1,He(M)}}}function dt(A,B,M){let I;Ee(A,X,o=>M(2,I=o));function c(o){o.key==" "&&Y(X,I.jump=!0,I),(o.key=="ArrowRight"||o.key=="d")&&Y(X,I.right=!0,I),(o.key=="ArrowLeft"||o.key=="a")&&Y(X,I.left=!0,I)}function e(o){o.key==" "&&Y(X,I.jump=!1,I),(o.key=="ArrowRight"||o.key=="d")&&Y(X,I.right=!1,I),(o.key=="ArrowLeft"||o.key=="a")&&Y(X,I.left=!1,I)}return[c,e]}class pt extends Te{constructor(B){super(),Be(this,B,dt,mt,Re,{})}}const{window:yt}=qe;function St(A){let B,M,I,c,e,o;return B=new pt({}),{c(){We(B.$$.fragment),M=Ne(),I=Ge("canvas"),this.h()},l(n){Ue(B.$$.fragment,n),M=ze(n),I=$e(n,"CANVAS",{width:!0,height:!0}),Qe(I).forEach(ce),this.h()},h(){ae(I,"width",A[0]),ae(I,"height",A[1])},m(n,i){Ze(B,n,i),Me(n,M,i),Me(n,I,i),A[5](I),c=!0,e||(o=ve(yt,"resize",A[4]),e=!0)},p(n,[i]){(!c||i&1)&&ae(I,"width",n[0]),(!c||i&2)&&ae(I,"height",n[1])},i(n){c||(Ke(B.$$.fragment,n),c=!0)},o(n){Je(B.$$.fragment,n),c=!1},d(n){Xe(B,n),n&&ce(M),n&&ce(I),A[5](null),e=!1,o()}}}function wt(A,B,M){let I;Ee(A,X,P=>M(11,I=P));let c,e,o,n,i,v,l=800,u=600,a;const t=[{x:0,y:160},{x:80,y:160},{x:100,y:50},{x:60,y:80},{x:20,y:80},{x:-20,y:50},{x:0,y:160}];function r(){[o,v,n,i].forEach(P=>{P&&W.exports.World.remove(e.world,P)}),o=W.exports.Bodies.rectangle(0,u,l*4,60,{isStatic:!0}),n=W.exports.Bodies.rectangle(0,60,60,u*4,{isStatic:!0}),i=W.exports.Bodies.rectangle(l,60,60,u*4,{isStatic:!0}),W.exports.Composite.add(e.world,[o,n,i])}const s=(P,w)=>Math.random()*(w-P+1)+P;Ye(()=>{M(0,l=window.innerWidth),M(1,u=window.innerHeight),e=W.exports.Engine.create(),W.exports.Common.setDecomp(_e),c=W.exports.Bodies.fromVertices(400,u-60,[t]);const P=W.exports.Runner.create(),w=(f,p)=>f.bodyA==p||f.bodyB==p,g=(f,p)=>f.bodyA!=p&&f.bodyB!=p;function x(f,p){if(f.bodyA!=p)return f.bodyA;if(f.bodyB!=p)return f.bodyB}W.exports.Runner.run(P,e),r(),W.exports.Composite.add(e.world,[c]),W.exports.Events.on(e,"collisionActive",f=>{f.pairs.forEach(p=>{w(p,o)&&g(p,c)&&x(p,o).velocity.x<.1&&W.exports.World.remove(e.world,x(p,o))})}),W.exports.Events.on(e,"beforeUpdate",function(f){I.jump&&c.position.y>u-(60+40)?W.exports.Body.setVelocity(c,{x:c.velocity.x,y:-10}):I.left?W.exports.Body.setVelocity(c,{x:-5,y:c.velocity.y}):I.right&&W.exports.Body.setVelocity(c,{x:5,y:c.velocity.y})}),W.exports.Body.setInertia(c,1/0),setInterval(()=>{if(!document.hasFocus())return;const f=W.exports.Bodies.circle(s(60,l-60),s(60,u-60),s(8,16));W.exports.Body.setMass(f,.05),W.exports.World.add(e.world,f)},100);const m=a.getContext("2d");(function f(){const p=W.exports.Composite.allBodies(e.world);window.requestAnimationFrame(f),m.fillStyle="#022038",m.fillRect(0,0,a.width,a.height);for(const y of p)for(const C of y.parts){const S=C.vertices;m.beginPath(),m.moveTo(S[0].x,S[0].y);for(const T of S)m.lineTo(T.x,T.y);m.lineTo(S[0].x,S[0].y),m.closePath(),m.lineWidth=0,y==o||y==v||y==n||y==i?m.fillStyle="#444":y==c?m.fillStyle=Ie({seed:C.id,hue:"monochrome"}):m.fillStyle=Ie({seed:y.id,luminosity:"light",hue:"monochrome"}),m.fill()}})()});const h=()=>{M(0,l=window.innerWidth),M(1,u=window.innerHeight),r()};function d(P){je[P?"unshift":"push"](()=>{a=P,M(2,a)})}return[l,u,a,r,h,d]}class Mt extends Te{constructor(B){super(),Be(this,B,wt,St,Re,{})}}export{Mt as default};

import{N as de,S as Pe,i as Me,s as Ae,I as Ze,e as X,c as Y,a as ee,d as V,b as U,g as Q,O as Se,J as Ke,K as Je,L as Xe,q,o as te,P as ft,w as le,x as fe,y as ue,B as ce,Q as ie,F as We,R as Ct,k as ae,l as De,m as se,E as Ge,t as $,h as z,M as H,j as he,T as Pt,U as rt,G as ut,V as oe,p as Mt,v as At,W as It,n as Tt,X as Et}from"../chunks/index-3642c6c3.js";import{r as Bt,d as ve,w as Ie}from"../chunks/index-4f968029.js";var Re=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kt(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}var ct={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(w,y){(function(A,u){w.exports=u()})(Re,function(){return function(p){var A={};function u(e){if(A[e])return A[e].exports;var l=A[e]={i:e,l:!1,exports:{}};return p[e].call(l.exports,l,l.exports,u),l.l=!0,l.exports}return u.m=p,u.c=A,u.d=function(e,l,i){u.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:i})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,l){if(l&1&&(e=u(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(u.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var n in e)u.d(i,n,function(h){return e[h]}.bind(null,n));return i},u.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(l,"a",l),l},u.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},u.p="",u(u.s=21)}([function(p,A){var u={};p.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(l,i){var n,h;typeof i=="boolean"?(n=2,h=i):(n=1,h=!0);for(var o=n;o<arguments.length;o++){var f=arguments[o];if(f)for(var r in f)h&&f[r]&&f[r].constructor===Object&&(!l[r]||l[r].constructor===Object)?(l[r]=l[r]||{},u.extend(l[r],h,f[r])):l[r]=f[r]}return l},u.clone=function(l,i){return u.extend({},i,l)},u.keys=function(l){if(Object.keys)return Object.keys(l);var i=[];for(var n in l)i.push(n);return i},u.values=function(l){var i=[];if(Object.keys){for(var n=Object.keys(l),h=0;h<n.length;h++)i.push(l[n[h]]);return i}for(var o in l)i.push(l[o]);return i},u.get=function(l,i,n,h){i=i.split(".").slice(n,h);for(var o=0;o<i.length;o+=1)l=l[i[o]];return l},u.set=function(l,i,n,h,o){var f=i.split(".").slice(h,o);return u.get(l,i,0,-1)[f[f.length-1]]=n,n},u.shuffle=function(l){for(var i=l.length-1;i>0;i--){var n=Math.floor(u.random()*(i+1)),h=l[i];l[i]=l[n],l[n]=h}return l},u.choose=function(l){return l[Math.floor(u.random()*l.length)]},u.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},u.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},u.isFunction=function(l){return typeof l=="function"},u.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},u.isString=function(l){return toString.call(l)==="[object String]"},u.clamp=function(l,i,n){return l<i?i:l>n?n:l},u.sign=function(l){return l<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(l,i){return l=typeof l!="undefined"?l:0,i=typeof i!="undefined"?i:1,l+e()*(i-l)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[l]||(u.warn(l),u._warnedOnce[l]=!0)},u.deprecated=function(l,i,n){l[i]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",n)},l[i])},u.nextId=function(){return u._nextId++},u.indexOf=function(l,i){if(l.indexOf)return l.indexOf(i);for(var n=0;n<l.length;n++)if(l[n]===i)return n;return-1},u.map=function(l,i){if(l.map)return l.map(i);for(var n=[],h=0;h<l.length;h+=1)n.push(i(l[h]));return n},u.topologicalSort=function(l){var i=[],n=[],h=[];for(var o in l)!n[o]&&!h[o]&&u._topologicalSort(o,n,h,l,i);return i},u._topologicalSort=function(l,i,n,h,o){var f=h[l]||[];n[l]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];n[t]||i[t]||u._topologicalSort(t,i,n,h,o)}n[l]=!1,i[l]=!0,o.push(l)},u.chain=function(){for(var l=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?l.push.apply(l,n._chained):l.push(n)}var h=function(){for(var o,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<l.length;r+=1){var a=l[r].apply(o,f);typeof a!="undefined"&&(o=a)}return o};return h._chained=l,h},u.chainPathBefore=function(l,i,n){return u.set(l,i,u.chain(n,u.get(l,i)))},u.chainPathAfter=function(l,i,n){return u.set(l,i,u.chain(u.get(l,i),n))},u.setDecomp=function(l){u._decomp=l},u.getDecomp=function(){var l=u._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof Re!="undefined"&&(l=Re.decomp)}catch{l=null}return l}}()},function(p,A){var u={};p.exports=u,function(){u.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(l,e),l},u.update=function(e,l,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<l.length;n++){var h=l[n];h.x>e.max.x&&(e.max.x=h.x),h.x<e.min.x&&(e.min.x=h.x),h.y>e.max.y&&(e.max.y=h.y),h.y<e.min.y&&(e.min.y=h.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},u.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},u.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},u.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},u.shift=function(e,l){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+i,e.min.y=l.y,e.max.y=l.y+n}}()},function(p,A){var u={};p.exports=u,function(){u.create=function(e,l){return{x:e||0,y:l||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,l,i){var n=Math.cos(l),h=Math.sin(l);i||(i={});var o=e.x*n-e.y*h;return i.y=e.x*h+e.y*n,i.x=o,i},u.rotateAbout=function(e,l,i,n){var h=Math.cos(l),o=Math.sin(l);n||(n={});var f=i.x+((e.x-i.x)*h-(e.y-i.y)*o);return n.y=i.y+((e.x-i.x)*o+(e.y-i.y)*h),n.x=f,n},u.normalise=function(e){var l=u.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},u.dot=function(e,l){return e.x*l.x+e.y*l.y},u.cross=function(e,l){return e.x*l.y-e.y*l.x},u.cross3=function(e,l,i){return(l.x-e.x)*(i.y-e.y)-(l.y-e.y)*(i.x-e.x)},u.add=function(e,l,i){return i||(i={}),i.x=e.x+l.x,i.y=e.y+l.y,i},u.sub=function(e,l,i){return i||(i={}),i.x=e.x-l.x,i.y=e.y-l.y,i},u.mult=function(e,l){return{x:e.x*l,y:e.y*l}},u.div=function(e,l){return{x:e.x/l,y:e.y/l}},u.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(p,A,u){var e={};p.exports=e;var l=u(2),i=u(0);(function(){e.create=function(n,h){for(var o=[],f=0;f<n.length;f++){var r=n[f],t={x:r.x,y:r.y,index:f,body:h,isInternal:!1};o.push(t)}return o},e.fromPath=function(n,h){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(o,function(r,t,a){f.push({x:parseFloat(t),y:parseFloat(a)})}),e.create(f,h)},e.centre=function(n){for(var h=e.area(n,!0),o={x:0,y:0},f,r,t,a=0;a<n.length;a++)t=(a+1)%n.length,f=l.cross(n[a],n[t]),r=l.mult(l.add(n[a],n[t]),f),o=l.add(o,r);return l.div(o,6*h)},e.mean=function(n){for(var h={x:0,y:0},o=0;o<n.length;o++)h.x+=n[o].x,h.y+=n[o].y;return l.div(h,n.length)},e.area=function(n,h){for(var o=0,f=n.length-1,r=0;r<n.length;r++)o+=(n[f].x-n[r].x)*(n[f].y+n[r].y),f=r;return h?o/2:Math.abs(o)/2},e.inertia=function(n,h){for(var o=0,f=0,r=n,t,a,s=0;s<r.length;s++)a=(s+1)%r.length,t=Math.abs(l.cross(r[a],r[s])),o+=t*(l.dot(r[a],r[a])+l.dot(r[a],r[s])+l.dot(r[s],r[s])),f+=t;return h/6*(o/f)},e.translate=function(n,h,o){o=typeof o!="undefined"?o:1;var f=n.length,r=h.x*o,t=h.y*o,a;for(a=0;a<f;a++)n[a].x+=r,n[a].y+=t;return n},e.rotate=function(n,h,o){if(h!==0){var f=Math.cos(h),r=Math.sin(h),t=o.x,a=o.y,s=n.length,g,d,T,S;for(S=0;S<s;S++)g=n[S],d=g.x-t,T=g.y-a,g.x=t+(d*f-T*r),g.y=a+(d*r+T*f);return n}},e.contains=function(n,h){for(var o=h.x,f=h.y,r=n.length,t=n[r-1],a,s=0;s<r;s++){if(a=n[s],(o-t.x)*(a.y-t.y)+(f-t.y)*(t.x-a.x)>0)return!1;t=a}return!0},e.scale=function(n,h,o,f){if(h===1&&o===1)return n;f=f||e.centre(n);for(var r,t,a=0;a<n.length;a++)r=n[a],t=l.sub(r,f),n[a].x=f.x+t.x*h,n[a].y=f.y+t.y*o;return n},e.chamfer=function(n,h,o,f,r){typeof h=="number"?h=[h]:h=h||[8],o=typeof o!="undefined"?o:-1,f=f||2,r=r||14;for(var t=[],a=0;a<n.length;a++){var s=n[a-1>=0?a-1:n.length-1],g=n[a],d=n[(a+1)%n.length],T=h[a<h.length?a:h.length-1];if(T===0){t.push(g);continue}var S=l.normalise({x:g.y-s.y,y:s.x-g.x}),v=l.normalise({x:d.y-g.y,y:g.x-d.x}),m=Math.sqrt(2*Math.pow(T,2)),x=l.mult(i.clone(S),T),c=l.normalise(l.mult(l.add(S,v),.5)),M=l.sub(g,l.mult(c,m)),P=o;o===-1&&(P=Math.pow(T,.32)*1.75),P=i.clamp(P,f,r),P%2===1&&(P+=1);for(var I=Math.acos(l.dot(S,v)),C=I/P,E=0;E<P;E++)t.push(l.add(l.rotate(x,C*E),M))}return t},e.clockwiseSort=function(n){var h=e.mean(n);return n.sort(function(o,f){return l.angle(h,o)-l.angle(h,f)}),n},e.isConvex=function(n){var h=0,o=n.length,f,r,t,a;if(o<3)return null;for(f=0;f<o;f++)if(r=(f+1)%o,t=(f+2)%o,a=(n[r].x-n[f].x)*(n[t].y-n[r].y),a-=(n[r].y-n[f].y)*(n[t].x-n[r].x),a<0?h|=1:a>0&&(h|=2),h===3)return!1;return h!==0?!0:null},e.hull=function(n){var h=[],o=[],f,r;for(n=n.slice(0),n.sort(function(t,a){var s=t.x-a.x;return s!==0?s:t.y-a.y}),r=0;r<n.length;r+=1){for(f=n[r];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],f)<=0;)o.pop();o.push(f)}for(r=n.length-1;r>=0;r-=1){for(f=n[r];h.length>=2&&l.cross3(h[h.length-2],h[h.length-1],f)<=0;)h.pop();h.push(f)}return h.pop(),o.pop(),h.concat(o)}})()},function(p,A,u){var e={};p.exports=e;var l=u(0);(function(){e.on=function(i,n,h){for(var o=n.split(" "),f,r=0;r<o.length;r++)f=o[r],i.events=i.events||{},i.events[f]=i.events[f]||[],i.events[f].push(h);return h},e.off=function(i,n,h){if(!n){i.events={};return}typeof n=="function"&&(h=n,n=l.keys(i.events).join(" "));for(var o=n.split(" "),f=0;f<o.length;f++){var r=i.events[o[f]],t=[];if(h&&r)for(var a=0;a<r.length;a++)r[a]!==h&&t.push(r[a]);i.events[o[f]]=t}},e.trigger=function(i,n,h){var o,f,r,t,a=i.events;if(a&&l.keys(a).length>0){h||(h={}),o=n.split(" ");for(var s=0;s<o.length;s++)if(f=o[s],r=a[f],r){t=l.clone(h,!1),t.name=f,t.source=i;for(var g=0;g<r.length;g++)r[g].apply(i,[t])}}}})()},function(p,A,u){var e={};p.exports=e;var l=u(4),i=u(0),n=u(1),h=u(6);(function(){e.create=function(o){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,f,r,t){if(o.isModified=f,f&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),r&&o.parent&&e.setModified(o.parent,f,r,t),t)for(var a=0;a<o.composites.length;a++){var s=o.composites[a];e.setModified(s,f,r,t)}},e.add=function(o,f){var r=[].concat(f);l.trigger(o,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var a=r[t];switch(a.type){case"body":if(a.parent!==a){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,a);break;case"constraint":e.addConstraint(o,a);break;case"composite":e.addComposite(o,a);break;case"mouseConstraint":e.addConstraint(o,a.constraint);break}}return l.trigger(o,"afterAdd",{object:f}),o},e.remove=function(o,f,r){var t=[].concat(f);l.trigger(o,"beforeRemove",{object:f});for(var a=0;a<t.length;a++){var s=t[a];switch(s.type){case"body":e.removeBody(o,s,r);break;case"constraint":e.removeConstraint(o,s,r);break;case"composite":e.removeComposite(o,s,r);break;case"mouseConstraint":e.removeConstraint(o,s.constraint);break}}return l.trigger(o,"afterRemove",{object:f}),o},e.addComposite=function(o,f){return o.composites.push(f),f.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,f,r){var t=i.indexOf(o.composites,f);if(t!==-1&&e.removeCompositeAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeComposite(o.composites[a],f,!0);return o},e.removeCompositeAt=function(o,f){return o.composites.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,f){return o.bodies.push(f),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,f,r){var t=i.indexOf(o.bodies,f);if(t!==-1&&e.removeBodyAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeBody(o.composites[a],f,!0);return o},e.removeBodyAt=function(o,f){return o.bodies.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,f){return o.constraints.push(f),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,f,r){var t=i.indexOf(o.constraints,f);if(t!==-1&&e.removeConstraintAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeConstraint(o.composites[a],f,!0);return o},e.removeConstraintAt=function(o,f){return o.constraints.splice(f,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,f,r){if(r)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],f,!0);return f?o.bodies=o.bodies.filter(function(a){return a.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var f=[].concat(o.bodies),r=0;r<o.composites.length;r++)f=f.concat(e.allBodies(o.composites[r]));return o.cache&&(o.cache.allBodies=f),f},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var f=[].concat(o.constraints),r=0;r<o.composites.length;r++)f=f.concat(e.allConstraints(o.composites[r]));return o.cache&&(o.cache.allConstraints=f),f},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var f=[].concat(o.composites),r=0;r<o.composites.length;r++)f=f.concat(e.allComposites(o.composites[r]));return o.cache&&(o.cache.allComposites=f),f},e.get=function(o,f,r){var t,a;switch(r){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(a=t.filter(function(s){return s.id.toString()===f.toString()}),a.length===0?null:a[0]):null},e.move=function(o,f,r){return e.remove(o,f),e.add(r,f),o},e.rebase=function(o){for(var f=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),r=0;r<f.length;r++)f[r].id=i.nextId();return o},e.translate=function(o,f,r){for(var t=r?e.allBodies(o):o.bodies,a=0;a<t.length;a++)h.translate(t[a],f);return o},e.rotate=function(o,f,r,t){for(var a=Math.cos(f),s=Math.sin(f),g=t?e.allBodies(o):o.bodies,d=0;d<g.length;d++){var T=g[d],S=T.position.x-r.x,v=T.position.y-r.y;h.setPosition(T,{x:r.x+(S*a-v*s),y:r.y+(S*s+v*a)}),h.rotate(T,f)}return o},e.scale=function(o,f,r,t,a){for(var s=a?e.allBodies(o):o.bodies,g=0;g<s.length;g++){var d=s[g],T=d.position.x-t.x,S=d.position.y-t.y;h.setPosition(d,{x:t.x+T*f,y:t.y+S*r}),h.scale(d,f,r)}return o},e.bounds=function(o){for(var f=e.allBodies(o),r=[],t=0;t<f.length;t+=1){var a=f[t];r.push(a.bounds.min,a.bounds.max)}return n.create(r)}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(2),n=u(7);u(16);var h=u(0),o=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var a={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=h.extend(a,t);return r(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,a){a=a||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:a.axes||t.axes,area:a.area||t.area,mass:a.mass||t.mass,inertia:a.inertia||t.inertia});var s=t.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||g,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,a,s){var g;typeof a=="string"&&(g=a,a={},a[g]=s);for(g in a)if(!!Object.prototype.hasOwnProperty.call(a,g))switch(s=a[g],g){case"isStatic":e.setStatic(t,s);break;case"isSleeping":n.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[g]=s}},e.setStatic=function(t,a){for(var s=0;s<t.parts.length;s++){var g=t.parts[s];g.isStatic=a,a?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},e.setMass=function(t,a){var s=t.inertia/(t.mass/6);t.inertia=s*(a/6),t.inverseInertia=1/t.inertia,t.mass=a,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,a){e.setMass(t,a*t.area),t.density=a},e.setInertia=function(t,a){t.inertia=a,t.inverseInertia=1/t.inertia},e.setVertices=function(t,a){a[0].body===t?t.vertices=a:t.vertices=l.create(a,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,a,s){var g;for(a=a.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,g=0;g<a.length;g++){var d=a[g];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var T=[];for(g=0;g<a.length;g++)T=T.concat(a[g].vertices);l.clockwiseSort(T);var S=l.hull(T),v=l.centre(S);e.setVertices(t,S),l.translate(t.vertices,v)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,a,s){s?(t.positionPrev.x+=a.x,t.positionPrev.y+=a.y,t.position.x+=a.x,t.position.y+=a.y):(t.positionPrev.x=a.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=a.y-(t.position.y-t.positionPrev.y),t.position.x=a.x,t.position.y=a.y)},e.setPosition=function(t,a){var s=i.sub(a,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var g=0;g<t.parts.length;g++){var d=t.parts[g];d.position.x+=s.x,d.position.y+=s.y,l.translate(d.vertices,s),o.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,a){var s=a-t.angle;t.anglePrev+=s;for(var g=0;g<t.parts.length;g++){var d=t.parts[g];d.angle+=s,l.rotate(d.vertices,s,t.position),f.rotate(d.axes,s),o.update(d.bounds,d.vertices,t.velocity),g>0&&i.rotateAbout(d.position,s,t.position,d.position)}},e.setVelocity=function(t,a){t.positionPrev.x=t.position.x-a.x,t.positionPrev.y=t.position.y-a.y,t.velocity.x=a.x,t.velocity.y=a.y,t.speed=i.magnitude(t.velocity)},e.setAngularVelocity=function(t,a){t.anglePrev=t.angle-a,t.angularVelocity=a,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,a){e.setPosition(t,i.add(t.position,a))},e.rotate=function(t,a,s){if(!s)e.setAngle(t,t.angle+a);else{var g=Math.cos(a),d=Math.sin(a),T=t.position.x-s.x,S=t.position.y-s.y;e.setPosition(t,{x:s.x+(T*g-S*d),y:s.y+(T*d+S*g)}),e.setAngle(t,t.angle+a)}},e.scale=function(t,a,s,g){var d=0,T=0;g=g||t.position;for(var S=0;S<t.parts.length;S++){var v=t.parts[S];l.scale(v.vertices,a,s,g),v.axes=f.fromVertices(v.vertices),v.area=l.area(v.vertices),e.setMass(v,t.density*v.area),l.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),e.setInertia(v,e._inertiaScale*l.inertia(v.vertices,v.mass)),l.translate(v.vertices,{x:v.position.x,y:v.position.y}),S>0&&(d+=v.area,T+=v.inertia),v.position.x=g.x+(v.position.x-g.x)*a,v.position.y=g.y+(v.position.y-g.y)*s,o.update(v.bounds,v.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,T))),t.circleRadius&&(a===s?t.circleRadius*=a:t.circleRadius=null)},e.update=function(t,a,s,g){var d=Math.pow(a*s*t.timeScale,2),T=1-t.frictionAir*s*t.timeScale,S=t.position.x-t.positionPrev.x,v=t.position.y-t.positionPrev.y;t.velocity.x=S*T*g+t.force.x/t.mass*d,t.velocity.y=v*T*g+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*T*g+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=i.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var x=t.parts[m];l.translate(x.vertices,t.velocity),m>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(x.vertices,t.angularVelocity,t.position),f.rotate(x.axes,t.angularVelocity),m>0&&i.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),o.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,a,s){t.force.x+=s.x,t.force.y+=s.y;var g={x:a.x-t.position.x,y:a.y-t.position.y};t.torque+=g.x*s.y-g.y*s.x},e._totalProperties=function(t){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var g=t.parts[s],d=g.mass!==1/0?g.mass:1;a.mass+=d,a.area+=g.area,a.inertia+=g.inertia,a.centre=i.add(a.centre,i.mult(g.position,d))}return a.centre=i.div(a.centre,a.mass),a}})()},function(p,A,u){var e={};p.exports=e;var l=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,n){for(var h=n*n*n,o=0;o<i.length;o++){var f=i[o],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),a=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*a,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*h?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(i,n){for(var h=n*n*n,o=0;o<i.length;o++){var f=i[o];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,a=r.bodyB.parent;if(!(t.isSleeping&&a.isSleeping||t.isStatic||a.isStatic)&&(t.isSleeping||a.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:a,g=s===t?a:t;!s.isStatic&&g.motion>e._motionWakeThreshold*h&&e.set(s,!1)}}}},e.set=function(i,n){var h=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,h||l.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,h&&l.trigger(i,"sleepEnd"))}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(9);(function(){var n=[],h={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(h,f.vertices,r.vertices,f.axes),h.overlap<=0||(e._overlapAxes(o,r.vertices,f.vertices,r.axes),o.overlap<=0))return null;var a=t&&t.table[i.id(f,r)],s;a?s=a.collision:(s=e.create(f,r),s.collided=!0,s.bodyA=f.id<r.id?f:r,s.bodyB=f.id<r.id?r:f,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),f=s.bodyA,r=s.bodyB;var g;h.overlap<o.overlap?g=h:g=o;var d=s.normal,T=s.supports,S=g.axis,v=S.x,m=S.y;v*(r.position.x-f.position.x)+m*(r.position.y-f.position.y)<0?(d.x=v,d.y=m):(d.x=-v,d.y=-m),s.tangent.x=-d.y,s.tangent.y=d.x,s.depth=g.overlap,s.penetration.x=d.x*s.depth,s.penetration.y=d.y*s.depth;var x=e._findSupports(f,r,d,1),c=0;if(l.contains(f.vertices,x[0])&&(T[c++]=x[0]),l.contains(f.vertices,x[1])&&(T[c++]=x[1]),c<2){var M=e._findSupports(r,f,d,-1);l.contains(r.vertices,M[0])&&(T[c++]=M[0]),c<2&&l.contains(r.vertices,M[1])&&(T[c++]=M[1])}return c===0&&(T[c++]=x[0]),T.length=c,s},e._overlapAxes=function(f,r,t,a){var s=r.length,g=t.length,d=r[0].x,T=r[0].y,S=t[0].x,v=t[0].y,m=a.length,x=Number.MAX_VALUE,c=0,M,P,I,C,E,B;for(E=0;E<m;E++){var k=a[E],L=k.x,R=k.y,D=d*L+T*R,O=S*L+v*R,b=D,N=O;for(B=1;B<s;B+=1)C=r[B].x*L+r[B].y*R,C>b?b=C:C<D&&(D=C);for(B=1;B<g;B+=1)C=t[B].x*L+t[B].y*R,C>N?N=C:C<O&&(O=C);if(P=b-O,I=N-D,M=P<I?P:I,M<x&&(x=M,c=E,M<=0))break}f.axis=a[c],f.overlap=x},e._projectToAxis=function(f,r,t){for(var a=r[0].x*t.x+r[0].y*t.y,s=a,g=1;g<r.length;g+=1){var d=r[g].x*t.x+r[g].y*t.y;d>s?s=d:d<a&&(a=d)}f.min=a,f.max=s},e._findSupports=function(f,r,t,a){var s=r.vertices,g=s.length,d=f.position.x,T=f.position.y,S=t.x*a,v=t.y*a,m=Number.MAX_VALUE,x,c,M,P,I;for(I=0;I<g;I+=1)c=s[I],P=S*(d-c.x)+v*(T-c.y),P<m&&(m=P,x=c);return M=s[(g+x.index-1)%g],m=S*(d-M.x)+v*(T-M.y),c=s[(x.index+1)%g],S*(d-c.x)+v*(T-c.y)<m?(n[0]=x,n[1]=c,n):(n[0]=x,n[1]=M,n)}})()},function(p,A,u){var e={};p.exports=e;var l=u(17);(function(){e.create=function(i,n){var h=i.bodyA,o=i.bodyB,f={id:e.id(h,o),bodyA:h,bodyB:o,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||o.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,i,n),f},e.update=function(i,n,h){var o=i.contacts,f=n.supports,r=i.activeContacts,t=n.parentA,a=n.parentB,s=t.vertices.length;i.isActive=!0,i.timeUpdated=h,i.collision=n,i.separation=n.depth,i.inverseMass=t.inverseMass+a.inverseMass,i.friction=t.friction<a.friction?t.friction:a.friction,i.frictionStatic=t.frictionStatic>a.frictionStatic?t.frictionStatic:a.frictionStatic,i.restitution=t.restitution>a.restitution?t.restitution:a.restitution,i.slop=t.slop>a.slop?t.slop:a.slop,n.pair=i,r.length=0;for(var g=0;g<f.length;g++){var d=f[g],T=d.body===t?d.index:s+d.index,S=o[T];S?r.push(S):r.push(o[T]=l.create(d))}},e.setActive=function(i,n,h){n?(i.isActive=!0,i.timeUpdated=h):(i.isActive=!1,i.activeContacts.length=0)},e.id=function(i,n){return i.id<n.id?"A"+i.id+"B"+n.id:"A"+n.id+"B"+i.id}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(2),n=u(7),h=u(1),o=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var a=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,g=i.magnitude(i.sub(a,s));t.length=typeof t.length!="undefined"?t.length:g,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=f.extend(d,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var a=r[t],s=a.constraintImpulse;a.isStatic||s.x===0&&s.y===0&&s.angle===0||(a.position.x+=s.x,a.position.y+=s.y,a.angle+=s.angle)}},e.solveAll=function(r,t){for(var a=0;a<r.length;a+=1){var s=r[a],g=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(g||d)&&e.solve(r[a],t)}for(a=0;a<r.length;a+=1)s=r[a],g=!s.bodyA||s.bodyA&&s.bodyA.isStatic,d=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!g&&!d&&e.solve(r[a],t)},e.solve=function(r,t){var a=r.bodyA,s=r.bodyB,g=r.pointA,d=r.pointB;if(!(!a&&!s)){a&&!a.isStatic&&(i.rotate(g,a.angle-r.angleA,g),r.angleA=a.angle),s&&!s.isStatic&&(i.rotate(d,s.angle-r.angleB,d),r.angleB=s.angle);var T=g,S=d;if(a&&(T=i.add(a.position,g)),s&&(S=i.add(s.position,d)),!(!T||!S)){var v=i.sub(T,S),m=i.magnitude(v);m<e._minLength&&(m=e._minLength);var x=(m-r.length)/m,c=r.stiffness<1?r.stiffness*t:r.stiffness,M=i.mult(v,x*c),P=(a?a.inverseMass:0)+(s?s.inverseMass:0),I=(a?a.inverseInertia:0)+(s?s.inverseInertia:0),C=P+I,E,B,k,L,R;if(r.damping){var D=i.create();k=i.div(v,m),R=i.sub(s&&i.sub(s.position,s.positionPrev)||D,a&&i.sub(a.position,a.positionPrev)||D),L=i.dot(k,R)}a&&!a.isStatic&&(B=a.inverseMass/P,a.constraintImpulse.x-=M.x*B,a.constraintImpulse.y-=M.y*B,a.position.x-=M.x*B,a.position.y-=M.y*B,r.damping&&(a.positionPrev.x-=r.damping*k.x*L*B,a.positionPrev.y-=r.damping*k.y*L*B),E=i.cross(g,M)/C*e._torqueDampen*a.inverseInertia*(1-r.angularStiffness),a.constraintImpulse.angle-=E,a.angle-=E),s&&!s.isStatic&&(B=s.inverseMass/P,s.constraintImpulse.x+=M.x*B,s.constraintImpulse.y+=M.y*B,s.position.x+=M.x*B,s.position.y+=M.y*B,r.damping&&(s.positionPrev.x+=r.damping*k.x*L*B,s.positionPrev.y+=r.damping*k.y*L*B),E=i.cross(d,M)/C*e._torqueDampen*s.inverseInertia*(1-r.angularStiffness),s.constraintImpulse.angle+=E,s.angle+=E)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var a=r[t],s=a.constraintImpulse;if(!(a.isStatic||s.x===0&&s.y===0&&s.angle===0)){n.set(a,!1);for(var g=0;g<a.parts.length;g++){var d=a.parts[g];l.translate(d.vertices,s),g>0&&(d.position.x+=s.x,d.position.y+=s.y),s.angle!==0&&(l.rotate(d.vertices,s.angle,a.position),o.rotate(d.axes,s.angle),g>0&&i.rotateAbout(d.position,s.angle,a.position,d.position)),h.update(d.bounds,d.vertices,a.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(p,A,u){var e={};p.exports=e;var l=u(2),i=u(0);(function(){e.fromVertices=function(n){for(var h={},o=0;o<n.length;o++){var f=(o+1)%n.length,r=l.normalise({x:n[f].y-n[o].y,y:n[o].x-n[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),h[t]=r}return i.values(h)},e.rotate=function(n,h){if(h!==0)for(var o=Math.cos(h),f=Math.sin(h),r=0;r<n.length;r++){var t=n[r],a;a=t.x*o-t.y*f,t.y=t.x*f+t.y*o,t.x=a}}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(0),n=u(6),h=u(1),o=u(2);(function(){e.rectangle=function(f,r,t,a,s){s=s||{};var g={label:"Rectangle Body",position:{x:f,y:r},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+a+" L 0 "+a)};if(s.chamfer){var d=s.chamfer;g.vertices=l.chamfer(g.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete s.chamfer}return n.create(i.extend({},g,s))},e.trapezoid=function(f,r,t,a,s,g){g=g||{},s*=.5;var d=(1-s*2)*t,T=t*s,S=T+d,v=S+T,m;s<.5?m="L 0 0 L "+T+" "+-a+" L "+S+" "+-a+" L "+v+" 0":m="L 0 0 L "+S+" "+-a+" L "+v+" 0";var x={label:"Trapezoid Body",position:{x:f,y:r},vertices:l.fromPath(m)};if(g.chamfer){var c=g.chamfer;x.vertices=l.chamfer(x.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete g.chamfer}return n.create(i.extend({},x,g))},e.circle=function(f,r,t,a,s){a=a||{};var g={label:"Circle Body",circleRadius:t};s=s||25;var d=Math.ceil(Math.max(10,Math.min(s,t)));return d%2===1&&(d+=1),e.polygon(f,r,d,t,i.extend({},g,a))},e.polygon=function(f,r,t,a,s){if(s=s||{},t<3)return e.circle(f,r,a,s);for(var g=2*Math.PI/t,d="",T=g*.5,S=0;S<t;S+=1){var v=T+S*g,m=Math.cos(v)*a,x=Math.sin(v)*a;d+="L "+m.toFixed(3)+" "+x.toFixed(3)+" "}var c={label:"Polygon Body",position:{x:f,y:r},vertices:l.fromPath(d)};if(s.chamfer){var M=s.chamfer;c.vertices=l.chamfer(c.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete s.chamfer}return n.create(i.extend({},c,s))},e.fromVertices=function(f,r,t,a,s,g,d,T){var S=i.getDecomp(),v,m,x,c,M,P,I,C,E,B,k;for(v=Boolean(S&&S.quickDecomp),a=a||{},x=[],s=typeof s!="undefined"?s:!1,g=typeof g!="undefined"?g:.01,d=typeof d!="undefined"?d:10,T=typeof T!="undefined"?T:.01,i.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(P=t[B],c=l.isConvex(P),M=!c,M&&!v&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),c||!v)c?P=l.clockwiseSort(P):P=l.hull(P),x.push({position:{x:f,y:r},vertices:P});else{var L=P.map(function(J){return[J.x,J.y]});S.makeCCW(L),g!==!1&&S.removeCollinearPoints(L,g),T!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(L,T);var R=S.quickDecomp(L);for(I=0;I<R.length;I++){var D=R[I],O=D.map(function(J){return{x:J[0],y:J[1]}});d>0&&l.area(O)<d||x.push({position:l.centre(O),vertices:O})}}for(I=0;I<x.length;I++)x[I]=n.create(i.extend(x[I],a));if(s){var b=5;for(I=0;I<x.length;I++){var N=x[I];for(C=I+1;C<x.length;C++){var G=x[C];if(h.overlaps(N.bounds,G.bounds)){var Z=N.vertices,W=G.vertices;for(E=0;E<N.vertices.length;E++)for(k=0;k<G.vertices.length;k++){var ne=o.magnitudeSquared(o.sub(Z[(E+1)%Z.length],W[k])),K=o.magnitudeSquared(o.sub(Z[E],W[(k+1)%W.length]));ne<b&&K<b&&(Z[E].isInternal=!0,W[k].isInternal=!0)}}}}}return x.length>1?(m=n.create(i.extend({parts:x.slice(0)},a)),n.setPosition(m,{x:f,y:r}),m):x[0]}})()},function(p,A,u){var e={};p.exports=e;var l=u(0);(function(){e.create=function(i){var n={};return i||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=i||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(h){var o=e._getRelativeMousePosition(h,n.element,n.pixelRatio),f=h.changedTouches;f&&(n.button=0,h.preventDefault()),n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=h},n.mousedown=function(h){var o=e._getRelativeMousePosition(h,n.element,n.pixelRatio),f=h.changedTouches;f?(n.button=0,h.preventDefault()):n.button=h.button,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=h},n.mouseup=function(h){var o=e._getRelativeMousePosition(h,n.element,n.pixelRatio),f=h.changedTouches;f&&h.preventDefault(),n.button=-1,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=h},n.mousewheel=function(h){n.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(i,n){i.element=n,n.addEventListener("mousemove",i.mousemove),n.addEventListener("mousedown",i.mousedown),n.addEventListener("mouseup",i.mouseup),n.addEventListener("mousewheel",i.mousewheel),n.addEventListener("DOMMouseScroll",i.mousewheel),n.addEventListener("touchmove",i.mousemove),n.addEventListener("touchstart",i.mousedown),n.addEventListener("touchend",i.mouseup)},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,n){i.offset.x=n.x,i.offset.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,n){i.scale.x=n.x,i.scale.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,n,h){var o=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,a=i.changedTouches,s,g;return a?(s=a[0].pageX-o.left-r,g=a[0].pageY-o.top-t):(s=i.pageX-o.left-r,g=i.pageY-o.top-t),{x:s/(n.clientWidth/(n.width||n.clientWidth)*h),y:g/(n.clientHeight/(n.height||n.clientHeight)*h)}}})()},function(p,A,u){var e={};p.exports=e;var l=u(0),i=u(8);(function(){e.create=function(n){var h={bodies:[],pairs:null};return l.extend(h,n)},e.setBodies=function(n,h){n.bodies=h.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var h=[],o=n.pairs,f=n.bodies,r=f.length,t=e.canCollide,a=i.collides,s,g;for(f.sort(e._compareBoundsX),s=0;s<r;s++){var d=f[s],T=d.bounds,S=d.bounds.max.x,v=d.bounds.max.y,m=d.bounds.min.y,x=d.isStatic||d.isSleeping,c=d.parts.length,M=c===1;for(g=s+1;g<r;g++){var P=f[g],I=P.bounds;if(I.min.x>S)break;if(!(v<I.min.y||m>I.max.y)&&!(x&&(P.isStatic||P.isSleeping))&&!!t(d.collisionFilter,P.collisionFilter)){var C=P.parts.length;if(M&&C===1){var E=a(d,P,o);E&&h.push(E)}else for(var B=c>1?1:0,k=C>1?1:0,L=B;L<c;L++)for(var R=d.parts[L],T=R.bounds,D=k;D<C;D++){var O=P.parts[D],I=O.bounds;if(!(T.min.x>I.max.x||T.max.x<I.min.x||T.max.y<I.min.y||T.min.y>I.max.y)){var E=a(R,O,o);E&&h.push(E)}}}}}return h},e.canCollide=function(n,h){return n.group===h.group&&n.group!==0?n.group>0:(n.mask&h.category)!==0&&(h.mask&n.category)!==0},e._compareBoundsX=function(n,h){return n.bounds.min.x-h.bounds.min.x}})()},function(p,A,u){var e={};p.exports=e;var l=u(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||l.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var n=e._registry[i.name],h=e.versionParse(i.version).number,o=e.versionParse(n.version).number;h>o?(l.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(i)),e._registry[i.name]=i):h<o?l.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(i)):i!==n&&l.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,n){return i.used.indexOf(n)>-1},e.isFor=function(i,n){var h=i.for&&e.dependencyParse(i.for);return!i.for||n.name===h.name&&e.versionSatisfies(n.version,h.range)},e.use=function(i,n){if(i.uses=(i.uses||[]).concat(n||[]),i.uses.length===0){l.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var h=e.dependencies(i),o=l.topologicalSort(h),f=[],r=0;r<o.length;r+=1)if(o[r]!==i.name){var t=e.resolve(o[r]);if(!t){f.push("\u274C "+o[r]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),i.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(i,n){var h=e.dependencyParse(i),o=h.name;if(n=n||{},!(o in n)){i=e.resolve(i)||i,n[o]=l.map(i.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),a=e.resolve(r);return a&&!e.versionSatisfies(a.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(a),"does not satisfy",e.toString(t),"used by",e.toString(h)+"."),a._warned=!0,i._warned=!0):a||(l.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(h),"could not be resolved."),i._warned=!0),t.name});for(var f=0;f<n[o].length;f+=1)e.dependencies(n[o][f],n);return n}},e.dependencyParse=function(i){if(l.isString(i)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(i)||l.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(i)||l.warn("Plugin.versionParse:",i,"is not a valid version or range.");var h=n.exec(i),o=Number(h[4]),f=Number(h[5]),r=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:i,operator:h[1]||h[2]||"",major:o,minor:f,patch:r,parts:[o,f,r],prerelease:h[7],number:o*1e8+f*1e4+r}},e.versionSatisfies=function(i,n){n=n||"*";var h=e.versionParse(n),o=e.versionParse(i);if(h.isRange){if(h.operator==="*"||i==="*")return!0;if(h.operator===">")return o.number>h.number;if(h.operator===">=")return o.number>=h.number;if(h.operator==="~")return o.major===h.major&&o.minor===h.minor&&o.patch>=h.patch;if(h.operator==="^")return h.major>0?o.major===h.major&&o.number>=h.number:h.minor>0?o.minor===h.minor&&o.patch>=h.patch:o.patch===h.patch}return i===n||i==="*"}})()},function(p,A,u){var e={};p.exports=e;var l=u(0),i=u(5),n=u(1),h=u(4),o=u(2),f=u(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=l.extend(m,v);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=v.mouse,x.engine=v.engine,x.canvas=x.canvas||g(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),l.isElement(x.element)?x.element.appendChild(x.canvas):x.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),x},e.run=function(v){(function m(x){v.frameRequestId=r(m),a(v,x),e.world(v,x),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,x),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,x)})()},e.stop=function(v){t(v.frameRequestId)},e.setPixelRatio=function(v,m){var x=v.options,c=v.canvas;m==="auto"&&(m=d(c)),x.pixelRatio=m,c.setAttribute("data-pixel-ratio",m),c.width=x.width*m,c.height=x.height*m,c.style.width=x.width+"px",c.style.height=x.height+"px"},e.lookAt=function(v,m,x,c){c=typeof c!="undefined"?c:!0,m=l.isArray(m)?m:[m],x=x||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<m.length;P+=1){var I=m[P],C=I.bounds?I.bounds.min:I.min||I.position||I,E=I.bounds?I.bounds.max:I.max||I.position||I;C&&E&&(C.x<M.min.x&&(M.min.x=C.x),E.x>M.max.x&&(M.max.x=E.x),C.y<M.min.y&&(M.min.y=C.y),E.y>M.max.y&&(M.max.y=E.y))}var B=M.max.x-M.min.x+2*x.x,k=M.max.y-M.min.y+2*x.y,L=v.canvas.height,R=v.canvas.width,D=R/L,O=B/k,b=1,N=1;O>D?N=O/D:b=D/O,v.options.hasBounds=!0,v.bounds.min.x=M.min.x,v.bounds.max.x=M.min.x+B*b,v.bounds.min.y=M.min.y,v.bounds.max.y=M.min.y+k*N,c&&(v.bounds.min.x+=B*.5-B*b*.5,v.bounds.max.x+=B*.5-B*b*.5,v.bounds.min.y+=k*.5-k*N*.5,v.bounds.max.y+=k*.5-k*N*.5),v.bounds.min.x-=x.x,v.bounds.max.x-=x.x,v.bounds.min.y-=x.y,v.bounds.max.y-=x.y,v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),f.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var m=v.bounds.max.x-v.bounds.min.x,x=v.bounds.max.y-v.bounds.min.y,c=m/v.options.width,M=x/v.options.height;v.context.setTransform(v.options.pixelRatio/c,0,0,v.options.pixelRatio/M,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,m){var x=l.now(),c=v.engine,M=c.world,P=v.canvas,I=v.context,C=v.options,E=v.timing,B=i.allBodies(M),k=i.allConstraints(M),L=C.wireframes?C.wireframeBackground:C.background,R=[],D=[],O,b={timestamp:c.timing.timestamp};if(h.trigger(v,"beforeRender",b),v.currentBackground!==L&&S(v,L),I.globalCompositeOperation="source-in",I.fillStyle="transparent",I.fillRect(0,0,P.width,P.height),I.globalCompositeOperation="source-over",C.hasBounds){for(O=0;O<B.length;O++){var N=B[O];n.overlaps(N.bounds,v.bounds)&&R.push(N)}for(O=0;O<k.length;O++){var G=k[O],Z=G.bodyA,W=G.bodyB,ne=G.pointA,K=G.pointB;Z&&(ne=o.add(Z.position,G.pointA)),W&&(K=o.add(W.position,G.pointB)),!(!ne||!K)&&(n.contains(v.bounds,ne)||n.contains(v.bounds,K))&&D.push(G)}e.startViewTransform(v),v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),f.setOffset(v.mouse,v.bounds.min))}else D=k,R=B,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!C.wireframes||c.enableSleeping&&C.showSleeping?e.bodies(v,R,I):(C.showConvexHulls&&e.bodyConvexHulls(v,R,I),e.bodyWireframes(v,R,I)),C.showBounds&&e.bodyBounds(v,R,I),(C.showAxes||C.showAngleIndicator)&&e.bodyAxes(v,R,I),C.showPositions&&e.bodyPositions(v,R,I),C.showVelocity&&e.bodyVelocity(v,R,I),C.showIds&&e.bodyIds(v,R,I),C.showSeparations&&e.separations(v,c.pairs.list,I),C.showCollisions&&e.collisions(v,c.pairs.list,I),C.showVertexNumbers&&e.vertexNumbers(v,R,I),C.showMousePosition&&e.mousePosition(v,v.mouse,I),e.constraints(D,I),C.hasBounds&&e.endViewTransform(v),h.trigger(v,"afterRender",b),E.lastElapsed=l.now()-x},e.stats=function(v,m,x){for(var c=v.engine,M=c.world,P=i.allBodies(M),I=0,C=55,E=44,B=0,k=0,L=0;L<P.length;L+=1)I+=P[L].parts.length;var R={Part:I,Body:P.length,Cons:i.allConstraints(M).length,Comp:i.allComposites(M).length,Pair:c.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(B,k,C*5.5,E),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var D in R){var O=R[D];m.fillStyle="#aaa",m.fillText(D,B+C,k+8),m.fillStyle="#eee",m.fillText(O,B+C,k+26),B+=C}},e.performance=function(v,m){var x=v.engine,c=v.timing,M=c.deltaHistory,P=c.elapsedHistory,I=c.timestampElapsedHistory,C=c.engineDeltaHistory,E=c.engineElapsedHistory,B=x.timing.lastDelta,k=s(M),L=s(P),R=s(C),D=s(E),O=s(I),b=O/k||0,N=1e3/k||0,G=4,Z=12,W=60,ne=34,K=10,J=69;m.fillStyle="#0e0f19",m.fillRect(0,50,Z*4+W*5+22,ne),e.status(m,K,J,W,G,M.length,Math.round(N)+" fps",N/e._goodFps,function(j){return M[j]/k-1}),e.status(m,K+Z+W,J,W,G,C.length,B.toFixed(2)+" dt",e._goodDelta/B,function(j){return C[j]/R-1}),e.status(m,K+(Z+W)*2,J,W,G,E.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(j){return E[j]/D-1}),e.status(m,K+(Z+W)*3,J,W,G,P.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(j){return P[j]/L-1}),e.status(m,K+(Z+W)*4,J,W,G,I.length,b.toFixed(2)+" x",b*b*b,function(j){return(I[j]/M[j]/b||0)-1})},e.status=function(v,m,x,c,M,P,I,C,E){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(m,x+7,c,1),v.beginPath(),v.moveTo(m,x+7-M*l.clamp(.4*E(0),-2,2));for(var B=0;B<c;B+=1)v.lineTo(m+B,x+7-(B<P?M*l.clamp(.4*E(B),-2,2):0));v.stroke(),v.fillStyle="hsl("+l.clamp(25+95*C,0,120)+",100%,60%)",v.fillRect(m,x-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(I,m+c,x-5)},e.constraints=function(v,m){for(var x=m,c=0;c<v.length;c++){var M=v[c];if(!(!M.render.visible||!M.pointA||!M.pointB)){var P=M.bodyA,I=M.bodyB,C,E;if(P?C=o.add(P.position,M.pointA):C=M.pointA,M.render.type==="pin")x.beginPath(),x.arc(C.x,C.y,3,0,2*Math.PI),x.closePath();else{if(I?E=o.add(I.position,M.pointB):E=M.pointB,x.beginPath(),x.moveTo(C.x,C.y),M.render.type==="spring")for(var B=o.sub(E,C),k=o.perp(o.normalise(B)),L=Math.ceil(l.clamp(M.length/5,12,20)),R,D=1;D<L;D+=1)R=D%2===0?1:-1,x.lineTo(C.x+B.x*(D/L)+k.x*R*4,C.y+B.y*(D/L)+k.y*R*4);x.lineTo(E.x,E.y)}M.render.lineWidth&&(x.lineWidth=M.render.lineWidth,x.strokeStyle=M.render.strokeStyle,x.stroke()),M.render.anchors&&(x.fillStyle=M.render.strokeStyle,x.beginPath(),x.arc(C.x,C.y,3,0,2*Math.PI),x.arc(E.x,E.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(v,m,x){var c=x;v.engine;var M=v.options,P=M.showInternalEdges||!M.wireframes,I,C,E,B;for(E=0;E<m.length;E++)if(I=m[E],!!I.render.visible){for(B=I.parts.length>1?1:0;B<I.parts.length;B++)if(C=I.parts[B],!!C.render.visible){if(M.showSleeping&&I.isSleeping?c.globalAlpha=.5*C.render.opacity:C.render.opacity!==1&&(c.globalAlpha=C.render.opacity),C.render.sprite&&C.render.sprite.texture&&!M.wireframes){var k=C.render.sprite,L=T(v,k.texture);c.translate(C.position.x,C.position.y),c.rotate(C.angle),c.drawImage(L,L.width*-k.xOffset*k.xScale,L.height*-k.yOffset*k.yScale,L.width*k.xScale,L.height*k.yScale),c.rotate(-C.angle),c.translate(-C.position.x,-C.position.y)}else{if(C.circleRadius)c.beginPath(),c.arc(C.position.x,C.position.y,C.circleRadius,0,2*Math.PI);else{c.beginPath(),c.moveTo(C.vertices[0].x,C.vertices[0].y);for(var R=1;R<C.vertices.length;R++)!C.vertices[R-1].isInternal||P?c.lineTo(C.vertices[R].x,C.vertices[R].y):c.moveTo(C.vertices[R].x,C.vertices[R].y),C.vertices[R].isInternal&&!P&&c.moveTo(C.vertices[(R+1)%C.vertices.length].x,C.vertices[(R+1)%C.vertices.length].y);c.lineTo(C.vertices[0].x,C.vertices[0].y),c.closePath()}M.wireframes?(c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()):(c.fillStyle=C.render.fillStyle,C.render.lineWidth&&(c.lineWidth=C.render.lineWidth,c.strokeStyle=C.render.strokeStyle,c.stroke()),c.fill())}c.globalAlpha=1}}},e.bodyWireframes=function(v,m,x){var c=x,M=v.options.showInternalEdges,P,I,C,E,B;for(c.beginPath(),C=0;C<m.length;C++)if(P=m[C],!!P.render.visible)for(B=P.parts.length>1?1:0;B<P.parts.length;B++){for(I=P.parts[B],c.moveTo(I.vertices[0].x,I.vertices[0].y),E=1;E<I.vertices.length;E++)!I.vertices[E-1].isInternal||M?c.lineTo(I.vertices[E].x,I.vertices[E].y):c.moveTo(I.vertices[E].x,I.vertices[E].y),I.vertices[E].isInternal&&!M&&c.moveTo(I.vertices[(E+1)%I.vertices.length].x,I.vertices[(E+1)%I.vertices.length].y);c.lineTo(I.vertices[0].x,I.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},e.bodyConvexHulls=function(v,m,x){var c=x,M,P,I;for(c.beginPath(),P=0;P<m.length;P++)if(M=m[P],!(!M.render.visible||M.parts.length===1)){for(c.moveTo(M.vertices[0].x,M.vertices[0].y),I=1;I<M.vertices.length;I++)c.lineTo(M.vertices[I].x,M.vertices[I].y);c.lineTo(M.vertices[0].x,M.vertices[0].y)}c.lineWidth=1,c.strokeStyle="rgba(255,255,255,0.2)",c.stroke()},e.vertexNumbers=function(v,m,x){var c=x,M,P,I;for(M=0;M<m.length;M++){var C=m[M].parts;for(I=C.length>1?1:0;I<C.length;I++){var E=C[I];for(P=0;P<E.vertices.length;P++)c.fillStyle="rgba(255,255,255,0.2)",c.fillText(M+"_"+P,E.position.x+(E.vertices[P].x-E.position.x)*.8,E.position.y+(E.vertices[P].y-E.position.y)*.8)}}},e.mousePosition=function(v,m,x){var c=x;c.fillStyle="rgba(255,255,255,0.8)",c.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(v,m,x){var c=x;v.engine;var M=v.options;c.beginPath();for(var P=0;P<m.length;P++){var I=m[P];if(I.render.visible)for(var C=m[P].parts,E=C.length>1?1:0;E<C.length;E++){var B=C[E];c.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}M.wireframes?c.strokeStyle="rgba(255,255,255,0.08)":c.strokeStyle="rgba(0,0,0,0.1)",c.lineWidth=1,c.stroke()},e.bodyAxes=function(v,m,x){var c=x;v.engine;var M=v.options,P,I,C,E;for(c.beginPath(),I=0;I<m.length;I++){var B=m[I],k=B.parts;if(!!B.render.visible)if(M.showAxes)for(C=k.length>1?1:0;C<k.length;C++)for(P=k[C],E=0;E<P.axes.length;E++){var L=P.axes[E];c.moveTo(P.position.x,P.position.y),c.lineTo(P.position.x+L.x*20,P.position.y+L.y*20)}else for(C=k.length>1?1:0;C<k.length;C++)for(P=k[C],E=0;E<P.axes.length;E++)c.moveTo(P.position.x,P.position.y),c.lineTo((P.vertices[0].x+P.vertices[P.vertices.length-1].x)/2,(P.vertices[0].y+P.vertices[P.vertices.length-1].y)/2)}M.wireframes?(c.strokeStyle="indianred",c.lineWidth=1):(c.strokeStyle="rgba(255, 255, 255, 0.4)",c.globalCompositeOperation="overlay",c.lineWidth=2),c.stroke(),c.globalCompositeOperation="source-over"},e.bodyPositions=function(v,m,x){var c=x;v.engine;var M=v.options,P,I,C,E;for(c.beginPath(),C=0;C<m.length;C++)if(P=m[C],!!P.render.visible)for(E=0;E<P.parts.length;E++)I=P.parts[E],c.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),c.closePath();for(M.wireframes?c.fillStyle="indianred":c.fillStyle="rgba(0,0,0,0.5)",c.fill(),c.beginPath(),C=0;C<m.length;C++)P=m[C],P.render.visible&&(c.arc(P.positionPrev.x,P.positionPrev.y,2,0,2*Math.PI,!1),c.closePath());c.fillStyle="rgba(255,165,0,0.8)",c.fill()},e.bodyVelocity=function(v,m,x){var c=x;c.beginPath();for(var M=0;M<m.length;M++){var P=m[M];!P.render.visible||(c.moveTo(P.position.x,P.position.y),c.lineTo(P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2))}c.lineWidth=3,c.strokeStyle="cornflowerblue",c.stroke()},e.bodyIds=function(v,m,x){var c=x,M,P;for(M=0;M<m.length;M++)if(!!m[M].render.visible){var I=m[M].parts;for(P=I.length>1?1:0;P<I.length;P++){var C=I[P];c.font="12px Arial",c.fillStyle="rgba(255,255,255,0.5)",c.fillText(C.id,C.position.x+10,C.position.y-10)}}},e.collisions=function(v,m,x){var c=x,M=v.options,P,I,C,E;for(c.beginPath(),C=0;C<m.length;C++)if(P=m[C],!!P.isActive)for(I=P.collision,E=0;E<P.activeContacts.length;E++){var B=P.activeContacts[E],k=B.vertex;c.rect(k.x-1.5,k.y-1.5,3.5,3.5)}for(M.wireframes?c.fillStyle="rgba(255,255,255,0.7)":c.fillStyle="orange",c.fill(),c.beginPath(),C=0;C<m.length;C++)if(P=m[C],!!P.isActive&&(I=P.collision,P.activeContacts.length>0)){var L=P.activeContacts[0].vertex.x,R=P.activeContacts[0].vertex.y;P.activeContacts.length===2&&(L=(P.activeContacts[0].vertex.x+P.activeContacts[1].vertex.x)/2,R=(P.activeContacts[0].vertex.y+P.activeContacts[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic===!0?c.moveTo(L-I.normal.x*8,R-I.normal.y*8):c.moveTo(L+I.normal.x*8,R+I.normal.y*8),c.lineTo(L,R)}M.wireframes?c.strokeStyle="rgba(255,165,0,0.7)":c.strokeStyle="orange",c.lineWidth=1,c.stroke()},e.separations=function(v,m,x){var c=x,M=v.options,P,I,C,E,B;for(c.beginPath(),B=0;B<m.length;B++)if(P=m[B],!!P.isActive){I=P.collision,C=I.bodyA,E=I.bodyB;var k=1;!E.isStatic&&!C.isStatic&&(k=.5),E.isStatic&&(k=0),c.moveTo(E.position.x,E.position.y),c.lineTo(E.position.x-I.penetration.x*k,E.position.y-I.penetration.y*k),k=1,!E.isStatic&&!C.isStatic&&(k=.5),C.isStatic&&(k=0),c.moveTo(C.position.x,C.position.y),c.lineTo(C.position.x+I.penetration.x*k,C.position.y+I.penetration.y*k)}M.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},e.inspector=function(v,m){v.engine;var x=v.selected,c=v.render,M=c.options,P;if(M.hasBounds){var I=c.bounds.max.x-c.bounds.min.x,C=c.bounds.max.y-c.bounds.min.y,E=I/c.options.width,B=C/c.options.height;m.scale(1/E,1/B),m.translate(-c.bounds.min.x,-c.bounds.min.y)}for(var k=0;k<x.length;k++){var L=x[k].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),L.type){case"body":P=L.bounds,m.beginPath(),m.rect(Math.floor(P.min.x-3),Math.floor(P.min.y-3),Math.floor(P.max.x-P.min.x+6),Math.floor(P.max.y-P.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var R=L.pointA;L.bodyA&&(R=L.pointB),m.beginPath(),m.arc(R.x,R.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}v.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",P=v.selectBounds,m.beginPath(),m.rect(Math.floor(P.min.x),Math.floor(P.min.y),Math.floor(P.max.x-P.min.x),Math.floor(P.max.y-P.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),M.hasBounds&&m.setTransform(1,0,0,1,0,0)};var a=function(v,m){var x=v.engine,c=v.timing,M=c.historySize,P=x.timing.timestamp;c.delta=m-c.lastTime||e._goodDelta,c.lastTime=m,c.timestampElapsed=P-c.lastTimestamp||0,c.lastTimestamp=P,c.deltaHistory.unshift(c.delta),c.deltaHistory.length=Math.min(c.deltaHistory.length,M),c.engineDeltaHistory.unshift(x.timing.lastDelta),c.engineDeltaHistory.length=Math.min(c.engineDeltaHistory.length,M),c.timestampElapsedHistory.unshift(c.timestampElapsed),c.timestampElapsedHistory.length=Math.min(c.timestampElapsedHistory.length,M),c.engineElapsedHistory.unshift(x.timing.lastElapsed),c.engineElapsedHistory.length=Math.min(c.engineElapsedHistory.length,M),c.elapsedHistory.unshift(c.lastElapsed),c.elapsedHistory.length=Math.min(c.elapsedHistory.length,M)},s=function(v){for(var m=0,x=0;x<v.length;x+=1)m+=v[x];return m/v.length||0},g=function(v,m){var x=document.createElement("canvas");return x.width=v,x.height=m,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},d=function(v){var m=v.getContext("2d"),x=window.devicePixelRatio||1,c=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return x/c},T=function(v,m){var x=v.textures[m];return x||(x=v.textures[m]=new Image,x.src=m,x)},S=function(v,m){var x=m;/(jpg|gif|png)$/.test(m)&&(x="url("+m+")"),v.canvas.style.background=x,v.canvas.style.backgroundSize="contain",v.currentBackground=m}})()},function(p,A){var u={};p.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(p,A,u){var e={};p.exports=e;var l=u(7),i=u(19),n=u(14),h=u(20),o=u(4),f=u(5),r=u(10),t=u(0),a=u(6);(function(){e.create=function(s){s=s||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(g,s);return d.world=s.world||f.create({label:"World"}),d.pairs=s.pairs||h.create(),d.detector=s.detector||n.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(s,g,d){var T=t.now();g=g||1e3/60,d=d||1;var S=s.world,v=s.detector,m=s.pairs,x=s.timing,c=x.timestamp,M;x.timestamp+=g*x.timeScale,x.lastDelta=g*x.timeScale;var P={timestamp:x.timestamp};o.trigger(s,"beforeUpdate",P);var I=f.allBodies(S),C=f.allConstraints(S);for(S.isModified&&n.setBodies(v,I),S.isModified&&f.setModified(S,!1,!1,!0),s.enableSleeping&&l.update(I,x.timeScale),e._bodiesApplyGravity(I,s.gravity),e._bodiesUpdate(I,g,x.timeScale,d,S.bounds),r.preSolveAll(I),M=0;M<s.constraintIterations;M++)r.solveAll(C,x.timeScale);r.postSolveAll(I),v.pairs=s.pairs;var E=n.collisions(v);for(h.update(m,E,c),s.enableSleeping&&l.afterCollisions(m.list,x.timeScale),m.collisionStart.length>0&&o.trigger(s,"collisionStart",{pairs:m.collisionStart}),i.preSolvePosition(m.list),M=0;M<s.positionIterations;M++)i.solvePosition(m.list,x.timeScale);for(i.postSolvePosition(I),r.preSolveAll(I),M=0;M<s.constraintIterations;M++)r.solveAll(C,x.timeScale);for(r.postSolveAll(I),i.preSolveVelocity(m.list),M=0;M<s.velocityIterations;M++)i.solveVelocity(m.list,x.timeScale);return m.collisionActive.length>0&&o.trigger(s,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&o.trigger(s,"collisionEnd",{pairs:m.collisionEnd}),e._bodiesClearForces(I),o.trigger(s,"afterUpdate",P),s.timing.lastElapsed=t.now()-T,s},e.merge=function(s,g){if(t.extend(s,g),g.world){s.world=g.world,e.clear(s);for(var d=f.allBodies(s.world),T=0;T<d.length;T++){var S=d[T];l.set(S,!1),S.id=t.nextId()}}},e.clear=function(s){h.clear(s.pairs),n.clear(s.detector)},e._bodiesClearForces=function(s){for(var g=0;g<s.length;g++){var d=s[g];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(s,g){var d=typeof g.scale!="undefined"?g.scale:.001;if(!(g.x===0&&g.y===0||d===0))for(var T=0;T<s.length;T++){var S=s[T];S.isStatic||S.isSleeping||(S.force.y+=S.mass*g.y*d,S.force.x+=S.mass*g.x*d)}},e._bodiesUpdate=function(s,g,d,T,S){for(var v=0;v<s.length;v++){var m=s[v];m.isStatic||m.isSleeping||a.update(m,g,d,T)}}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var h,o,f,r=n.length;for(h=0;h<r;h++)o=n[h],o.isActive&&(f=o.activeContacts.length,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,h){var o,f,r,t,a,s,g,d,T=e._positionDampen,S=n.length;for(o=0;o<S;o++)f=n[o],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,a=r.parentB,s=r.normal,f.separation=s.x*(a.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+s.y*(a.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(o=0;o<S;o++)f=n[o],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,a=r.parentB,s=r.normal,d=(f.separation-f.slop)*h,(t.isStatic||a.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(g=T/t.totalContacts,t.positionImpulse.x+=s.x*d*g,t.positionImpulse.y+=s.y*d*g),a.isStatic||a.isSleeping||(g=T/a.totalContacts,a.positionImpulse.x-=s.x*d*g,a.positionImpulse.y-=s.y*d*g))},e.postSolvePosition=function(n){for(var h=e._positionWarming,o=n.length,f=l.translate,r=i.update,t=0;t<o;t++){var a=n[t],s=a.positionImpulse,g=s.x,d=s.y,T=a.velocity;if(a.totalContacts=0,g!==0||d!==0){for(var S=0;S<a.parts.length;S++){var v=a.parts[S];f(v.vertices,s),r(v.bounds,v.vertices,T),v.position.x+=g,v.position.y+=d}a.positionPrev.x+=g,a.positionPrev.y+=d,g*T.x+d*T.y<0?(s.x=0,s.y=0):(s.x*=h,s.y*=h)}}},e.preSolveVelocity=function(n){var h=n.length,o,f;for(o=0;o<h;o++){var r=n[o];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,a=t.length,s=r.collision,g=s.parentA,d=s.parentB,T=s.normal,S=s.tangent;for(f=0;f<a;f++){var v=t[f],m=v.vertex,x=v.normalImpulse,c=v.tangentImpulse;if(x!==0||c!==0){var M=T.x*x+S.x*c,P=T.y*x+S.y*c;g.isStatic||g.isSleeping||(g.positionPrev.x+=M*g.inverseMass,g.positionPrev.y+=P*g.inverseMass,g.anglePrev+=g.inverseInertia*((m.x-g.position.x)*P-(m.y-g.position.y)*M)),d.isStatic||d.isSleeping||(d.positionPrev.x-=M*d.inverseMass,d.positionPrev.y-=P*d.inverseMass,d.anglePrev-=d.inverseInertia*((m.x-d.position.x)*P-(m.y-d.position.y)*M))}}}}},e.solveVelocity=function(n,h){var o=h*h,f=e._restingThresh*o,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,a=Number.MAX_VALUE,s=n.length,g,d,T,S;for(T=0;T<s;T++){var v=n[T];if(!(!v.isActive||v.isSensor)){var m=v.collision,x=m.parentA,c=m.parentB,M=x.velocity,P=c.velocity,I=m.normal.x,C=m.normal.y,E=m.tangent.x,B=m.tangent.y,k=v.activeContacts,L=k.length,R=1/L,D=x.inverseMass+c.inverseMass,O=v.friction*v.frictionStatic*r*o;for(M.x=x.position.x-x.positionPrev.x,M.y=x.position.y-x.positionPrev.y,P.x=c.position.x-c.positionPrev.x,P.y=c.position.y-c.positionPrev.y,x.angularVelocity=x.angle-x.anglePrev,c.angularVelocity=c.angle-c.anglePrev,S=0;S<L;S++){var b=k[S],N=b.vertex,G=N.x-x.position.x,Z=N.y-x.position.y,W=N.x-c.position.x,ne=N.y-c.position.y,K=M.x-Z*x.angularVelocity,J=M.y+G*x.angularVelocity,j=P.x-ne*c.angularVelocity,yt=P.y+W*c.angularVelocity,qe=K-j,je=J-yt,ge=I*qe+C*je,re=E*qe+B*je,_e=v.separation+ge,He=Math.min(_e,1);He=_e<0?0:He;var et=He*O;re>et||-re>et?(d=re>0?re:-re,g=v.friction*(re>0?1:-1)*o,g<-d?g=-d:g>d&&(g=d)):(g=re,d=a);var tt=G*C-Z*I,nt=W*C-ne*I,it=R/(D+x.inverseInertia*tt*tt+c.inverseInertia*nt*nt),Ee=(1+v.restitution)*ge*it;if(g*=it,ge*ge>f&&ge<0)b.normalImpulse=0;else{var St=b.normalImpulse;b.normalImpulse+=Ee,b.normalImpulse=Math.min(b.normalImpulse,0),Ee=b.normalImpulse-St}if(re*re>t)b.tangentImpulse=0;else{var wt=b.tangentImpulse;b.tangentImpulse+=g,b.tangentImpulse<-d&&(b.tangentImpulse=-d),b.tangentImpulse>d&&(b.tangentImpulse=d),g=b.tangentImpulse-wt}var Be=I*Ee+E*g,ke=C*Ee+B*g;x.isStatic||x.isSleeping||(x.positionPrev.x+=Be*x.inverseMass,x.positionPrev.y+=ke*x.inverseMass,x.anglePrev+=(G*ke-Z*Be)*x.inverseInertia),c.isStatic||c.isSleeping||(c.positionPrev.x-=Be*c.inverseMass,c.positionPrev.y-=ke*c.inverseMass,c.anglePrev-=(W*ke-ne*Be)*c.inverseInertia)}}}}})()},function(p,A,u){var e={};p.exports=e;var l=u(9),i=u(0);(function(){e.create=function(n){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,h,o){var f=n.list,r=f.length,t=n.table,a=h.length,s=n.collisionStart,g=n.collisionEnd,d=n.collisionActive,T,S,v,m;for(s.length=0,g.length=0,d.length=0,m=0;m<r;m++)f[m].confirmedActive=!1;for(m=0;m<a;m++)T=h[m],v=T.pair,v?(v.isActive?d.push(v):s.push(v),l.update(v,T,o),v.confirmedActive=!0):(v=l.create(T,o),t[v.id]=v,s.push(v),f.push(v));var x=[];for(r=f.length,m=0;m<r;m++)v=f[m],v.confirmedActive||(l.setActive(v,!1,o),g.push(v),!v.collision.bodyA.isSleeping&&!v.collision.bodyB.isSleeping&&x.push(m));for(m=0;m<x.length;m++)S=x[m]-m,v=f[S],f.splice(S,1),delete t[v.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(p,A,u){var e=p.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(p,A,u){var e={};p.exports=e;var l=u(15),i=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,h){return n=n.replace(/^Matter./,""),i.chainPathBefore(e,n,h)},e.after=function(n,h){return n=n.replace(/^Matter./,""),i.chainPathAfter(e,n,h)}})()},function(p,A,u){var e={};p.exports=e;var l=u(5),i=u(10),n=u(0),h=u(6),o=u(12),f=n.deprecated;(function(){e.stack=function(r,t,a,s,g,d,T){for(var S=l.create({label:"Stack"}),v=r,m=t,x,c=0,M=0;M<s;M++){for(var P=0,I=0;I<a;I++){var C=T(v,m,I,M,x,c);if(C){var E=C.bounds.max.y-C.bounds.min.y,B=C.bounds.max.x-C.bounds.min.x;E>P&&(P=E),h.translate(C,{x:B*.5,y:E*.5}),v=C.bounds.max.x+g,l.addBody(S,C),x=C,c+=1}else v+=g}m+=P+d,v=r}return S},e.chain=function(r,t,a,s,g,d){for(var T=r.bodies,S=1;S<T.length;S++){var v=T[S-1],m=T[S],x=v.bounds.max.y-v.bounds.min.y,c=v.bounds.max.x-v.bounds.min.x,M=m.bounds.max.y-m.bounds.min.y,P=m.bounds.max.x-m.bounds.min.x,I={bodyA:v,pointA:{x:c*t,y:x*a},bodyB:m,pointB:{x:P*s,y:M*g}},C=n.extend(I,d);l.addConstraint(r,i.create(C))}return r.label+=" Chain",r},e.mesh=function(r,t,a,s,g){var d=r.bodies,T,S,v,m,x;for(T=0;T<a;T++){for(S=1;S<t;S++)v=d[S-1+T*t],m=d[S+T*t],l.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:m},g)));if(T>0)for(S=0;S<t;S++)v=d[S+(T-1)*t],m=d[S+T*t],l.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:m},g))),s&&S>0&&(x=d[S-1+(T-1)*t],l.addConstraint(r,i.create(n.extend({bodyA:x,bodyB:m},g)))),s&&S<t-1&&(x=d[S+1+(T-1)*t],l.addConstraint(r,i.create(n.extend({bodyA:x,bodyB:m},g))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,a,s,g,d,T){return e.stack(r,t,a,s,g,d,function(S,v,m,x,c,M){var P=Math.min(s,Math.ceil(a/2)),I=c?c.bounds.max.x-c.bounds.min.x:0;if(!(x>P)){x=P-x;var C=x,E=a-1-x;if(!(m<C||m>E)){M===1&&h.translate(c,{x:(m+(a%2===1?1:-1))*I,y:0});var B=c?m*I:0;return T(r+B+m*g,v,m,x,c,M)}}})},e.newtonsCradle=function(r,t,a,s,g){for(var d=l.create({label:"Newtons Cradle"}),T=0;T<a;T++){var S=1.9,v=o.circle(r+T*(s*S),t+g,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=i.create({pointA:{x:r+T*(s*S),y:t},bodyB:v});l.addBody(d,v),l.addConstraint(d,m)}return d},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,a,s,g){var d=h.nextGroup(!0),T=20,S=-a*.5+T,v=a*.5-T,m=0,x=l.create({label:"Car"}),c=o.rectangle(r,t,a,s,{collisionFilter:{group:d},chamfer:{radius:s*.5},density:2e-4}),M=o.circle(r+S,t+m,g,{collisionFilter:{group:d},friction:.8}),P=o.circle(r+v,t+m,g,{collisionFilter:{group:d},friction:.8}),I=i.create({bodyB:c,pointB:{x:S,y:m},bodyA:M,stiffness:1,length:0}),C=i.create({bodyB:c,pointB:{x:v,y:m},bodyA:P,stiffness:1,length:0});return l.addBody(x,c),l.addBody(x,M),l.addBody(x,P),l.addConstraint(x,I),l.addConstraint(x,C),x},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,a,s,g,d,T,S,v,m){v=n.extend({inertia:1/0},v),m=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var x=e.stack(r,t,a,s,g,d,function(c,M){return o.circle(c,M,S,v)});return e.mesh(x,a,s,T,m),x.label="Soft Body",x},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(p,A,u){var e={};p.exports=e;var l=u(9),i=u(0),n=i.deprecated;(function(){e.create=function(h){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(o,h)},e.update=function(h,o,f,r){var t,a,s,g=f.world,d=h.buckets,T,S,v=!1;for(t=0;t<o.length;t++){var m=o[t];if(!(m.isSleeping&&!r)&&!(g.bounds&&(m.bounds.max.x<g.bounds.min.x||m.bounds.min.x>g.bounds.max.x||m.bounds.max.y<g.bounds.min.y||m.bounds.min.y>g.bounds.max.y))){var x=e._getRegion(h,m);if(!m.region||x.id!==m.region.id||r){(!m.region||r)&&(m.region=x);var c=e._regionUnion(x,m.region);for(a=c.startCol;a<=c.endCol;a++)for(s=c.startRow;s<=c.endRow;s++){S=e._getBucketId(a,s),T=d[S];var M=a>=x.startCol&&a<=x.endCol&&s>=x.startRow&&s<=x.endRow,P=a>=m.region.startCol&&a<=m.region.endCol&&s>=m.region.startRow&&s<=m.region.endRow;!M&&P&&P&&T&&e._bucketRemoveBody(h,T,m),(m.region===x||M&&!P||r)&&(T||(T=e._createBucket(d,S)),e._bucketAddBody(h,T,m))}m.region=x,v=!0}}}v&&(h.pairsList=e._createActivePairsList(h))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(h,o){var f=Math.min(h.startCol,o.startCol),r=Math.max(h.endCol,o.endCol),t=Math.min(h.startRow,o.startRow),a=Math.max(h.endRow,o.endRow);return e._createRegion(f,r,t,a)},e._getRegion=function(h,o){var f=o.bounds,r=Math.floor(f.min.x/h.bucketWidth),t=Math.floor(f.max.x/h.bucketWidth),a=Math.floor(f.min.y/h.bucketHeight),s=Math.floor(f.max.y/h.bucketHeight);return e._createRegion(r,t,a,s)},e._createRegion=function(h,o,f,r){return{id:h+","+o+","+f+","+r,startCol:h,endCol:o,startRow:f,endRow:r}},e._getBucketId=function(h,o){return"C"+h+"R"+o},e._createBucket=function(h,o){var f=h[o]=[];return f},e._bucketAddBody=function(h,o,f){var r=h.pairs,t=l.id,a=o.length,s;for(s=0;s<a;s++){var g=o[s];if(!(f.id===g.id||f.isStatic&&g.isStatic)){var d=t(f,g),T=r[d];T?T[2]+=1:r[d]=[f,g,1]}}o.push(f)},e._bucketRemoveBody=function(h,o,f){var r=h.pairs,t=l.id,a;o.splice(i.indexOf(o,f),1);var s=o.length;for(a=0;a<s;a++){var g=r[t(f,o[a])];g&&(g[2]-=1)}},e._createActivePairsList=function(h){var o,f=h.pairs,r=i.keys(f),t=r.length,a=[],s;for(s=0;s<t;s++)o=f[r[s]],o[2]>0?a.push(o):delete f[r[s]];return a}})()},function(p,A,u){var e={};p.exports=e;var l=u(3),i=u(7),n=u(13),h=u(4),o=u(14),f=u(10),r=u(5),t=u(0),a=u(1);(function(){e.create=function(s,g){var d=(s?s.mouse:null)||(g?g.mouse:null);d||(s&&s.render&&s.render.canvas?d=n.create(s.render.canvas):g&&g.element?d=n.create(g.element):(d=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var T=f.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:T,collisionFilter:{category:1,mask:4294967295,group:0}},v=t.extend(S,g);return h.on(s,"beforeUpdate",function(){var m=r.allBodies(s.world);e.update(v,m),e._triggerEvents(v)}),v},e.update=function(s,g){var d=s.mouse,T=s.constraint,S=s.body;if(d.button===0){if(T.bodyB)i.set(T.bodyB,!1),T.pointA=d.position;else for(var v=0;v<g.length;v++)if(S=g[v],a.contains(S.bounds,d.position)&&o.canCollide(S.collisionFilter,s.collisionFilter))for(var m=S.parts.length>1?1:0;m<S.parts.length;m++){var x=S.parts[m];if(l.contains(x.vertices,d.position)){T.pointA=d.position,T.bodyB=s.body=S,T.pointB={x:d.position.x-S.position.x,y:d.position.y-S.position.y},T.angleB=S.angle,i.set(S,!1),h.trigger(s,"startdrag",{mouse:d,body:S});break}}}else T.bodyB=s.body=null,T.pointB=null,S&&h.trigger(s,"enddrag",{mouse:d,body:S})},e._triggerEvents=function(s){var g=s.mouse,d=g.sourceEvents;d.mousemove&&h.trigger(s,"mousemove",{mouse:g}),d.mousedown&&h.trigger(s,"mousedown",{mouse:g}),d.mouseup&&h.trigger(s,"mouseup",{mouse:g}),n.clearSourceEvents(g)}})()},function(p,A,u){var e={};p.exports=e;var l=u(2),i=u(8),n=u(1),h=u(12),o=u(3);(function(){e.collides=function(f,r){for(var t=[],a=r.length,s=f.bounds,g=i.collides,d=n.overlaps,T=0;T<a;T++){var S=r[T],v=S.parts.length,m=v===1?0:1;if(d(S.bounds,s))for(var x=m;x<v;x++){var c=S.parts[x];if(d(c.bounds,s)){var M=g(c,f);if(M){t.push(M);break}}}}return t},e.ray=function(f,r,t,a){a=a||1e-100;for(var s=l.angle(r,t),g=l.magnitude(l.sub(r,t)),d=(t.x+r.x)*.5,T=(t.y+r.y)*.5,S=h.rectangle(d,T,g,a,{angle:s}),v=e.collides(S,f),m=0;m<v.length;m+=1){var x=v[m];x.body=x.bodyB=x.bodyA}return v},e.region=function(f,r,t){for(var a=[],s=0;s<f.length;s++){var g=f[s],d=n.overlaps(g.bounds,r);(d&&!t||!d&&t)&&a.push(g)}return a},e.point=function(f,r){for(var t=[],a=0;a<f.length;a++){var s=f[a];if(n.contains(s.bounds,r))for(var g=s.parts.length===1?0:1;g<s.parts.length;g++){var d=s.parts[g];if(n.contains(d.bounds,r)&&o.contains(d.vertices,r)){t.push(s);break}}}return t}})()},function(p,A,u){var e={};p.exports=e;var l=u(4),i=u(18),n=u(0);(function(){var h,o;if(typeof window!="undefined"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!h){var f;h=function(r){f=setTimeout(function(){r(n.now())},1e3/60)},o=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},a=n.extend(t,r);return a.delta=a.delta||1e3/a.fps,a.deltaMin=a.deltaMin||1e3/a.fps,a.deltaMax=a.deltaMax||1e3/(a.fps*.5),a.fps=1e3/a.delta,a},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function a(s){r.frameRequestId=h(a),s&&r.enabled&&e.tick(r,t,s)}(),r},e.tick=function(r,t,a){var s=t.timing,g=1,d,T={timestamp:s.timestamp};l.trigger(r,"beforeTick",T),r.isFixed?d=r.delta:(d=a-r.timePrev||r.delta,r.timePrev=a,r.deltaHistory.push(d),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),d=Math.min.apply(null,r.deltaHistory),d=d<r.deltaMin?r.deltaMin:d,d=d>r.deltaMax?r.deltaMax:d,g=d/r.delta,r.delta=d),r.timeScalePrev!==0&&(g*=s.timeScale/r.timeScalePrev),s.timeScale===0&&(g=0),r.timeScalePrev=s.timeScale,r.correction=g,r.frameCounter+=1,a-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((a-r.counterTimestamp)/1e3),r.counterTimestamp=a,r.frameCounter=0),l.trigger(r,"tick",T),l.trigger(r,"beforeUpdate",T),i.update(t,d,g),l.trigger(r,"afterUpdate",T),l.trigger(r,"afterTick",T)},e.stop=function(r){o(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(p,A,u){var e={};p.exports=e;var l=u(8),i=u(0),n=i.deprecated;(function(){e.collides=function(h,o){return l.collides(h,o)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(p,A,u){var e={};p.exports=e,u(1);var l=u(0);(function(){e.pathToVertices=function(i,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,o,f,r,t,a,s,g,d,T,S=[],v,m,x=0,c=0,M=0;n=n||15;var P=function(C,E,B){var k=B%2===1&&B>1;if(!d||C!=d.x||E!=d.y){d&&k?(v=d.x,m=d.y):(v=0,m=0);var L={x:v+C,y:m+E};(k||!d)&&(d=L),S.push(L),c=v+C,M=m+E}},I=function(C){var E=C.pathSegTypeAsLetter.toUpperCase();if(E!=="Z"){switch(E){case"M":case"L":case"T":case"C":case"S":case"Q":c=C.x,M=C.y;break;case"H":c=C.x;break;case"V":M=C.y;break}P(c,M,C.pathSegType)}};for(e._svgPathToAbsolute(i),f=i.getTotalLength(),a=[],h=0;h<i.pathSegList.numberOfItems;h+=1)a.push(i.pathSegList.getItem(h));for(s=a.concat();x<f;){if(T=i.getPathSegAtLength(x),t=a[T],t!=g){for(;s.length&&s[0]!=t;)I(s.shift());g=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=i.getPointAtLength(x),P(r.x,r.y,0);break}x+=n}for(h=0,o=s.length;h<o;++h)I(s[h]);return S},e._svgPathToAbsolute=function(i){for(var n,h,o,f,r,t,a=i.pathSegList,s=0,g=0,d=a.numberOfItems,T=0;T<d;++T){var S=a.getItem(T),v=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in S&&(s=S.x),"y"in S&&(g=S.y);else switch("x1"in S&&(o=s+S.x1),"x2"in S&&(r=s+S.x2),"y1"in S&&(f=g+S.y1),"y2"in S&&(t=g+S.y2),"x"in S&&(s+=S.x),"y"in S&&(g+=S.y),v){case"m":a.replaceItem(i.createSVGPathSegMovetoAbs(s,g),T);break;case"l":a.replaceItem(i.createSVGPathSegLinetoAbs(s,g),T);break;case"h":a.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(s),T);break;case"v":a.replaceItem(i.createSVGPathSegLinetoVerticalAbs(g),T);break;case"c":a.replaceItem(i.createSVGPathSegCurvetoCubicAbs(s,g,o,f,r,t),T);break;case"s":a.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(s,g,r,t),T);break;case"q":a.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(s,g,o,f),T);break;case"t":a.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(s,g),T);break;case"a":a.replaceItem(i.createSVGPathSegArcAbs(s,g,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),T);break;case"z":case"Z":s=n,g=h;break}(v=="M"||v=="m")&&(n=s,h=g)}}})()},function(p,A,u){var e={};p.exports=e;var l=u(5);u(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(ct);var Ye=kt(ct.exports),Rt={decomp:$t,quickDecomp:me,isSimple:zt,removeCollinearPoints:Qt,removeDuplicatePoints:Zt,makeCCW:Vt};function Lt(w,y,p){p=p||0;var A=[0,0],u,e,l,i,n,h,o;return u=w[1][1]-w[0][1],e=w[0][0]-w[1][0],l=u*w[0][0]+e*w[0][1],i=y[1][1]-y[0][1],n=y[0][0]-y[1][0],h=i*y[0][0]+n*y[0][1],o=u*n-i*e,Oe(o,0,p)||(A[0]=(n*l-e*h)/o,A[1]=(u*h-i*l)/o),A}function Ue(w,y,p,A){var u=y[0]-w[0],e=y[1]-w[1],l=A[0]-p[0],i=A[1]-p[1];if(l*e-i*u===0)return!1;var n=(u*(p[1]-w[1])+e*(w[0]-p[0]))/(l*e-i*u),h=(l*(w[1]-p[1])+i*(p[0]-w[0]))/(i*u-l*e);return n>=0&&n<=1&&h>=0&&h<=1}function Te(w,y,p){return(y[0]-w[0])*(p[1]-w[1])-(p[0]-w[0])*(y[1]-w[1])}function Le(w,y,p){return Te(w,y,p)>0}function $e(w,y,p){return Te(w,y,p)>=0}function vt(w,y,p){return Te(w,y,p)<0}function xe(w,y,p){return Te(w,y,p)<=0}var Ft=[],Dt=[];function bt(w,y,p,A){if(A){var u=Ft,e=Dt;u[0]=y[0]-w[0],u[1]=y[1]-w[1],e[0]=p[0]-y[0],e[1]=p[1]-y[1];var l=u[0]*e[0]+u[1]*e[1],i=Math.sqrt(u[0]*u[0]+u[1]*u[1]),n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),h=Math.acos(l/(i*n));return h<A}else return Te(w,y,p)===0}function pe(w,y){var p=y[0]-w[0],A=y[1]-w[1];return p*p+A*A}function F(w,y){var p=w.length;return w[y<0?y%p+p:y%p]}function Ot(w){w.length=0}function _(w,y,p,A){for(var u=p;u<A;u++)w.push(y[u])}function Vt(w){for(var y=0,p=w,A=1;A<w.length;++A)(p[A][1]<p[y][1]||p[A][1]===p[y][1]&&p[A][0]>p[y][0])&&(y=A);return Le(F(w,y-1),F(w,y),F(w,y+1))?!1:(Nt(w),!0)}function Nt(w){for(var y=[],p=w.length,A=0;A!==p;A++)y.push(w.pop());for(var A=0;A!==p;A++)w[A]=y[A]}function ht(w,y){return vt(F(w,y-1),F(w,y),F(w,y+1))}var Ht=[],Wt=[];function Gt(w,y,p){var A,u,e=Ht,l=Wt;if($e(F(w,y+1),F(w,y),F(w,p))&&xe(F(w,y-1),F(w,y),F(w,p)))return!1;u=pe(F(w,y),F(w,p));for(var i=0;i!==w.length;++i)if(!((i+1)%w.length===y||i===y)&&$e(F(w,y),F(w,p),F(w,i+1))&&xe(F(w,y),F(w,p),F(w,i))&&(e[0]=F(w,y),e[1]=F(w,p),l[0]=F(w,i),l[1]=F(w,i+1),A=Lt(e,l),pe(F(w,y),A)<u))return!1;return!0}function Ut(w,y,p){for(var A=0;A!==w.length;++A)if(!(A===y||A===p||(A+1)%w.length===y||(A+1)%w.length===p)&&Ue(F(w,y),F(w,p),F(w,A),F(w,A+1)))return!1;return!0}function be(w,y,p,A){var u=A||[];if(Ot(u),y<p)for(var e=y;e<=p;e++)u.push(w[e]);else{for(var e=0;e<=p;e++)u.push(w[e]);for(var e=y;e<w.length;e++)u.push(w[e])}return u}function ze(w){for(var y=[],p=[],A=[],u=[],e=Number.MAX_VALUE,l=0;l<w.length;++l)if(ht(w,l)){for(var i=0;i<w.length;++i)if(Gt(w,l,i)){p=ze(be(w,l,i,u)),A=ze(be(w,i,l,u));for(var n=0;n<A.length;n++)p.push(A[n]);p.length<e&&(y=p,e=p.length,y.push([F(w,l),F(w,i)]))}}return y}function $t(w){var y=ze(w);return y.length>0?gt(w,y):[w]}function gt(w,y){if(y.length===0)return[w];if(y instanceof Array&&y.length&&y[0]instanceof Array&&y[0].length===2&&y[0][0]instanceof Array){for(var p=[w],A=0;A<y.length;A++)for(var u=y[A],e=0;e<p.length;e++){var l=p[e],i=gt(l,u);if(i){p.splice(e,1),p.push(i[0],i[1]);break}}return p}else{var u=y,A=w.indexOf(u[0]),e=w.indexOf(u[1]);return A!==-1&&e!==-1?[be(w,A,e),be(w,e,A)]:!1}}function zt(w){var y=w,p;for(p=0;p<y.length-1;p++)for(var A=0;A<p-1;A++)if(Ue(y[p],y[p+1],y[A],y[A+1]))return!1;for(p=1;p<y.length-2;p++)if(Ue(y[0],y[y.length-1],y[p],y[p+1]))return!1;return!0}function at(w,y,p,A,u){u=u||0;var e=y[1]-w[1],l=w[0]-y[0],i=e*w[0]+l*w[1],n=A[1]-p[1],h=p[0]-A[0],o=n*p[0]+h*p[1],f=e*h-n*l;return Oe(f,0,u)?[0,0]:[(h*i-l*o)/f,(e*o-n*i)/f]}function me(w,y,p,A,u,e,l){e=e||100,l=l||0,u=u||25,y=typeof y!="undefined"?y:[],p=p||[],A=A||[];var i=[0,0],n=[0,0],h=[0,0],o=0,f=0,r=0,t=0,a=0,s=0,g=0,d=[],T=[],S=w,v=w;if(v.length<3)return y;if(l++,l>e)return console.warn("quickDecomp: max level ("+e+") reached."),y;for(var m=0;m<w.length;++m)if(ht(S,m)){p.push(S[m]),o=f=Number.MAX_VALUE;for(var x=0;x<w.length;++x)Le(F(S,m-1),F(S,m),F(S,x))&&xe(F(S,m-1),F(S,m),F(S,x-1))&&(h=at(F(S,m-1),F(S,m),F(S,x),F(S,x-1)),vt(F(S,m+1),F(S,m),h)&&(r=pe(S[m],h),r<f&&(f=r,n=h,s=x))),Le(F(S,m+1),F(S,m),F(S,x+1))&&xe(F(S,m+1),F(S,m),F(S,x))&&(h=at(F(S,m+1),F(S,m),F(S,x),F(S,x+1)),Le(F(S,m-1),F(S,m),h)&&(r=pe(S[m],h),r<o&&(o=r,i=h,a=x)));if(s===(a+1)%w.length)h[0]=(n[0]+i[0])/2,h[1]=(n[1]+i[1])/2,A.push(h),m<a?(_(d,S,m,a+1),d.push(h),T.push(h),s!==0&&_(T,S,s,S.length),_(T,S,0,m+1)):(m!==0&&_(d,S,m,S.length),_(d,S,0,a+1),d.push(h),T.push(h),_(T,S,s,m+1));else{if(s>a&&(a+=w.length),t=Number.MAX_VALUE,a<s)return y;for(var x=s;x<=a;++x)$e(F(S,m-1),F(S,m),F(S,x))&&xe(F(S,m+1),F(S,m),F(S,x))&&(r=pe(F(S,m),F(S,x)),r<t&&Ut(S,m,x)&&(t=r,g=x%w.length));m<g?(_(d,S,m,g+1),g!==0&&_(T,S,g,v.length),_(T,S,0,m+1)):(m!==0&&_(d,S,m,v.length),_(d,S,0,g+1),_(T,S,g,m+1))}return d.length<T.length?(me(d,y,p,A,u,e,l),me(T,y,p,A,u,e,l)):(me(T,y,p,A,u,e,l),me(d,y,p,A,u,e,l)),y}return y.push(w),y}function Qt(w,y){for(var p=0,A=w.length-1;w.length>3&&A>=0;--A)bt(F(w,A-1),F(w,A),F(w,A+1),y)&&(w.splice(A%w.length,1),p++);return p}function Zt(w,y){for(var p=w.length-1;p>=1;--p)for(var A=w[p],u=p-1;u>=0;--u)if(Kt(A,w[u],y)){w.splice(p,1);continue}}function Oe(w,y,p){return p=p||0,Math.abs(w-y)<=p}function Kt(w,y,p){return Oe(w[0],y[0],p)&&Oe(w[1],y[1],p)}var Qe={exports:{}};(function(w,y){(function(p,A){{var u=A();w&&w.exports&&(y=w.exports=u),y.randomColor=u}})(Re,function(){var p=null,A={};d();var u=[],e=function(c){if(c=c||{},c.seed!==void 0&&c.seed!==null&&c.seed===parseInt(c.seed,10))p=c.seed;else if(typeof c.seed=="string")p=m(c.seed);else{if(c.seed!==void 0&&c.seed!==null)throw new TypeError("The seed value must be an integer or string");p=null}var M,P,I;if(c.count!==null&&c.count!==void 0){for(var C=c.count,E=[],B=0;B<c.count;B++)u.push(!1);for(c.count=null;C>E.length;){var k=e(c);p!==null&&(c.seed=p),E.push(k)}return c.count=C,E}return M=l(c),P=i(M,c),I=n(M,P,c),h([M,P,I],c)};function l(c){if(u.length>0){var M=x(c.hue),P=a(M),I=(M[1]-M[0])/u.length,C=parseInt((P-M[0])/I);u[C]===!0?C=(C+2)%u.length:u[C]=!0;var E=(M[0]+C*I)%359,B=(M[0]+(C+1)*I)%359;return M=[E,B],P=a(M),P<0&&(P=360+P),P}else{var M=f(c.hue);return P=a(M),P<0&&(P=360+P),P}}function i(c,M){if(M.hue==="monochrome")return 0;if(M.luminosity==="random")return a([0,100]);var P=r(c),I=P[0],C=P[1];switch(M.luminosity){case"bright":I=55;break;case"dark":I=C-10;break;case"light":C=55;break}return a([I,C])}function n(c,M,P){var I=o(c,M),C=100;switch(P.luminosity){case"dark":C=I+20;break;case"light":I=(C+I)/2;break;case"random":I=0,C=100;break}return a([I,C])}function h(c,M){switch(M.format){case"hsvArray":return c;case"hslArray":return v(c);case"hsl":var P=v(c);return"hsl("+P[0]+", "+P[1]+"%, "+P[2]+"%)";case"hsla":var I=v(c),B=M.alpha||Math.random();return"hsla("+I[0]+", "+I[1]+"%, "+I[2]+"%, "+B+")";case"rgbArray":return T(c);case"rgb":var C=T(c);return"rgb("+C.join(", ")+")";case"rgba":var E=T(c),B=M.alpha||Math.random();return"rgba("+E.join(", ")+", "+B+")";default:return s(c)}}function o(c,M){for(var P=t(c).lowerBounds,I=0;I<P.length-1;I++){var C=P[I][0],E=P[I][1],B=P[I+1][0],k=P[I+1][1];if(M>=C&&M<=B){var L=(k-E)/(B-C),R=E-L*C;return L*M+R}}return 0}function f(c){if(typeof parseInt(c)=="number"){var M=parseInt(c);if(M<360&&M>0)return[M,M]}if(typeof c=="string"){if(A[c]){var P=A[c];if(P.hueRange)return P.hueRange}else if(c.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var I=S(c)[0];return[I,I]}}return[0,360]}function r(c){return t(c).saturationRange}function t(c){c>=334&&c<=360&&(c-=360);for(var M in A){var P=A[M];if(P.hueRange&&c>=P.hueRange[0]&&c<=P.hueRange[1])return A[M]}return"Color not found"}function a(c){if(p===null){var M=.618033988749895,P=Math.random();return P+=M,P%=1,Math.floor(c[0]+P*(c[1]+1-c[0]))}else{var I=c[1]||1,C=c[0]||0;p=(p*9301+49297)%233280;var E=p/233280;return Math.floor(C+E*(I-C))}}function s(c){var M=T(c);function P(C){var E=C.toString(16);return E.length==1?"0"+E:E}var I="#"+P(M[0])+P(M[1])+P(M[2]);return I}function g(c,M,P){var I=P[0][0],C=P[P.length-1][0],E=P[P.length-1][1],B=P[0][1];A[c]={hueRange:M,lowerBounds:P,saturationRange:[I,C],brightnessRange:[E,B]}}function d(){g("monochrome",null,[[0,0],[100,0]]),g("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),g("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),g("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),g("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),g("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),g("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),g("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function T(c){var M=c[0];M===0&&(M=1),M===360&&(M=359),M=M/360;var P=c[1]/100,I=c[2]/100,C=Math.floor(M*6),E=M*6-C,B=I*(1-P),k=I*(1-E*P),L=I*(1-(1-E)*P),R=256,D=256,O=256;switch(C){case 0:R=I,D=L,O=B;break;case 1:R=k,D=I,O=B;break;case 2:R=B,D=I,O=L;break;case 3:R=B,D=k,O=I;break;case 4:R=L,D=B,O=I;break;case 5:R=I,D=B,O=k;break}var b=[Math.floor(R*255),Math.floor(D*255),Math.floor(O*255)];return b}function S(c){c=c.replace(/^#/,""),c=c.length===3?c.replace(/(.)/g,"$1$1"):c;var M=parseInt(c.substr(0,2),16)/255,P=parseInt(c.substr(2,2),16)/255,I=parseInt(c.substr(4,2),16)/255,C=Math.max(M,P,I),E=C-Math.min(M,P,I),B=C?E/C:0;switch(C){case M:return[60*((P-I)/E%6)||0,B,C];case P:return[60*((I-M)/E+2)||0,B,C];case I:return[60*((M-P)/E+4)||0,B,C]}}function v(c){var M=c[0],P=c[1]/100,I=c[2]/100,C=(2-P)*I;return[M,Math.round(P*I/(C<1?C:2-C)*1e4)/100,C/2*100]}function m(c){for(var M=0,P=0;P!==c.length&&!(M>=Number.MAX_SAFE_INTEGER);P++)M+=c.charCodeAt(P);return M}function x(c){if(isNaN(c)){if(typeof c=="string"){if(A[c]){var P=A[c];if(P.hueRange)return P.hueRange}else if(c.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var I=S(c)[0];return t(I).hueRange}}}else{var M=parseInt(c);if(M<360&&M>0)return t(c).hueRange}return[0,360]}return e})})(Qe,Qe.exports);var Jt=Qe.exports;const Ve=Bt(Ye.Engine.create()),{World:Xt,Events:Yt,Composite:qt}=Ye,we=Ie(.1),Ne=Ie(1),Ce=Ie(1),Fe=Ie(),ye=Ie(!1),mt=new class{constructor(){this.bodies=[],this.subscriptions=[],Yt.on(de(Ve),"beforeUpdate",()=>{const y=qt.allBodies(de(Ve).world).filter(p=>p!==de(Fe));this.bodies=y,this.subscriptions.forEach(p=>p(y))})}subscribe(w){return this.subscriptions=[...this.subscriptions,w],w(this.bodies),()=>{this.subscriptions=this.subscriptions.filter(y=>y!=w)}}},dt=ve(mt,w=>w.length),jt=w=>{for(let y=0;y<w;y++){const p=de(mt)[y];p!=null&&Xt.remove(de(Ve).world,p)}};function _t(w){let y,p,A,u,e;const l=w[3].default,i=Ze(l,w,w[2],null);return{c(){y=X("button"),i&&i.c(),this.h()},l(n){y=Y(n,"BUTTON",{class:!0});var h=ee(y);i&&i.l(h),h.forEach(V),this.h()},h(){U(y,"class",p="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+w[0]),y.disabled=w[1]},m(n,h){Q(n,y,h),i&&i.m(y,null),A=!0,u||(e=Se(y,"click",w[4]),u=!0)},p(n,[h]){i&&i.p&&(!A||h&4)&&Ke(i,l,n,n[2],A?Xe(l,n[2],h,null):Je(n[2]),null),(!A||h&1&&p!==(p="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+n[0]))&&U(y,"class",p),(!A||h&2)&&(y.disabled=n[1])},i(n){A||(q(i,n),A=!0)},o(n){te(i,n),A=!1},d(n){n&&V(y),i&&i.d(n),u=!1,e()}}}function en(w,y,p){let{$$slots:A={},$$scope:u}=y,{extraClasses:e=""}=y,{disabled:l=!1}=y;function i(n){ft.call(this,w,n)}return w.$$set=n=>{"extraClasses"in n&&p(0,e=n.extraClasses),"disabled"in n&&p(1,l=n.disabled),"$$scope"in n&&p(2,u=n.$$scope)},[e,l,u,A,i]}class xt extends Pe{constructor(y){super(),Me(this,y,en,_t,Ae,{extraClasses:0,disabled:1})}}function tn(w){let y,p,A,u,e=Math.round(w[8]*100)/100+"",l,i,n=Math.round(w[5]*100)/100+"",h,o,f=w[5]==1?"":"s",r,t,a;return{c(){y=X("span"),p=$("("),A=$(w[6]),u=$(" -> "),l=$(e),i=$(" - "),h=$(n),o=$(" unit"),r=$(f),t=$("])"),this.h()},l(s){y=Y(s,"SPAN",{class:!0});var g=ee(y);p=z(g,"("),A=z(g,w[6]),u=z(g," -> "),l=z(g,e),i=z(g," - "),h=z(g,n),o=z(g," unit"),r=z(g,f),t=z(g,"])"),g.forEach(V),this.h()},h(){U(y,"class",a="text-xs "+(w[7]?"text-red-700":"text-green-700"))},m(s,g){Q(s,y,g),H(y,p),H(y,A),H(y,u),H(y,l),H(y,i),H(y,h),H(y,o),H(y,r),H(y,t)},p(s,g){g&64&&he(A,s[6]),g&256&&e!==(e=Math.round(s[8]*100)/100+"")&&he(l,e),g&32&&n!==(n=Math.round(s[5]*100)/100+"")&&he(h,n),g&32&&f!==(f=s[5]==1?"":"s")&&he(r,f),g&128&&a!==(a="text-xs "+(s[7]?"text-red-700":"text-green-700"))&&U(y,"class",a)},d(s){s&&V(y)}}}function nn(w){let y,p,A;return{c(){y=X("span"),p=$("(Maxed Out!)"),this.h()},l(u){y=Y(u,"SPAN",{class:!0});var e=ee(y);p=z(e,"(Maxed Out!)"),e.forEach(V),this.h()},h(){U(y,"class",A="text-xs "+(w[7]?"text-gray-500":"text-gray-700"))},m(u,e){Q(u,y,e),H(y,p)},p(u,e){e&128&&A!==(A="text-xs "+(u[7]?"text-gray-500":"text-gray-700"))&&U(y,"class",A)},d(u){u&&V(y)}}}function rn(w){let y,p,A,u,e;const l=w[11].default,i=Ze(l,w,w[12],null);function n(f,r){return(f[3]?f[4]>f[6]:f[4]<=f[6])?nn:tn}let h=n(w),o=h(w);return{c(){i&&i.c(),y=ae(),p=X("br"),A=ae(),o.c(),u=De()},l(f){i&&i.l(f),y=se(f),p=Y(f,"BR",{}),A=se(f),o.l(f),u=De()},m(f,r){i&&i.m(f,r),Q(f,y,r),Q(f,p,r),Q(f,A,r),o.m(f,r),Q(f,u,r),e=!0},p(f,r){i&&i.p&&(!e||r&4096)&&Ke(i,l,f,f[12],e?Xe(l,f[12],r,null):Je(f[12]),null),h===(h=n(f))&&o?o.p(f,r):(o.d(1),o=h(f),o&&(o.c(),o.m(u.parentNode,u)))},i(f){e||(q(i,f),e=!0)},o(f){te(i,f),e=!1},d(f){i&&i.d(f),f&&V(y),f&&V(p),f&&V(A),o.d(f),f&&V(u)}}}function an(w){let y,p;return y=new xt({props:{disabled:w[7],extraClasses:w[7]?"m-4 cursor-not-allowed text-gray-700":"m-4 transition-all active:scale-90",$$slots:{default:[rn]},$$scope:{ctx:w}}}),y.$on("click",w[9]),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),p=!0},p(A,[u]){const e={};u&128&&(e.disabled=A[7]),u&128&&(e.extraClasses=A[7]?"m-4 cursor-not-allowed text-gray-700":"m-4 transition-all active:scale-90"),u&4600&&(e.$$scope={dirty:u,ctx:A}),y.$set(e)},i(A){p||(q(y.$$.fragment,A),p=!0)},o(A){te(y.$$.fragment,A),p=!1},d(A){ce(y,A)}}}function sn(w,y,p){let A,u,e=Ge,l=()=>(e(),e=We(g,c=>p(5,u=c)),g),i,n,h=Ge,o=()=>(h(),h=We(d,c=>p(6,n=c)),d),f,r=Ge,t=()=>(r(),r=We(T,c=>p(8,f=c)),T);ie(w,dt,c=>p(10,i=c)),w.$$.on_destroy.push(()=>e()),w.$$.on_destroy.push(()=>h()),w.$$.on_destroy.push(()=>r());let{$$slots:a={},$$scope:s}=y,{cost:g}=y;l();let{currentNumber:d}=y;o();let{nextNumber:T=ve(d,c=>c+1)}=y;t();let{negative:S=!1}=y,{max:v=S?0:Number.MAX_SAFE_INTEGER}=y;const m=Ct();function x(){u>i||(jt(u),m("successfullPurchase"))}return w.$$set=c=>{"cost"in c&&l(p(0,g=c.cost)),"currentNumber"in c&&o(p(1,d=c.currentNumber)),"nextNumber"in c&&t(p(2,T=c.nextNumber)),"negative"in c&&p(3,S=c.negative),"max"in c&&p(4,v=c.max),"$$scope"in c&&p(12,s=c.$$scope)},w.$$.update=()=>{w.$$.dirty&1144&&p(7,A=u>i||(S?v>n:v<=n))},[g,d,T,S,v,u,n,A,f,x,i,a,s]}class pt extends Pe{constructor(y){super(),Me(this,y,sn,an,Ae,{cost:0,currentNumber:1,nextNumber:2,negative:3,max:4})}}function on(w){let y;const p=w[5].default,A=Ze(p,w,w[8],null);return{c(){A&&A.c()},l(u){A&&A.l(u)},m(u,e){A&&A.m(u,e),y=!0},p(u,e){A&&A.p&&(!y||e&256)&&Ke(A,p,u,u[8],y?Xe(p,u[8],e,null):Je(u[8]),null)},i(u){y||(q(A,u),y=!0)},o(u){te(A,u),y=!1},d(u){A&&A.d(u)}}}function ln(w){let y,p;return y=new pt({props:{cost:w[0],currentNumber:w[1],max:w[3],negative:w[4],nextNumber:ve(w[1],w[6]),$$slots:{default:[on]},$$scope:{ctx:w}}}),y.$on("successfullPurchase",w[7]),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),p=!0},p(A,[u]){const e={};u&1&&(e.cost=A[0]),u&2&&(e.currentNumber=A[1]),u&8&&(e.max=A[3]),u&16&&(e.negative=A[4]),u&6&&(e.nextNumber=ve(A[1],A[6])),u&256&&(e.$$scope={dirty:u,ctx:A}),y.$set(e)},i(A){p||(q(y.$$.fragment,A),p=!0)},o(A){te(y.$$.fragment,A),p=!1},d(A){ce(y,A)}}}function fn(w,y,p){let{$$slots:A={},$$scope:u}=y,{cost:e}=y,{currentNumber:l}=y,{nextStep:i}=y,{max:n}=y,{negative:h=!1}=y;const o=r=>r+i;function f(r){ft.call(this,w,r)}return w.$$set=r=>{"cost"in r&&p(0,e=r.cost),"currentNumber"in r&&p(1,l=r.currentNumber),"nextStep"in r&&p(2,i=r.nextStep),"max"in r&&p(3,n=r.max),"negative"in r&&p(4,h=r.negative),"$$scope"in r&&p(8,u=r.$$scope)},[e,l,i,n,h,A,o,f,u]}class st extends Pe{constructor(y){super(),Me(this,y,fn,ln,Ae,{cost:0,currentNumber:1,nextStep:2,max:3,negative:4})}}function un(w){const y=w-1;return y*y*y+1}function ot(w,{delay:y=0,duration:p=400,easing:A=un,x:u=0,y:e=0,opacity:l=0}={}){const i=getComputedStyle(w),n=+i.opacity,h=i.transform==="none"?"":i.transform,o=n*(1-l);return{delay:y,duration:p,easing:A,css:(f,r)=>`
			transform: ${h} translate(${(1-f)*u}px, ${(1-f)*e}px);
			opacity: ${n-o*r}`}}function cn(w){let y;return{c(){y=$("Increase amount")},l(p){y=z(p,"Increase amount")},m(p,A){Q(p,y,A)},d(p){p&&V(y)}}}function vn(w){let y;return{c(){y=$("Increase friction")},l(p){y=z(p,"Increase friction")},m(p,A){Q(p,y,A)},d(p){p&&V(y)}}}function hn(w){let y;return{c(){y=$("Decrease Bounciness")},l(p){y=z(p,"Decrease Bounciness")},m(p,A){Q(p,y,A)},d(p){p&&V(y)}}}function gn(w){let y,p,A,u,e,l,i,n,h,o,f,r,t,a,s,g;return n=new pt({props:{cost:ve(Ce,mn),currentNumber:Ce,$$slots:{default:[cn]},$$scope:{ctx:w}}}),n.$on("successfullPurchase",w[6]),o=new st({props:{cost:ve(we,dn),currentNumber:we,max:1,nextStep:.1,$$slots:{default:[vn]},$$scope:{ctx:w}}}),o.$on("successfullPurchase",w[7]),r=new st({props:{cost:ve(Ne,xn),currentNumber:Ne,negative:!0,max:0,nextStep:-.1,$$slots:{default:[hn]},$$scope:{ctx:w}}}),r.$on("successfullPurchase",w[8]),{c(){y=X("div"),p=X("h1"),A=$("Shop "),u=X("button"),e=$("x"),l=ae(),i=X("div"),le(n.$$.fragment),h=ae(),le(o.$$.fragment),f=ae(),le(r.$$.fragment),this.h()},l(d){y=Y(d,"DIV",{class:!0});var T=ee(y);p=Y(T,"H1",{class:!0});var S=ee(p);A=z(S,"Shop "),u=Y(S,"BUTTON",{class:!0});var v=ee(u);e=z(v,"x"),v.forEach(V),S.forEach(V),l=se(T),i=Y(T,"DIV",{class:!0});var m=ee(i);fe(n.$$.fragment,m),h=se(m),fe(o.$$.fragment,m),f=se(m),fe(r.$$.fragment,m),m.forEach(V),T.forEach(V),this.h()},h(){U(u,"class","ml-2 rounded-full py-2 px-4 bg-white hover:bg-red-400 transition-all text-black"),U(p,"class","text-2xl mb-8 text-center"),U(i,"class","flex flex-col"),U(y,"class","font-display fixed top-0 left-0 h-[calc(100vh)] w-auto p-8 bg-gray-400/[0.6]")},m(d,T){Q(d,y,T),H(y,p),H(p,A),H(p,u),H(u,e),H(y,l),H(y,i),ue(n,i,null),H(i,h),ue(o,i,null),H(i,f),ue(r,i,null),a=!0,s||(g=[Se(window,"keydown",w[4]),Se(u,"click",w[5])],s=!0)},p(d,[T]){const S={};T&512&&(S.$$scope={dirty:T,ctx:d}),n.$set(S);const v={};T&512&&(v.$$scope={dirty:T,ctx:d}),o.$set(v);const m={};T&512&&(m.$$scope={dirty:T,ctx:d}),r.$set(m)},i(d){a||(q(n.$$.fragment,d),q(o.$$.fragment,d),q(r.$$.fragment,d),Pt(()=>{t||(t=rt(y,ot,{x:-50},!0)),t.run(1)}),a=!0)},o(d){te(n.$$.fragment,d),te(o.$$.fragment,d),te(r.$$.fragment,d),t||(t=rt(y,ot,{x:-50},!1)),t.run(0),a=!1},d(d){d&&V(y),ce(n),ce(o),ce(r),d&&t&&t.end(),s=!1,ut(g)}}}const mn=w=>w*30,dn=w=>w*200,xn=w=>(1.1-w)*250;function pn(w,y,p){let A,u,e,l;return ie(w,ye,r=>p(0,A=r)),ie(w,Ce,r=>p(1,u=r)),ie(w,we,r=>p(2,e=r)),ie(w,Ne,r=>p(3,l=r)),[A,u,e,l,r=>{(r.key=="Esc"||r.key=="Escape")&&oe(ye,A=!1,A)},()=>{oe(ye,A=!1,A)},()=>oe(Ce,u=u+1,u),()=>oe(we,e=e+.1,e),()=>oe(Ne,l=l-.1,l)]}class yn extends Pe{constructor(y){super(),Me(this,y,pn,gn,Ae,{})}}const{window:Sn}=It;function wn(w){let y;return{c(){y=$("Shop")},l(p){y=z(p,"Shop")},m(p,A){Q(p,y,A)},d(p){p&&V(y)}}}function lt(w){let y,p;return y=new yn({}),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),p=!0},i(A){p||(q(y.$$.fragment,A),p=!0)},o(A){te(y.$$.fragment,A),p=!1},d(A){ce(y,A)}}}function Cn(w){let y,p,A,u,e,l,i,n,h,o=w[3]==1?"":"s",f,r,t,a,s,g,d,T;t=new xt({props:{extraClasses:"mt-4 w-min",$$slots:{default:[wn]},$$scope:{ctx:w}}}),t.$on("click",w[9]);let S=w[4]&&lt();return{c(){y=X("canvas"),p=ae(),A=X("div"),u=X("div"),e=ae(),l=X("div"),i=X("p"),n=$(w[3]),h=$(" unit"),f=$(o),r=ae(),le(t.$$.fragment),a=ae(),S&&S.c(),s=De(),this.h()},l(v){y=Y(v,"CANVAS",{width:!0,height:!0,class:!0}),ee(y).forEach(V),p=se(v),A=Y(v,"DIV",{class:!0});var m=ee(A);u=Y(m,"DIV",{class:!0}),ee(u).forEach(V),m.forEach(V),e=se(v),l=Y(v,"DIV",{class:!0});var x=ee(l);i=Y(x,"P",{class:!0});var c=ee(i);n=z(c,w[3]),h=z(c," unit"),f=z(c,o),c.forEach(V),r=se(x),fe(t.$$.fragment,x),x.forEach(V),a=se(v),S&&S.l(v),s=De(),this.h()},h(){U(y,"width",w[1]),U(y,"height",w[2]),U(y,"class","fixed top-0 left-0 z--10"),U(u,"class","border-[50px] border-transparent w-24 h-24 active:scale-90 bg-black rounded-full hover:scale-110 hover:cursor-pointer transition-all"),U(A,"class","fixed top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]"),U(i,"class","font-thin text-3xl border-b-[1px] pb-2 border-gray-200"),U(l,"class","my-8 mx-auto text-center top-0 left-0 w-screen fixed flex flex-col items-center font-display")},m(v,m){Q(v,y,m),w[8](y),Q(v,p,m),Q(v,A,m),H(A,u),Q(v,e,m),Q(v,l,m),H(l,i),H(i,n),H(i,h),H(i,f),H(l,r),ue(t,l,null),Q(v,a,m),S&&S.m(v,m),Q(v,s,m),g=!0,d||(T=[Se(Sn,"resize",w[7]),Se(u,"click",w[6])],d=!0)},p(v,[m]){(!g||m&2)&&U(y,"width",v[1]),(!g||m&4)&&U(y,"height",v[2]),(!g||m&8)&&he(n,v[3]),(!g||m&8)&&o!==(o=v[3]==1?"":"s")&&he(f,o);const x={};m&16777216&&(x.$$scope={dirty:m,ctx:v}),t.$set(x),v[4]?S?m&16&&q(S,1):(S=lt(),S.c(),q(S,1),S.m(s.parentNode,s)):S&&(Tt(),te(S,1,1,()=>{S=null}),Mt())},i(v){g||(q(t.$$.fragment,v),q(S),g=!0)},o(v){te(t.$$.fragment,v),te(S),g=!1},d(v){v&&V(y),w[8](null),v&&V(p),v&&V(A),v&&V(e),v&&V(l),ce(t),v&&V(a),S&&S.d(v),v&&V(s),d=!1,ut(T)}}}function Pn(w,y,p){let A,u,e,l,i,n;ie(w,Ve,C=>p(10,A=C)),ie(w,we,C=>p(11,u=C)),ie(w,Ce,C=>p(12,e=C)),ie(w,Fe,C=>p(13,l=C)),ie(w,dt,C=>p(3,i=C)),ie(w,ye,C=>p(4,n=C));const{Composite:h,Common:o,Bodies:f,World:r,Body:t,Runner:a,Events:s,Mouse:g,MouseConstraint:d}=Ye;let T;function S(){l&&r.remove(A.world,l),oe(Fe,l=f.rectangle(v/2,m,v,20,{isStatic:!0}),l),oe(Fe,l.render.fillStyle="#444",l),h.add(A.world,[l])}At(()=>{p(1,v=document.documentElement.clientWidth),p(2,m=document.documentElement.clientHeight),o.setDecomp(Rt),s.on(A,"beforeUpdate",()=>{const L=h.allBodies(A.world);for(const R of L)!R.isStatic&&(R.position.y>m||R.position.x<-100||R.position.x>v+100||R.position.y<-100)&&r.remove(A.world,R)});const C=a.create();C.isFixed=!0,a.run(C,A),S();const E=g.create(T),B=d.create(A,{mouse:E,constraint:{stiffness:.2,render:{visible:!0}}});h.add(A.world,B);const k=T.getContext("2d");(function L(){const R=h.allBodies(A.world);window.requestAnimationFrame(L),k.fillStyle="#ffffff",k.fillRect(0,0,T.width,T.height);for(const D of R)for(const O of D.parts){const b=O.vertices;k.beginPath(),k.moveTo(b[0].x,b[0].y);for(const N of b)k.lineTo(N.x,N.y);k.lineTo(b[0].x,b[0].y),k.closePath(),k.lineWidth=0,k.strokeStyle="rgba(1, 1, 1, 0)",k.globalAlpha=O.render.opacity,k.fillStyle=O.render.fillStyle,k.fill()}})()});let v=600,m=600;const x=(C,E)=>Math.random()*(E-C+1)+C;function c(){for(let C=0;C<e;C++){const E=x(16,32),B=f.circle(x(60,v-60),0,E);t.setMass(B,E),B.restitution=1,B.friction=u,B.render.fillStyle=Jt({hue:"monochrome",luminosity:"light"}),r.add(A.world,B)}}const M=()=>{p(1,v=document.documentElement.clientWidth),p(2,m=document.documentElement.clientHeight),S()};function P(C){Et[C?"unshift":"push"](()=>{T=C,p(0,T)})}return[T,v,m,i,n,S,c,M,P,()=>oe(ye,n=!n,n)]}class In extends Pe{constructor(y){super(),Me(this,y,Pn,Cn,Ae,{})}}export{In as default};

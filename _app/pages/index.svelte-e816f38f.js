import{S as Ve,i as Oe,s as He,N as _e,e as ee,c as te,a as ne,d as H,b as Q,g as z,I as Pe,O as et,P as tt,Q as nt,q as pe,o as ye,X as it,t as J,k as ae,w as Me,h as X,m as se,x as Ae,H as j,y as Ie,B as Te,Y as oe,j as le,Z as Be,M as rt,_ as at,v as st,U as ot,V as lt}from"../chunks/index-f0ed99fe.js";import{a as ft}from"../chunks/index-29638b05.js";import{w as We}from"../chunks/index-40099e07.js";var me=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},N={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(A,I){(function(T,v){A.exports=v()})(me,function(){return function(P){var T={};function v(e){if(T[e])return T[e].exports;var l=T[e]={i:e,l:!1,exports:{}};return P[e].call(l.exports,l,l.exports,v),l.l=!0,l.exports}return v.m=P,v.c=T,v.d=function(e,l,i){v.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:i})},v.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},v.t=function(e,l){if(l&1&&(e=v(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(v.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var n in e)v.d(i,n,function(c){return e[c]}.bind(null,n));return i},v.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return v.d(l,"a",l),l},v.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},v.p="",v(v.s=21)}([function(P,T){var v={};P.exports=v,function(){v._nextId=0,v._seed=0,v._nowStartTime=+new Date,v._warnedOnce={},v._decomp=null,v.extend=function(l,i){var n,c;typeof i=="boolean"?(n=2,c=i):(n=1,c=!0);for(var r=n;r<arguments.length;r++){var f=arguments[r];if(f)for(var a in f)c&&f[a]&&f[a].constructor===Object&&(!l[a]||l[a].constructor===Object)?(l[a]=l[a]||{},v.extend(l[a],c,f[a])):l[a]=f[a]}return l},v.clone=function(l,i){return v.extend({},i,l)},v.keys=function(l){if(Object.keys)return Object.keys(l);var i=[];for(var n in l)i.push(n);return i},v.values=function(l){var i=[];if(Object.keys){for(var n=Object.keys(l),c=0;c<n.length;c++)i.push(l[n[c]]);return i}for(var r in l)i.push(l[r]);return i},v.get=function(l,i,n,c){i=i.split(".").slice(n,c);for(var r=0;r<i.length;r+=1)l=l[i[r]];return l},v.set=function(l,i,n,c,r){var f=i.split(".").slice(c,r);return v.get(l,i,0,-1)[f[f.length-1]]=n,n},v.shuffle=function(l){for(var i=l.length-1;i>0;i--){var n=Math.floor(v.random()*(i+1)),c=l[i];l[i]=l[n],l[n]=c}return l},v.choose=function(l){return l[Math.floor(v.random()*l.length)]},v.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},v.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},v.isFunction=function(l){return typeof l=="function"},v.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},v.isString=function(l){return toString.call(l)==="[object String]"},v.clamp=function(l,i,n){return l<i?i:l>n?n:l},v.sign=function(l){return l<0?-1:1},v.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-v._nowStartTime},v.random=function(l,i){return l=typeof l!="undefined"?l:0,i=typeof i!="undefined"?i:1,l+e()*(i-l)};var e=function(){return v._seed=(v._seed*9301+49297)%233280,v._seed/233280};v.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},v.logLevel=1,v.log=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.info=function(){console&&v.logLevel>0&&v.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warn=function(){console&&v.logLevel>0&&v.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},v.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");v._warnedOnce[l]||(v.warn(l),v._warnedOnce[l]=!0)},v.deprecated=function(l,i,n){l[i]=v.chain(function(){v.warnOnce("\u{1F505} deprecated \u{1F505}",n)},l[i])},v.nextId=function(){return v._nextId++},v.indexOf=function(l,i){if(l.indexOf)return l.indexOf(i);for(var n=0;n<l.length;n++)if(l[n]===i)return n;return-1},v.map=function(l,i){if(l.map)return l.map(i);for(var n=[],c=0;c<l.length;c+=1)n.push(i(l[c]));return n},v.topologicalSort=function(l){var i=[],n=[],c=[];for(var r in l)!n[r]&&!c[r]&&v._topologicalSort(r,n,c,l,i);return i},v._topologicalSort=function(l,i,n,c,r){var f=c[l]||[];n[l]=!0;for(var a=0;a<f.length;a+=1){var t=f[a];n[t]||i[t]||v._topologicalSort(t,i,n,c,r)}n[l]=!1,i[l]=!0,r.push(l)},v.chain=function(){for(var l=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?l.push.apply(l,n._chained):l.push(n)}var c=function(){for(var r,f=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)f[a]=arguments[a];for(a=0;a<l.length;a+=1){var s=l[a].apply(r,f);typeof s!="undefined"&&(r=s)}return r};return c._chained=l,c},v.chainPathBefore=function(l,i,n){return v.set(l,i,v.chain(n,v.get(l,i)))},v.chainPathAfter=function(l,i,n){return v.set(l,i,v.chain(v.get(l,i),n))},v.setDecomp=function(l){v._decomp=l},v.getDecomp=function(){var l=v._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof me!="undefined"&&(l=me.decomp)}catch{l=null}return l}}()},function(P,T){var v={};P.exports=v,function(){v.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&v.update(l,e),l},v.update=function(e,l,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<l.length;n++){var c=l[n];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},v.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},v.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},v.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},v.shift=function(e,l){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+i,e.min.y=l.y,e.max.y=l.y+n}}()},function(P,T){var v={};P.exports=v,function(){v.create=function(e,l){return{x:e||0,y:l||0}},v.clone=function(e){return{x:e.x,y:e.y}},v.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},v.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},v.rotate=function(e,l,i){var n=Math.cos(l),c=Math.sin(l);i||(i={});var r=e.x*n-e.y*c;return i.y=e.x*c+e.y*n,i.x=r,i},v.rotateAbout=function(e,l,i,n){var c=Math.cos(l),r=Math.sin(l);n||(n={});var f=i.x+((e.x-i.x)*c-(e.y-i.y)*r);return n.y=i.y+((e.x-i.x)*r+(e.y-i.y)*c),n.x=f,n},v.normalise=function(e){var l=v.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},v.dot=function(e,l){return e.x*l.x+e.y*l.y},v.cross=function(e,l){return e.x*l.y-e.y*l.x},v.cross3=function(e,l,i){return(l.x-e.x)*(i.y-e.y)-(l.y-e.y)*(i.x-e.x)},v.add=function(e,l,i){return i||(i={}),i.x=e.x+l.x,i.y=e.y+l.y,i},v.sub=function(e,l,i){return i||(i={}),i.x=e.x-l.x,i.y=e.y-l.y,i},v.mult=function(e,l){return{x:e.x*l,y:e.y*l}},v.div=function(e,l){return{x:e.x/l,y:e.y/l}},v.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},v.neg=function(e){return{x:-e.x,y:-e.y}},v.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},v._temp=[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()]}()},function(P,T,v){var e={};P.exports=e;var l=v(2),i=v(0);(function(){e.create=function(n,c){for(var r=[],f=0;f<n.length;f++){var a=n[f],t={x:a.x,y:a.y,index:f,body:c,isInternal:!1};r.push(t)}return r},e.fromPath=function(n,c){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(r,function(a,t,s){f.push({x:parseFloat(t),y:parseFloat(s)})}),e.create(f,c)},e.centre=function(n){for(var c=e.area(n,!0),r={x:0,y:0},f,a,t,s=0;s<n.length;s++)t=(s+1)%n.length,f=l.cross(n[s],n[t]),a=l.mult(l.add(n[s],n[t]),f),r=l.add(r,a);return l.div(r,6*c)},e.mean=function(n){for(var c={x:0,y:0},r=0;r<n.length;r++)c.x+=n[r].x,c.y+=n[r].y;return l.div(c,n.length)},e.area=function(n,c){for(var r=0,f=n.length-1,a=0;a<n.length;a++)r+=(n[f].x-n[a].x)*(n[f].y+n[a].y),f=a;return c?r/2:Math.abs(r)/2},e.inertia=function(n,c){for(var r=0,f=0,a=n,t,s,o=0;o<a.length;o++)s=(o+1)%a.length,t=Math.abs(l.cross(a[s],a[o])),r+=t*(l.dot(a[s],a[s])+l.dot(a[s],a[o])+l.dot(a[o],a[o])),f+=t;return c/6*(r/f)},e.translate=function(n,c,r){r=typeof r!="undefined"?r:1;var f=n.length,a=c.x*r,t=c.y*r,s;for(s=0;s<f;s++)n[s].x+=a,n[s].y+=t;return n},e.rotate=function(n,c,r){if(c!==0){var f=Math.cos(c),a=Math.sin(c),t=r.x,s=r.y,o=n.length,g,d,M,S;for(S=0;S<o;S++)g=n[S],d=g.x-t,M=g.y-s,g.x=t+(d*f-M*a),g.y=s+(d*a+M*f);return n}},e.contains=function(n,c){for(var r=c.x,f=c.y,a=n.length,t=n[a-1],s,o=0;o<a;o++){if(s=n[o],(r-t.x)*(s.y-t.y)+(f-t.y)*(t.x-s.x)>0)return!1;t=s}return!0},e.scale=function(n,c,r,f){if(c===1&&r===1)return n;f=f||e.centre(n);for(var a,t,s=0;s<n.length;s++)a=n[s],t=l.sub(a,f),n[s].x=f.x+t.x*c,n[s].y=f.y+t.y*r;return n},e.chamfer=function(n,c,r,f,a){typeof c=="number"?c=[c]:c=c||[8],r=typeof r!="undefined"?r:-1,f=f||2,a=a||14;for(var t=[],s=0;s<n.length;s++){var o=n[s-1>=0?s-1:n.length-1],g=n[s],d=n[(s+1)%n.length],M=c[s<c.length?s:c.length-1];if(M===0){t.push(g);continue}var S=l.normalise({x:g.y-o.y,y:o.x-g.x}),h=l.normalise({x:d.y-g.y,y:g.x-d.x}),m=Math.sqrt(2*Math.pow(M,2)),x=l.mult(i.clone(S),M),u=l.normalise(l.mult(l.add(S,h),.5)),y=l.sub(g,l.mult(u,m)),p=r;r===-1&&(p=Math.pow(M,.32)*1.75),p=i.clamp(p,f,a),p%2===1&&(p+=1);for(var w=Math.acos(l.dot(S,h)),C=w/p,B=0;B<p;B++)t.push(l.add(l.rotate(x,C*B),y))}return t},e.clockwiseSort=function(n){var c=e.mean(n);return n.sort(function(r,f){return l.angle(c,r)-l.angle(c,f)}),n},e.isConvex=function(n){var c=0,r=n.length,f,a,t,s;if(r<3)return null;for(f=0;f<r;f++)if(a=(f+1)%r,t=(f+2)%r,s=(n[a].x-n[f].x)*(n[t].y-n[a].y),s-=(n[a].y-n[f].y)*(n[t].x-n[a].x),s<0?c|=1:s>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(n){var c=[],r=[],f,a;for(n=n.slice(0),n.sort(function(t,s){var o=t.x-s.x;return o!==0?o:t.y-s.y}),a=0;a<n.length;a+=1){for(f=n[a];r.length>=2&&l.cross3(r[r.length-2],r[r.length-1],f)<=0;)r.pop();r.push(f)}for(a=n.length-1;a>=0;a-=1){for(f=n[a];c.length>=2&&l.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),r.pop(),c.concat(r)}})()},function(P,T,v){var e={};P.exports=e;var l=v(0);(function(){e.on=function(i,n,c){for(var r=n.split(" "),f,a=0;a<r.length;a++)f=r[a],i.events=i.events||{},i.events[f]=i.events[f]||[],i.events[f].push(c);return c},e.off=function(i,n,c){if(!n){i.events={};return}typeof n=="function"&&(c=n,n=l.keys(i.events).join(" "));for(var r=n.split(" "),f=0;f<r.length;f++){var a=i.events[r[f]],t=[];if(c&&a)for(var s=0;s<a.length;s++)a[s]!==c&&t.push(a[s]);i.events[r[f]]=t}},e.trigger=function(i,n,c){var r,f,a,t,s=i.events;if(s&&l.keys(s).length>0){c||(c={}),r=n.split(" ");for(var o=0;o<r.length;o++)if(f=r[o],a=s[f],a){t=l.clone(c,!1),t.name=f,t.source=i;for(var g=0;g<a.length;g++)a[g].apply(i,[t])}}}})()},function(P,T,v){var e={};P.exports=e;var l=v(4),i=v(0),n=v(1),c=v(6);(function(){e.create=function(r){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},e.setModified=function(r,f,a,t){if(r.isModified=f,f&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),a&&r.parent&&e.setModified(r.parent,f,a,t),t)for(var s=0;s<r.composites.length;s++){var o=r.composites[s];e.setModified(o,f,a,t)}},e.add=function(r,f){var a=[].concat(f);l.trigger(r,"beforeAdd",{object:f});for(var t=0;t<a.length;t++){var s=a[t];switch(s.type){case"body":if(s.parent!==s){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(r,s);break;case"constraint":e.addConstraint(r,s);break;case"composite":e.addComposite(r,s);break;case"mouseConstraint":e.addConstraint(r,s.constraint);break}}return l.trigger(r,"afterAdd",{object:f}),r},e.remove=function(r,f,a){var t=[].concat(f);l.trigger(r,"beforeRemove",{object:f});for(var s=0;s<t.length;s++){var o=t[s];switch(o.type){case"body":e.removeBody(r,o,a);break;case"constraint":e.removeConstraint(r,o,a);break;case"composite":e.removeComposite(r,o,a);break;case"mouseConstraint":e.removeConstraint(r,o.constraint);break}}return l.trigger(r,"afterRemove",{object:f}),r},e.addComposite=function(r,f){return r.composites.push(f),f.parent=r,e.setModified(r,!0,!0,!1),r},e.removeComposite=function(r,f,a){var t=i.indexOf(r.composites,f);if(t!==-1&&e.removeCompositeAt(r,t),a)for(var s=0;s<r.composites.length;s++)e.removeComposite(r.composites[s],f,!0);return r},e.removeCompositeAt=function(r,f){return r.composites.splice(f,1),e.setModified(r,!0,!0,!1),r},e.addBody=function(r,f){return r.bodies.push(f),e.setModified(r,!0,!0,!1),r},e.removeBody=function(r,f,a){var t=i.indexOf(r.bodies,f);if(t!==-1&&e.removeBodyAt(r,t),a)for(var s=0;s<r.composites.length;s++)e.removeBody(r.composites[s],f,!0);return r},e.removeBodyAt=function(r,f){return r.bodies.splice(f,1),e.setModified(r,!0,!0,!1),r},e.addConstraint=function(r,f){return r.constraints.push(f),e.setModified(r,!0,!0,!1),r},e.removeConstraint=function(r,f,a){var t=i.indexOf(r.constraints,f);if(t!==-1&&e.removeConstraintAt(r,t),a)for(var s=0;s<r.composites.length;s++)e.removeConstraint(r.composites[s],f,!0);return r},e.removeConstraintAt=function(r,f){return r.constraints.splice(f,1),e.setModified(r,!0,!0,!1),r},e.clear=function(r,f,a){if(a)for(var t=0;t<r.composites.length;t++)e.clear(r.composites[t],f,!0);return f?r.bodies=r.bodies.filter(function(s){return s.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,e.setModified(r,!0,!0,!1),r},e.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var f=[].concat(r.bodies),a=0;a<r.composites.length;a++)f=f.concat(e.allBodies(r.composites[a]));return r.cache&&(r.cache.allBodies=f),f},e.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var f=[].concat(r.constraints),a=0;a<r.composites.length;a++)f=f.concat(e.allConstraints(r.composites[a]));return r.cache&&(r.cache.allConstraints=f),f},e.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var f=[].concat(r.composites),a=0;a<r.composites.length;a++)f=f.concat(e.allComposites(r.composites[a]));return r.cache&&(r.cache.allComposites=f),f},e.get=function(r,f,a){var t,s;switch(a){case"body":t=e.allBodies(r);break;case"constraint":t=e.allConstraints(r);break;case"composite":t=e.allComposites(r).concat(r);break}return t?(s=t.filter(function(o){return o.id.toString()===f.toString()}),s.length===0?null:s[0]):null},e.move=function(r,f,a){return e.remove(r,f),e.add(a,f),r},e.rebase=function(r){for(var f=e.allBodies(r).concat(e.allConstraints(r)).concat(e.allComposites(r)),a=0;a<f.length;a++)f[a].id=i.nextId();return r},e.translate=function(r,f,a){for(var t=a?e.allBodies(r):r.bodies,s=0;s<t.length;s++)c.translate(t[s],f);return r},e.rotate=function(r,f,a,t){for(var s=Math.cos(f),o=Math.sin(f),g=t?e.allBodies(r):r.bodies,d=0;d<g.length;d++){var M=g[d],S=M.position.x-a.x,h=M.position.y-a.y;c.setPosition(M,{x:a.x+(S*s-h*o),y:a.y+(S*o+h*s)}),c.rotate(M,f)}return r},e.scale=function(r,f,a,t,s){for(var o=s?e.allBodies(r):r.bodies,g=0;g<o.length;g++){var d=o[g],M=d.position.x-t.x,S=d.position.y-t.y;c.setPosition(d,{x:t.x+M*f,y:t.y+S*a}),c.scale(d,f,a)}return r},e.bounds=function(r){for(var f=e.allBodies(r),a=[],t=0;t<f.length;t+=1){var s=f[t];a.push(s.bounds.min,s.bounds.max)}return n.create(a)}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(2),n=v(7);v(16);var c=v(0),r=v(1),f=v(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var s={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},o=c.extend(s,t);return a(o,t),o},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,s){s=s||{},e.set(t,{bounds:t.bounds||r.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),r.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:s.axes||t.axes,area:s.area||t.area,mass:s.mass||t.mass,inertia:s.inertia||t.inertia});var o=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||o,t.render.strokeStyle=t.render.strokeStyle||g,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,s,o){var g;typeof s=="string"&&(g=s,s={},s[g]=o);for(g in s)if(!!Object.prototype.hasOwnProperty.call(s,g))switch(o=s[g],g){case"isStatic":e.setStatic(t,o);break;case"isSleeping":n.set(t,o);break;case"mass":e.setMass(t,o);break;case"density":e.setDensity(t,o);break;case"inertia":e.setInertia(t,o);break;case"vertices":e.setVertices(t,o);break;case"position":e.setPosition(t,o);break;case"angle":e.setAngle(t,o);break;case"velocity":e.setVelocity(t,o);break;case"angularVelocity":e.setAngularVelocity(t,o);break;case"parts":e.setParts(t,o);break;case"centre":e.setCentre(t,o);break;default:t[g]=o}},e.setStatic=function(t,s){for(var o=0;o<t.parts.length;o++){var g=t.parts[o];g.isStatic=s,s?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},e.setMass=function(t,s){var o=t.inertia/(t.mass/6);t.inertia=o*(s/6),t.inverseInertia=1/t.inertia,t.mass=s,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,s){e.setMass(t,s*t.area),t.density=s},e.setInertia=function(t,s){t.inertia=s,t.inverseInertia=1/t.inertia},e.setVertices=function(t,s){s[0].body===t?t.vertices=s:t.vertices=l.create(s,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var o=l.centre(t.vertices);l.translate(t.vertices,o,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),r.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,s,o){var g;for(s=s.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,g=0;g<s.length;g++){var d=s[g];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(o=typeof o!="undefined"?o:!0,o){var M=[];for(g=0;g<s.length;g++)M=M.concat(s[g].vertices);l.clockwiseSort(M);var S=l.hull(M),h=l.centre(S);e.setVertices(t,S),l.translate(t.vertices,h)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,s,o){o?(t.positionPrev.x+=s.x,t.positionPrev.y+=s.y,t.position.x+=s.x,t.position.y+=s.y):(t.positionPrev.x=s.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=s.y-(t.position.y-t.positionPrev.y),t.position.x=s.x,t.position.y=s.y)},e.setPosition=function(t,s){var o=i.sub(s,t.position);t.positionPrev.x+=o.x,t.positionPrev.y+=o.y;for(var g=0;g<t.parts.length;g++){var d=t.parts[g];d.position.x+=o.x,d.position.y+=o.y,l.translate(d.vertices,o),r.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,s){var o=s-t.angle;t.anglePrev+=o;for(var g=0;g<t.parts.length;g++){var d=t.parts[g];d.angle+=o,l.rotate(d.vertices,o,t.position),f.rotate(d.axes,o),r.update(d.bounds,d.vertices,t.velocity),g>0&&i.rotateAbout(d.position,o,t.position,d.position)}},e.setVelocity=function(t,s){t.positionPrev.x=t.position.x-s.x,t.positionPrev.y=t.position.y-s.y,t.velocity.x=s.x,t.velocity.y=s.y,t.speed=i.magnitude(t.velocity)},e.setAngularVelocity=function(t,s){t.anglePrev=t.angle-s,t.angularVelocity=s,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,s){e.setPosition(t,i.add(t.position,s))},e.rotate=function(t,s,o){if(!o)e.setAngle(t,t.angle+s);else{var g=Math.cos(s),d=Math.sin(s),M=t.position.x-o.x,S=t.position.y-o.y;e.setPosition(t,{x:o.x+(M*g-S*d),y:o.y+(M*d+S*g)}),e.setAngle(t,t.angle+s)}},e.scale=function(t,s,o,g){var d=0,M=0;g=g||t.position;for(var S=0;S<t.parts.length;S++){var h=t.parts[S];l.scale(h.vertices,s,o,g),h.axes=f.fromVertices(h.vertices),h.area=l.area(h.vertices),e.setMass(h,t.density*h.area),l.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),e.setInertia(h,e._inertiaScale*l.inertia(h.vertices,h.mass)),l.translate(h.vertices,{x:h.position.x,y:h.position.y}),S>0&&(d+=h.area,M+=h.inertia),h.position.x=g.x+(h.position.x-g.x)*s,h.position.y=g.y+(h.position.y-g.y)*o,r.update(h.bounds,h.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,M))),t.circleRadius&&(s===o?t.circleRadius*=s:t.circleRadius=null)},e.update=function(t,s,o,g){var d=Math.pow(s*o*t.timeScale,2),M=1-t.frictionAir*o*t.timeScale,S=t.position.x-t.positionPrev.x,h=t.position.y-t.positionPrev.y;t.velocity.x=S*M*g+t.force.x/t.mass*d,t.velocity.y=h*M*g+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*M*g+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=i.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var x=t.parts[m];l.translate(x.vertices,t.velocity),m>0&&(x.position.x+=t.velocity.x,x.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(x.vertices,t.angularVelocity,t.position),f.rotate(x.axes,t.angularVelocity),m>0&&i.rotateAbout(x.position,t.angularVelocity,t.position,x.position)),r.update(x.bounds,x.vertices,t.velocity)}},e.applyForce=function(t,s,o){t.force.x+=o.x,t.force.y+=o.y;var g={x:s.x-t.position.x,y:s.y-t.position.y};t.torque+=g.x*o.y-g.y*o.x},e._totalProperties=function(t){for(var s={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=t.parts.length===1?0:1;o<t.parts.length;o++){var g=t.parts[o],d=g.mass!==1/0?g.mass:1;s.mass+=d,s.area+=g.area,s.inertia+=g.inertia,s.centre=i.add(s.centre,i.mult(g.position,d))}return s.centre=i.div(s.centre,s.mass),s}})()},function(P,T,v){var e={};P.exports=e;var l=v(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,n){for(var c=n*n*n,r=0;r<i.length;r++){var f=i[r],a=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,a),s=Math.max(f.motion,a);f.motion=e._minBias*t+(1-e._minBias)*s,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(i,n){for(var c=n*n*n,r=0;r<i.length;r++){var f=i[r];if(!!f.isActive){var a=f.collision,t=a.bodyA.parent,s=a.bodyB.parent;if(!(t.isSleeping&&s.isSleeping||t.isStatic||s.isStatic)&&(t.isSleeping||s.isSleeping)){var o=t.isSleeping&&!t.isStatic?t:s,g=o===t?s:t;!o.isStatic&&g.motion>e._motionWakeThreshold*c&&e.set(o,!1)}}}},e.set=function(i,n){var c=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,c||l.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,c&&l.trigger(i,"sleepEnd"))}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(9);(function(){var n=[],c={overlap:0,axis:null},r={overlap:0,axis:null};e.create=function(f,a){return{pair:null,collided:!1,bodyA:f,bodyB:a,parentA:f.parent,parentB:a.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,a,t){if(e._overlapAxes(c,f.vertices,a.vertices,f.axes),c.overlap<=0||(e._overlapAxes(r,a.vertices,f.vertices,a.axes),r.overlap<=0))return null;var s=t&&t.table[i.id(f,a)],o;s?o=s.collision:(o=e.create(f,a),o.collided=!0,o.bodyA=f.id<a.id?f:a,o.bodyB=f.id<a.id?a:f,o.parentA=o.bodyA.parent,o.parentB=o.bodyB.parent),f=o.bodyA,a=o.bodyB;var g;c.overlap<r.overlap?g=c:g=r;var d=o.normal,M=o.supports,S=g.axis,h=S.x,m=S.y;h*(a.position.x-f.position.x)+m*(a.position.y-f.position.y)<0?(d.x=h,d.y=m):(d.x=-h,d.y=-m),o.tangent.x=-d.y,o.tangent.y=d.x,o.depth=g.overlap,o.penetration.x=d.x*o.depth,o.penetration.y=d.y*o.depth;var x=e._findSupports(f,a,d,1),u=0;if(l.contains(f.vertices,x[0])&&(M[u++]=x[0]),l.contains(f.vertices,x[1])&&(M[u++]=x[1]),u<2){var y=e._findSupports(a,f,d,-1);l.contains(a.vertices,y[0])&&(M[u++]=y[0]),u<2&&l.contains(a.vertices,y[1])&&(M[u++]=y[1])}return u===0&&(M[u++]=x[0]),M.length=u,o},e._overlapAxes=function(f,a,t,s){var o=a.length,g=t.length,d=a[0].x,M=a[0].y,S=t[0].x,h=t[0].y,m=s.length,x=Number.MAX_VALUE,u=0,y,p,w,C,B,R;for(B=0;B<m;B++){var E=s[B],k=E.x,L=E.y,D=d*k+M*L,V=S*k+h*L,O=D,W=V;for(R=1;R<o;R+=1)C=a[R].x*k+a[R].y*L,C>O?O=C:C<D&&(D=C);for(R=1;R<g;R+=1)C=t[R].x*k+t[R].y*L,C>W?W=C:C<V&&(V=C);if(p=O-V,w=W-D,y=p<w?p:w,y<x&&(x=y,u=B,y<=0))break}f.axis=s[u],f.overlap=x},e._projectToAxis=function(f,a,t){for(var s=a[0].x*t.x+a[0].y*t.y,o=s,g=1;g<a.length;g+=1){var d=a[g].x*t.x+a[g].y*t.y;d>o?o=d:d<s&&(s=d)}f.min=s,f.max=o},e._findSupports=function(f,a,t,s){var o=a.vertices,g=o.length,d=f.position.x,M=f.position.y,S=t.x*s,h=t.y*s,m=Number.MAX_VALUE,x,u,y,p,w;for(w=0;w<g;w+=1)u=o[w],p=S*(d-u.x)+h*(M-u.y),p<m&&(m=p,x=u);return y=o[(g+x.index-1)%g],m=S*(d-y.x)+h*(M-y.y),u=o[(x.index+1)%g],S*(d-u.x)+h*(M-u.y)<m?(n[0]=x,n[1]=u,n):(n[0]=x,n[1]=y,n)}})()},function(P,T,v){var e={};P.exports=e;var l=v(17);(function(){e.create=function(i,n){var c=i.bodyA,r=i.bodyB,f={id:e.id(c,r),bodyA:c,bodyB:r,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||r.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,i,n),f},e.update=function(i,n,c){var r=i.contacts,f=n.supports,a=i.activeContacts,t=n.parentA,s=n.parentB,o=t.vertices.length;i.isActive=!0,i.timeUpdated=c,i.collision=n,i.separation=n.depth,i.inverseMass=t.inverseMass+s.inverseMass,i.friction=t.friction<s.friction?t.friction:s.friction,i.frictionStatic=t.frictionStatic>s.frictionStatic?t.frictionStatic:s.frictionStatic,i.restitution=t.restitution>s.restitution?t.restitution:s.restitution,i.slop=t.slop>s.slop?t.slop:s.slop,n.pair=i,a.length=0;for(var g=0;g<f.length;g++){var d=f[g],M=d.body===t?d.index:o+d.index,S=r[M];S?a.push(S):a.push(r[M]=l.create(d))}},e.setActive=function(i,n,c){n?(i.isActive=!0,i.timeUpdated=c):(i.isActive=!1,i.activeContacts.length=0)},e.id=function(i,n){return i.id<n.id?"A"+i.id+"B"+n.id:"A"+n.id+"B"+i.id}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(2),n=v(7),c=v(1),r=v(11),f=v(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var s=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,o=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,g=i.magnitude(i.sub(s,o));t.length=typeof t.length!="undefined"?t.length:g,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=f.extend(d,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var s=a[t],o=s.constraintImpulse;s.isStatic||o.x===0&&o.y===0&&o.angle===0||(s.position.x+=o.x,s.position.y+=o.y,s.angle+=o.angle)}},e.solveAll=function(a,t){for(var s=0;s<a.length;s+=1){var o=a[s],g=!o.bodyA||o.bodyA&&o.bodyA.isStatic,d=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(g||d)&&e.solve(a[s],t)}for(s=0;s<a.length;s+=1)o=a[s],g=!o.bodyA||o.bodyA&&o.bodyA.isStatic,d=!o.bodyB||o.bodyB&&o.bodyB.isStatic,!g&&!d&&e.solve(a[s],t)},e.solve=function(a,t){var s=a.bodyA,o=a.bodyB,g=a.pointA,d=a.pointB;if(!(!s&&!o)){s&&!s.isStatic&&(i.rotate(g,s.angle-a.angleA,g),a.angleA=s.angle),o&&!o.isStatic&&(i.rotate(d,o.angle-a.angleB,d),a.angleB=o.angle);var M=g,S=d;if(s&&(M=i.add(s.position,g)),o&&(S=i.add(o.position,d)),!(!M||!S)){var h=i.sub(M,S),m=i.magnitude(h);m<e._minLength&&(m=e._minLength);var x=(m-a.length)/m,u=a.stiffness<1?a.stiffness*t:a.stiffness,y=i.mult(h,x*u),p=(s?s.inverseMass:0)+(o?o.inverseMass:0),w=(s?s.inverseInertia:0)+(o?o.inverseInertia:0),C=p+w,B,R,E,k,L;if(a.damping){var D=i.create();E=i.div(h,m),L=i.sub(o&&i.sub(o.position,o.positionPrev)||D,s&&i.sub(s.position,s.positionPrev)||D),k=i.dot(E,L)}s&&!s.isStatic&&(R=s.inverseMass/p,s.constraintImpulse.x-=y.x*R,s.constraintImpulse.y-=y.y*R,s.position.x-=y.x*R,s.position.y-=y.y*R,a.damping&&(s.positionPrev.x-=a.damping*E.x*k*R,s.positionPrev.y-=a.damping*E.y*k*R),B=i.cross(g,y)/C*e._torqueDampen*s.inverseInertia*(1-a.angularStiffness),s.constraintImpulse.angle-=B,s.angle-=B),o&&!o.isStatic&&(R=o.inverseMass/p,o.constraintImpulse.x+=y.x*R,o.constraintImpulse.y+=y.y*R,o.position.x+=y.x*R,o.position.y+=y.y*R,a.damping&&(o.positionPrev.x+=a.damping*E.x*k*R,o.positionPrev.y+=a.damping*E.y*k*R),B=i.cross(d,y)/C*e._torqueDampen*o.inverseInertia*(1-a.angularStiffness),o.constraintImpulse.angle+=B,o.angle+=B)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var s=a[t],o=s.constraintImpulse;if(!(s.isStatic||o.x===0&&o.y===0&&o.angle===0)){n.set(s,!1);for(var g=0;g<s.parts.length;g++){var d=s.parts[g];l.translate(d.vertices,o),g>0&&(d.position.x+=o.x,d.position.y+=o.y),o.angle!==0&&(l.rotate(d.vertices,o.angle,s.position),r.rotate(d.axes,o.angle),g>0&&i.rotateAbout(d.position,o.angle,s.position,d.position)),c.update(d.bounds,d.vertices,s.velocity)}o.angle*=e._warming,o.x*=e._warming,o.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(P,T,v){var e={};P.exports=e;var l=v(2),i=v(0);(function(){e.fromVertices=function(n){for(var c={},r=0;r<n.length;r++){var f=(r+1)%n.length,a=l.normalise({x:n[f].y-n[r].y,y:n[r].x-n[f].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),c[t]=a}return i.values(c)},e.rotate=function(n,c){if(c!==0)for(var r=Math.cos(c),f=Math.sin(c),a=0;a<n.length;a++){var t=n[a],s;s=t.x*r-t.y*f,t.y=t.x*f+t.y*r,t.x=s}}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(0),n=v(6),c=v(1),r=v(2);(function(){e.rectangle=function(f,a,t,s,o){o=o||{};var g={label:"Rectangle Body",position:{x:f,y:a},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+s+" L 0 "+s)};if(o.chamfer){var d=o.chamfer;g.vertices=l.chamfer(g.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete o.chamfer}return n.create(i.extend({},g,o))},e.trapezoid=function(f,a,t,s,o,g){g=g||{},o*=.5;var d=(1-o*2)*t,M=t*o,S=M+d,h=S+M,m;o<.5?m="L 0 0 L "+M+" "+-s+" L "+S+" "+-s+" L "+h+" 0":m="L 0 0 L "+S+" "+-s+" L "+h+" 0";var x={label:"Trapezoid Body",position:{x:f,y:a},vertices:l.fromPath(m)};if(g.chamfer){var u=g.chamfer;x.vertices=l.chamfer(x.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete g.chamfer}return n.create(i.extend({},x,g))},e.circle=function(f,a,t,s,o){s=s||{};var g={label:"Circle Body",circleRadius:t};o=o||25;var d=Math.ceil(Math.max(10,Math.min(o,t)));return d%2===1&&(d+=1),e.polygon(f,a,d,t,i.extend({},g,s))},e.polygon=function(f,a,t,s,o){if(o=o||{},t<3)return e.circle(f,a,s,o);for(var g=2*Math.PI/t,d="",M=g*.5,S=0;S<t;S+=1){var h=M+S*g,m=Math.cos(h)*s,x=Math.sin(h)*s;d+="L "+m.toFixed(3)+" "+x.toFixed(3)+" "}var u={label:"Polygon Body",position:{x:f,y:a},vertices:l.fromPath(d)};if(o.chamfer){var y=o.chamfer;u.vertices=l.chamfer(u.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete o.chamfer}return n.create(i.extend({},u,o))},e.fromVertices=function(f,a,t,s,o,g,d,M){var S=i.getDecomp(),h,m,x,u,y,p,w,C,B,R,E;for(h=Boolean(S&&S.quickDecomp),s=s||{},x=[],o=typeof o!="undefined"?o:!1,g=typeof g!="undefined"?g:.01,d=typeof d!="undefined"?d:10,M=typeof M!="undefined"?M:.01,i.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(p=t[R],u=l.isConvex(p),y=!u,y&&!h&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),u||!h)u?p=l.clockwiseSort(p):p=l.hull(p),x.push({position:{x:f,y:a},vertices:p});else{var k=p.map(function(K){return[K.x,K.y]});S.makeCCW(k),g!==!1&&S.removeCollinearPoints(k,g),M!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(k,M);var L=S.quickDecomp(k);for(w=0;w<L.length;w++){var D=L[w],V=D.map(function(K){return{x:K[0],y:K[1]}});d>0&&l.area(V)<d||x.push({position:l.centre(V),vertices:V})}}for(w=0;w<x.length;w++)x[w]=n.create(i.extend(x[w],s));if(o){var O=5;for(w=0;w<x.length;w++){var W=x[w];for(C=w+1;C<x.length;C++){var G=x[C];if(c.overlaps(W.bounds,G.bounds)){var U=W.vertices,$=G.vertices;for(B=0;B<W.vertices.length;B++)for(E=0;E<G.vertices.length;E++){var q=r.magnitudeSquared(r.sub(U[(B+1)%U.length],$[E])),Z=r.magnitudeSquared(r.sub(U[B],$[(E+1)%$.length]));q<O&&Z<O&&(U[B].isInternal=!0,$[E].isInternal=!0)}}}}}return x.length>1?(m=n.create(i.extend({parts:x.slice(0)},s)),n.setPosition(m,{x:f,y:a}),m):x[0]}})()},function(P,T,v){var e={};P.exports=e;var l=v(0);(function(){e.create=function(i){var n={};return i||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=i||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(c){var r=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f&&(n.button=0,c.preventDefault()),n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=c},n.mousedown=function(c){var r=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f?(n.button=0,c.preventDefault()):n.button=c.button,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=c},n.mouseup=function(c){var r=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),n.button=-1,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=c},n.mousewheel=function(c){n.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(i,n){i.element=n,n.addEventListener("mousemove",i.mousemove),n.addEventListener("mousedown",i.mousedown),n.addEventListener("mouseup",i.mouseup),n.addEventListener("mousewheel",i.mousewheel),n.addEventListener("DOMMouseScroll",i.mousewheel),n.addEventListener("touchmove",i.mousemove),n.addEventListener("touchstart",i.mousedown),n.addEventListener("touchend",i.mouseup)},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,n){i.offset.x=n.x,i.offset.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,n){i.scale.x=n.x,i.scale.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,n,c){var r=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,s=i.changedTouches,o,g;return s?(o=s[0].pageX-r.left-a,g=s[0].pageY-r.top-t):(o=i.pageX-r.left-a,g=i.pageY-r.top-t),{x:o/(n.clientWidth/(n.width||n.clientWidth)*c),y:g/(n.clientHeight/(n.height||n.clientHeight)*c)}}})()},function(P,T,v){var e={};P.exports=e;var l=v(0),i=v(8);(function(){e.create=function(n){var c={bodies:[],pairs:null};return l.extend(c,n)},e.setBodies=function(n,c){n.bodies=c.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var c=[],r=n.pairs,f=n.bodies,a=f.length,t=e.canCollide,s=i.collides,o,g;for(f.sort(e._compareBoundsX),o=0;o<a;o++){var d=f[o],M=d.bounds,S=d.bounds.max.x,h=d.bounds.max.y,m=d.bounds.min.y,x=d.isStatic||d.isSleeping,u=d.parts.length,y=u===1;for(g=o+1;g<a;g++){var p=f[g],w=p.bounds;if(w.min.x>S)break;if(!(h<w.min.y||m>w.max.y)&&!(x&&(p.isStatic||p.isSleeping))&&!!t(d.collisionFilter,p.collisionFilter)){var C=p.parts.length;if(y&&C===1){var B=s(d,p,r);B&&c.push(B)}else for(var R=u>1?1:0,E=C>1?1:0,k=R;k<u;k++)for(var L=d.parts[k],M=L.bounds,D=E;D<C;D++){var V=p.parts[D],w=V.bounds;if(!(M.min.x>w.max.x||M.max.x<w.min.x||M.max.y<w.min.y||M.min.y>w.max.y)){var B=s(L,V,r);B&&c.push(B)}}}}}return c},e.canCollide=function(n,c){return n.group===c.group&&n.group!==0?n.group>0:(n.mask&c.category)!==0&&(c.mask&n.category)!==0},e._compareBoundsX=function(n,c){return n.bounds.min.x-c.bounds.min.x}})()},function(P,T,v){var e={};P.exports=e;var l=v(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||l.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var n=e._registry[i.name],c=e.versionParse(i.version).number,r=e.versionParse(n.version).number;c>r?(l.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(i)),e._registry[i.name]=i):c<r?l.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(i)):i!==n&&l.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,n){return i.used.indexOf(n)>-1},e.isFor=function(i,n){var c=i.for&&e.dependencyParse(i.for);return!i.for||n.name===c.name&&e.versionSatisfies(n.version,c.range)},e.use=function(i,n){if(i.uses=(i.uses||[]).concat(n||[]),i.uses.length===0){l.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var c=e.dependencies(i),r=l.topologicalSort(c),f=[],a=0;a<r.length;a+=1)if(r[a]!==i.name){var t=e.resolve(r[a]);if(!t){f.push("\u274C "+r[a]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),i.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(i,n){var c=e.dependencyParse(i),r=c.name;if(n=n||{},!(r in n)){i=e.resolve(i)||i,n[r]=l.map(i.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),s=e.resolve(a);return s&&!e.versionSatisfies(s.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(s),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),s._warned=!0,i._warned=!0):s||(l.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(c),"could not be resolved."),i._warned=!0),t.name});for(var f=0;f<n[r].length;f+=1)e.dependencies(n[r][f],n);return n}},e.dependencyParse=function(i){if(l.isString(i)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(i)||l.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(i)||l.warn("Plugin.versionParse:",i,"is not a valid version or range.");var c=n.exec(i),r=Number(c[4]),f=Number(c[5]),a=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:i,operator:c[1]||c[2]||"",major:r,minor:f,patch:a,parts:[r,f,a],prerelease:c[7],number:r*1e8+f*1e4+a}},e.versionSatisfies=function(i,n){n=n||"*";var c=e.versionParse(n),r=e.versionParse(i);if(c.isRange){if(c.operator==="*"||i==="*")return!0;if(c.operator===">")return r.number>c.number;if(c.operator===">=")return r.number>=c.number;if(c.operator==="~")return r.major===c.major&&r.minor===c.minor&&r.patch>=c.patch;if(c.operator==="^")return c.major>0?r.major===c.major&&r.number>=c.number:c.minor>0?r.minor===c.minor&&r.patch>=c.patch:r.patch===c.patch}return i===n||i==="*"}})()},function(P,T,v){var e={};P.exports=e;var l=v(0),i=v(5),n=v(1),c=v(4),r=v(2),f=v(13);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=l.extend(m,h);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=h.mouse,x.engine=h.engine,x.canvas=x.canvas||g(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.options.showBroadphase=!1,x.options.pixelRatio!==1&&e.setPixelRatio(x,x.options.pixelRatio),l.isElement(x.element)?x.element.appendChild(x.canvas):x.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),x},e.run=function(h){(function m(x){h.frameRequestId=a(m),s(h,x),e.world(h,x),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,x),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,x)})()},e.stop=function(h){t(h.frameRequestId)},e.setPixelRatio=function(h,m){var x=h.options,u=h.canvas;m==="auto"&&(m=d(u)),x.pixelRatio=m,u.setAttribute("data-pixel-ratio",m),u.width=x.width*m,u.height=x.height*m,u.style.width=x.width+"px",u.style.height=x.height+"px"},e.lookAt=function(h,m,x,u){u=typeof u!="undefined"?u:!0,m=l.isArray(m)?m:[m],x=x||{x:0,y:0};for(var y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},p=0;p<m.length;p+=1){var w=m[p],C=w.bounds?w.bounds.min:w.min||w.position||w,B=w.bounds?w.bounds.max:w.max||w.position||w;C&&B&&(C.x<y.min.x&&(y.min.x=C.x),B.x>y.max.x&&(y.max.x=B.x),C.y<y.min.y&&(y.min.y=C.y),B.y>y.max.y&&(y.max.y=B.y))}var R=y.max.x-y.min.x+2*x.x,E=y.max.y-y.min.y+2*x.y,k=h.canvas.height,L=h.canvas.width,D=L/k,V=R/E,O=1,W=1;V>D?W=V/D:O=D/V,h.options.hasBounds=!0,h.bounds.min.x=y.min.x,h.bounds.max.x=y.min.x+R*O,h.bounds.min.y=y.min.y,h.bounds.max.y=y.min.y+E*W,u&&(h.bounds.min.x+=R*.5-R*O*.5,h.bounds.max.x+=R*.5-R*O*.5,h.bounds.min.y+=E*.5-E*W*.5,h.bounds.max.y+=E*.5-E*W*.5),h.bounds.min.x-=x.x,h.bounds.max.x-=x.x,h.bounds.min.y-=x.y,h.bounds.max.y-=x.y,h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),f.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){var m=h.bounds.max.x-h.bounds.min.x,x=h.bounds.max.y-h.bounds.min.y,u=m/h.options.width,y=x/h.options.height;h.context.setTransform(h.options.pixelRatio/u,0,0,h.options.pixelRatio/y,0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,m){var x=l.now(),u=h.engine,y=u.world,p=h.canvas,w=h.context,C=h.options,B=h.timing,R=i.allBodies(y),E=i.allConstraints(y),k=C.wireframes?C.wireframeBackground:C.background,L=[],D=[],V,O={timestamp:u.timing.timestamp};if(c.trigger(h,"beforeRender",O),h.currentBackground!==k&&S(h,k),w.globalCompositeOperation="source-in",w.fillStyle="transparent",w.fillRect(0,0,p.width,p.height),w.globalCompositeOperation="source-over",C.hasBounds){for(V=0;V<R.length;V++){var W=R[V];n.overlaps(W.bounds,h.bounds)&&L.push(W)}for(V=0;V<E.length;V++){var G=E[V],U=G.bodyA,$=G.bodyB,q=G.pointA,Z=G.pointB;U&&(q=r.add(U.position,G.pointA)),$&&(Z=r.add($.position,G.pointB)),!(!q||!Z)&&(n.contains(h.bounds,q)||n.contains(h.bounds,Z))&&D.push(G)}e.startViewTransform(h),h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),f.setOffset(h.mouse,h.bounds.min))}else D=E,L=R,h.options.pixelRatio!==1&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!C.wireframes||u.enableSleeping&&C.showSleeping?e.bodies(h,L,w):(C.showConvexHulls&&e.bodyConvexHulls(h,L,w),e.bodyWireframes(h,L,w)),C.showBounds&&e.bodyBounds(h,L,w),(C.showAxes||C.showAngleIndicator)&&e.bodyAxes(h,L,w),C.showPositions&&e.bodyPositions(h,L,w),C.showVelocity&&e.bodyVelocity(h,L,w),C.showIds&&e.bodyIds(h,L,w),C.showSeparations&&e.separations(h,u.pairs.list,w),C.showCollisions&&e.collisions(h,u.pairs.list,w),C.showVertexNumbers&&e.vertexNumbers(h,L,w),C.showMousePosition&&e.mousePosition(h,h.mouse,w),e.constraints(D,w),C.hasBounds&&e.endViewTransform(h),c.trigger(h,"afterRender",O),B.lastElapsed=l.now()-x},e.stats=function(h,m,x){for(var u=h.engine,y=u.world,p=i.allBodies(y),w=0,C=55,B=44,R=0,E=0,k=0;k<p.length;k+=1)w+=p[k].parts.length;var L={Part:w,Body:p.length,Cons:i.allConstraints(y).length,Comp:i.allComposites(y).length,Pair:u.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(R,E,C*5.5,B),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var D in L){var V=L[D];m.fillStyle="#aaa",m.fillText(D,R+C,E+8),m.fillStyle="#eee",m.fillText(V,R+C,E+26),R+=C}},e.performance=function(h,m){var x=h.engine,u=h.timing,y=u.deltaHistory,p=u.elapsedHistory,w=u.timestampElapsedHistory,C=u.engineDeltaHistory,B=u.engineElapsedHistory,R=x.timing.lastDelta,E=o(y),k=o(p),L=o(C),D=o(B),V=o(w),O=V/E||0,W=1e3/E||0,G=4,U=12,$=60,q=34,Z=10,K=69;m.fillStyle="#0e0f19",m.fillRect(0,50,U*4+$*5+22,q),e.status(m,Z,K,$,G,y.length,Math.round(W)+" fps",W/e._goodFps,function(Y){return y[Y]/E-1}),e.status(m,Z+U+$,K,$,G,C.length,R.toFixed(2)+" dt",e._goodDelta/R,function(Y){return C[Y]/L-1}),e.status(m,Z+(U+$)*2,K,$,G,B.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(Y){return B[Y]/D-1}),e.status(m,Z+(U+$)*3,K,$,G,p.length,k.toFixed(2)+" rt",1-k/e._goodFps,function(Y){return p[Y]/k-1}),e.status(m,Z+(U+$)*4,K,$,G,w.length,O.toFixed(2)+" x",O*O*O,function(Y){return(w[Y]/y[Y]/O||0)-1})},e.status=function(h,m,x,u,y,p,w,C,B){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(m,x+7,u,1),h.beginPath(),h.moveTo(m,x+7-y*l.clamp(.4*B(0),-2,2));for(var R=0;R<u;R+=1)h.lineTo(m+R,x+7-(R<p?y*l.clamp(.4*B(R),-2,2):0));h.stroke(),h.fillStyle="hsl("+l.clamp(25+95*C,0,120)+",100%,60%)",h.fillRect(m,x-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(w,m+u,x-5)},e.constraints=function(h,m){for(var x=m,u=0;u<h.length;u++){var y=h[u];if(!(!y.render.visible||!y.pointA||!y.pointB)){var p=y.bodyA,w=y.bodyB,C,B;if(p?C=r.add(p.position,y.pointA):C=y.pointA,y.render.type==="pin")x.beginPath(),x.arc(C.x,C.y,3,0,2*Math.PI),x.closePath();else{if(w?B=r.add(w.position,y.pointB):B=y.pointB,x.beginPath(),x.moveTo(C.x,C.y),y.render.type==="spring")for(var R=r.sub(B,C),E=r.perp(r.normalise(R)),k=Math.ceil(l.clamp(y.length/5,12,20)),L,D=1;D<k;D+=1)L=D%2===0?1:-1,x.lineTo(C.x+R.x*(D/k)+E.x*L*4,C.y+R.y*(D/k)+E.y*L*4);x.lineTo(B.x,B.y)}y.render.lineWidth&&(x.lineWidth=y.render.lineWidth,x.strokeStyle=y.render.strokeStyle,x.stroke()),y.render.anchors&&(x.fillStyle=y.render.strokeStyle,x.beginPath(),x.arc(C.x,C.y,3,0,2*Math.PI),x.arc(B.x,B.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},e.bodies=function(h,m,x){var u=x;h.engine;var y=h.options,p=y.showInternalEdges||!y.wireframes,w,C,B,R;for(B=0;B<m.length;B++)if(w=m[B],!!w.render.visible){for(R=w.parts.length>1?1:0;R<w.parts.length;R++)if(C=w.parts[R],!!C.render.visible){if(y.showSleeping&&w.isSleeping?u.globalAlpha=.5*C.render.opacity:C.render.opacity!==1&&(u.globalAlpha=C.render.opacity),C.render.sprite&&C.render.sprite.texture&&!y.wireframes){var E=C.render.sprite,k=M(h,E.texture);u.translate(C.position.x,C.position.y),u.rotate(C.angle),u.drawImage(k,k.width*-E.xOffset*E.xScale,k.height*-E.yOffset*E.yScale,k.width*E.xScale,k.height*E.yScale),u.rotate(-C.angle),u.translate(-C.position.x,-C.position.y)}else{if(C.circleRadius)u.beginPath(),u.arc(C.position.x,C.position.y,C.circleRadius,0,2*Math.PI);else{u.beginPath(),u.moveTo(C.vertices[0].x,C.vertices[0].y);for(var L=1;L<C.vertices.length;L++)!C.vertices[L-1].isInternal||p?u.lineTo(C.vertices[L].x,C.vertices[L].y):u.moveTo(C.vertices[L].x,C.vertices[L].y),C.vertices[L].isInternal&&!p&&u.moveTo(C.vertices[(L+1)%C.vertices.length].x,C.vertices[(L+1)%C.vertices.length].y);u.lineTo(C.vertices[0].x,C.vertices[0].y),u.closePath()}y.wireframes?(u.lineWidth=1,u.strokeStyle="#bbb",u.stroke()):(u.fillStyle=C.render.fillStyle,C.render.lineWidth&&(u.lineWidth=C.render.lineWidth,u.strokeStyle=C.render.strokeStyle,u.stroke()),u.fill())}u.globalAlpha=1}}},e.bodyWireframes=function(h,m,x){var u=x,y=h.options.showInternalEdges,p,w,C,B,R;for(u.beginPath(),C=0;C<m.length;C++)if(p=m[C],!!p.render.visible)for(R=p.parts.length>1?1:0;R<p.parts.length;R++){for(w=p.parts[R],u.moveTo(w.vertices[0].x,w.vertices[0].y),B=1;B<w.vertices.length;B++)!w.vertices[B-1].isInternal||y?u.lineTo(w.vertices[B].x,w.vertices[B].y):u.moveTo(w.vertices[B].x,w.vertices[B].y),w.vertices[B].isInternal&&!y&&u.moveTo(w.vertices[(B+1)%w.vertices.length].x,w.vertices[(B+1)%w.vertices.length].y);u.lineTo(w.vertices[0].x,w.vertices[0].y)}u.lineWidth=1,u.strokeStyle="#bbb",u.stroke()},e.bodyConvexHulls=function(h,m,x){var u=x,y,p,w;for(u.beginPath(),p=0;p<m.length;p++)if(y=m[p],!(!y.render.visible||y.parts.length===1)){for(u.moveTo(y.vertices[0].x,y.vertices[0].y),w=1;w<y.vertices.length;w++)u.lineTo(y.vertices[w].x,y.vertices[w].y);u.lineTo(y.vertices[0].x,y.vertices[0].y)}u.lineWidth=1,u.strokeStyle="rgba(255,255,255,0.2)",u.stroke()},e.vertexNumbers=function(h,m,x){var u=x,y,p,w;for(y=0;y<m.length;y++){var C=m[y].parts;for(w=C.length>1?1:0;w<C.length;w++){var B=C[w];for(p=0;p<B.vertices.length;p++)u.fillStyle="rgba(255,255,255,0.2)",u.fillText(y+"_"+p,B.position.x+(B.vertices[p].x-B.position.x)*.8,B.position.y+(B.vertices[p].y-B.position.y)*.8)}}},e.mousePosition=function(h,m,x){var u=x;u.fillStyle="rgba(255,255,255,0.8)",u.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(h,m,x){var u=x;h.engine;var y=h.options;u.beginPath();for(var p=0;p<m.length;p++){var w=m[p];if(w.render.visible)for(var C=m[p].parts,B=C.length>1?1:0;B<C.length;B++){var R=C[B];u.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}y.wireframes?u.strokeStyle="rgba(255,255,255,0.08)":u.strokeStyle="rgba(0,0,0,0.1)",u.lineWidth=1,u.stroke()},e.bodyAxes=function(h,m,x){var u=x;h.engine;var y=h.options,p,w,C,B;for(u.beginPath(),w=0;w<m.length;w++){var R=m[w],E=R.parts;if(!!R.render.visible)if(y.showAxes)for(C=E.length>1?1:0;C<E.length;C++)for(p=E[C],B=0;B<p.axes.length;B++){var k=p.axes[B];u.moveTo(p.position.x,p.position.y),u.lineTo(p.position.x+k.x*20,p.position.y+k.y*20)}else for(C=E.length>1?1:0;C<E.length;C++)for(p=E[C],B=0;B<p.axes.length;B++)u.moveTo(p.position.x,p.position.y),u.lineTo((p.vertices[0].x+p.vertices[p.vertices.length-1].x)/2,(p.vertices[0].y+p.vertices[p.vertices.length-1].y)/2)}y.wireframes?(u.strokeStyle="indianred",u.lineWidth=1):(u.strokeStyle="rgba(255, 255, 255, 0.4)",u.globalCompositeOperation="overlay",u.lineWidth=2),u.stroke(),u.globalCompositeOperation="source-over"},e.bodyPositions=function(h,m,x){var u=x;h.engine;var y=h.options,p,w,C,B;for(u.beginPath(),C=0;C<m.length;C++)if(p=m[C],!!p.render.visible)for(B=0;B<p.parts.length;B++)w=p.parts[B],u.arc(w.position.x,w.position.y,3,0,2*Math.PI,!1),u.closePath();for(y.wireframes?u.fillStyle="indianred":u.fillStyle="rgba(0,0,0,0.5)",u.fill(),u.beginPath(),C=0;C<m.length;C++)p=m[C],p.render.visible&&(u.arc(p.positionPrev.x,p.positionPrev.y,2,0,2*Math.PI,!1),u.closePath());u.fillStyle="rgba(255,165,0,0.8)",u.fill()},e.bodyVelocity=function(h,m,x){var u=x;u.beginPath();for(var y=0;y<m.length;y++){var p=m[y];!p.render.visible||(u.moveTo(p.position.x,p.position.y),u.lineTo(p.position.x+(p.position.x-p.positionPrev.x)*2,p.position.y+(p.position.y-p.positionPrev.y)*2))}u.lineWidth=3,u.strokeStyle="cornflowerblue",u.stroke()},e.bodyIds=function(h,m,x){var u=x,y,p;for(y=0;y<m.length;y++)if(!!m[y].render.visible){var w=m[y].parts;for(p=w.length>1?1:0;p<w.length;p++){var C=w[p];u.font="12px Arial",u.fillStyle="rgba(255,255,255,0.5)",u.fillText(C.id,C.position.x+10,C.position.y-10)}}},e.collisions=function(h,m,x){var u=x,y=h.options,p,w,C,B;for(u.beginPath(),C=0;C<m.length;C++)if(p=m[C],!!p.isActive)for(w=p.collision,B=0;B<p.activeContacts.length;B++){var R=p.activeContacts[B],E=R.vertex;u.rect(E.x-1.5,E.y-1.5,3.5,3.5)}for(y.wireframes?u.fillStyle="rgba(255,255,255,0.7)":u.fillStyle="orange",u.fill(),u.beginPath(),C=0;C<m.length;C++)if(p=m[C],!!p.isActive&&(w=p.collision,p.activeContacts.length>0)){var k=p.activeContacts[0].vertex.x,L=p.activeContacts[0].vertex.y;p.activeContacts.length===2&&(k=(p.activeContacts[0].vertex.x+p.activeContacts[1].vertex.x)/2,L=(p.activeContacts[0].vertex.y+p.activeContacts[1].vertex.y)/2),w.bodyB===w.supports[0].body||w.bodyA.isStatic===!0?u.moveTo(k-w.normal.x*8,L-w.normal.y*8):u.moveTo(k+w.normal.x*8,L+w.normal.y*8),u.lineTo(k,L)}y.wireframes?u.strokeStyle="rgba(255,165,0,0.7)":u.strokeStyle="orange",u.lineWidth=1,u.stroke()},e.separations=function(h,m,x){var u=x,y=h.options,p,w,C,B,R;for(u.beginPath(),R=0;R<m.length;R++)if(p=m[R],!!p.isActive){w=p.collision,C=w.bodyA,B=w.bodyB;var E=1;!B.isStatic&&!C.isStatic&&(E=.5),B.isStatic&&(E=0),u.moveTo(B.position.x,B.position.y),u.lineTo(B.position.x-w.penetration.x*E,B.position.y-w.penetration.y*E),E=1,!B.isStatic&&!C.isStatic&&(E=.5),C.isStatic&&(E=0),u.moveTo(C.position.x,C.position.y),u.lineTo(C.position.x+w.penetration.x*E,C.position.y+w.penetration.y*E)}y.wireframes?u.strokeStyle="rgba(255,165,0,0.5)":u.strokeStyle="orange",u.stroke()},e.inspector=function(h,m){h.engine;var x=h.selected,u=h.render,y=u.options,p;if(y.hasBounds){var w=u.bounds.max.x-u.bounds.min.x,C=u.bounds.max.y-u.bounds.min.y,B=w/u.options.width,R=C/u.options.height;m.scale(1/B,1/R),m.translate(-u.bounds.min.x,-u.bounds.min.y)}for(var E=0;E<x.length;E++){var k=x[E].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),k.type){case"body":p=k.bounds,m.beginPath(),m.rect(Math.floor(p.min.x-3),Math.floor(p.min.y-3),Math.floor(p.max.x-p.min.x+6),Math.floor(p.max.y-p.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var L=k.pointA;k.bodyA&&(L=k.pointB),m.beginPath(),m.arc(L.x,L.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}h.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",p=h.selectBounds,m.beginPath(),m.rect(Math.floor(p.min.x),Math.floor(p.min.y),Math.floor(p.max.x-p.min.x),Math.floor(p.max.y-p.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),y.hasBounds&&m.setTransform(1,0,0,1,0,0)};var s=function(h,m){var x=h.engine,u=h.timing,y=u.historySize,p=x.timing.timestamp;u.delta=m-u.lastTime||e._goodDelta,u.lastTime=m,u.timestampElapsed=p-u.lastTimestamp||0,u.lastTimestamp=p,u.deltaHistory.unshift(u.delta),u.deltaHistory.length=Math.min(u.deltaHistory.length,y),u.engineDeltaHistory.unshift(x.timing.lastDelta),u.engineDeltaHistory.length=Math.min(u.engineDeltaHistory.length,y),u.timestampElapsedHistory.unshift(u.timestampElapsed),u.timestampElapsedHistory.length=Math.min(u.timestampElapsedHistory.length,y),u.engineElapsedHistory.unshift(x.timing.lastElapsed),u.engineElapsedHistory.length=Math.min(u.engineElapsedHistory.length,y),u.elapsedHistory.unshift(u.lastElapsed),u.elapsedHistory.length=Math.min(u.elapsedHistory.length,y)},o=function(h){for(var m=0,x=0;x<h.length;x+=1)m+=h[x];return m/h.length||0},g=function(h,m){var x=document.createElement("canvas");return x.width=h,x.height=m,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},d=function(h){var m=h.getContext("2d"),x=window.devicePixelRatio||1,u=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return x/u},M=function(h,m){var x=h.textures[m];return x||(x=h.textures[m]=new Image,x.src=m,x)},S=function(h,m){var x=m;/(jpg|gif|png)$/.test(m)&&(x="url("+m+")"),h.canvas.style.background=x,h.canvas.style.backgroundSize="contain",h.currentBackground=m}})()},function(P,T){var v={};P.exports=v,function(){v.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(P,T,v){var e={};P.exports=e;var l=v(7),i=v(19),n=v(14),c=v(20),r=v(4),f=v(5),a=v(10),t=v(0),s=v(6);(function(){e.create=function(o){o=o||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(g,o);return d.world=o.world||f.create({label:"World"}),d.pairs=o.pairs||c.create(),d.detector=o.detector||n.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(o,g,d){var M=t.now();g=g||1e3/60,d=d||1;var S=o.world,h=o.detector,m=o.pairs,x=o.timing,u=x.timestamp,y;x.timestamp+=g*x.timeScale,x.lastDelta=g*x.timeScale;var p={timestamp:x.timestamp};r.trigger(o,"beforeUpdate",p);var w=f.allBodies(S),C=f.allConstraints(S);for(S.isModified&&n.setBodies(h,w),S.isModified&&f.setModified(S,!1,!1,!0),o.enableSleeping&&l.update(w,x.timeScale),e._bodiesApplyGravity(w,o.gravity),e._bodiesUpdate(w,g,x.timeScale,d,S.bounds),a.preSolveAll(w),y=0;y<o.constraintIterations;y++)a.solveAll(C,x.timeScale);a.postSolveAll(w),h.pairs=o.pairs;var B=n.collisions(h);for(c.update(m,B,u),o.enableSleeping&&l.afterCollisions(m.list,x.timeScale),m.collisionStart.length>0&&r.trigger(o,"collisionStart",{pairs:m.collisionStart}),i.preSolvePosition(m.list),y=0;y<o.positionIterations;y++)i.solvePosition(m.list,x.timeScale);for(i.postSolvePosition(w),a.preSolveAll(w),y=0;y<o.constraintIterations;y++)a.solveAll(C,x.timeScale);for(a.postSolveAll(w),i.preSolveVelocity(m.list),y=0;y<o.velocityIterations;y++)i.solveVelocity(m.list,x.timeScale);return m.collisionActive.length>0&&r.trigger(o,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&r.trigger(o,"collisionEnd",{pairs:m.collisionEnd}),e._bodiesClearForces(w),r.trigger(o,"afterUpdate",p),o.timing.lastElapsed=t.now()-M,o},e.merge=function(o,g){if(t.extend(o,g),g.world){o.world=g.world,e.clear(o);for(var d=f.allBodies(o.world),M=0;M<d.length;M++){var S=d[M];l.set(S,!1),S.id=t.nextId()}}},e.clear=function(o){c.clear(o.pairs),n.clear(o.detector)},e._bodiesClearForces=function(o){for(var g=0;g<o.length;g++){var d=o[g];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(o,g){var d=typeof g.scale!="undefined"?g.scale:.001;if(!(g.x===0&&g.y===0||d===0))for(var M=0;M<o.length;M++){var S=o[M];S.isStatic||S.isSleeping||(S.force.y+=S.mass*g.y*d,S.force.x+=S.mass*g.x*d)}},e._bodiesUpdate=function(o,g,d,M,S){for(var h=0;h<o.length;h++){var m=o[h];m.isStatic||m.isSleeping||s.update(m,g,d,M)}}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var c,r,f,a=n.length;for(c=0;c<a;c++)r=n[c],r.isActive&&(f=r.activeContacts.length,r.collision.parentA.totalContacts+=f,r.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,c){var r,f,a,t,s,o,g,d,M=e._positionDampen,S=n.length;for(r=0;r<S;r++)f=n[r],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,s=a.parentB,o=a.normal,f.separation=o.x*(s.positionImpulse.x+a.penetration.x-t.positionImpulse.x)+o.y*(s.positionImpulse.y+a.penetration.y-t.positionImpulse.y));for(r=0;r<S;r++)f=n[r],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,s=a.parentB,o=a.normal,d=(f.separation-f.slop)*c,(t.isStatic||s.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(g=M/t.totalContacts,t.positionImpulse.x+=o.x*d*g,t.positionImpulse.y+=o.y*d*g),s.isStatic||s.isSleeping||(g=M/s.totalContacts,s.positionImpulse.x-=o.x*d*g,s.positionImpulse.y-=o.y*d*g))},e.postSolvePosition=function(n){for(var c=e._positionWarming,r=n.length,f=l.translate,a=i.update,t=0;t<r;t++){var s=n[t],o=s.positionImpulse,g=o.x,d=o.y,M=s.velocity;if(s.totalContacts=0,g!==0||d!==0){for(var S=0;S<s.parts.length;S++){var h=s.parts[S];f(h.vertices,o),a(h.bounds,h.vertices,M),h.position.x+=g,h.position.y+=d}s.positionPrev.x+=g,s.positionPrev.y+=d,g*M.x+d*M.y<0?(o.x=0,o.y=0):(o.x*=c,o.y*=c)}}},e.preSolveVelocity=function(n){var c=n.length,r,f;for(r=0;r<c;r++){var a=n[r];if(!(!a.isActive||a.isSensor)){var t=a.activeContacts,s=t.length,o=a.collision,g=o.parentA,d=o.parentB,M=o.normal,S=o.tangent;for(f=0;f<s;f++){var h=t[f],m=h.vertex,x=h.normalImpulse,u=h.tangentImpulse;if(x!==0||u!==0){var y=M.x*x+S.x*u,p=M.y*x+S.y*u;g.isStatic||g.isSleeping||(g.positionPrev.x+=y*g.inverseMass,g.positionPrev.y+=p*g.inverseMass,g.anglePrev+=g.inverseInertia*((m.x-g.position.x)*p-(m.y-g.position.y)*y)),d.isStatic||d.isSleeping||(d.positionPrev.x-=y*d.inverseMass,d.positionPrev.y-=p*d.inverseMass,d.anglePrev-=d.inverseInertia*((m.x-d.position.x)*p-(m.y-d.position.y)*y))}}}}},e.solveVelocity=function(n,c){var r=c*c,f=e._restingThresh*r,a=e._frictionNormalMultiplier,t=e._restingThreshTangent*r,s=Number.MAX_VALUE,o=n.length,g,d,M,S;for(M=0;M<o;M++){var h=n[M];if(!(!h.isActive||h.isSensor)){var m=h.collision,x=m.parentA,u=m.parentB,y=x.velocity,p=u.velocity,w=m.normal.x,C=m.normal.y,B=m.tangent.x,R=m.tangent.y,E=h.activeContacts,k=E.length,L=1/k,D=x.inverseMass+u.inverseMass,V=h.friction*h.frictionStatic*a*r;for(y.x=x.position.x-x.positionPrev.x,y.y=x.position.y-x.positionPrev.y,p.x=u.position.x-u.positionPrev.x,p.y=u.position.y-u.positionPrev.y,x.angularVelocity=x.angle-x.anglePrev,u.angularVelocity=u.angle-u.anglePrev,S=0;S<k;S++){var O=E[S],W=O.vertex,G=W.x-x.position.x,U=W.y-x.position.y,$=W.x-u.position.x,q=W.y-u.position.y,Z=y.x-U*x.angularVelocity,K=y.y+G*x.angularVelocity,Y=p.x-q*u.angularVelocity,be=p.y+$*u.angularVelocity,$e=Z-Y,Ge=K-be,ie=w*$e+C*Ge,_=B*$e+R*Ge,Ne=h.separation+ie,we=Math.min(Ne,1);we=Ne<0?0:we;var Ue=we*V;_>Ue||-_>Ue?(d=_>0?_:-_,g=h.friction*(_>0?1:-1)*r,g<-d?g=-d:g>d&&(g=d)):(g=_,d=s);var ze=G*C-U*w,Qe=$*C-q*w,Ze=L/(D+x.inverseInertia*ze*ze+u.inverseInertia*Qe*Qe),ve=(1+h.restitution)*ie*Ze;if(g*=Ze,ie*ie>f&&ie<0)O.normalImpulse=0;else{var qe=O.normalImpulse;O.normalImpulse+=ve,O.normalImpulse=Math.min(O.normalImpulse,0),ve=O.normalImpulse-qe}if(_*_>t)O.tangentImpulse=0;else{var je=O.tangentImpulse;O.tangentImpulse+=g,O.tangentImpulse<-d&&(O.tangentImpulse=-d),O.tangentImpulse>d&&(O.tangentImpulse=d),g=O.tangentImpulse-je}var he=w*ve+B*g,ge=C*ve+R*g;x.isStatic||x.isSleeping||(x.positionPrev.x+=he*x.inverseMass,x.positionPrev.y+=ge*x.inverseMass,x.anglePrev+=(G*ge-U*he)*x.inverseInertia),u.isStatic||u.isSleeping||(u.positionPrev.x-=he*u.inverseMass,u.positionPrev.y-=ge*u.inverseMass,u.anglePrev-=($*ge-q*he)*u.inverseInertia)}}}}})()},function(P,T,v){var e={};P.exports=e;var l=v(9),i=v(0);(function(){e.create=function(n){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,c,r){var f=n.list,a=f.length,t=n.table,s=c.length,o=n.collisionStart,g=n.collisionEnd,d=n.collisionActive,M,S,h,m;for(o.length=0,g.length=0,d.length=0,m=0;m<a;m++)f[m].confirmedActive=!1;for(m=0;m<s;m++)M=c[m],h=M.pair,h?(h.isActive?d.push(h):o.push(h),l.update(h,M,r),h.confirmedActive=!0):(h=l.create(M,r),t[h.id]=h,o.push(h),f.push(h));var x=[];for(a=f.length,m=0;m<a;m++)h=f[m],h.confirmedActive||(l.setActive(h,!1,r),g.push(h),!h.collision.bodyA.isSleeping&&!h.collision.bodyB.isSleeping&&x.push(m));for(m=0;m<x.length;m++)S=x[m]-m,h=f[S],f.splice(S,1),delete t[h.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(P,T,v){var e=P.exports=v(22);e.Axes=v(11),e.Bodies=v(12),e.Body=v(6),e.Bounds=v(1),e.Collision=v(8),e.Common=v(0),e.Composite=v(5),e.Composites=v(23),e.Constraint=v(10),e.Contact=v(17),e.Detector=v(14),e.Engine=v(18),e.Events=v(4),e.Grid=v(24),e.Mouse=v(13),e.MouseConstraint=v(25),e.Pair=v(9),e.Pairs=v(20),e.Plugin=v(15),e.Query=v(26),e.Render=v(16),e.Resolver=v(19),e.Runner=v(27),e.SAT=v(28),e.Sleeping=v(7),e.Svg=v(29),e.Vector=v(2),e.Vertices=v(3),e.World=v(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(P,T,v){var e={};P.exports=e;var l=v(15),i=v(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathBefore(e,n,c)},e.after=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathAfter(e,n,c)}})()},function(P,T,v){var e={};P.exports=e;var l=v(5),i=v(10),n=v(0),c=v(6),r=v(12),f=n.deprecated;(function(){e.stack=function(a,t,s,o,g,d,M){for(var S=l.create({label:"Stack"}),h=a,m=t,x,u=0,y=0;y<o;y++){for(var p=0,w=0;w<s;w++){var C=M(h,m,w,y,x,u);if(C){var B=C.bounds.max.y-C.bounds.min.y,R=C.bounds.max.x-C.bounds.min.x;B>p&&(p=B),c.translate(C,{x:R*.5,y:B*.5}),h=C.bounds.max.x+g,l.addBody(S,C),x=C,u+=1}else h+=g}m+=p+d,h=a}return S},e.chain=function(a,t,s,o,g,d){for(var M=a.bodies,S=1;S<M.length;S++){var h=M[S-1],m=M[S],x=h.bounds.max.y-h.bounds.min.y,u=h.bounds.max.x-h.bounds.min.x,y=m.bounds.max.y-m.bounds.min.y,p=m.bounds.max.x-m.bounds.min.x,w={bodyA:h,pointA:{x:u*t,y:x*s},bodyB:m,pointB:{x:p*o,y:y*g}},C=n.extend(w,d);l.addConstraint(a,i.create(C))}return a.label+=" Chain",a},e.mesh=function(a,t,s,o,g){var d=a.bodies,M,S,h,m,x;for(M=0;M<s;M++){for(S=1;S<t;S++)h=d[S-1+M*t],m=d[S+M*t],l.addConstraint(a,i.create(n.extend({bodyA:h,bodyB:m},g)));if(M>0)for(S=0;S<t;S++)h=d[S+(M-1)*t],m=d[S+M*t],l.addConstraint(a,i.create(n.extend({bodyA:h,bodyB:m},g))),o&&S>0&&(x=d[S-1+(M-1)*t],l.addConstraint(a,i.create(n.extend({bodyA:x,bodyB:m},g)))),o&&S<t-1&&(x=d[S+1+(M-1)*t],l.addConstraint(a,i.create(n.extend({bodyA:x,bodyB:m},g))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,s,o,g,d,M){return e.stack(a,t,s,o,g,d,function(S,h,m,x,u,y){var p=Math.min(o,Math.ceil(s/2)),w=u?u.bounds.max.x-u.bounds.min.x:0;if(!(x>p)){x=p-x;var C=x,B=s-1-x;if(!(m<C||m>B)){y===1&&c.translate(u,{x:(m+(s%2===1?1:-1))*w,y:0});var R=u?m*w:0;return M(a+R+m*g,h,m,x,u,y)}}})},e.newtonsCradle=function(a,t,s,o,g){for(var d=l.create({label:"Newtons Cradle"}),M=0;M<s;M++){var S=1.9,h=r.circle(a+M*(o*S),t+g,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=i.create({pointA:{x:a+M*(o*S),y:t},bodyB:h});l.addBody(d,h),l.addConstraint(d,m)}return d},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,s,o,g){var d=c.nextGroup(!0),M=20,S=-s*.5+M,h=s*.5-M,m=0,x=l.create({label:"Car"}),u=r.rectangle(a,t,s,o,{collisionFilter:{group:d},chamfer:{radius:o*.5},density:2e-4}),y=r.circle(a+S,t+m,g,{collisionFilter:{group:d},friction:.8}),p=r.circle(a+h,t+m,g,{collisionFilter:{group:d},friction:.8}),w=i.create({bodyB:u,pointB:{x:S,y:m},bodyA:y,stiffness:1,length:0}),C=i.create({bodyB:u,pointB:{x:h,y:m},bodyA:p,stiffness:1,length:0});return l.addBody(x,u),l.addBody(x,y),l.addBody(x,p),l.addConstraint(x,w),l.addConstraint(x,C),x},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,s,o,g,d,M,S,h,m){h=n.extend({inertia:1/0},h),m=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var x=e.stack(a,t,s,o,g,d,function(u,y){return r.circle(u,y,S,h)});return e.mesh(x,s,o,M,m),x.label="Soft Body",x},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(P,T,v){var e={};P.exports=e;var l=v(9),i=v(0),n=i.deprecated;(function(){e.create=function(c){var r={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(r,c)},e.update=function(c,r,f,a){var t,s,o,g=f.world,d=c.buckets,M,S,h=!1;for(t=0;t<r.length;t++){var m=r[t];if(!(m.isSleeping&&!a)&&!(g.bounds&&(m.bounds.max.x<g.bounds.min.x||m.bounds.min.x>g.bounds.max.x||m.bounds.max.y<g.bounds.min.y||m.bounds.min.y>g.bounds.max.y))){var x=e._getRegion(c,m);if(!m.region||x.id!==m.region.id||a){(!m.region||a)&&(m.region=x);var u=e._regionUnion(x,m.region);for(s=u.startCol;s<=u.endCol;s++)for(o=u.startRow;o<=u.endRow;o++){S=e._getBucketId(s,o),M=d[S];var y=s>=x.startCol&&s<=x.endCol&&o>=x.startRow&&o<=x.endRow,p=s>=m.region.startCol&&s<=m.region.endCol&&o>=m.region.startRow&&o<=m.region.endRow;!y&&p&&p&&M&&e._bucketRemoveBody(c,M,m),(m.region===x||y&&!p||a)&&(M||(M=e._createBucket(d,S)),e._bucketAddBody(c,M,m))}m.region=x,h=!0}}}h&&(c.pairsList=e._createActivePairsList(c))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,r){var f=Math.min(c.startCol,r.startCol),a=Math.max(c.endCol,r.endCol),t=Math.min(c.startRow,r.startRow),s=Math.max(c.endRow,r.endRow);return e._createRegion(f,a,t,s)},e._getRegion=function(c,r){var f=r.bounds,a=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),s=Math.floor(f.min.y/c.bucketHeight),o=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(a,t,s,o)},e._createRegion=function(c,r,f,a){return{id:c+","+r+","+f+","+a,startCol:c,endCol:r,startRow:f,endRow:a}},e._getBucketId=function(c,r){return"C"+c+"R"+r},e._createBucket=function(c,r){var f=c[r]=[];return f},e._bucketAddBody=function(c,r,f){var a=c.pairs,t=l.id,s=r.length,o;for(o=0;o<s;o++){var g=r[o];if(!(f.id===g.id||f.isStatic&&g.isStatic)){var d=t(f,g),M=a[d];M?M[2]+=1:a[d]=[f,g,1]}}r.push(f)},e._bucketRemoveBody=function(c,r,f){var a=c.pairs,t=l.id,s;r.splice(i.indexOf(r,f),1);var o=r.length;for(s=0;s<o;s++){var g=a[t(f,r[s])];g&&(g[2]-=1)}},e._createActivePairsList=function(c){var r,f=c.pairs,a=i.keys(f),t=a.length,s=[],o;for(o=0;o<t;o++)r=f[a[o]],r[2]>0?s.push(r):delete f[a[o]];return s}})()},function(P,T,v){var e={};P.exports=e;var l=v(3),i=v(7),n=v(13),c=v(4),r=v(14),f=v(10),a=v(5),t=v(0),s=v(1);(function(){e.create=function(o,g){var d=(o?o.mouse:null)||(g?g.mouse:null);d||(o&&o.render&&o.render.canvas?d=n.create(o.render.canvas):g&&g.element?d=n.create(g.element):(d=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var M=f.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:M,collisionFilter:{category:1,mask:4294967295,group:0}},h=t.extend(S,g);return c.on(o,"beforeUpdate",function(){var m=a.allBodies(o.world);e.update(h,m),e._triggerEvents(h)}),h},e.update=function(o,g){var d=o.mouse,M=o.constraint,S=o.body;if(d.button===0){if(M.bodyB)i.set(M.bodyB,!1),M.pointA=d.position;else for(var h=0;h<g.length;h++)if(S=g[h],s.contains(S.bounds,d.position)&&r.canCollide(S.collisionFilter,o.collisionFilter))for(var m=S.parts.length>1?1:0;m<S.parts.length;m++){var x=S.parts[m];if(l.contains(x.vertices,d.position)){M.pointA=d.position,M.bodyB=o.body=S,M.pointB={x:d.position.x-S.position.x,y:d.position.y-S.position.y},M.angleB=S.angle,i.set(S,!1),c.trigger(o,"startdrag",{mouse:d,body:S});break}}}else M.bodyB=o.body=null,M.pointB=null,S&&c.trigger(o,"enddrag",{mouse:d,body:S})},e._triggerEvents=function(o){var g=o.mouse,d=g.sourceEvents;d.mousemove&&c.trigger(o,"mousemove",{mouse:g}),d.mousedown&&c.trigger(o,"mousedown",{mouse:g}),d.mouseup&&c.trigger(o,"mouseup",{mouse:g}),n.clearSourceEvents(g)}})()},function(P,T,v){var e={};P.exports=e;var l=v(2),i=v(8),n=v(1),c=v(12),r=v(3);(function(){e.collides=function(f,a){for(var t=[],s=a.length,o=f.bounds,g=i.collides,d=n.overlaps,M=0;M<s;M++){var S=a[M],h=S.parts.length,m=h===1?0:1;if(d(S.bounds,o))for(var x=m;x<h;x++){var u=S.parts[x];if(d(u.bounds,o)){var y=g(u,f);if(y){t.push(y);break}}}}return t},e.ray=function(f,a,t,s){s=s||1e-100;for(var o=l.angle(a,t),g=l.magnitude(l.sub(a,t)),d=(t.x+a.x)*.5,M=(t.y+a.y)*.5,S=c.rectangle(d,M,g,s,{angle:o}),h=e.collides(S,f),m=0;m<h.length;m+=1){var x=h[m];x.body=x.bodyB=x.bodyA}return h},e.region=function(f,a,t){for(var s=[],o=0;o<f.length;o++){var g=f[o],d=n.overlaps(g.bounds,a);(d&&!t||!d&&t)&&s.push(g)}return s},e.point=function(f,a){for(var t=[],s=0;s<f.length;s++){var o=f[s];if(n.contains(o.bounds,a))for(var g=o.parts.length===1?0:1;g<o.parts.length;g++){var d=o.parts[g];if(n.contains(d.bounds,a)&&r.contains(d.vertices,a)){t.push(o);break}}}return t}})()},function(P,T,v){var e={};P.exports=e;var l=v(4),i=v(18),n=v(0);(function(){var c,r;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(a){f=setTimeout(function(){a(n.now())},1e3/60)},r=function(){clearTimeout(f)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},s=n.extend(t,a);return s.delta=s.delta||1e3/s.fps,s.deltaMin=s.deltaMin||1e3/s.fps,s.deltaMax=s.deltaMax||1e3/(s.fps*.5),s.fps=1e3/s.delta,s},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function s(o){a.frameRequestId=c(s),o&&a.enabled&&e.tick(a,t,o)}(),a},e.tick=function(a,t,s){var o=t.timing,g=1,d,M={timestamp:o.timestamp};l.trigger(a,"beforeTick",M),a.isFixed?d=a.delta:(d=s-a.timePrev||a.delta,a.timePrev=s,a.deltaHistory.push(d),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),d=Math.min.apply(null,a.deltaHistory),d=d<a.deltaMin?a.deltaMin:d,d=d>a.deltaMax?a.deltaMax:d,g=d/a.delta,a.delta=d),a.timeScalePrev!==0&&(g*=o.timeScale/a.timeScalePrev),o.timeScale===0&&(g=0),a.timeScalePrev=o.timeScale,a.correction=g,a.frameCounter+=1,s-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((s-a.counterTimestamp)/1e3),a.counterTimestamp=s,a.frameCounter=0),l.trigger(a,"tick",M),l.trigger(a,"beforeUpdate",M),i.update(t,d,g),l.trigger(a,"afterUpdate",M),l.trigger(a,"afterTick",M)},e.stop=function(a){r(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(P,T,v){var e={};P.exports=e;var l=v(8),i=v(0),n=i.deprecated;(function(){e.collides=function(c,r){return l.collides(c,r)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(P,T,v){var e={};P.exports=e,v(1);var l=v(0);(function(){e.pathToVertices=function(i,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,r,f,a,t,s,o,g,d,M,S=[],h,m,x=0,u=0,y=0;n=n||15;var p=function(C,B,R){var E=R%2===1&&R>1;if(!d||C!=d.x||B!=d.y){d&&E?(h=d.x,m=d.y):(h=0,m=0);var k={x:h+C,y:m+B};(E||!d)&&(d=k),S.push(k),u=h+C,y=m+B}},w=function(C){var B=C.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":u=C.x,y=C.y;break;case"H":u=C.x;break;case"V":y=C.y;break}p(u,y,C.pathSegType)}};for(e._svgPathToAbsolute(i),f=i.getTotalLength(),s=[],c=0;c<i.pathSegList.numberOfItems;c+=1)s.push(i.pathSegList.getItem(c));for(o=s.concat();x<f;){if(M=i.getPathSegAtLength(x),t=s[M],t!=g){for(;o.length&&o[0]!=t;)w(o.shift());g=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=i.getPointAtLength(x),p(a.x,a.y,0);break}x+=n}for(c=0,r=o.length;c<r;++c)w(o[c]);return S},e._svgPathToAbsolute=function(i){for(var n,c,r,f,a,t,s=i.pathSegList,o=0,g=0,d=s.numberOfItems,M=0;M<d;++M){var S=s.getItem(M),h=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in S&&(o=S.x),"y"in S&&(g=S.y);else switch("x1"in S&&(r=o+S.x1),"x2"in S&&(a=o+S.x2),"y1"in S&&(f=g+S.y1),"y2"in S&&(t=g+S.y2),"x"in S&&(o+=S.x),"y"in S&&(g+=S.y),h){case"m":s.replaceItem(i.createSVGPathSegMovetoAbs(o,g),M);break;case"l":s.replaceItem(i.createSVGPathSegLinetoAbs(o,g),M);break;case"h":s.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(o),M);break;case"v":s.replaceItem(i.createSVGPathSegLinetoVerticalAbs(g),M);break;case"c":s.replaceItem(i.createSVGPathSegCurvetoCubicAbs(o,g,r,f,a,t),M);break;case"s":s.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(o,g,a,t),M);break;case"q":s.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(o,g,r,f),M);break;case"t":s.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(o,g),M);break;case"a":s.replaceItem(i.createSVGPathSegArcAbs(o,g,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),M);break;case"z":case"Z":o=n,g=c;break}(h=="M"||h=="m")&&(n=o,c=g)}}})()},function(P,T,v){var e={};P.exports=e;var l=v(5);v(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(N);var ut={decomp:wt,quickDecomp:re,isSimple:Pt,removeCollinearPoints:Mt,removeDuplicatePoints:At,makeCCW:dt};function ct(A,I,P){P=P||0;var T=[0,0],v,e,l,i,n,c,r;return v=A[1][1]-A[0][1],e=A[0][0]-A[1][0],l=v*A[0][0]+e*A[0][1],i=I[1][1]-I[0][1],n=I[0][0]-I[1][0],c=i*I[0][0]+n*I[0][1],r=v*n-i*e,Ce(r,0,P)||(T[0]=(n*l-e*c)/r,T[1]=(v*c-i*l)/r),T}function Re(A,I,P,T){var v=I[0]-A[0],e=I[1]-A[1],l=T[0]-P[0],i=T[1]-P[1];if(l*e-i*v===0)return!1;var n=(v*(P[1]-A[1])+e*(A[0]-P[0]))/(l*e-i*v),c=(l*(A[1]-P[1])+i*(P[0]-A[0]))/(i*v-l*e);return n>=0&&n<=1&&c>=0&&c<=1}function ce(A,I,P){return(I[0]-A[0])*(P[1]-A[1])-(P[0]-A[0])*(I[1]-A[1])}function de(A,I,P){return ce(A,I,P)>0}function Ee(A,I,P){return ce(A,I,P)>=0}function Je(A,I,P){return ce(A,I,P)<0}function fe(A,I,P){return ce(A,I,P)<=0}var vt=[],ht=[];function gt(A,I,P,T){if(T){var v=vt,e=ht;v[0]=I[0]-A[0],v[1]=I[1]-A[1],e[0]=P[0]-I[0],e[1]=P[1]-I[1];var l=v[0]*e[0]+v[1]*e[1],i=Math.sqrt(v[0]*v[0]+v[1]*v[1]),n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),c=Math.acos(l/(i*n));return c<T}else return ce(A,I,P)===0}function ue(A,I){var P=I[0]-A[0],T=I[1]-A[1];return P*P+T*T}function F(A,I){var P=A.length;return A[I<0?I%P+P:I%P]}function mt(A){A.length=0}function b(A,I,P,T){for(var v=P;v<T;v++)A.push(I[v])}function dt(A){for(var I=0,P=A,T=1;T<A.length;++T)(P[T][1]<P[I][1]||P[T][1]===P[I][1]&&P[T][0]>P[I][0])&&(I=T);return de(F(A,I-1),F(A,I),F(A,I+1))?!1:(xt(A),!0)}function xt(A){for(var I=[],P=A.length,T=0;T!==P;T++)I.push(A.pop());for(var T=0;T!==P;T++)A[T]=I[T]}function Xe(A,I){return Je(F(A,I-1),F(A,I),F(A,I+1))}var pt=[],yt=[];function St(A,I,P){var T,v,e=pt,l=yt;if(Ee(F(A,I+1),F(A,I),F(A,P))&&fe(F(A,I-1),F(A,I),F(A,P)))return!1;v=ue(F(A,I),F(A,P));for(var i=0;i!==A.length;++i)if(!((i+1)%A.length===I||i===I)&&Ee(F(A,I),F(A,P),F(A,i+1))&&fe(F(A,I),F(A,P),F(A,i))&&(e[0]=F(A,I),e[1]=F(A,P),l[0]=F(A,i),l[1]=F(A,i+1),T=ct(e,l),ue(F(A,I),T)<v))return!1;return!0}function Ct(A,I,P){for(var T=0;T!==A.length;++T)if(!(T===I||T===P||(T+1)%A.length===I||(T+1)%A.length===P)&&Re(F(A,I),F(A,P),F(A,T),F(A,T+1)))return!1;return!0}function Se(A,I,P,T){var v=T||[];if(mt(v),I<P)for(var e=I;e<=P;e++)v.push(A[e]);else{for(var e=0;e<=P;e++)v.push(A[e]);for(var e=I;e<A.length;e++)v.push(A[e])}return v}function ke(A){for(var I=[],P=[],T=[],v=[],e=Number.MAX_VALUE,l=0;l<A.length;++l)if(Xe(A,l)){for(var i=0;i<A.length;++i)if(St(A,l,i)){P=ke(Se(A,l,i,v)),T=ke(Se(A,i,l,v));for(var n=0;n<T.length;n++)P.push(T[n]);P.length<e&&(I=P,e=P.length,I.push([F(A,l),F(A,i)]))}}return I}function wt(A){var I=ke(A);return I.length>0?Ye(A,I):[A]}function Ye(A,I){if(I.length===0)return[A];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var P=[A],T=0;T<I.length;T++)for(var v=I[T],e=0;e<P.length;e++){var l=P[e],i=Ye(l,v);if(i){P.splice(e,1),P.push(i[0],i[1]);break}}return P}else{var v=I,T=A.indexOf(v[0]),e=A.indexOf(v[1]);return T!==-1&&e!==-1?[Se(A,T,e),Se(A,e,T)]:!1}}function Pt(A){var I=A,P;for(P=0;P<I.length-1;P++)for(var T=0;T<P-1;T++)if(Re(I[P],I[P+1],I[T],I[T+1]))return!1;for(P=1;P<I.length-2;P++)if(Re(I[0],I[I.length-1],I[P],I[P+1]))return!1;return!0}function Ke(A,I,P,T,v){v=v||0;var e=I[1]-A[1],l=A[0]-I[0],i=e*A[0]+l*A[1],n=T[1]-P[1],c=P[0]-T[0],r=n*P[0]+c*P[1],f=e*c-n*l;return Ce(f,0,v)?[0,0]:[(c*i-l*r)/f,(e*r-n*i)/f]}function re(A,I,P,T,v,e,l){e=e||100,l=l||0,v=v||25,I=typeof I!="undefined"?I:[],P=P||[],T=T||[];var i=[0,0],n=[0,0],c=[0,0],r=0,f=0,a=0,t=0,s=0,o=0,g=0,d=[],M=[],S=A,h=A;if(h.length<3)return I;if(l++,l>e)return console.warn("quickDecomp: max level ("+e+") reached."),I;for(var m=0;m<A.length;++m)if(Xe(S,m)){P.push(S[m]),r=f=Number.MAX_VALUE;for(var x=0;x<A.length;++x)de(F(S,m-1),F(S,m),F(S,x))&&fe(F(S,m-1),F(S,m),F(S,x-1))&&(c=Ke(F(S,m-1),F(S,m),F(S,x),F(S,x-1)),Je(F(S,m+1),F(S,m),c)&&(a=ue(S[m],c),a<f&&(f=a,n=c,o=x))),de(F(S,m+1),F(S,m),F(S,x+1))&&fe(F(S,m+1),F(S,m),F(S,x))&&(c=Ke(F(S,m+1),F(S,m),F(S,x),F(S,x+1)),de(F(S,m-1),F(S,m),c)&&(a=ue(S[m],c),a<r&&(r=a,i=c,s=x)));if(o===(s+1)%A.length)c[0]=(n[0]+i[0])/2,c[1]=(n[1]+i[1])/2,T.push(c),m<s?(b(d,S,m,s+1),d.push(c),M.push(c),o!==0&&b(M,S,o,S.length),b(M,S,0,m+1)):(m!==0&&b(d,S,m,S.length),b(d,S,0,s+1),d.push(c),M.push(c),b(M,S,o,m+1));else{if(o>s&&(s+=A.length),t=Number.MAX_VALUE,s<o)return I;for(var x=o;x<=s;++x)Ee(F(S,m-1),F(S,m),F(S,x))&&fe(F(S,m+1),F(S,m),F(S,x))&&(a=ue(F(S,m),F(S,x)),a<t&&Ct(S,m,x)&&(t=a,g=x%A.length));m<g?(b(d,S,m,g+1),g!==0&&b(M,S,g,h.length),b(M,S,0,m+1)):(m!==0&&b(d,S,m,h.length),b(d,S,0,g+1),b(M,S,g,m+1))}return d.length<M.length?(re(d,I,P,T,v,e,l),re(M,I,P,T,v,e,l)):(re(M,I,P,T,v,e,l),re(d,I,P,T,v,e,l)),I}return I.push(A),I}function Mt(A,I){for(var P=0,T=A.length-1;A.length>3&&T>=0;--T)gt(F(A,T-1),F(A,T),F(A,T+1),I)&&(A.splice(T%A.length,1),P++);return P}function At(A,I){for(var P=A.length-1;P>=1;--P)for(var T=A[P],v=P-1;v>=0;--v)if(It(T,A[v],I)){A.splice(P,1);continue}}function Ce(A,I,P){return P=P||0,Math.abs(A-I)<=P}function It(A,I,P){return Ce(A[0],I[0],P)&&Ce(A[1],I[1],P)}const Tt=We(.1),Le=We(1),xe=We(0);function Bt(A){let I,P,T,v,e;const l=A[3].default,i=_e(l,A,A[2],null);return{c(){I=ee("button"),i&&i.c(),this.h()},l(n){I=te(n,"BUTTON",{class:!0});var c=ne(I);i&&i.l(c),c.forEach(H),this.h()},h(){Q(I,"class",P="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+A[0]),I.disabled=A[1]},m(n,c){z(n,I,c),i&&i.m(I,null),T=!0,v||(e=Pe(I,"click",A[4]),v=!0)},p(n,[c]){i&&i.p&&(!T||c&4)&&et(i,l,n,n[2],T?nt(l,n[2],c,null):tt(n[2]),null),(!T||c&1&&P!==(P="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+n[0]))&&Q(I,"class",P),(!T||c&2)&&(I.disabled=n[1])},i(n){T||(pe(i,n),T=!0)},o(n){ye(i,n),T=!1},d(n){n&&H(I),i&&i.d(n),v=!1,e()}}}function Rt(A,I,P){let{$$slots:T={},$$scope:v}=I,{extraClasses:e=""}=I,{disabled:l=!1}=I;function i(n){it.call(this,A,n)}return A.$$set=n=>{"extraClasses"in n&&P(0,e=n.extraClasses),"disabled"in n&&P(1,l=n.disabled),"$$scope"in n&&P(2,v=n.$$scope)},[e,l,v,T,i]}class Fe extends Ve{constructor(I){super(),Oe(this,I,Rt,Bt,He,{extraClasses:0,disabled:1})}}function Et(A){let I;return{c(){I=J("Increase Friction")},l(P){I=X(P,"Increase Friction")},m(P,T){z(P,I,T)},d(P){P&&H(I)}}}function kt(A){let I,P,T,v=A[0]+1+"",e,l,i=A[0]*100+"",n,c;return{c(){I=J("Increase amount ("),P=J(A[0]),T=J(" -> "),e=J(v),l=J(" - "),n=J(i),c=J(" units)")},l(r){I=X(r,"Increase amount ("),P=X(r,A[0]),T=X(r," -> "),e=X(r,v),l=X(r," - "),n=X(r,i),c=X(r," units)")},m(r,f){z(r,I,f),z(r,P,f),z(r,T,f),z(r,e,f),z(r,l,f),z(r,n,f),z(r,c,f)},p(r,f){f&1&&le(P,r[0]),f&1&&v!==(v=r[0]+1+"")&&le(e,v),f&1&&i!==(i=r[0]*100+"")&&le(n,i)},d(r){r&&H(I),r&&H(P),r&&H(T),r&&H(e),r&&H(l),r&&H(n),r&&H(c)}}}function Lt(A){let I,P,T,v,e,l,i,n,c;return l=new Fe({props:{$$slots:{default:[Et]},$$scope:{ctx:A}}}),n=new Fe({props:{disabled:A[0]*100>A[1],$$slots:{default:[kt]},$$scope:{ctx:A}}}),n.$on("click",A[2]),{c(){I=ee("div"),P=ee("h1"),T=J("Shop"),v=ae(),e=ee("div"),Me(l.$$.fragment),i=ae(),Me(n.$$.fragment),this.h()},l(r){I=te(r,"DIV",{class:!0});var f=ne(I);P=te(f,"H1",{class:!0});var a=ne(P);T=X(a,"Shop"),a.forEach(H),v=se(f),e=te(f,"DIV",{class:!0});var t=ne(e);Ae(l.$$.fragment,t),i=se(t),Ae(n.$$.fragment,t),t.forEach(H),f.forEach(H),this.h()},h(){Q(P,"class","text-2xl"),Q(e,"class","block"),Q(I,"class","font-display")},m(r,f){z(r,I,f),j(I,P),j(P,T),j(I,v),j(I,e),Ie(l,e,null),j(e,i),Ie(n,e,null),c=!0},p(r,[f]){const a={};f&8&&(a.$$scope={dirty:f,ctx:r}),l.$set(a);const t={};f&3&&(t.disabled=r[0]*100>r[1]),f&9&&(t.$$scope={dirty:f,ctx:r}),n.$set(t)},i(r){c||(pe(l.$$.fragment,r),pe(n.$$.fragment,r),c=!0)},o(r){ye(l.$$.fragment,r),ye(n.$$.fragment,r),c=!1},d(r){r&&H(I),Te(l),Te(n)}}}function Ft(A,I,P){let T,v;oe(A,Le,l=>P(0,T=l)),oe(A,xe,l=>P(1,v=l));function e(){Be(Le,T++,T)}return[T,v,e]}class Dt extends Ve{constructor(I){super(),Oe(this,I,Ft,Lt,He,{})}}var De={exports:{}};(function(A,I){(function(P,T){{var v=T();A&&A.exports&&(I=A.exports=v),I.randomColor=v}})(me,function(){var P=null,T={};d();var v=[],e=function(u){if(u=u||{},u.seed!==void 0&&u.seed!==null&&u.seed===parseInt(u.seed,10))P=u.seed;else if(typeof u.seed=="string")P=m(u.seed);else{if(u.seed!==void 0&&u.seed!==null)throw new TypeError("The seed value must be an integer or string");P=null}var y,p,w;if(u.count!==null&&u.count!==void 0){for(var C=u.count,B=[],R=0;R<u.count;R++)v.push(!1);for(u.count=null;C>B.length;){var E=e(u);P!==null&&(u.seed=P),B.push(E)}return u.count=C,B}return y=l(u),p=i(y,u),w=n(y,p,u),c([y,p,w],u)};function l(u){if(v.length>0){var y=x(u.hue),p=s(y),w=(y[1]-y[0])/v.length,C=parseInt((p-y[0])/w);v[C]===!0?C=(C+2)%v.length:v[C]=!0;var B=(y[0]+C*w)%359,R=(y[0]+(C+1)*w)%359;return y=[B,R],p=s(y),p<0&&(p=360+p),p}else{var y=f(u.hue);return p=s(y),p<0&&(p=360+p),p}}function i(u,y){if(y.hue==="monochrome")return 0;if(y.luminosity==="random")return s([0,100]);var p=a(u),w=p[0],C=p[1];switch(y.luminosity){case"bright":w=55;break;case"dark":w=C-10;break;case"light":C=55;break}return s([w,C])}function n(u,y,p){var w=r(u,y),C=100;switch(p.luminosity){case"dark":C=w+20;break;case"light":w=(C+w)/2;break;case"random":w=0,C=100;break}return s([w,C])}function c(u,y){switch(y.format){case"hsvArray":return u;case"hslArray":return h(u);case"hsl":var p=h(u);return"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)";case"hsla":var w=h(u),R=y.alpha||Math.random();return"hsla("+w[0]+", "+w[1]+"%, "+w[2]+"%, "+R+")";case"rgbArray":return M(u);case"rgb":var C=M(u);return"rgb("+C.join(", ")+")";case"rgba":var B=M(u),R=y.alpha||Math.random();return"rgba("+B.join(", ")+", "+R+")";default:return o(u)}}function r(u,y){for(var p=t(u).lowerBounds,w=0;w<p.length-1;w++){var C=p[w][0],B=p[w][1],R=p[w+1][0],E=p[w+1][1];if(y>=C&&y<=R){var k=(E-B)/(R-C),L=B-k*C;return k*y+L}}return 0}function f(u){if(typeof parseInt(u)=="number"){var y=parseInt(u);if(y<360&&y>0)return[y,y]}if(typeof u=="string"){if(T[u]){var p=T[u];if(p.hueRange)return p.hueRange}else if(u.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var w=S(u)[0];return[w,w]}}return[0,360]}function a(u){return t(u).saturationRange}function t(u){u>=334&&u<=360&&(u-=360);for(var y in T){var p=T[y];if(p.hueRange&&u>=p.hueRange[0]&&u<=p.hueRange[1])return T[y]}return"Color not found"}function s(u){if(P===null){var y=.618033988749895,p=Math.random();return p+=y,p%=1,Math.floor(u[0]+p*(u[1]+1-u[0]))}else{var w=u[1]||1,C=u[0]||0;P=(P*9301+49297)%233280;var B=P/233280;return Math.floor(C+B*(w-C))}}function o(u){var y=M(u);function p(C){var B=C.toString(16);return B.length==1?"0"+B:B}var w="#"+p(y[0])+p(y[1])+p(y[2]);return w}function g(u,y,p){var w=p[0][0],C=p[p.length-1][0],B=p[p.length-1][1],R=p[0][1];T[u]={hueRange:y,lowerBounds:p,saturationRange:[w,C],brightnessRange:[B,R]}}function d(){g("monochrome",null,[[0,0],[100,0]]),g("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),g("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),g("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),g("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),g("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),g("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),g("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function M(u){var y=u[0];y===0&&(y=1),y===360&&(y=359),y=y/360;var p=u[1]/100,w=u[2]/100,C=Math.floor(y*6),B=y*6-C,R=w*(1-p),E=w*(1-B*p),k=w*(1-(1-B)*p),L=256,D=256,V=256;switch(C){case 0:L=w,D=k,V=R;break;case 1:L=E,D=w,V=R;break;case 2:L=R,D=w,V=k;break;case 3:L=R,D=E,V=w;break;case 4:L=k,D=R,V=w;break;case 5:L=w,D=R,V=E;break}var O=[Math.floor(L*255),Math.floor(D*255),Math.floor(V*255)];return O}function S(u){u=u.replace(/^#/,""),u=u.length===3?u.replace(/(.)/g,"$1$1"):u;var y=parseInt(u.substr(0,2),16)/255,p=parseInt(u.substr(2,2),16)/255,w=parseInt(u.substr(4,2),16)/255,C=Math.max(y,p,w),B=C-Math.min(y,p,w),R=C?B/C:0;switch(C){case y:return[60*((p-w)/B%6)||0,R,C];case p:return[60*((w-y)/B+2)||0,R,C];case w:return[60*((y-p)/B+4)||0,R,C]}}function h(u){var y=u[0],p=u[1]/100,w=u[2]/100,C=(2-p)*w;return[y,Math.round(p*w/(C<1?C:2-C)*1e4)/100,C/2*100]}function m(u){for(var y=0,p=0;p!==u.length&&!(y>=Number.MAX_SAFE_INTEGER);p++)y+=u.charCodeAt(p);return y}function x(u){if(isNaN(u)){if(typeof u=="string"){if(T[u]){var p=T[u];if(p.hueRange)return p.hueRange}else if(u.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var w=S(u)[0];return t(w).hueRange}}}else{var y=parseInt(u);if(y<360&&y>0)return t(u).hueRange}return[0,360]}return e})})(De,De.exports);var Vt=De.exports;const{window:Ot}=ot;function Ht(A){let I;return{c(){I=J("Shop")},l(P){I=X(P,"Shop")},m(P,T){z(P,I,T)},d(P){P&&H(I)}}}function Wt(A){let I,P,T,v,e,l,i,n,c,r=A[3]==1?"":"s",f,a,t,s,o,g;return t=new Fe({props:{extraClasses:"mt-4 w-min",$$slots:{default:[Ht]},$$scope:{ctx:A}}}),t.$on("click",A[4]),{c(){I=ee("canvas"),P=ae(),T=ee("div"),v=ee("div"),e=ae(),l=ee("div"),i=ee("p"),n=J(A[3]),c=J(" unit"),f=J(r),a=ae(),Me(t.$$.fragment),this.h()},l(d){I=te(d,"CANVAS",{width:!0,height:!0,class:!0}),ne(I).forEach(H),P=se(d),T=te(d,"DIV",{class:!0});var M=ne(T);v=te(M,"DIV",{class:!0}),ne(v).forEach(H),M.forEach(H),e=se(d),l=te(d,"DIV",{class:!0});var S=ne(l);i=te(S,"P",{class:!0});var h=ne(i);n=X(h,A[3]),c=X(h," unit"),f=X(h,r),h.forEach(H),a=se(S),Ae(t.$$.fragment,S),S.forEach(H),this.h()},h(){Q(I,"width",A[1]),Q(I,"height",A[2]),Q(I,"class","fixed top-0 left-0 z--10"),Q(v,"class","w-24 h-24 bg-black rounded-full hover:scale-110 hover:cursor-pointer transition-all"),Q(T,"class","fixed top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]"),Q(i,"class","font-thin text-3xl border-b-[1px] pb-2 border-gray-200"),Q(l,"class","my-8 mx-auto text-center top-0 left-0 w-screen fixed flex flex-col items-center font-display")},m(d,M){z(d,I,M),A[8](I),z(d,P,M),z(d,T,M),j(T,v),z(d,e,M),z(d,l,M),j(l,i),j(i,n),j(i,c),j(i,f),j(l,a),Ie(t,l,null),s=!0,o||(g=[Pe(Ot,"resize",A[7]),Pe(v,"click",A[6])],o=!0)},p(d,[M]){(!s||M&2)&&Q(I,"width",d[1]),(!s||M&4)&&Q(I,"height",d[2]),(!s||M&8)&&le(n,d[3]),(!s||M&8)&&r!==(r=d[3]==1?"":"s")&&le(f,r);const S={};M&32768&&(S.$$scope={dirty:M,ctx:d}),t.$set(S)},i(d){s||(pe(t.$$.fragment,d),s=!0)},o(d){ye(t.$$.fragment,d),s=!1},d(d){d&&H(I),A[8](null),d&&H(P),d&&H(T),d&&H(e),d&&H(l),Te(t),o=!1,rt(g)}}}function $t(A,I,P){let T,v,e;oe(A,Tt,M=>P(11,T=M)),oe(A,xe,M=>P(3,v=M)),oe(A,Le,M=>P(12,e=M));const{open:l}=at("simple-modal"),i=()=>l(Dt,{},{transitionWindow:ft,transitionWindowProps:{duration:50}});let n,c,r;function f(){r&&N.exports.World.remove(c.world,r),r=N.exports.Bodies.rectangle(a/2,t,a,20,{isStatic:!0}),r.render.fillStyle="#444",N.exports.Composite.add(c.world,[r])}st(()=>{P(1,a=document.documentElement.clientWidth),P(2,t=document.documentElement.clientHeight),c=N.exports.Engine.create(),N.exports.Common.setDecomp(ut),N.exports.Events.on(c,"beforeUpdate",()=>{const x=N.exports.Composite.allBodies(c.world);for(const u of x)!u.isStatic&&u.position.y>t&&(N.exports.World.remove(c.world,u),Be(xe,v--,v))});const M=N.exports.Runner.create();M.isFixed=!0,N.exports.Runner.run(M,c),f();const S=N.exports.Mouse.create(n),h=N.exports.MouseConstraint.create(c,{mouse:S,constraint:{stiffness:.2,render:{visible:!1}}});N.exports.Composite.add(c.world,h);const m=n.getContext("2d");(function x(){const u=N.exports.Composite.allBodies(c.world);window.requestAnimationFrame(x),m.fillStyle="#ffffff",m.fillRect(0,0,n.width,n.height);for(const y of u)for(const p of y.parts){const w=p.vertices;m.beginPath(),m.moveTo(w[0].x,w[0].y);for(const C of w)m.lineTo(C.x,C.y);m.lineTo(w[0].x,w[0].y),m.closePath(),m.lineWidth=0,m.strokeStyle="rgba(1, 1, 1, 0)",m.globalAlpha=p.render.opacity,m.fillStyle=p.render.fillStyle,m.fill()}})()});let a=600,t=600;const s=(M,S)=>Math.random()*(S-M+1)+M;function o(){for(let M=0;M<e;M++){Be(xe,v++,v);const S=s(8,16),h=N.exports.Bodies.circle(s(60,a-60),0,S);N.exports.Body.setMass(h,S),h.restitution=1,h.friction=T,h.render.fillStyle=Vt({hue:"monochrome",luminosity:"light"}),N.exports.World.add(c.world,h)}}const g=()=>{P(1,a=document.documentElement.clientWidth),P(2,t=document.documentElement.clientHeight),f()};function d(M){lt[M?"unshift":"push"](()=>{n=M,P(0,n)})}return[n,a,t,v,i,f,o,g,d]}class zt extends Ve{constructor(I){super(),Oe(this,I,$t,Wt,He,{})}}export{zt as default};

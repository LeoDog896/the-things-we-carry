import{N as de,S as we,i as Ce,s as Pe,I as Ze,e as j,c as _,a as ie,d as O,b as U,g as $,O as Le,J as Ke,K as Je,L as Xe,q as X,o as ee,P as ft,w as le,x as fe,y as ue,B as ce,Q as ne,F as We,R as wt,k as ae,l as Fe,m as se,E as Ge,t as z,h as Q,M as W,j as he,T as Ct,U as rt,V as oe,p as Pt,G as Mt,v as At,W as It,n as Tt,X as Et}from"../chunks/index-3642c6c3.js";import{r as Bt,d as ve,w as Me}from"../chunks/index-4f968029.js";var Be=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rt(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}var ut={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(S,y){(function(A,u){S.exports=u()})(Be,function(){return function(x){var A={};function u(e){if(A[e])return A[e].exports;var s=A[e]={i:e,l:!1,exports:{}};return x[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=x,u.c=A,u.d=function(e,s,i){u.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,s){if(s&1&&(e=u(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(u.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var n in e)u.d(i,n,function(g){return e[g]}.bind(null,n));return i},u.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(s,"a",s),s},u.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},u.p="",u(u.s=21)}([function(x,A){var u={};x.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(s,i){var n,g;typeof i=="boolean"?(n=2,g=i):(n=1,g=!0);for(var l=n;l<arguments.length;l++){var f=arguments[l];if(f)for(var r in f)g&&f[r]&&f[r].constructor===Object&&(!s[r]||s[r].constructor===Object)?(s[r]=s[r]||{},u.extend(s[r],g,f[r])):s[r]=f[r]}return s},u.clone=function(s,i){return u.extend({},i,s)},u.keys=function(s){if(Object.keys)return Object.keys(s);var i=[];for(var n in s)i.push(n);return i},u.values=function(s){var i=[];if(Object.keys){for(var n=Object.keys(s),g=0;g<n.length;g++)i.push(s[n[g]]);return i}for(var l in s)i.push(s[l]);return i},u.get=function(s,i,n,g){i=i.split(".").slice(n,g);for(var l=0;l<i.length;l+=1)s=s[i[l]];return s},u.set=function(s,i,n,g,l){var f=i.split(".").slice(g,l);return u.get(s,i,0,-1)[f[f.length-1]]=n,n},u.shuffle=function(s){for(var i=s.length-1;i>0;i--){var n=Math.floor(u.random()*(i+1)),g=s[i];s[i]=s[n],s[n]=g}return s},u.choose=function(s){return s[Math.floor(u.random()*s.length)]},u.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},u.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},u.isFunction=function(s){return typeof s=="function"},u.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},u.isString=function(s){return toString.call(s)==="[object String]"},u.clamp=function(s,i,n){return s<i?i:s>n?n:s},u.sign=function(s){return s<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(s,i){return s=typeof s!="undefined"?s:0,i=typeof i!="undefined"?i:1,s+e()*(i-s)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[s]||(u.warn(s),u._warnedOnce[s]=!0)},u.deprecated=function(s,i,n){s[i]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",n)},s[i])},u.nextId=function(){return u._nextId++},u.indexOf=function(s,i){if(s.indexOf)return s.indexOf(i);for(var n=0;n<s.length;n++)if(s[n]===i)return n;return-1},u.map=function(s,i){if(s.map)return s.map(i);for(var n=[],g=0;g<s.length;g+=1)n.push(i(s[g]));return n},u.topologicalSort=function(s){var i=[],n=[],g=[];for(var l in s)!n[l]&&!g[l]&&u._topologicalSort(l,n,g,s,i);return i},u._topologicalSort=function(s,i,n,g,l){var f=g[s]||[];n[s]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];n[t]||i[t]||u._topologicalSort(t,i,n,g,l)}n[s]=!1,i[s]=!0,l.push(s)},u.chain=function(){for(var s=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?s.push.apply(s,n._chained):s.push(n)}var g=function(){for(var l,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<s.length;r+=1){var o=s[r].apply(l,f);typeof o!="undefined"&&(l=o)}return l};return g._chained=s,g},u.chainPathBefore=function(s,i,n){return u.set(s,i,u.chain(n,u.get(s,i)))},u.chainPathAfter=function(s,i,n){return u.set(s,i,u.chain(u.get(s,i),n))},u.setDecomp=function(s){u._decomp=s},u.getDecomp=function(){var s=u._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof Be!="undefined"&&(s=Be.decomp)}catch{s=null}return s}}()},function(x,A){var u={};x.exports=u,function(){u.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(s,e),s},u.update=function(e,s,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<s.length;n++){var g=s[n];g.x>e.max.x&&(e.max.x=g.x),g.x<e.min.x&&(e.min.x=g.x),g.y>e.max.y&&(e.max.y=g.y),g.y<e.min.y&&(e.min.y=g.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},u.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},u.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},u.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},u.shift=function(e,s){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+i,e.min.y=s.y,e.max.y=s.y+n}}()},function(x,A){var u={};x.exports=u,function(){u.create=function(e,s){return{x:e||0,y:s||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,s,i){var n=Math.cos(s),g=Math.sin(s);i||(i={});var l=e.x*n-e.y*g;return i.y=e.x*g+e.y*n,i.x=l,i},u.rotateAbout=function(e,s,i,n){var g=Math.cos(s),l=Math.sin(s);n||(n={});var f=i.x+((e.x-i.x)*g-(e.y-i.y)*l);return n.y=i.y+((e.x-i.x)*l+(e.y-i.y)*g),n.x=f,n},u.normalise=function(e){var s=u.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},u.dot=function(e,s){return e.x*s.x+e.y*s.y},u.cross=function(e,s){return e.x*s.y-e.y*s.x},u.cross3=function(e,s,i){return(s.x-e.x)*(i.y-e.y)-(s.y-e.y)*(i.x-e.x)},u.add=function(e,s,i){return i||(i={}),i.x=e.x+s.x,i.y=e.y+s.y,i},u.sub=function(e,s,i){return i||(i={}),i.x=e.x-s.x,i.y=e.y-s.y,i},u.mult=function(e,s){return{x:e.x*s,y:e.y*s}},u.div=function(e,s){return{x:e.x/s,y:e.y/s}},u.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(x,A,u){var e={};x.exports=e;var s=u(2),i=u(0);(function(){e.create=function(n,g){for(var l=[],f=0;f<n.length;f++){var r=n[f],t={x:r.x,y:r.y,index:f,body:g,isInternal:!1};l.push(t)}return l},e.fromPath=function(n,g){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(l,function(r,t,o){f.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(f,g)},e.centre=function(n){for(var g=e.area(n,!0),l={x:0,y:0},f,r,t,o=0;o<n.length;o++)t=(o+1)%n.length,f=s.cross(n[o],n[t]),r=s.mult(s.add(n[o],n[t]),f),l=s.add(l,r);return s.div(l,6*g)},e.mean=function(n){for(var g={x:0,y:0},l=0;l<n.length;l++)g.x+=n[l].x,g.y+=n[l].y;return s.div(g,n.length)},e.area=function(n,g){for(var l=0,f=n.length-1,r=0;r<n.length;r++)l+=(n[f].x-n[r].x)*(n[f].y+n[r].y),f=r;return g?l/2:Math.abs(l)/2},e.inertia=function(n,g){for(var l=0,f=0,r=n,t,o,a=0;a<r.length;a++)o=(a+1)%r.length,t=Math.abs(s.cross(r[o],r[a])),l+=t*(s.dot(r[o],r[o])+s.dot(r[o],r[a])+s.dot(r[a],r[a])),f+=t;return g/6*(l/f)},e.translate=function(n,g,l){l=typeof l!="undefined"?l:1;var f=n.length,r=g.x*l,t=g.y*l,o;for(o=0;o<f;o++)n[o].x+=r,n[o].y+=t;return n},e.rotate=function(n,g,l){if(g!==0){var f=Math.cos(g),r=Math.sin(g),t=l.x,o=l.y,a=n.length,v,d,T,C;for(C=0;C<a;C++)v=n[C],d=v.x-t,T=v.y-o,v.x=t+(d*f-T*r),v.y=o+(d*r+T*f);return n}},e.contains=function(n,g){for(var l=g.x,f=g.y,r=n.length,t=n[r-1],o,a=0;a<r;a++){if(o=n[a],(l-t.x)*(o.y-t.y)+(f-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(n,g,l,f){if(g===1&&l===1)return n;f=f||e.centre(n);for(var r,t,o=0;o<n.length;o++)r=n[o],t=s.sub(r,f),n[o].x=f.x+t.x*g,n[o].y=f.y+t.y*l;return n},e.chamfer=function(n,g,l,f,r){typeof g=="number"?g=[g]:g=g||[8],l=typeof l!="undefined"?l:-1,f=f||2,r=r||14;for(var t=[],o=0;o<n.length;o++){var a=n[o-1>=0?o-1:n.length-1],v=n[o],d=n[(o+1)%n.length],T=g[o<g.length?o:g.length-1];if(T===0){t.push(v);continue}var C=s.normalise({x:v.y-a.y,y:a.x-v.x}),h=s.normalise({x:d.y-v.y,y:v.x-d.x}),m=Math.sqrt(2*Math.pow(T,2)),p=s.mult(i.clone(C),T),c=s.normalise(s.mult(s.add(C,h),.5)),M=s.sub(v,s.mult(c,m)),P=l;l===-1&&(P=Math.pow(T,.32)*1.75),P=i.clamp(P,f,r),P%2===1&&(P+=1);for(var I=Math.acos(s.dot(C,h)),w=I/P,E=0;E<P;E++)t.push(s.add(s.rotate(p,w*E),M))}return t},e.clockwiseSort=function(n){var g=e.mean(n);return n.sort(function(l,f){return s.angle(g,l)-s.angle(g,f)}),n},e.isConvex=function(n){var g=0,l=n.length,f,r,t,o;if(l<3)return null;for(f=0;f<l;f++)if(r=(f+1)%l,t=(f+2)%l,o=(n[r].x-n[f].x)*(n[t].y-n[r].y),o-=(n[r].y-n[f].y)*(n[t].x-n[r].x),o<0?g|=1:o>0&&(g|=2),g===3)return!1;return g!==0?!0:null},e.hull=function(n){var g=[],l=[],f,r;for(n=n.slice(0),n.sort(function(t,o){var a=t.x-o.x;return a!==0?a:t.y-o.y}),r=0;r<n.length;r+=1){for(f=n[r];l.length>=2&&s.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(r=n.length-1;r>=0;r-=1){for(f=n[r];g.length>=2&&s.cross3(g[g.length-2],g[g.length-1],f)<=0;)g.pop();g.push(f)}return g.pop(),l.pop(),g.concat(l)}})()},function(x,A,u){var e={};x.exports=e;var s=u(0);(function(){e.on=function(i,n,g){for(var l=n.split(" "),f,r=0;r<l.length;r++)f=l[r],i.events=i.events||{},i.events[f]=i.events[f]||[],i.events[f].push(g);return g},e.off=function(i,n,g){if(!n){i.events={};return}typeof n=="function"&&(g=n,n=s.keys(i.events).join(" "));for(var l=n.split(" "),f=0;f<l.length;f++){var r=i.events[l[f]],t=[];if(g&&r)for(var o=0;o<r.length;o++)r[o]!==g&&t.push(r[o]);i.events[l[f]]=t}},e.trigger=function(i,n,g){var l,f,r,t,o=i.events;if(o&&s.keys(o).length>0){g||(g={}),l=n.split(" ");for(var a=0;a<l.length;a++)if(f=l[a],r=o[f],r){t=s.clone(g,!1),t.name=f,t.source=i;for(var v=0;v<r.length;v++)r[v].apply(i,[t])}}}})()},function(x,A,u){var e={};x.exports=e;var s=u(4),i=u(0),n=u(1),g=u(6);(function(){e.create=function(l){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},e.setModified=function(l,f,r,t){if(l.isModified=f,f&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),r&&l.parent&&e.setModified(l.parent,f,r,t),t)for(var o=0;o<l.composites.length;o++){var a=l.composites[o];e.setModified(a,f,r,t)}},e.add=function(l,f){var r=[].concat(f);s.trigger(l,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var o=r[t];switch(o.type){case"body":if(o.parent!==o){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(l,o);break;case"constraint":e.addConstraint(l,o);break;case"composite":e.addComposite(l,o);break;case"mouseConstraint":e.addConstraint(l,o.constraint);break}}return s.trigger(l,"afterAdd",{object:f}),l},e.remove=function(l,f,r){var t=[].concat(f);s.trigger(l,"beforeRemove",{object:f});for(var o=0;o<t.length;o++){var a=t[o];switch(a.type){case"body":e.removeBody(l,a,r);break;case"constraint":e.removeConstraint(l,a,r);break;case"composite":e.removeComposite(l,a,r);break;case"mouseConstraint":e.removeConstraint(l,a.constraint);break}}return s.trigger(l,"afterRemove",{object:f}),l},e.addComposite=function(l,f){return l.composites.push(f),f.parent=l,e.setModified(l,!0,!0,!1),l},e.removeComposite=function(l,f,r){var t=i.indexOf(l.composites,f);if(t!==-1&&e.removeCompositeAt(l,t),r)for(var o=0;o<l.composites.length;o++)e.removeComposite(l.composites[o],f,!0);return l},e.removeCompositeAt=function(l,f){return l.composites.splice(f,1),e.setModified(l,!0,!0,!1),l},e.addBody=function(l,f){return l.bodies.push(f),e.setModified(l,!0,!0,!1),l},e.removeBody=function(l,f,r){var t=i.indexOf(l.bodies,f);if(t!==-1&&e.removeBodyAt(l,t),r)for(var o=0;o<l.composites.length;o++)e.removeBody(l.composites[o],f,!0);return l},e.removeBodyAt=function(l,f){return l.bodies.splice(f,1),e.setModified(l,!0,!0,!1),l},e.addConstraint=function(l,f){return l.constraints.push(f),e.setModified(l,!0,!0,!1),l},e.removeConstraint=function(l,f,r){var t=i.indexOf(l.constraints,f);if(t!==-1&&e.removeConstraintAt(l,t),r)for(var o=0;o<l.composites.length;o++)e.removeConstraint(l.composites[o],f,!0);return l},e.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),e.setModified(l,!0,!0,!1),l},e.clear=function(l,f,r){if(r)for(var t=0;t<l.composites.length;t++)e.clear(l.composites[t],f,!0);return f?l.bodies=l.bodies.filter(function(o){return o.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,e.setModified(l,!0,!0,!1),l},e.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var f=[].concat(l.bodies),r=0;r<l.composites.length;r++)f=f.concat(e.allBodies(l.composites[r]));return l.cache&&(l.cache.allBodies=f),f},e.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var f=[].concat(l.constraints),r=0;r<l.composites.length;r++)f=f.concat(e.allConstraints(l.composites[r]));return l.cache&&(l.cache.allConstraints=f),f},e.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var f=[].concat(l.composites),r=0;r<l.composites.length;r++)f=f.concat(e.allComposites(l.composites[r]));return l.cache&&(l.cache.allComposites=f),f},e.get=function(l,f,r){var t,o;switch(r){case"body":t=e.allBodies(l);break;case"constraint":t=e.allConstraints(l);break;case"composite":t=e.allComposites(l).concat(l);break}return t?(o=t.filter(function(a){return a.id.toString()===f.toString()}),o.length===0?null:o[0]):null},e.move=function(l,f,r){return e.remove(l,f),e.add(r,f),l},e.rebase=function(l){for(var f=e.allBodies(l).concat(e.allConstraints(l)).concat(e.allComposites(l)),r=0;r<f.length;r++)f[r].id=i.nextId();return l},e.translate=function(l,f,r){for(var t=r?e.allBodies(l):l.bodies,o=0;o<t.length;o++)g.translate(t[o],f);return l},e.rotate=function(l,f,r,t){for(var o=Math.cos(f),a=Math.sin(f),v=t?e.allBodies(l):l.bodies,d=0;d<v.length;d++){var T=v[d],C=T.position.x-r.x,h=T.position.y-r.y;g.setPosition(T,{x:r.x+(C*o-h*a),y:r.y+(C*a+h*o)}),g.rotate(T,f)}return l},e.scale=function(l,f,r,t,o){for(var a=o?e.allBodies(l):l.bodies,v=0;v<a.length;v++){var d=a[v],T=d.position.x-t.x,C=d.position.y-t.y;g.setPosition(d,{x:t.x+T*f,y:t.y+C*r}),g.scale(d,f,r)}return l},e.bounds=function(l){for(var f=e.allBodies(l),r=[],t=0;t<f.length;t+=1){var o=f[t];r.push(o.bounds.min,o.bounds.max)}return n.create(r)}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(2),n=u(7);u(16);var g=u(0),l=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:g.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},a=g.extend(o,t);return r(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||l.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),l.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var a=t.isStatic?"#14151f":g.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",d=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||d,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,a){var v;typeof o=="string"&&(v=o,o={},o[v]=a);for(v in o)if(!!Object.prototype.hasOwnProperty.call(o,v))switch(a=o[v],v){case"isStatic":e.setStatic(t,a);break;case"isSleeping":n.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[v]=a}},e.setStatic=function(t,o){for(var a=0;a<t.parts.length;a++){var v=t.parts[a];v.isStatic=o,o?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,o){var a=t.inertia/(t.mass/6);t.inertia=a*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=f.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var a=s.centre(t.vertices);s.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),l.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,a){var v;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<o.length;v++){var d=o[v];d!==t&&(d.parent=t,t.parts.push(d))}if(t.parts.length!==1){if(a=typeof a!="undefined"?a:!0,a){var T=[];for(v=0;v<o.length;v++)T=T.concat(o[v].vertices);s.clockwiseSort(T);var C=s.hull(T),h=s.centre(C);e.setVertices(t,C),s.translate(t.vertices,h)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,o,a){a?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var a=i.sub(o,t.position);t.positionPrev.x+=a.x,t.positionPrev.y+=a.y;for(var v=0;v<t.parts.length;v++){var d=t.parts[v];d.position.x+=a.x,d.position.y+=a.y,s.translate(d.vertices,a),l.update(d.bounds,d.vertices,t.velocity)}},e.setAngle=function(t,o){var a=o-t.angle;t.anglePrev+=a;for(var v=0;v<t.parts.length;v++){var d=t.parts[v];d.angle+=a,s.rotate(d.vertices,a,t.position),f.rotate(d.axes,a),l.update(d.bounds,d.vertices,t.velocity),v>0&&i.rotateAbout(d.position,a,t.position,d.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=i.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,i.add(t.position,o))},e.rotate=function(t,o,a){if(!a)e.setAngle(t,t.angle+o);else{var v=Math.cos(o),d=Math.sin(o),T=t.position.x-a.x,C=t.position.y-a.y;e.setPosition(t,{x:a.x+(T*v-C*d),y:a.y+(T*d+C*v)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,a,v){var d=0,T=0;v=v||t.position;for(var C=0;C<t.parts.length;C++){var h=t.parts[C];s.scale(h.vertices,o,a,v),h.axes=f.fromVertices(h.vertices),h.area=s.area(h.vertices),e.setMass(h,t.density*h.area),s.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),e.setInertia(h,e._inertiaScale*s.inertia(h.vertices,h.mass)),s.translate(h.vertices,{x:h.position.x,y:h.position.y}),C>0&&(d+=h.area,T+=h.inertia),h.position.x=v.x+(h.position.x-v.x)*o,h.position.y=v.y+(h.position.y-v.y)*a,l.update(h.bounds,h.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(e.setMass(t,t.density*d),e.setInertia(t,T))),t.circleRadius&&(o===a?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,a,v){var d=Math.pow(o*a*t.timeScale,2),T=1-t.frictionAir*a*t.timeScale,C=t.position.x-t.positionPrev.x,h=t.position.y-t.positionPrev.y;t.velocity.x=C*T*v+t.force.x/t.mass*d,t.velocity.y=h*T*v+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*T*v+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=i.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var p=t.parts[m];s.translate(p.vertices,t.velocity),m>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(p.vertices,t.angularVelocity,t.position),f.rotate(p.axes,t.angularVelocity),m>0&&i.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),l.update(p.bounds,p.vertices,t.velocity)}},e.applyForce=function(t,o,a){t.force.x+=a.x,t.force.y+=a.y;var v={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=v.x*a.y-v.y*a.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var v=t.parts[a],d=v.mass!==1/0?v.mass:1;o.mass+=d,o.area+=v.area,o.inertia+=v.inertia,o.centre=i.add(o.centre,i.mult(v.position,d))}return o.centre=i.div(o.centre,o.mass),o}})()},function(x,A,u){var e={};x.exports=e;var s=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,n){for(var g=n*n*n,l=0;l<i.length;l++){var f=i[l],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),o=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*o,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*g?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(i,n){for(var g=n*n*n,l=0;l<i.length;l++){var f=i[l];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,o=r.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var a=t.isSleeping&&!t.isStatic?t:o,v=a===t?o:t;!a.isStatic&&v.motion>e._motionWakeThreshold*g&&e.set(a,!1)}}}},e.set=function(i,n){var g=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,g||s.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,g&&s.trigger(i,"sleepEnd"))}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(9);(function(){var n=[],g={overlap:0,axis:null},l={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(g,f.vertices,r.vertices,f.axes),g.overlap<=0||(e._overlapAxes(l,r.vertices,f.vertices,r.axes),l.overlap<=0))return null;var o=t&&t.table[i.id(f,r)],a;o?a=o.collision:(a=e.create(f,r),a.collided=!0,a.bodyA=f.id<r.id?f:r,a.bodyB=f.id<r.id?r:f,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),f=a.bodyA,r=a.bodyB;var v;g.overlap<l.overlap?v=g:v=l;var d=a.normal,T=a.supports,C=v.axis,h=C.x,m=C.y;h*(r.position.x-f.position.x)+m*(r.position.y-f.position.y)<0?(d.x=h,d.y=m):(d.x=-h,d.y=-m),a.tangent.x=-d.y,a.tangent.y=d.x,a.depth=v.overlap,a.penetration.x=d.x*a.depth,a.penetration.y=d.y*a.depth;var p=e._findSupports(f,r,d,1),c=0;if(s.contains(f.vertices,p[0])&&(T[c++]=p[0]),s.contains(f.vertices,p[1])&&(T[c++]=p[1]),c<2){var M=e._findSupports(r,f,d,-1);s.contains(r.vertices,M[0])&&(T[c++]=M[0]),c<2&&s.contains(r.vertices,M[1])&&(T[c++]=M[1])}return c===0&&(T[c++]=p[0]),T.length=c,a},e._overlapAxes=function(f,r,t,o){var a=r.length,v=t.length,d=r[0].x,T=r[0].y,C=t[0].x,h=t[0].y,m=o.length,p=Number.MAX_VALUE,c=0,M,P,I,w,E,B;for(E=0;E<m;E++){var R=o[E],L=R.x,k=R.y,D=d*L+T*k,V=C*L+h*k,b=D,N=V;for(B=1;B<a;B+=1)w=r[B].x*L+r[B].y*k,w>b?b=w:w<D&&(D=w);for(B=1;B<v;B+=1)w=t[B].x*L+t[B].y*k,w>N?N=w:w<V&&(V=w);if(P=b-V,I=N-D,M=P<I?P:I,M<p&&(p=M,c=E,M<=0))break}f.axis=o[c],f.overlap=p},e._projectToAxis=function(f,r,t){for(var o=r[0].x*t.x+r[0].y*t.y,a=o,v=1;v<r.length;v+=1){var d=r[v].x*t.x+r[v].y*t.y;d>a?a=d:d<o&&(o=d)}f.min=o,f.max=a},e._findSupports=function(f,r,t,o){var a=r.vertices,v=a.length,d=f.position.x,T=f.position.y,C=t.x*o,h=t.y*o,m=Number.MAX_VALUE,p,c,M,P,I;for(I=0;I<v;I+=1)c=a[I],P=C*(d-c.x)+h*(T-c.y),P<m&&(m=P,p=c);return M=a[(v+p.index-1)%v],m=C*(d-M.x)+h*(T-M.y),c=a[(p.index+1)%v],C*(d-c.x)+h*(T-c.y)<m?(n[0]=p,n[1]=c,n):(n[0]=p,n[1]=M,n)}})()},function(x,A,u){var e={};x.exports=e;var s=u(17);(function(){e.create=function(i,n){var g=i.bodyA,l=i.bodyB,f={id:e.id(g,l),bodyA:g,bodyB:l,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:g.isSensor||l.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,i,n),f},e.update=function(i,n,g){var l=i.contacts,f=n.supports,r=i.activeContacts,t=n.parentA,o=n.parentB,a=t.vertices.length;i.isActive=!0,i.timeUpdated=g,i.collision=n,i.separation=n.depth,i.inverseMass=t.inverseMass+o.inverseMass,i.friction=t.friction<o.friction?t.friction:o.friction,i.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,i.restitution=t.restitution>o.restitution?t.restitution:o.restitution,i.slop=t.slop>o.slop?t.slop:o.slop,n.pair=i,r.length=0;for(var v=0;v<f.length;v++){var d=f[v],T=d.body===t?d.index:a+d.index,C=l[T];C?r.push(C):r.push(l[T]=s.create(d))}},e.setActive=function(i,n,g){n?(i.isActive=!0,i.timeUpdated=g):(i.isActive=!1,i.activeContacts.length=0)},e.id=function(i,n){return i.id<n.id?"A"+i.id+"B"+n.id:"A"+n.id+"B"+i.id}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(2),n=u(7),g=u(1),l=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,v=i.magnitude(i.sub(o,a));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var d={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(d.type="pin",d.anchors=!1):t.stiffness<.9&&(d.type="spring"),t.render=f.extend(d,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var o=r[t],a=o.constraintImpulse;o.isStatic||a.x===0&&a.y===0&&a.angle===0||(o.position.x+=a.x,o.position.y+=a.y,o.angle+=a.angle)}},e.solveAll=function(r,t){for(var o=0;o<r.length;o+=1){var a=r[o],v=!a.bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(v||d)&&e.solve(r[o],t)}for(o=0;o<r.length;o+=1)a=r[o],v=!a.bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic,!v&&!d&&e.solve(r[o],t)},e.solve=function(r,t){var o=r.bodyA,a=r.bodyB,v=r.pointA,d=r.pointB;if(!(!o&&!a)){o&&!o.isStatic&&(i.rotate(v,o.angle-r.angleA,v),r.angleA=o.angle),a&&!a.isStatic&&(i.rotate(d,a.angle-r.angleB,d),r.angleB=a.angle);var T=v,C=d;if(o&&(T=i.add(o.position,v)),a&&(C=i.add(a.position,d)),!(!T||!C)){var h=i.sub(T,C),m=i.magnitude(h);m<e._minLength&&(m=e._minLength);var p=(m-r.length)/m,c=r.stiffness<1?r.stiffness*t:r.stiffness,M=i.mult(h,p*c),P=(o?o.inverseMass:0)+(a?a.inverseMass:0),I=(o?o.inverseInertia:0)+(a?a.inverseInertia:0),w=P+I,E,B,R,L,k;if(r.damping){var D=i.create();R=i.div(h,m),k=i.sub(a&&i.sub(a.position,a.positionPrev)||D,o&&i.sub(o.position,o.positionPrev)||D),L=i.dot(R,k)}o&&!o.isStatic&&(B=o.inverseMass/P,o.constraintImpulse.x-=M.x*B,o.constraintImpulse.y-=M.y*B,o.position.x-=M.x*B,o.position.y-=M.y*B,r.damping&&(o.positionPrev.x-=r.damping*R.x*L*B,o.positionPrev.y-=r.damping*R.y*L*B),E=i.cross(v,M)/w*e._torqueDampen*o.inverseInertia*(1-r.angularStiffness),o.constraintImpulse.angle-=E,o.angle-=E),a&&!a.isStatic&&(B=a.inverseMass/P,a.constraintImpulse.x+=M.x*B,a.constraintImpulse.y+=M.y*B,a.position.x+=M.x*B,a.position.y+=M.y*B,r.damping&&(a.positionPrev.x+=r.damping*R.x*L*B,a.positionPrev.y+=r.damping*R.y*L*B),E=i.cross(d,M)/w*e._torqueDampen*a.inverseInertia*(1-r.angularStiffness),a.constraintImpulse.angle+=E,a.angle+=E)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var o=r[t],a=o.constraintImpulse;if(!(o.isStatic||a.x===0&&a.y===0&&a.angle===0)){n.set(o,!1);for(var v=0;v<o.parts.length;v++){var d=o.parts[v];s.translate(d.vertices,a),v>0&&(d.position.x+=a.x,d.position.y+=a.y),a.angle!==0&&(s.rotate(d.vertices,a.angle,o.position),l.rotate(d.axes,a.angle),v>0&&i.rotateAbout(d.position,a.angle,o.position,d.position)),g.update(d.bounds,d.vertices,o.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(x,A,u){var e={};x.exports=e;var s=u(2),i=u(0);(function(){e.fromVertices=function(n){for(var g={},l=0;l<n.length;l++){var f=(l+1)%n.length,r=s.normalise({x:n[f].y-n[l].y,y:n[l].x-n[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),g[t]=r}return i.values(g)},e.rotate=function(n,g){if(g!==0)for(var l=Math.cos(g),f=Math.sin(g),r=0;r<n.length;r++){var t=n[r],o;o=t.x*l-t.y*f,t.y=t.x*f+t.y*l,t.x=o}}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(0),n=u(6),g=u(1),l=u(2);(function(){e.rectangle=function(f,r,t,o,a){a=a||{};var v={label:"Rectangle Body",position:{x:f,y:r},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(a.chamfer){var d=a.chamfer;v.vertices=s.chamfer(v.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete a.chamfer}return n.create(i.extend({},v,a))},e.trapezoid=function(f,r,t,o,a,v){v=v||{},a*=.5;var d=(1-a*2)*t,T=t*a,C=T+d,h=C+T,m;a<.5?m="L 0 0 L "+T+" "+-o+" L "+C+" "+-o+" L "+h+" 0":m="L 0 0 L "+C+" "+-o+" L "+h+" 0";var p={label:"Trapezoid Body",position:{x:f,y:r},vertices:s.fromPath(m)};if(v.chamfer){var c=v.chamfer;p.vertices=s.chamfer(p.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete v.chamfer}return n.create(i.extend({},p,v))},e.circle=function(f,r,t,o,a){o=o||{};var v={label:"Circle Body",circleRadius:t};a=a||25;var d=Math.ceil(Math.max(10,Math.min(a,t)));return d%2===1&&(d+=1),e.polygon(f,r,d,t,i.extend({},v,o))},e.polygon=function(f,r,t,o,a){if(a=a||{},t<3)return e.circle(f,r,o,a);for(var v=2*Math.PI/t,d="",T=v*.5,C=0;C<t;C+=1){var h=T+C*v,m=Math.cos(h)*o,p=Math.sin(h)*o;d+="L "+m.toFixed(3)+" "+p.toFixed(3)+" "}var c={label:"Polygon Body",position:{x:f,y:r},vertices:s.fromPath(d)};if(a.chamfer){var M=a.chamfer;c.vertices=s.chamfer(c.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete a.chamfer}return n.create(i.extend({},c,a))},e.fromVertices=function(f,r,t,o,a,v,d,T){var C=i.getDecomp(),h,m,p,c,M,P,I,w,E,B,R;for(h=Boolean(C&&C.quickDecomp),o=o||{},p=[],a=typeof a!="undefined"?a:!1,v=typeof v!="undefined"?v:.01,d=typeof d!="undefined"?d:10,T=typeof T!="undefined"?T:.01,i.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(P=t[B],c=s.isConvex(P),M=!c,M&&!h&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),c||!h)c?P=s.clockwiseSort(P):P=s.hull(P),p.push({position:{x:f,y:r},vertices:P});else{var L=P.map(function(J){return[J.x,J.y]});C.makeCCW(L),v!==!1&&C.removeCollinearPoints(L,v),T!==!1&&C.removeDuplicatePoints&&C.removeDuplicatePoints(L,T);var k=C.quickDecomp(L);for(I=0;I<k.length;I++){var D=k[I],V=D.map(function(J){return{x:J[0],y:J[1]}});d>0&&s.area(V)<d||p.push({position:s.centre(V),vertices:V})}}for(I=0;I<p.length;I++)p[I]=n.create(i.extend(p[I],o));if(a){var b=5;for(I=0;I<p.length;I++){var N=p[I];for(w=I+1;w<p.length;w++){var G=p[w];if(g.overlaps(N.bounds,G.bounds)){var Z=N.vertices,H=G.vertices;for(E=0;E<N.vertices.length;E++)for(R=0;R<G.vertices.length;R++){var te=l.magnitudeSquared(l.sub(Z[(E+1)%Z.length],H[R])),K=l.magnitudeSquared(l.sub(Z[E],H[(R+1)%H.length]));te<b&&K<b&&(Z[E].isInternal=!0,H[R].isInternal=!0)}}}}}return p.length>1?(m=n.create(i.extend({parts:p.slice(0)},o)),n.setPosition(m,{x:f,y:r}),m):p[0]}})()},function(x,A,u){var e={};x.exports=e;var s=u(0);(function(){e.create=function(i){var n={};return i||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=i||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(g){var l=e._getRelativeMousePosition(g,n.element,n.pixelRatio),f=g.changedTouches;f&&(n.button=0,g.preventDefault()),n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=g},n.mousedown=function(g){var l=e._getRelativeMousePosition(g,n.element,n.pixelRatio),f=g.changedTouches;f?(n.button=0,g.preventDefault()):n.button=g.button,n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=g},n.mouseup=function(g){var l=e._getRelativeMousePosition(g,n.element,n.pixelRatio),f=g.changedTouches;f&&g.preventDefault(),n.button=-1,n.absolute.x=l.x,n.absolute.y=l.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=g},n.mousewheel=function(g){n.wheelDelta=Math.max(-1,Math.min(1,g.wheelDelta||-g.detail)),g.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(i,n){i.element=n,n.addEventListener("mousemove",i.mousemove),n.addEventListener("mousedown",i.mousedown),n.addEventListener("mouseup",i.mouseup),n.addEventListener("mousewheel",i.mousewheel),n.addEventListener("DOMMouseScroll",i.mousewheel),n.addEventListener("touchmove",i.mousemove),n.addEventListener("touchstart",i.mousedown),n.addEventListener("touchend",i.mouseup)},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,n){i.offset.x=n.x,i.offset.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,n){i.scale.x=n.x,i.scale.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,n,g){var l=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,o=i.changedTouches,a,v;return o?(a=o[0].pageX-l.left-r,v=o[0].pageY-l.top-t):(a=i.pageX-l.left-r,v=i.pageY-l.top-t),{x:a/(n.clientWidth/(n.width||n.clientWidth)*g),y:v/(n.clientHeight/(n.height||n.clientHeight)*g)}}})()},function(x,A,u){var e={};x.exports=e;var s=u(0),i=u(8);(function(){e.create=function(n){var g={bodies:[],pairs:null};return s.extend(g,n)},e.setBodies=function(n,g){n.bodies=g.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var g=[],l=n.pairs,f=n.bodies,r=f.length,t=e.canCollide,o=i.collides,a,v;for(f.sort(e._compareBoundsX),a=0;a<r;a++){var d=f[a],T=d.bounds,C=d.bounds.max.x,h=d.bounds.max.y,m=d.bounds.min.y,p=d.isStatic||d.isSleeping,c=d.parts.length,M=c===1;for(v=a+1;v<r;v++){var P=f[v],I=P.bounds;if(I.min.x>C)break;if(!(h<I.min.y||m>I.max.y)&&!(p&&(P.isStatic||P.isSleeping))&&!!t(d.collisionFilter,P.collisionFilter)){var w=P.parts.length;if(M&&w===1){var E=o(d,P,l);E&&g.push(E)}else for(var B=c>1?1:0,R=w>1?1:0,L=B;L<c;L++)for(var k=d.parts[L],T=k.bounds,D=R;D<w;D++){var V=P.parts[D],I=V.bounds;if(!(T.min.x>I.max.x||T.max.x<I.min.x||T.max.y<I.min.y||T.min.y>I.max.y)){var E=o(k,V,l);E&&g.push(E)}}}}}return g},e.canCollide=function(n,g){return n.group===g.group&&n.group!==0?n.group>0:(n.mask&g.category)!==0&&(g.mask&n.category)!==0},e._compareBoundsX=function(n,g){return n.bounds.min.x-g.bounds.min.x}})()},function(x,A,u){var e={};x.exports=e;var s=u(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||s.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var n=e._registry[i.name],g=e.versionParse(i.version).number,l=e.versionParse(n.version).number;g>l?(s.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(i)),e._registry[i.name]=i):g<l?s.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(i)):i!==n&&s.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,n){return i.used.indexOf(n)>-1},e.isFor=function(i,n){var g=i.for&&e.dependencyParse(i.for);return!i.for||n.name===g.name&&e.versionSatisfies(n.version,g.range)},e.use=function(i,n){if(i.uses=(i.uses||[]).concat(n||[]),i.uses.length===0){s.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var g=e.dependencies(i),l=s.topologicalSort(g),f=[],r=0;r<l.length;r+=1)if(l[r]!==i.name){var t=e.resolve(l[r]);if(!t){f.push("\u274C "+l[r]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),i.used.push(t.name))}f.length>0&&s.info(f.join("  "))},e.dependencies=function(i,n){var g=e.dependencyParse(i),l=g.name;if(n=n||{},!(l in n)){i=e.resolve(i)||i,n[l]=s.map(i.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),o=e.resolve(r);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(g)+"."),o._warned=!0,i._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(g),"could not be resolved."),i._warned=!0),t.name});for(var f=0;f<n[l].length;f+=1)e.dependencies(n[l][f],n);return n}},e.dependencyParse=function(i){if(s.isString(i)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(i)||s.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(i)||s.warn("Plugin.versionParse:",i,"is not a valid version or range.");var g=n.exec(i),l=Number(g[4]),f=Number(g[5]),r=Number(g[6]);return{isRange:Boolean(g[1]||g[2]),version:g[3],range:i,operator:g[1]||g[2]||"",major:l,minor:f,patch:r,parts:[l,f,r],prerelease:g[7],number:l*1e8+f*1e4+r}},e.versionSatisfies=function(i,n){n=n||"*";var g=e.versionParse(n),l=e.versionParse(i);if(g.isRange){if(g.operator==="*"||i==="*")return!0;if(g.operator===">")return l.number>g.number;if(g.operator===">=")return l.number>=g.number;if(g.operator==="~")return l.major===g.major&&l.minor===g.minor&&l.patch>=g.patch;if(g.operator==="^")return g.major>0?l.major===g.major&&l.number>=g.number:g.minor>0?l.minor===g.minor&&l.patch>=g.patch:l.patch===g.patch}return i===n||i==="*"}})()},function(x,A,u){var e={};x.exports=e;var s=u(0),i=u(5),n=u(1),g=u(4),l=u(2),f=u(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},p=s.extend(m,h);return p.canvas&&(p.canvas.width=p.options.width||p.canvas.width,p.canvas.height=p.options.height||p.canvas.height),p.mouse=h.mouse,p.engine=h.engine,p.canvas=p.canvas||v(p.options.width,p.options.height),p.context=p.canvas.getContext("2d"),p.textures={},p.bounds=p.bounds||{min:{x:0,y:0},max:{x:p.canvas.width,y:p.canvas.height}},p.options.showBroadphase=!1,p.options.pixelRatio!==1&&e.setPixelRatio(p,p.options.pixelRatio),s.isElement(p.element)?p.element.appendChild(p.canvas):p.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),p},e.run=function(h){(function m(p){h.frameRequestId=r(m),o(h,p),e.world(h,p),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,p),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,p)})()},e.stop=function(h){t(h.frameRequestId)},e.setPixelRatio=function(h,m){var p=h.options,c=h.canvas;m==="auto"&&(m=d(c)),p.pixelRatio=m,c.setAttribute("data-pixel-ratio",m),c.width=p.width*m,c.height=p.height*m,c.style.width=p.width+"px",c.style.height=p.height+"px"},e.lookAt=function(h,m,p,c){c=typeof c!="undefined"?c:!0,m=s.isArray(m)?m:[m],p=p||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<m.length;P+=1){var I=m[P],w=I.bounds?I.bounds.min:I.min||I.position||I,E=I.bounds?I.bounds.max:I.max||I.position||I;w&&E&&(w.x<M.min.x&&(M.min.x=w.x),E.x>M.max.x&&(M.max.x=E.x),w.y<M.min.y&&(M.min.y=w.y),E.y>M.max.y&&(M.max.y=E.y))}var B=M.max.x-M.min.x+2*p.x,R=M.max.y-M.min.y+2*p.y,L=h.canvas.height,k=h.canvas.width,D=k/L,V=B/R,b=1,N=1;V>D?N=V/D:b=D/V,h.options.hasBounds=!0,h.bounds.min.x=M.min.x,h.bounds.max.x=M.min.x+B*b,h.bounds.min.y=M.min.y,h.bounds.max.y=M.min.y+R*N,c&&(h.bounds.min.x+=B*.5-B*b*.5,h.bounds.max.x+=B*.5-B*b*.5,h.bounds.min.y+=R*.5-R*N*.5,h.bounds.max.y+=R*.5-R*N*.5),h.bounds.min.x-=p.x,h.bounds.max.x-=p.x,h.bounds.min.y-=p.y,h.bounds.max.y-=p.y,h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),f.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){var m=h.bounds.max.x-h.bounds.min.x,p=h.bounds.max.y-h.bounds.min.y,c=m/h.options.width,M=p/h.options.height;h.context.setTransform(h.options.pixelRatio/c,0,0,h.options.pixelRatio/M,0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,m){var p=s.now(),c=h.engine,M=c.world,P=h.canvas,I=h.context,w=h.options,E=h.timing,B=i.allBodies(M),R=i.allConstraints(M),L=w.wireframes?w.wireframeBackground:w.background,k=[],D=[],V,b={timestamp:c.timing.timestamp};if(g.trigger(h,"beforeRender",b),h.currentBackground!==L&&C(h,L),I.globalCompositeOperation="source-in",I.fillStyle="transparent",I.fillRect(0,0,P.width,P.height),I.globalCompositeOperation="source-over",w.hasBounds){for(V=0;V<B.length;V++){var N=B[V];n.overlaps(N.bounds,h.bounds)&&k.push(N)}for(V=0;V<R.length;V++){var G=R[V],Z=G.bodyA,H=G.bodyB,te=G.pointA,K=G.pointB;Z&&(te=l.add(Z.position,G.pointA)),H&&(K=l.add(H.position,G.pointB)),!(!te||!K)&&(n.contains(h.bounds,te)||n.contains(h.bounds,K))&&D.push(G)}e.startViewTransform(h),h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),f.setOffset(h.mouse,h.bounds.min))}else D=R,k=B,h.options.pixelRatio!==1&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!w.wireframes||c.enableSleeping&&w.showSleeping?e.bodies(h,k,I):(w.showConvexHulls&&e.bodyConvexHulls(h,k,I),e.bodyWireframes(h,k,I)),w.showBounds&&e.bodyBounds(h,k,I),(w.showAxes||w.showAngleIndicator)&&e.bodyAxes(h,k,I),w.showPositions&&e.bodyPositions(h,k,I),w.showVelocity&&e.bodyVelocity(h,k,I),w.showIds&&e.bodyIds(h,k,I),w.showSeparations&&e.separations(h,c.pairs.list,I),w.showCollisions&&e.collisions(h,c.pairs.list,I),w.showVertexNumbers&&e.vertexNumbers(h,k,I),w.showMousePosition&&e.mousePosition(h,h.mouse,I),e.constraints(D,I),w.hasBounds&&e.endViewTransform(h),g.trigger(h,"afterRender",b),E.lastElapsed=s.now()-p},e.stats=function(h,m,p){for(var c=h.engine,M=c.world,P=i.allBodies(M),I=0,w=55,E=44,B=0,R=0,L=0;L<P.length;L+=1)I+=P[L].parts.length;var k={Part:I,Body:P.length,Cons:i.allConstraints(M).length,Comp:i.allComposites(M).length,Pair:c.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(B,R,w*5.5,E),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var D in k){var V=k[D];m.fillStyle="#aaa",m.fillText(D,B+w,R+8),m.fillStyle="#eee",m.fillText(V,B+w,R+26),B+=w}},e.performance=function(h,m){var p=h.engine,c=h.timing,M=c.deltaHistory,P=c.elapsedHistory,I=c.timestampElapsedHistory,w=c.engineDeltaHistory,E=c.engineElapsedHistory,B=p.timing.lastDelta,R=a(M),L=a(P),k=a(w),D=a(E),V=a(I),b=V/R||0,N=1e3/R||0,G=4,Z=12,H=60,te=34,K=10,J=69;m.fillStyle="#0e0f19",m.fillRect(0,50,Z*4+H*5+22,te),e.status(m,K,J,H,G,M.length,Math.round(N)+" fps",N/e._goodFps,function(Y){return M[Y]/R-1}),e.status(m,K+Z+H,J,H,G,w.length,B.toFixed(2)+" dt",e._goodDelta/B,function(Y){return w[Y]/k-1}),e.status(m,K+(Z+H)*2,J,H,G,E.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(Y){return E[Y]/D-1}),e.status(m,K+(Z+H)*3,J,H,G,P.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(Y){return P[Y]/L-1}),e.status(m,K+(Z+H)*4,J,H,G,I.length,b.toFixed(2)+" x",b*b*b,function(Y){return(I[Y]/M[Y]/b||0)-1})},e.status=function(h,m,p,c,M,P,I,w,E){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(m,p+7,c,1),h.beginPath(),h.moveTo(m,p+7-M*s.clamp(.4*E(0),-2,2));for(var B=0;B<c;B+=1)h.lineTo(m+B,p+7-(B<P?M*s.clamp(.4*E(B),-2,2):0));h.stroke(),h.fillStyle="hsl("+s.clamp(25+95*w,0,120)+",100%,60%)",h.fillRect(m,p-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(I,m+c,p-5)},e.constraints=function(h,m){for(var p=m,c=0;c<h.length;c++){var M=h[c];if(!(!M.render.visible||!M.pointA||!M.pointB)){var P=M.bodyA,I=M.bodyB,w,E;if(P?w=l.add(P.position,M.pointA):w=M.pointA,M.render.type==="pin")p.beginPath(),p.arc(w.x,w.y,3,0,2*Math.PI),p.closePath();else{if(I?E=l.add(I.position,M.pointB):E=M.pointB,p.beginPath(),p.moveTo(w.x,w.y),M.render.type==="spring")for(var B=l.sub(E,w),R=l.perp(l.normalise(B)),L=Math.ceil(s.clamp(M.length/5,12,20)),k,D=1;D<L;D+=1)k=D%2===0?1:-1,p.lineTo(w.x+B.x*(D/L)+R.x*k*4,w.y+B.y*(D/L)+R.y*k*4);p.lineTo(E.x,E.y)}M.render.lineWidth&&(p.lineWidth=M.render.lineWidth,p.strokeStyle=M.render.strokeStyle,p.stroke()),M.render.anchors&&(p.fillStyle=M.render.strokeStyle,p.beginPath(),p.arc(w.x,w.y,3,0,2*Math.PI),p.arc(E.x,E.y,3,0,2*Math.PI),p.closePath(),p.fill())}}},e.bodies=function(h,m,p){var c=p;h.engine;var M=h.options,P=M.showInternalEdges||!M.wireframes,I,w,E,B;for(E=0;E<m.length;E++)if(I=m[E],!!I.render.visible){for(B=I.parts.length>1?1:0;B<I.parts.length;B++)if(w=I.parts[B],!!w.render.visible){if(M.showSleeping&&I.isSleeping?c.globalAlpha=.5*w.render.opacity:w.render.opacity!==1&&(c.globalAlpha=w.render.opacity),w.render.sprite&&w.render.sprite.texture&&!M.wireframes){var R=w.render.sprite,L=T(h,R.texture);c.translate(w.position.x,w.position.y),c.rotate(w.angle),c.drawImage(L,L.width*-R.xOffset*R.xScale,L.height*-R.yOffset*R.yScale,L.width*R.xScale,L.height*R.yScale),c.rotate(-w.angle),c.translate(-w.position.x,-w.position.y)}else{if(w.circleRadius)c.beginPath(),c.arc(w.position.x,w.position.y,w.circleRadius,0,2*Math.PI);else{c.beginPath(),c.moveTo(w.vertices[0].x,w.vertices[0].y);for(var k=1;k<w.vertices.length;k++)!w.vertices[k-1].isInternal||P?c.lineTo(w.vertices[k].x,w.vertices[k].y):c.moveTo(w.vertices[k].x,w.vertices[k].y),w.vertices[k].isInternal&&!P&&c.moveTo(w.vertices[(k+1)%w.vertices.length].x,w.vertices[(k+1)%w.vertices.length].y);c.lineTo(w.vertices[0].x,w.vertices[0].y),c.closePath()}M.wireframes?(c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()):(c.fillStyle=w.render.fillStyle,w.render.lineWidth&&(c.lineWidth=w.render.lineWidth,c.strokeStyle=w.render.strokeStyle,c.stroke()),c.fill())}c.globalAlpha=1}}},e.bodyWireframes=function(h,m,p){var c=p,M=h.options.showInternalEdges,P,I,w,E,B;for(c.beginPath(),w=0;w<m.length;w++)if(P=m[w],!!P.render.visible)for(B=P.parts.length>1?1:0;B<P.parts.length;B++){for(I=P.parts[B],c.moveTo(I.vertices[0].x,I.vertices[0].y),E=1;E<I.vertices.length;E++)!I.vertices[E-1].isInternal||M?c.lineTo(I.vertices[E].x,I.vertices[E].y):c.moveTo(I.vertices[E].x,I.vertices[E].y),I.vertices[E].isInternal&&!M&&c.moveTo(I.vertices[(E+1)%I.vertices.length].x,I.vertices[(E+1)%I.vertices.length].y);c.lineTo(I.vertices[0].x,I.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},e.bodyConvexHulls=function(h,m,p){var c=p,M,P,I;for(c.beginPath(),P=0;P<m.length;P++)if(M=m[P],!(!M.render.visible||M.parts.length===1)){for(c.moveTo(M.vertices[0].x,M.vertices[0].y),I=1;I<M.vertices.length;I++)c.lineTo(M.vertices[I].x,M.vertices[I].y);c.lineTo(M.vertices[0].x,M.vertices[0].y)}c.lineWidth=1,c.strokeStyle="rgba(255,255,255,0.2)",c.stroke()},e.vertexNumbers=function(h,m,p){var c=p,M,P,I;for(M=0;M<m.length;M++){var w=m[M].parts;for(I=w.length>1?1:0;I<w.length;I++){var E=w[I];for(P=0;P<E.vertices.length;P++)c.fillStyle="rgba(255,255,255,0.2)",c.fillText(M+"_"+P,E.position.x+(E.vertices[P].x-E.position.x)*.8,E.position.y+(E.vertices[P].y-E.position.y)*.8)}}},e.mousePosition=function(h,m,p){var c=p;c.fillStyle="rgba(255,255,255,0.8)",c.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(h,m,p){var c=p;h.engine;var M=h.options;c.beginPath();for(var P=0;P<m.length;P++){var I=m[P];if(I.render.visible)for(var w=m[P].parts,E=w.length>1?1:0;E<w.length;E++){var B=w[E];c.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}M.wireframes?c.strokeStyle="rgba(255,255,255,0.08)":c.strokeStyle="rgba(0,0,0,0.1)",c.lineWidth=1,c.stroke()},e.bodyAxes=function(h,m,p){var c=p;h.engine;var M=h.options,P,I,w,E;for(c.beginPath(),I=0;I<m.length;I++){var B=m[I],R=B.parts;if(!!B.render.visible)if(M.showAxes)for(w=R.length>1?1:0;w<R.length;w++)for(P=R[w],E=0;E<P.axes.length;E++){var L=P.axes[E];c.moveTo(P.position.x,P.position.y),c.lineTo(P.position.x+L.x*20,P.position.y+L.y*20)}else for(w=R.length>1?1:0;w<R.length;w++)for(P=R[w],E=0;E<P.axes.length;E++)c.moveTo(P.position.x,P.position.y),c.lineTo((P.vertices[0].x+P.vertices[P.vertices.length-1].x)/2,(P.vertices[0].y+P.vertices[P.vertices.length-1].y)/2)}M.wireframes?(c.strokeStyle="indianred",c.lineWidth=1):(c.strokeStyle="rgba(255, 255, 255, 0.4)",c.globalCompositeOperation="overlay",c.lineWidth=2),c.stroke(),c.globalCompositeOperation="source-over"},e.bodyPositions=function(h,m,p){var c=p;h.engine;var M=h.options,P,I,w,E;for(c.beginPath(),w=0;w<m.length;w++)if(P=m[w],!!P.render.visible)for(E=0;E<P.parts.length;E++)I=P.parts[E],c.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),c.closePath();for(M.wireframes?c.fillStyle="indianred":c.fillStyle="rgba(0,0,0,0.5)",c.fill(),c.beginPath(),w=0;w<m.length;w++)P=m[w],P.render.visible&&(c.arc(P.positionPrev.x,P.positionPrev.y,2,0,2*Math.PI,!1),c.closePath());c.fillStyle="rgba(255,165,0,0.8)",c.fill()},e.bodyVelocity=function(h,m,p){var c=p;c.beginPath();for(var M=0;M<m.length;M++){var P=m[M];!P.render.visible||(c.moveTo(P.position.x,P.position.y),c.lineTo(P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2))}c.lineWidth=3,c.strokeStyle="cornflowerblue",c.stroke()},e.bodyIds=function(h,m,p){var c=p,M,P;for(M=0;M<m.length;M++)if(!!m[M].render.visible){var I=m[M].parts;for(P=I.length>1?1:0;P<I.length;P++){var w=I[P];c.font="12px Arial",c.fillStyle="rgba(255,255,255,0.5)",c.fillText(w.id,w.position.x+10,w.position.y-10)}}},e.collisions=function(h,m,p){var c=p,M=h.options,P,I,w,E;for(c.beginPath(),w=0;w<m.length;w++)if(P=m[w],!!P.isActive)for(I=P.collision,E=0;E<P.activeContacts.length;E++){var B=P.activeContacts[E],R=B.vertex;c.rect(R.x-1.5,R.y-1.5,3.5,3.5)}for(M.wireframes?c.fillStyle="rgba(255,255,255,0.7)":c.fillStyle="orange",c.fill(),c.beginPath(),w=0;w<m.length;w++)if(P=m[w],!!P.isActive&&(I=P.collision,P.activeContacts.length>0)){var L=P.activeContacts[0].vertex.x,k=P.activeContacts[0].vertex.y;P.activeContacts.length===2&&(L=(P.activeContacts[0].vertex.x+P.activeContacts[1].vertex.x)/2,k=(P.activeContacts[0].vertex.y+P.activeContacts[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic===!0?c.moveTo(L-I.normal.x*8,k-I.normal.y*8):c.moveTo(L+I.normal.x*8,k+I.normal.y*8),c.lineTo(L,k)}M.wireframes?c.strokeStyle="rgba(255,165,0,0.7)":c.strokeStyle="orange",c.lineWidth=1,c.stroke()},e.separations=function(h,m,p){var c=p,M=h.options,P,I,w,E,B;for(c.beginPath(),B=0;B<m.length;B++)if(P=m[B],!!P.isActive){I=P.collision,w=I.bodyA,E=I.bodyB;var R=1;!E.isStatic&&!w.isStatic&&(R=.5),E.isStatic&&(R=0),c.moveTo(E.position.x,E.position.y),c.lineTo(E.position.x-I.penetration.x*R,E.position.y-I.penetration.y*R),R=1,!E.isStatic&&!w.isStatic&&(R=.5),w.isStatic&&(R=0),c.moveTo(w.position.x,w.position.y),c.lineTo(w.position.x+I.penetration.x*R,w.position.y+I.penetration.y*R)}M.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},e.inspector=function(h,m){h.engine;var p=h.selected,c=h.render,M=c.options,P;if(M.hasBounds){var I=c.bounds.max.x-c.bounds.min.x,w=c.bounds.max.y-c.bounds.min.y,E=I/c.options.width,B=w/c.options.height;m.scale(1/E,1/B),m.translate(-c.bounds.min.x,-c.bounds.min.y)}for(var R=0;R<p.length;R++){var L=p[R].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),L.type){case"body":P=L.bounds,m.beginPath(),m.rect(Math.floor(P.min.x-3),Math.floor(P.min.y-3),Math.floor(P.max.x-P.min.x+6),Math.floor(P.max.y-P.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var k=L.pointA;L.bodyA&&(k=L.pointB),m.beginPath(),m.arc(k.x,k.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}h.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",P=h.selectBounds,m.beginPath(),m.rect(Math.floor(P.min.x),Math.floor(P.min.y),Math.floor(P.max.x-P.min.x),Math.floor(P.max.y-P.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),M.hasBounds&&m.setTransform(1,0,0,1,0,0)};var o=function(h,m){var p=h.engine,c=h.timing,M=c.historySize,P=p.timing.timestamp;c.delta=m-c.lastTime||e._goodDelta,c.lastTime=m,c.timestampElapsed=P-c.lastTimestamp||0,c.lastTimestamp=P,c.deltaHistory.unshift(c.delta),c.deltaHistory.length=Math.min(c.deltaHistory.length,M),c.engineDeltaHistory.unshift(p.timing.lastDelta),c.engineDeltaHistory.length=Math.min(c.engineDeltaHistory.length,M),c.timestampElapsedHistory.unshift(c.timestampElapsed),c.timestampElapsedHistory.length=Math.min(c.timestampElapsedHistory.length,M),c.engineElapsedHistory.unshift(p.timing.lastElapsed),c.engineElapsedHistory.length=Math.min(c.engineElapsedHistory.length,M),c.elapsedHistory.unshift(c.lastElapsed),c.elapsedHistory.length=Math.min(c.elapsedHistory.length,M)},a=function(h){for(var m=0,p=0;p<h.length;p+=1)m+=h[p];return m/h.length||0},v=function(h,m){var p=document.createElement("canvas");return p.width=h,p.height=m,p.oncontextmenu=function(){return!1},p.onselectstart=function(){return!1},p},d=function(h){var m=h.getContext("2d"),p=window.devicePixelRatio||1,c=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return p/c},T=function(h,m){var p=h.textures[m];return p||(p=h.textures[m]=new Image,p.src=m,p)},C=function(h,m){var p=m;/(jpg|gif|png)$/.test(m)&&(p="url("+m+")"),h.canvas.style.background=p,h.canvas.style.backgroundSize="contain",h.currentBackground=m}})()},function(x,A){var u={};x.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(x,A,u){var e={};x.exports=e;var s=u(7),i=u(19),n=u(14),g=u(20),l=u(4),f=u(5),r=u(10),t=u(0),o=u(6);(function(){e.create=function(a){a=a||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=t.extend(v,a);return d.world=a.world||f.create({label:"World"}),d.pairs=a.pairs||g.create(),d.detector=a.detector||n.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},e.update=function(a,v,d){var T=t.now();v=v||1e3/60,d=d||1;var C=a.world,h=a.detector,m=a.pairs,p=a.timing,c=p.timestamp,M;p.timestamp+=v*p.timeScale,p.lastDelta=v*p.timeScale;var P={timestamp:p.timestamp};l.trigger(a,"beforeUpdate",P);var I=f.allBodies(C),w=f.allConstraints(C);for(C.isModified&&n.setBodies(h,I),C.isModified&&f.setModified(C,!1,!1,!0),a.enableSleeping&&s.update(I,p.timeScale),e._bodiesApplyGravity(I,a.gravity),e._bodiesUpdate(I,v,p.timeScale,d,C.bounds),r.preSolveAll(I),M=0;M<a.constraintIterations;M++)r.solveAll(w,p.timeScale);r.postSolveAll(I),h.pairs=a.pairs;var E=n.collisions(h);for(g.update(m,E,c),a.enableSleeping&&s.afterCollisions(m.list,p.timeScale),m.collisionStart.length>0&&l.trigger(a,"collisionStart",{pairs:m.collisionStart}),i.preSolvePosition(m.list),M=0;M<a.positionIterations;M++)i.solvePosition(m.list,p.timeScale);for(i.postSolvePosition(I),r.preSolveAll(I),M=0;M<a.constraintIterations;M++)r.solveAll(w,p.timeScale);for(r.postSolveAll(I),i.preSolveVelocity(m.list),M=0;M<a.velocityIterations;M++)i.solveVelocity(m.list,p.timeScale);return m.collisionActive.length>0&&l.trigger(a,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&l.trigger(a,"collisionEnd",{pairs:m.collisionEnd}),e._bodiesClearForces(I),l.trigger(a,"afterUpdate",P),a.timing.lastElapsed=t.now()-T,a},e.merge=function(a,v){if(t.extend(a,v),v.world){a.world=v.world,e.clear(a);for(var d=f.allBodies(a.world),T=0;T<d.length;T++){var C=d[T];s.set(C,!1),C.id=t.nextId()}}},e.clear=function(a){g.clear(a.pairs),n.clear(a.detector)},e._bodiesClearForces=function(a){for(var v=0;v<a.length;v++){var d=a[v];d.force.x=0,d.force.y=0,d.torque=0}},e._bodiesApplyGravity=function(a,v){var d=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||d===0))for(var T=0;T<a.length;T++){var C=a[T];C.isStatic||C.isSleeping||(C.force.y+=C.mass*v.y*d,C.force.x+=C.mass*v.x*d)}},e._bodiesUpdate=function(a,v,d,T,C){for(var h=0;h<a.length;h++){var m=a[h];m.isStatic||m.isSleeping||o.update(m,v,d,T)}}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var g,l,f,r=n.length;for(g=0;g<r;g++)l=n[g],l.isActive&&(f=l.activeContacts.length,l.collision.parentA.totalContacts+=f,l.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,g){var l,f,r,t,o,a,v,d,T=e._positionDampen,C=n.length;for(l=0;l<C;l++)f=n[l],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,a=r.normal,f.separation=a.x*(o.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+a.y*(o.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(l=0;l<C;l++)f=n[l],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,a=r.normal,d=(f.separation-f.slop)*g,(t.isStatic||o.isStatic)&&(d*=2),t.isStatic||t.isSleeping||(v=T/t.totalContacts,t.positionImpulse.x+=a.x*d*v,t.positionImpulse.y+=a.y*d*v),o.isStatic||o.isSleeping||(v=T/o.totalContacts,o.positionImpulse.x-=a.x*d*v,o.positionImpulse.y-=a.y*d*v))},e.postSolvePosition=function(n){for(var g=e._positionWarming,l=n.length,f=s.translate,r=i.update,t=0;t<l;t++){var o=n[t],a=o.positionImpulse,v=a.x,d=a.y,T=o.velocity;if(o.totalContacts=0,v!==0||d!==0){for(var C=0;C<o.parts.length;C++){var h=o.parts[C];f(h.vertices,a),r(h.bounds,h.vertices,T),h.position.x+=v,h.position.y+=d}o.positionPrev.x+=v,o.positionPrev.y+=d,v*T.x+d*T.y<0?(a.x=0,a.y=0):(a.x*=g,a.y*=g)}}},e.preSolveVelocity=function(n){var g=n.length,l,f;for(l=0;l<g;l++){var r=n[l];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,o=t.length,a=r.collision,v=a.parentA,d=a.parentB,T=a.normal,C=a.tangent;for(f=0;f<o;f++){var h=t[f],m=h.vertex,p=h.normalImpulse,c=h.tangentImpulse;if(p!==0||c!==0){var M=T.x*p+C.x*c,P=T.y*p+C.y*c;v.isStatic||v.isSleeping||(v.positionPrev.x+=M*v.inverseMass,v.positionPrev.y+=P*v.inverseMass,v.anglePrev+=v.inverseInertia*((m.x-v.position.x)*P-(m.y-v.position.y)*M)),d.isStatic||d.isSleeping||(d.positionPrev.x-=M*d.inverseMass,d.positionPrev.y-=P*d.inverseMass,d.anglePrev-=d.inverseInertia*((m.x-d.position.x)*P-(m.y-d.position.y)*M))}}}}},e.solveVelocity=function(n,g){var l=g*g,f=e._restingThresh*l,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*l,o=Number.MAX_VALUE,a=n.length,v,d,T,C;for(T=0;T<a;T++){var h=n[T];if(!(!h.isActive||h.isSensor)){var m=h.collision,p=m.parentA,c=m.parentB,M=p.velocity,P=c.velocity,I=m.normal.x,w=m.normal.y,E=m.tangent.x,B=m.tangent.y,R=h.activeContacts,L=R.length,k=1/L,D=p.inverseMass+c.inverseMass,V=h.friction*h.frictionStatic*r*l;for(M.x=p.position.x-p.positionPrev.x,M.y=p.position.y-p.positionPrev.y,P.x=c.position.x-c.positionPrev.x,P.y=c.position.y-c.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,c.angularVelocity=c.angle-c.anglePrev,C=0;C<L;C++){var b=R[C],N=b.vertex,G=N.x-p.position.x,Z=N.y-p.position.y,H=N.x-c.position.x,te=N.y-c.position.y,K=M.x-Z*p.angularVelocity,J=M.y+G*p.angularVelocity,Y=P.x-te*c.angularVelocity,xt=P.y+H*c.angularVelocity,qe=K-Y,je=J-xt,ge=I*qe+w*je,re=E*qe+B*je,_e=h.separation+ge,He=Math.min(_e,1);He=_e<0?0:He;var et=He*V;re>et||-re>et?(d=re>0?re:-re,v=h.friction*(re>0?1:-1)*l,v<-d?v=-d:v>d&&(v=d)):(v=re,d=o);var tt=G*w-Z*I,nt=H*w-te*I,it=k/(D+p.inverseInertia*tt*tt+c.inverseInertia*nt*nt),Ie=(1+h.restitution)*ge*it;if(v*=it,ge*ge>f&&ge<0)b.normalImpulse=0;else{var yt=b.normalImpulse;b.normalImpulse+=Ie,b.normalImpulse=Math.min(b.normalImpulse,0),Ie=b.normalImpulse-yt}if(re*re>t)b.tangentImpulse=0;else{var St=b.tangentImpulse;b.tangentImpulse+=v,b.tangentImpulse<-d&&(b.tangentImpulse=-d),b.tangentImpulse>d&&(b.tangentImpulse=d),v=b.tangentImpulse-St}var Te=I*Ie+E*v,Ee=w*Ie+B*v;p.isStatic||p.isSleeping||(p.positionPrev.x+=Te*p.inverseMass,p.positionPrev.y+=Ee*p.inverseMass,p.anglePrev+=(G*Ee-Z*Te)*p.inverseInertia),c.isStatic||c.isSleeping||(c.positionPrev.x-=Te*c.inverseMass,c.positionPrev.y-=Ee*c.inverseMass,c.anglePrev-=(H*Ee-te*Te)*c.inverseInertia)}}}}})()},function(x,A,u){var e={};x.exports=e;var s=u(9),i=u(0);(function(){e.create=function(n){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,g,l){var f=n.list,r=f.length,t=n.table,o=g.length,a=n.collisionStart,v=n.collisionEnd,d=n.collisionActive,T,C,h,m;for(a.length=0,v.length=0,d.length=0,m=0;m<r;m++)f[m].confirmedActive=!1;for(m=0;m<o;m++)T=g[m],h=T.pair,h?(h.isActive?d.push(h):a.push(h),s.update(h,T,l),h.confirmedActive=!0):(h=s.create(T,l),t[h.id]=h,a.push(h),f.push(h));var p=[];for(r=f.length,m=0;m<r;m++)h=f[m],h.confirmedActive||(s.setActive(h,!1,l),v.push(h),!h.collision.bodyA.isSleeping&&!h.collision.bodyB.isSleeping&&p.push(m));for(m=0;m<p.length;m++)C=p[m]-m,h=f[C],f.splice(C,1),delete t[h.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(x,A,u){var e=x.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(x,A,u){var e={};x.exports=e;var s=u(15),i=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,g){return n=n.replace(/^Matter./,""),i.chainPathBefore(e,n,g)},e.after=function(n,g){return n=n.replace(/^Matter./,""),i.chainPathAfter(e,n,g)}})()},function(x,A,u){var e={};x.exports=e;var s=u(5),i=u(10),n=u(0),g=u(6),l=u(12),f=n.deprecated;(function(){e.stack=function(r,t,o,a,v,d,T){for(var C=s.create({label:"Stack"}),h=r,m=t,p,c=0,M=0;M<a;M++){for(var P=0,I=0;I<o;I++){var w=T(h,m,I,M,p,c);if(w){var E=w.bounds.max.y-w.bounds.min.y,B=w.bounds.max.x-w.bounds.min.x;E>P&&(P=E),g.translate(w,{x:B*.5,y:E*.5}),h=w.bounds.max.x+v,s.addBody(C,w),p=w,c+=1}else h+=v}m+=P+d,h=r}return C},e.chain=function(r,t,o,a,v,d){for(var T=r.bodies,C=1;C<T.length;C++){var h=T[C-1],m=T[C],p=h.bounds.max.y-h.bounds.min.y,c=h.bounds.max.x-h.bounds.min.x,M=m.bounds.max.y-m.bounds.min.y,P=m.bounds.max.x-m.bounds.min.x,I={bodyA:h,pointA:{x:c*t,y:p*o},bodyB:m,pointB:{x:P*a,y:M*v}},w=n.extend(I,d);s.addConstraint(r,i.create(w))}return r.label+=" Chain",r},e.mesh=function(r,t,o,a,v){var d=r.bodies,T,C,h,m,p;for(T=0;T<o;T++){for(C=1;C<t;C++)h=d[C-1+T*t],m=d[C+T*t],s.addConstraint(r,i.create(n.extend({bodyA:h,bodyB:m},v)));if(T>0)for(C=0;C<t;C++)h=d[C+(T-1)*t],m=d[C+T*t],s.addConstraint(r,i.create(n.extend({bodyA:h,bodyB:m},v))),a&&C>0&&(p=d[C-1+(T-1)*t],s.addConstraint(r,i.create(n.extend({bodyA:p,bodyB:m},v)))),a&&C<t-1&&(p=d[C+1+(T-1)*t],s.addConstraint(r,i.create(n.extend({bodyA:p,bodyB:m},v))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,o,a,v,d,T){return e.stack(r,t,o,a,v,d,function(C,h,m,p,c,M){var P=Math.min(a,Math.ceil(o/2)),I=c?c.bounds.max.x-c.bounds.min.x:0;if(!(p>P)){p=P-p;var w=p,E=o-1-p;if(!(m<w||m>E)){M===1&&g.translate(c,{x:(m+(o%2===1?1:-1))*I,y:0});var B=c?m*I:0;return T(r+B+m*v,h,m,p,c,M)}}})},e.newtonsCradle=function(r,t,o,a,v){for(var d=s.create({label:"Newtons Cradle"}),T=0;T<o;T++){var C=1.9,h=l.circle(r+T*(a*C),t+v,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=i.create({pointA:{x:r+T*(a*C),y:t},bodyB:h});s.addBody(d,h),s.addConstraint(d,m)}return d},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,o,a,v){var d=g.nextGroup(!0),T=20,C=-o*.5+T,h=o*.5-T,m=0,p=s.create({label:"Car"}),c=l.rectangle(r,t,o,a,{collisionFilter:{group:d},chamfer:{radius:a*.5},density:2e-4}),M=l.circle(r+C,t+m,v,{collisionFilter:{group:d},friction:.8}),P=l.circle(r+h,t+m,v,{collisionFilter:{group:d},friction:.8}),I=i.create({bodyB:c,pointB:{x:C,y:m},bodyA:M,stiffness:1,length:0}),w=i.create({bodyB:c,pointB:{x:h,y:m},bodyA:P,stiffness:1,length:0});return s.addBody(p,c),s.addBody(p,M),s.addBody(p,P),s.addConstraint(p,I),s.addConstraint(p,w),p},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,o,a,v,d,T,C,h,m){h=n.extend({inertia:1/0},h),m=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var p=e.stack(r,t,o,a,v,d,function(c,M){return l.circle(c,M,C,h)});return e.mesh(p,o,a,T,m),p.label="Soft Body",p},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(x,A,u){var e={};x.exports=e;var s=u(9),i=u(0),n=i.deprecated;(function(){e.create=function(g){var l={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(l,g)},e.update=function(g,l,f,r){var t,o,a,v=f.world,d=g.buckets,T,C,h=!1;for(t=0;t<l.length;t++){var m=l[t];if(!(m.isSleeping&&!r)&&!(v.bounds&&(m.bounds.max.x<v.bounds.min.x||m.bounds.min.x>v.bounds.max.x||m.bounds.max.y<v.bounds.min.y||m.bounds.min.y>v.bounds.max.y))){var p=e._getRegion(g,m);if(!m.region||p.id!==m.region.id||r){(!m.region||r)&&(m.region=p);var c=e._regionUnion(p,m.region);for(o=c.startCol;o<=c.endCol;o++)for(a=c.startRow;a<=c.endRow;a++){C=e._getBucketId(o,a),T=d[C];var M=o>=p.startCol&&o<=p.endCol&&a>=p.startRow&&a<=p.endRow,P=o>=m.region.startCol&&o<=m.region.endCol&&a>=m.region.startRow&&a<=m.region.endRow;!M&&P&&P&&T&&e._bucketRemoveBody(g,T,m),(m.region===p||M&&!P||r)&&(T||(T=e._createBucket(d,C)),e._bucketAddBody(g,T,m))}m.region=p,h=!0}}}h&&(g.pairsList=e._createActivePairsList(g))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(g){g.buckets={},g.pairs={},g.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(g,l){var f=Math.min(g.startCol,l.startCol),r=Math.max(g.endCol,l.endCol),t=Math.min(g.startRow,l.startRow),o=Math.max(g.endRow,l.endRow);return e._createRegion(f,r,t,o)},e._getRegion=function(g,l){var f=l.bounds,r=Math.floor(f.min.x/g.bucketWidth),t=Math.floor(f.max.x/g.bucketWidth),o=Math.floor(f.min.y/g.bucketHeight),a=Math.floor(f.max.y/g.bucketHeight);return e._createRegion(r,t,o,a)},e._createRegion=function(g,l,f,r){return{id:g+","+l+","+f+","+r,startCol:g,endCol:l,startRow:f,endRow:r}},e._getBucketId=function(g,l){return"C"+g+"R"+l},e._createBucket=function(g,l){var f=g[l]=[];return f},e._bucketAddBody=function(g,l,f){var r=g.pairs,t=s.id,o=l.length,a;for(a=0;a<o;a++){var v=l[a];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var d=t(f,v),T=r[d];T?T[2]+=1:r[d]=[f,v,1]}}l.push(f)},e._bucketRemoveBody=function(g,l,f){var r=g.pairs,t=s.id,o;l.splice(i.indexOf(l,f),1);var a=l.length;for(o=0;o<a;o++){var v=r[t(f,l[o])];v&&(v[2]-=1)}},e._createActivePairsList=function(g){var l,f=g.pairs,r=i.keys(f),t=r.length,o=[],a;for(a=0;a<t;a++)l=f[r[a]],l[2]>0?o.push(l):delete f[r[a]];return o}})()},function(x,A,u){var e={};x.exports=e;var s=u(3),i=u(7),n=u(13),g=u(4),l=u(14),f=u(10),r=u(5),t=u(0),o=u(1);(function(){e.create=function(a,v){var d=(a?a.mouse:null)||(v?v.mouse:null);d||(a&&a.render&&a.render.canvas?d=n.create(a.render.canvas):v&&v.element?d=n.create(v.element):(d=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var T=f.create({label:"Mouse Constraint",pointA:d.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),C={type:"mouseConstraint",mouse:d,element:null,body:null,constraint:T,collisionFilter:{category:1,mask:4294967295,group:0}},h=t.extend(C,v);return g.on(a,"beforeUpdate",function(){var m=r.allBodies(a.world);e.update(h,m),e._triggerEvents(h)}),h},e.update=function(a,v){var d=a.mouse,T=a.constraint,C=a.body;if(d.button===0){if(T.bodyB)i.set(T.bodyB,!1),T.pointA=d.position;else for(var h=0;h<v.length;h++)if(C=v[h],o.contains(C.bounds,d.position)&&l.canCollide(C.collisionFilter,a.collisionFilter))for(var m=C.parts.length>1?1:0;m<C.parts.length;m++){var p=C.parts[m];if(s.contains(p.vertices,d.position)){T.pointA=d.position,T.bodyB=a.body=C,T.pointB={x:d.position.x-C.position.x,y:d.position.y-C.position.y},T.angleB=C.angle,i.set(C,!1),g.trigger(a,"startdrag",{mouse:d,body:C});break}}}else T.bodyB=a.body=null,T.pointB=null,C&&g.trigger(a,"enddrag",{mouse:d,body:C})},e._triggerEvents=function(a){var v=a.mouse,d=v.sourceEvents;d.mousemove&&g.trigger(a,"mousemove",{mouse:v}),d.mousedown&&g.trigger(a,"mousedown",{mouse:v}),d.mouseup&&g.trigger(a,"mouseup",{mouse:v}),n.clearSourceEvents(v)}})()},function(x,A,u){var e={};x.exports=e;var s=u(2),i=u(8),n=u(1),g=u(12),l=u(3);(function(){e.collides=function(f,r){for(var t=[],o=r.length,a=f.bounds,v=i.collides,d=n.overlaps,T=0;T<o;T++){var C=r[T],h=C.parts.length,m=h===1?0:1;if(d(C.bounds,a))for(var p=m;p<h;p++){var c=C.parts[p];if(d(c.bounds,a)){var M=v(c,f);if(M){t.push(M);break}}}}return t},e.ray=function(f,r,t,o){o=o||1e-100;for(var a=s.angle(r,t),v=s.magnitude(s.sub(r,t)),d=(t.x+r.x)*.5,T=(t.y+r.y)*.5,C=g.rectangle(d,T,v,o,{angle:a}),h=e.collides(C,f),m=0;m<h.length;m+=1){var p=h[m];p.body=p.bodyB=p.bodyA}return h},e.region=function(f,r,t){for(var o=[],a=0;a<f.length;a++){var v=f[a],d=n.overlaps(v.bounds,r);(d&&!t||!d&&t)&&o.push(v)}return o},e.point=function(f,r){for(var t=[],o=0;o<f.length;o++){var a=f[o];if(n.contains(a.bounds,r))for(var v=a.parts.length===1?0:1;v<a.parts.length;v++){var d=a.parts[v];if(n.contains(d.bounds,r)&&l.contains(d.vertices,r)){t.push(a);break}}}return t}})()},function(x,A,u){var e={};x.exports=e;var s=u(4),i=u(18),n=u(0);(function(){var g,l;if(typeof window!="undefined"&&(g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!g){var f;g=function(r){f=setTimeout(function(){r(n.now())},1e3/60)},l=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=n.extend(t,r);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function o(a){r.frameRequestId=g(o),a&&r.enabled&&e.tick(r,t,a)}(),r},e.tick=function(r,t,o){var a=t.timing,v=1,d,T={timestamp:a.timestamp};s.trigger(r,"beforeTick",T),r.isFixed?d=r.delta:(d=o-r.timePrev||r.delta,r.timePrev=o,r.deltaHistory.push(d),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),d=Math.min.apply(null,r.deltaHistory),d=d<r.deltaMin?r.deltaMin:d,d=d>r.deltaMax?r.deltaMax:d,v=d/r.delta,r.delta=d),r.timeScalePrev!==0&&(v*=a.timeScale/r.timeScalePrev),a.timeScale===0&&(v=0),r.timeScalePrev=a.timeScale,r.correction=v,r.frameCounter+=1,o-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((o-r.counterTimestamp)/1e3),r.counterTimestamp=o,r.frameCounter=0),s.trigger(r,"tick",T),s.trigger(r,"beforeUpdate",T),i.update(t,d,v),s.trigger(r,"afterUpdate",T),s.trigger(r,"afterTick",T)},e.stop=function(r){l(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(x,A,u){var e={};x.exports=e;var s=u(8),i=u(0),n=i.deprecated;(function(){e.collides=function(g,l){return s.collides(g,l)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(x,A,u){var e={};x.exports=e,u(1);var s=u(0);(function(){e.pathToVertices=function(i,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var g,l,f,r,t,o,a,v,d,T,C=[],h,m,p=0,c=0,M=0;n=n||15;var P=function(w,E,B){var R=B%2===1&&B>1;if(!d||w!=d.x||E!=d.y){d&&R?(h=d.x,m=d.y):(h=0,m=0);var L={x:h+w,y:m+E};(R||!d)&&(d=L),C.push(L),c=h+w,M=m+E}},I=function(w){var E=w.pathSegTypeAsLetter.toUpperCase();if(E!=="Z"){switch(E){case"M":case"L":case"T":case"C":case"S":case"Q":c=w.x,M=w.y;break;case"H":c=w.x;break;case"V":M=w.y;break}P(c,M,w.pathSegType)}};for(e._svgPathToAbsolute(i),f=i.getTotalLength(),o=[],g=0;g<i.pathSegList.numberOfItems;g+=1)o.push(i.pathSegList.getItem(g));for(a=o.concat();p<f;){if(T=i.getPathSegAtLength(p),t=o[T],t!=v){for(;a.length&&a[0]!=t;)I(a.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=i.getPointAtLength(p),P(r.x,r.y,0);break}p+=n}for(g=0,l=a.length;g<l;++g)I(a[g]);return C},e._svgPathToAbsolute=function(i){for(var n,g,l,f,r,t,o=i.pathSegList,a=0,v=0,d=o.numberOfItems,T=0;T<d;++T){var C=o.getItem(T),h=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in C&&(a=C.x),"y"in C&&(v=C.y);else switch("x1"in C&&(l=a+C.x1),"x2"in C&&(r=a+C.x2),"y1"in C&&(f=v+C.y1),"y2"in C&&(t=v+C.y2),"x"in C&&(a+=C.x),"y"in C&&(v+=C.y),h){case"m":o.replaceItem(i.createSVGPathSegMovetoAbs(a,v),T);break;case"l":o.replaceItem(i.createSVGPathSegLinetoAbs(a,v),T);break;case"h":o.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(a),T);break;case"v":o.replaceItem(i.createSVGPathSegLinetoVerticalAbs(v),T);break;case"c":o.replaceItem(i.createSVGPathSegCurvetoCubicAbs(a,v,l,f,r,t),T);break;case"s":o.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(a,v,r,t),T);break;case"q":o.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(a,v,l,f),T);break;case"t":o.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),T);break;case"a":o.replaceItem(i.createSVGPathSegArcAbs(a,v,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),T);break;case"z":case"Z":a=n,v=g;break}(h=="M"||h=="m")&&(n=a,g=v)}}})()},function(x,A,u){var e={};x.exports=e;var s=u(5);u(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(ut);var Ye=Rt(ut.exports),kt={decomp:Ut,quickDecomp:me,isSimple:zt,removeCollinearPoints:Qt,removeDuplicatePoints:Zt,makeCCW:Ot};function Lt(S,y,x){x=x||0;var A=[0,0],u,e,s,i,n,g,l;return u=S[1][1]-S[0][1],e=S[0][0]-S[1][0],s=u*S[0][0]+e*S[0][1],i=y[1][1]-y[0][1],n=y[0][0]-y[1][0],g=i*y[0][0]+n*y[0][1],l=u*n-i*e,be(l,0,x)||(A[0]=(n*s-e*g)/l,A[1]=(u*g-i*s)/l),A}function $e(S,y,x,A){var u=y[0]-S[0],e=y[1]-S[1],s=A[0]-x[0],i=A[1]-x[1];if(s*e-i*u===0)return!1;var n=(u*(x[1]-S[1])+e*(S[0]-x[0]))/(s*e-i*u),g=(s*(S[1]-x[1])+i*(x[0]-S[0]))/(i*u-s*e);return n>=0&&n<=1&&g>=0&&g<=1}function Ae(S,y,x){return(y[0]-S[0])*(x[1]-S[1])-(x[0]-S[0])*(y[1]-S[1])}function Re(S,y,x){return Ae(S,y,x)>0}function Ue(S,y,x){return Ae(S,y,x)>=0}function ct(S,y,x){return Ae(S,y,x)<0}function pe(S,y,x){return Ae(S,y,x)<=0}var Ft=[],Dt=[];function bt(S,y,x,A){if(A){var u=Ft,e=Dt;u[0]=y[0]-S[0],u[1]=y[1]-S[1],e[0]=x[0]-y[0],e[1]=x[1]-y[1];var s=u[0]*e[0]+u[1]*e[1],i=Math.sqrt(u[0]*u[0]+u[1]*u[1]),n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),g=Math.acos(s/(i*n));return g<A}else return Ae(S,y,x)===0}function xe(S,y){var x=y[0]-S[0],A=y[1]-S[1];return x*x+A*A}function F(S,y){var x=S.length;return S[y<0?y%x+x:y%x]}function Vt(S){S.length=0}function q(S,y,x,A){for(var u=x;u<A;u++)S.push(y[u])}function Ot(S){for(var y=0,x=S,A=1;A<S.length;++A)(x[A][1]<x[y][1]||x[A][1]===x[y][1]&&x[A][0]>x[y][0])&&(y=A);return Re(F(S,y-1),F(S,y),F(S,y+1))?!1:(Nt(S),!0)}function Nt(S){for(var y=[],x=S.length,A=0;A!==x;A++)y.push(S.pop());for(var A=0;A!==x;A++)S[A]=y[A]}function vt(S,y){return ct(F(S,y-1),F(S,y),F(S,y+1))}var Ht=[],Wt=[];function Gt(S,y,x){var A,u,e=Ht,s=Wt;if(Ue(F(S,y+1),F(S,y),F(S,x))&&pe(F(S,y-1),F(S,y),F(S,x)))return!1;u=xe(F(S,y),F(S,x));for(var i=0;i!==S.length;++i)if(!((i+1)%S.length===y||i===y)&&Ue(F(S,y),F(S,x),F(S,i+1))&&pe(F(S,y),F(S,x),F(S,i))&&(e[0]=F(S,y),e[1]=F(S,x),s[0]=F(S,i),s[1]=F(S,i+1),A=Lt(e,s),xe(F(S,y),A)<u))return!1;return!0}function $t(S,y,x){for(var A=0;A!==S.length;++A)if(!(A===y||A===x||(A+1)%S.length===y||(A+1)%S.length===x)&&$e(F(S,y),F(S,x),F(S,A),F(S,A+1)))return!1;return!0}function De(S,y,x,A){var u=A||[];if(Vt(u),y<x)for(var e=y;e<=x;e++)u.push(S[e]);else{for(var e=0;e<=x;e++)u.push(S[e]);for(var e=y;e<S.length;e++)u.push(S[e])}return u}function ze(S){for(var y=[],x=[],A=[],u=[],e=Number.MAX_VALUE,s=0;s<S.length;++s)if(vt(S,s)){for(var i=0;i<S.length;++i)if(Gt(S,s,i)){x=ze(De(S,s,i,u)),A=ze(De(S,i,s,u));for(var n=0;n<A.length;n++)x.push(A[n]);x.length<e&&(y=x,e=x.length,y.push([F(S,s),F(S,i)]))}}return y}function Ut(S){var y=ze(S);return y.length>0?ht(S,y):[S]}function ht(S,y){if(y.length===0)return[S];if(y instanceof Array&&y.length&&y[0]instanceof Array&&y[0].length===2&&y[0][0]instanceof Array){for(var x=[S],A=0;A<y.length;A++)for(var u=y[A],e=0;e<x.length;e++){var s=x[e],i=ht(s,u);if(i){x.splice(e,1),x.push(i[0],i[1]);break}}return x}else{var u=y,A=S.indexOf(u[0]),e=S.indexOf(u[1]);return A!==-1&&e!==-1?[De(S,A,e),De(S,e,A)]:!1}}function zt(S){var y=S,x;for(x=0;x<y.length-1;x++)for(var A=0;A<x-1;A++)if($e(y[x],y[x+1],y[A],y[A+1]))return!1;for(x=1;x<y.length-2;x++)if($e(y[0],y[y.length-1],y[x],y[x+1]))return!1;return!0}function at(S,y,x,A,u){u=u||0;var e=y[1]-S[1],s=S[0]-y[0],i=e*S[0]+s*S[1],n=A[1]-x[1],g=x[0]-A[0],l=n*x[0]+g*x[1],f=e*g-n*s;return be(f,0,u)?[0,0]:[(g*i-s*l)/f,(e*l-n*i)/f]}function me(S,y,x,A,u,e,s){e=e||100,s=s||0,u=u||25,y=typeof y!="undefined"?y:[],x=x||[],A=A||[];var i=[0,0],n=[0,0],g=[0,0],l=0,f=0,r=0,t=0,o=0,a=0,v=0,d=[],T=[],C=S,h=S;if(h.length<3)return y;if(s++,s>e)return console.warn("quickDecomp: max level ("+e+") reached."),y;for(var m=0;m<S.length;++m)if(vt(C,m)){x.push(C[m]),l=f=Number.MAX_VALUE;for(var p=0;p<S.length;++p)Re(F(C,m-1),F(C,m),F(C,p))&&pe(F(C,m-1),F(C,m),F(C,p-1))&&(g=at(F(C,m-1),F(C,m),F(C,p),F(C,p-1)),ct(F(C,m+1),F(C,m),g)&&(r=xe(C[m],g),r<f&&(f=r,n=g,a=p))),Re(F(C,m+1),F(C,m),F(C,p+1))&&pe(F(C,m+1),F(C,m),F(C,p))&&(g=at(F(C,m+1),F(C,m),F(C,p),F(C,p+1)),Re(F(C,m-1),F(C,m),g)&&(r=xe(C[m],g),r<l&&(l=r,i=g,o=p)));if(a===(o+1)%S.length)g[0]=(n[0]+i[0])/2,g[1]=(n[1]+i[1])/2,A.push(g),m<o?(q(d,C,m,o+1),d.push(g),T.push(g),a!==0&&q(T,C,a,C.length),q(T,C,0,m+1)):(m!==0&&q(d,C,m,C.length),q(d,C,0,o+1),d.push(g),T.push(g),q(T,C,a,m+1));else{if(a>o&&(o+=S.length),t=Number.MAX_VALUE,o<a)return y;for(var p=a;p<=o;++p)Ue(F(C,m-1),F(C,m),F(C,p))&&pe(F(C,m+1),F(C,m),F(C,p))&&(r=xe(F(C,m),F(C,p)),r<t&&$t(C,m,p)&&(t=r,v=p%S.length));m<v?(q(d,C,m,v+1),v!==0&&q(T,C,v,h.length),q(T,C,0,m+1)):(m!==0&&q(d,C,m,h.length),q(d,C,0,v+1),q(T,C,v,m+1))}return d.length<T.length?(me(d,y,x,A,u,e,s),me(T,y,x,A,u,e,s)):(me(T,y,x,A,u,e,s),me(d,y,x,A,u,e,s)),y}return y.push(S),y}function Qt(S,y){for(var x=0,A=S.length-1;S.length>3&&A>=0;--A)bt(F(S,A-1),F(S,A),F(S,A+1),y)&&(S.splice(A%S.length,1),x++);return x}function Zt(S,y){for(var x=S.length-1;x>=1;--x)for(var A=S[x],u=x-1;u>=0;--u)if(Kt(A,S[u],y)){S.splice(x,1);continue}}function be(S,y,x){return x=x||0,Math.abs(S-y)<=x}function Kt(S,y,x){return be(S[0],y[0],x)&&be(S[1],y[1],x)}var Qe={exports:{}};(function(S,y){(function(x,A){{var u=A();S&&S.exports&&(y=S.exports=u),y.randomColor=u}})(Be,function(){var x=null,A={};d();var u=[],e=function(c){if(c=c||{},c.seed!==void 0&&c.seed!==null&&c.seed===parseInt(c.seed,10))x=c.seed;else if(typeof c.seed=="string")x=m(c.seed);else{if(c.seed!==void 0&&c.seed!==null)throw new TypeError("The seed value must be an integer or string");x=null}var M,P,I;if(c.count!==null&&c.count!==void 0){for(var w=c.count,E=[],B=0;B<c.count;B++)u.push(!1);for(c.count=null;w>E.length;){var R=e(c);x!==null&&(c.seed=x),E.push(R)}return c.count=w,E}return M=s(c),P=i(M,c),I=n(M,P,c),g([M,P,I],c)};function s(c){if(u.length>0){var M=p(c.hue),P=o(M),I=(M[1]-M[0])/u.length,w=parseInt((P-M[0])/I);u[w]===!0?w=(w+2)%u.length:u[w]=!0;var E=(M[0]+w*I)%359,B=(M[0]+(w+1)*I)%359;return M=[E,B],P=o(M),P<0&&(P=360+P),P}else{var M=f(c.hue);return P=o(M),P<0&&(P=360+P),P}}function i(c,M){if(M.hue==="monochrome")return 0;if(M.luminosity==="random")return o([0,100]);var P=r(c),I=P[0],w=P[1];switch(M.luminosity){case"bright":I=55;break;case"dark":I=w-10;break;case"light":w=55;break}return o([I,w])}function n(c,M,P){var I=l(c,M),w=100;switch(P.luminosity){case"dark":w=I+20;break;case"light":I=(w+I)/2;break;case"random":I=0,w=100;break}return o([I,w])}function g(c,M){switch(M.format){case"hsvArray":return c;case"hslArray":return h(c);case"hsl":var P=h(c);return"hsl("+P[0]+", "+P[1]+"%, "+P[2]+"%)";case"hsla":var I=h(c),B=M.alpha||Math.random();return"hsla("+I[0]+", "+I[1]+"%, "+I[2]+"%, "+B+")";case"rgbArray":return T(c);case"rgb":var w=T(c);return"rgb("+w.join(", ")+")";case"rgba":var E=T(c),B=M.alpha||Math.random();return"rgba("+E.join(", ")+", "+B+")";default:return a(c)}}function l(c,M){for(var P=t(c).lowerBounds,I=0;I<P.length-1;I++){var w=P[I][0],E=P[I][1],B=P[I+1][0],R=P[I+1][1];if(M>=w&&M<=B){var L=(R-E)/(B-w),k=E-L*w;return L*M+k}}return 0}function f(c){if(typeof parseInt(c)=="number"){var M=parseInt(c);if(M<360&&M>0)return[M,M]}if(typeof c=="string"){if(A[c]){var P=A[c];if(P.hueRange)return P.hueRange}else if(c.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var I=C(c)[0];return[I,I]}}return[0,360]}function r(c){return t(c).saturationRange}function t(c){c>=334&&c<=360&&(c-=360);for(var M in A){var P=A[M];if(P.hueRange&&c>=P.hueRange[0]&&c<=P.hueRange[1])return A[M]}return"Color not found"}function o(c){if(x===null){var M=.618033988749895,P=Math.random();return P+=M,P%=1,Math.floor(c[0]+P*(c[1]+1-c[0]))}else{var I=c[1]||1,w=c[0]||0;x=(x*9301+49297)%233280;var E=x/233280;return Math.floor(w+E*(I-w))}}function a(c){var M=T(c);function P(w){var E=w.toString(16);return E.length==1?"0"+E:E}var I="#"+P(M[0])+P(M[1])+P(M[2]);return I}function v(c,M,P){var I=P[0][0],w=P[P.length-1][0],E=P[P.length-1][1],B=P[0][1];A[c]={hueRange:M,lowerBounds:P,saturationRange:[I,w],brightnessRange:[E,B]}}function d(){v("monochrome",null,[[0,0],[100,0]]),v("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),v("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),v("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),v("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),v("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),v("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),v("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function T(c){var M=c[0];M===0&&(M=1),M===360&&(M=359),M=M/360;var P=c[1]/100,I=c[2]/100,w=Math.floor(M*6),E=M*6-w,B=I*(1-P),R=I*(1-E*P),L=I*(1-(1-E)*P),k=256,D=256,V=256;switch(w){case 0:k=I,D=L,V=B;break;case 1:k=R,D=I,V=B;break;case 2:k=B,D=I,V=L;break;case 3:k=B,D=R,V=I;break;case 4:k=L,D=B,V=I;break;case 5:k=I,D=B,V=R;break}var b=[Math.floor(k*255),Math.floor(D*255),Math.floor(V*255)];return b}function C(c){c=c.replace(/^#/,""),c=c.length===3?c.replace(/(.)/g,"$1$1"):c;var M=parseInt(c.substr(0,2),16)/255,P=parseInt(c.substr(2,2),16)/255,I=parseInt(c.substr(4,2),16)/255,w=Math.max(M,P,I),E=w-Math.min(M,P,I),B=w?E/w:0;switch(w){case M:return[60*((P-I)/E%6)||0,B,w];case P:return[60*((I-M)/E+2)||0,B,w];case I:return[60*((M-P)/E+4)||0,B,w]}}function h(c){var M=c[0],P=c[1]/100,I=c[2]/100,w=(2-P)*I;return[M,Math.round(P*I/(w<1?w:2-w)*1e4)/100,w/2*100]}function m(c){for(var M=0,P=0;P!==c.length&&!(M>=Number.MAX_SAFE_INTEGER);P++)M+=c.charCodeAt(P);return M}function p(c){if(isNaN(c)){if(typeof c=="string"){if(A[c]){var P=A[c];if(P.hueRange)return P.hueRange}else if(c.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var I=C(c)[0];return t(I).hueRange}}}else{var M=parseInt(c);if(M<360&&M>0)return t(c).hueRange}return[0,360]}return e})})(Qe,Qe.exports);var Jt=Qe.exports;const Ve=Bt(Ye.Engine.create()),{World:Xt,Events:Yt,Composite:qt}=Ye,ye=Me(.1),Oe=Me(1),Se=Me(1),ke=Me(),Ne=Me(!1),gt=new class{constructor(){this.bodies=[],this.subscriptions=[],Yt.on(de(Ve),"beforeUpdate",()=>{const y=qt.allBodies(de(Ve).world).filter(x=>x!==de(ke));this.bodies=y,this.subscriptions.forEach(x=>x(y))})}subscribe(S){return this.subscriptions=[...this.subscriptions,S],S(this.bodies),()=>{this.subscriptions=this.subscriptions.filter(y=>y!=S)}}},mt=ve(gt,S=>S.length),jt=S=>{for(let y=0;y<S;y++){const x=de(gt)[y];x!=null&&Xt.remove(de(Ve).world,x)}};function _t(S){let y,x,A,u,e;const s=S[3].default,i=Ze(s,S,S[2],null);return{c(){y=j("button"),i&&i.c(),this.h()},l(n){y=_(n,"BUTTON",{class:!0});var g=ie(y);i&&i.l(g),g.forEach(O),this.h()},h(){U(y,"class",x="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+S[0]),y.disabled=S[1]},m(n,g){$(n,y,g),i&&i.m(y,null),A=!0,u||(e=Le(y,"click",S[4]),u=!0)},p(n,[g]){i&&i.p&&(!A||g&4)&&Ke(i,s,n,n[2],A?Xe(s,n[2],g,null):Je(n[2]),null),(!A||g&1&&x!==(x="px-4 py-2 bg-gray-200 disabled:bg-gray-300 hover:bg-gray-300 active:bg-gray-400 rounded-lg diabled:active:bg-gray-300 "+n[0]))&&U(y,"class",x),(!A||g&2)&&(y.disabled=n[1])},i(n){A||(X(i,n),A=!0)},o(n){ee(i,n),A=!1},d(n){n&&O(y),i&&i.d(n),u=!1,e()}}}function en(S,y,x){let{$$slots:A={},$$scope:u}=y,{extraClasses:e=""}=y,{disabled:s=!1}=y;function i(n){ft.call(this,S,n)}return S.$$set=n=>{"extraClasses"in n&&x(0,e=n.extraClasses),"disabled"in n&&x(1,s=n.disabled),"$$scope"in n&&x(2,u=n.$$scope)},[e,s,u,A,i]}class dt extends we{constructor(y){super(),Ce(this,y,en,_t,Pe,{extraClasses:0,disabled:1})}}function tn(S){let y,x,A,u,e=Math.round(S[8]*100)/100+"",s,i,n=Math.round(S[5]*100)/100+"",g,l,f=S[5]==1?"":"s",r,t,o;return{c(){y=j("span"),x=z("("),A=z(S[6]),u=z(" -> "),s=z(e),i=z(" - "),g=z(n),l=z(" unit"),r=z(f),t=z("])"),this.h()},l(a){y=_(a,"SPAN",{class:!0});var v=ie(y);x=Q(v,"("),A=Q(v,S[6]),u=Q(v," -> "),s=Q(v,e),i=Q(v," - "),g=Q(v,n),l=Q(v," unit"),r=Q(v,f),t=Q(v,"])"),v.forEach(O),this.h()},h(){U(y,"class",o="text-xs "+(S[7]?"text-red-700":"text-green-700"))},m(a,v){$(a,y,v),W(y,x),W(y,A),W(y,u),W(y,s),W(y,i),W(y,g),W(y,l),W(y,r),W(y,t)},p(a,v){v&64&&he(A,a[6]),v&256&&e!==(e=Math.round(a[8]*100)/100+"")&&he(s,e),v&32&&n!==(n=Math.round(a[5]*100)/100+"")&&he(g,n),v&32&&f!==(f=a[5]==1?"":"s")&&he(r,f),v&128&&o!==(o="text-xs "+(a[7]?"text-red-700":"text-green-700"))&&U(y,"class",o)},d(a){a&&O(y)}}}function nn(S){let y,x,A;return{c(){y=j("span"),x=z("(Maxed Out!)"),this.h()},l(u){y=_(u,"SPAN",{class:!0});var e=ie(y);x=Q(e,"(Maxed Out!)"),e.forEach(O),this.h()},h(){U(y,"class",A="text-xs "+(S[7]?"text-gray-500":"text-gray-700"))},m(u,e){$(u,y,e),W(y,x)},p(u,e){e&128&&A!==(A="text-xs "+(u[7]?"text-gray-500":"text-gray-700"))&&U(y,"class",A)},d(u){u&&O(y)}}}function rn(S){let y,x,A,u,e;const s=S[11].default,i=Ze(s,S,S[12],null);function n(f,r){return(f[3]?f[4]>f[6]:f[4]<=f[6])?nn:tn}let g=n(S),l=g(S);return{c(){i&&i.c(),y=ae(),x=j("br"),A=ae(),l.c(),u=Fe()},l(f){i&&i.l(f),y=se(f),x=_(f,"BR",{}),A=se(f),l.l(f),u=Fe()},m(f,r){i&&i.m(f,r),$(f,y,r),$(f,x,r),$(f,A,r),l.m(f,r),$(f,u,r),e=!0},p(f,r){i&&i.p&&(!e||r&4096)&&Ke(i,s,f,f[12],e?Xe(s,f[12],r,null):Je(f[12]),null),g===(g=n(f))&&l?l.p(f,r):(l.d(1),l=g(f),l&&(l.c(),l.m(u.parentNode,u)))},i(f){e||(X(i,f),e=!0)},o(f){ee(i,f),e=!1},d(f){i&&i.d(f),f&&O(y),f&&O(x),f&&O(A),l.d(f),f&&O(u)}}}function an(S){let y,x;return y=new dt({props:{disabled:S[7],extraClasses:S[7]?"m-4 cursor-not-allowed text-gray-700":"m-4 transition-all active:scale-90",$$slots:{default:[rn]},$$scope:{ctx:S}}}),y.$on("click",S[9]),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),x=!0},p(A,[u]){const e={};u&128&&(e.disabled=A[7]),u&128&&(e.extraClasses=A[7]?"m-4 cursor-not-allowed text-gray-700":"m-4 transition-all active:scale-90"),u&4600&&(e.$$scope={dirty:u,ctx:A}),y.$set(e)},i(A){x||(X(y.$$.fragment,A),x=!0)},o(A){ee(y.$$.fragment,A),x=!1},d(A){ce(y,A)}}}function sn(S,y,x){let A,u,e=Ge,s=()=>(e(),e=We(v,c=>x(5,u=c)),v),i,n,g=Ge,l=()=>(g(),g=We(d,c=>x(6,n=c)),d),f,r=Ge,t=()=>(r(),r=We(T,c=>x(8,f=c)),T);ne(S,mt,c=>x(10,i=c)),S.$$.on_destroy.push(()=>e()),S.$$.on_destroy.push(()=>g()),S.$$.on_destroy.push(()=>r());let{$$slots:o={},$$scope:a}=y,{cost:v}=y;s();let{currentNumber:d}=y;l();let{nextNumber:T=ve(d,c=>c+1)}=y;t();let{negative:C=!1}=y,{max:h=C?0:Number.MAX_SAFE_INTEGER}=y;const m=wt();function p(){u>i||(jt(u),m("successfullPurchase"))}return S.$$set=c=>{"cost"in c&&s(x(0,v=c.cost)),"currentNumber"in c&&l(x(1,d=c.currentNumber)),"nextNumber"in c&&t(x(2,T=c.nextNumber)),"negative"in c&&x(3,C=c.negative),"max"in c&&x(4,h=c.max),"$$scope"in c&&x(12,a=c.$$scope)},S.$$.update=()=>{S.$$.dirty&1144&&x(7,A=u>i||(C?h>n:h<=n))},[v,d,T,C,h,u,n,A,f,p,i,o,a]}class pt extends we{constructor(y){super(),Ce(this,y,sn,an,Pe,{cost:0,currentNumber:1,nextNumber:2,negative:3,max:4})}}function on(S){let y;const x=S[5].default,A=Ze(x,S,S[8],null);return{c(){A&&A.c()},l(u){A&&A.l(u)},m(u,e){A&&A.m(u,e),y=!0},p(u,e){A&&A.p&&(!y||e&256)&&Ke(A,x,u,u[8],y?Xe(x,u[8],e,null):Je(u[8]),null)},i(u){y||(X(A,u),y=!0)},o(u){ee(A,u),y=!1},d(u){A&&A.d(u)}}}function ln(S){let y,x;return y=new pt({props:{cost:S[0],currentNumber:S[1],max:S[3],negative:S[4],nextNumber:ve(S[1],S[6]),$$slots:{default:[on]},$$scope:{ctx:S}}}),y.$on("successfullPurchase",S[7]),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),x=!0},p(A,[u]){const e={};u&1&&(e.cost=A[0]),u&2&&(e.currentNumber=A[1]),u&8&&(e.max=A[3]),u&16&&(e.negative=A[4]),u&6&&(e.nextNumber=ve(A[1],A[6])),u&256&&(e.$$scope={dirty:u,ctx:A}),y.$set(e)},i(A){x||(X(y.$$.fragment,A),x=!0)},o(A){ee(y.$$.fragment,A),x=!1},d(A){ce(y,A)}}}function fn(S,y,x){let{$$slots:A={},$$scope:u}=y,{cost:e}=y,{currentNumber:s}=y,{nextStep:i}=y,{max:n}=y,{negative:g=!1}=y;const l=r=>r+i;function f(r){ft.call(this,S,r)}return S.$$set=r=>{"cost"in r&&x(0,e=r.cost),"currentNumber"in r&&x(1,s=r.currentNumber),"nextStep"in r&&x(2,i=r.nextStep),"max"in r&&x(3,n=r.max),"negative"in r&&x(4,g=r.negative),"$$scope"in r&&x(8,u=r.$$scope)},[e,s,i,n,g,A,l,f,u]}class st extends we{constructor(y){super(),Ce(this,y,fn,ln,Pe,{cost:0,currentNumber:1,nextStep:2,max:3,negative:4})}}function un(S){const y=S-1;return y*y*y+1}function ot(S,{delay:y=0,duration:x=400,easing:A=un,x:u=0,y:e=0,opacity:s=0}={}){const i=getComputedStyle(S),n=+i.opacity,g=i.transform==="none"?"":i.transform,l=n*(1-s);return{delay:y,duration:x,easing:A,css:(f,r)=>`
			transform: ${g} translate(${(1-f)*u}px, ${(1-f)*e}px);
			opacity: ${n-l*r}`}}function cn(S){let y;return{c(){y=z("Increase amount")},l(x){y=Q(x,"Increase amount")},m(x,A){$(x,y,A)},d(x){x&&O(y)}}}function vn(S){let y;return{c(){y=z("Increase friction")},l(x){y=Q(x,"Increase friction")},m(x,A){$(x,y,A)},d(x){x&&O(y)}}}function hn(S){let y;return{c(){y=z("Decrease Bounciness")},l(x){y=Q(x,"Decrease Bounciness")},m(x,A){$(x,y,A)},d(x){x&&O(y)}}}function gn(S){let y,x,A,u,e,s,i,n,g,l,f,r,t,o;return s=new pt({props:{cost:ve(Se,mn),currentNumber:Se,$$slots:{default:[cn]},$$scope:{ctx:S}}}),s.$on("successfullPurchase",S[5]),n=new st({props:{cost:ve(ye,dn),currentNumber:ye,max:1,nextStep:.1,$$slots:{default:[vn]},$$scope:{ctx:S}}}),n.$on("successfullPurchase",S[6]),l=new st({props:{cost:ve(Oe,pn),currentNumber:Oe,negative:!0,max:0,nextStep:-.1,$$slots:{default:[hn]},$$scope:{ctx:S}}}),l.$on("successfullPurchase",S[7]),{c(){y=j("div"),x=j("h1"),A=z("Shop"),u=ae(),e=j("div"),le(s.$$.fragment),i=ae(),le(n.$$.fragment),g=ae(),le(l.$$.fragment),this.h()},l(a){y=_(a,"DIV",{class:!0});var v=ie(y);x=_(v,"H1",{class:!0});var d=ie(x);A=Q(d,"Shop"),d.forEach(O),u=se(v),e=_(v,"DIV",{class:!0});var T=ie(e);fe(s.$$.fragment,T),i=se(T),fe(n.$$.fragment,T),g=se(T),fe(l.$$.fragment,T),T.forEach(O),v.forEach(O),this.h()},h(){U(x,"class","text-2xl mb-8 text-center"),U(e,"class","flex flex-col"),U(y,"class","font-display fixed top-0 left-0 h-[calc(100vh)] w-auto p-8 bg-gray-400/[0.6]")},m(a,v){$(a,y,v),W(y,x),W(x,A),W(y,u),W(y,e),ue(s,e,null),W(e,i),ue(n,e,null),W(e,g),ue(l,e,null),r=!0,t||(o=Le(window,"keydown",S[4]),t=!0)},p(a,[v]){const d={};v&256&&(d.$$scope={dirty:v,ctx:a}),s.$set(d);const T={};v&256&&(T.$$scope={dirty:v,ctx:a}),n.$set(T);const C={};v&256&&(C.$$scope={dirty:v,ctx:a}),l.$set(C)},i(a){r||(X(s.$$.fragment,a),X(n.$$.fragment,a),X(l.$$.fragment,a),Ct(()=>{f||(f=rt(y,ot,{x:-200},!0)),f.run(1)}),r=!0)},o(a){ee(s.$$.fragment,a),ee(n.$$.fragment,a),ee(l.$$.fragment,a),f||(f=rt(y,ot,{x:-200},!1)),f.run(0),r=!1},d(a){a&&O(y),ce(s),ce(n),ce(l),a&&f&&f.end(),t=!1,o()}}}const mn=S=>S*30,dn=S=>S*200,pn=S=>(1.1-S)*250;function xn(S,y,x){let A,u,e,s;return ne(S,Se,f=>x(0,A=f)),ne(S,ye,f=>x(1,u=f)),ne(S,Oe,f=>x(2,e=f)),ne(S,Ne,f=>x(3,s=f)),[A,u,e,s,f=>{(f.key=="Esc"||f.key=="Escape")&&oe(Ne,s=!1,s)},()=>oe(Se,A=A+1,A),()=>oe(ye,u=u+.1,u),()=>oe(Oe,e=e-.1,e)]}class yn extends we{constructor(y){super(),Ce(this,y,xn,gn,Pe,{})}}const{window:Sn}=It;function wn(S){let y;return{c(){y=z("Shop")},l(x){y=Q(x,"Shop")},m(x,A){$(x,y,A)},d(x){x&&O(y)}}}function lt(S){let y,x;return y=new yn({}),{c(){le(y.$$.fragment)},l(A){fe(y.$$.fragment,A)},m(A,u){ue(y,A,u),x=!0},i(A){x||(X(y.$$.fragment,A),x=!0)},o(A){ee(y.$$.fragment,A),x=!1},d(A){ce(y,A)}}}function Cn(S){let y,x,A,u,e,s,i,n,g,l=S[3]==1?"":"s",f,r,t,o,a,v,d,T;t=new dt({props:{extraClasses:"mt-4 w-min",$$slots:{default:[wn]},$$scope:{ctx:S}}}),t.$on("click",S[9]);let C=S[4]&&lt();return{c(){y=j("canvas"),x=ae(),A=j("div"),u=j("div"),e=ae(),s=j("div"),i=j("p"),n=z(S[3]),g=z(" unit"),f=z(l),r=ae(),le(t.$$.fragment),o=ae(),C&&C.c(),a=Fe(),this.h()},l(h){y=_(h,"CANVAS",{width:!0,height:!0,class:!0}),ie(y).forEach(O),x=se(h),A=_(h,"DIV",{class:!0});var m=ie(A);u=_(m,"DIV",{class:!0}),ie(u).forEach(O),m.forEach(O),e=se(h),s=_(h,"DIV",{class:!0});var p=ie(s);i=_(p,"P",{class:!0});var c=ie(i);n=Q(c,S[3]),g=Q(c," unit"),f=Q(c,l),c.forEach(O),r=se(p),fe(t.$$.fragment,p),p.forEach(O),o=se(h),C&&C.l(h),a=Fe(),this.h()},h(){U(y,"width",S[1]),U(y,"height",S[2]),U(y,"class","fixed top-0 left-0 z--10"),U(u,"class","border-[50px] border-transparent w-24 h-24 active:scale-90 bg-black rounded-full hover:scale-110 hover:cursor-pointer transition-all"),U(A,"class","fixed top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]"),U(i,"class","font-thin text-3xl border-b-[1px] pb-2 border-gray-200"),U(s,"class","my-8 mx-auto text-center top-0 left-0 w-screen fixed flex flex-col items-center font-display")},m(h,m){$(h,y,m),S[8](y),$(h,x,m),$(h,A,m),W(A,u),$(h,e,m),$(h,s,m),W(s,i),W(i,n),W(i,g),W(i,f),W(s,r),ue(t,s,null),$(h,o,m),C&&C.m(h,m),$(h,a,m),v=!0,d||(T=[Le(Sn,"resize",S[7]),Le(u,"click",S[6])],d=!0)},p(h,[m]){(!v||m&2)&&U(y,"width",h[1]),(!v||m&4)&&U(y,"height",h[2]),(!v||m&8)&&he(n,h[3]),(!v||m&8)&&l!==(l=h[3]==1?"":"s")&&he(f,l);const p={};m&16777216&&(p.$$scope={dirty:m,ctx:h}),t.$set(p),h[4]?C?m&16&&X(C,1):(C=lt(),C.c(),X(C,1),C.m(a.parentNode,a)):C&&(Tt(),ee(C,1,1,()=>{C=null}),Pt())},i(h){v||(X(t.$$.fragment,h),X(C),v=!0)},o(h){ee(t.$$.fragment,h),ee(C),v=!1},d(h){h&&O(y),S[8](null),h&&O(x),h&&O(A),h&&O(e),h&&O(s),ce(t),h&&O(o),C&&C.d(h),h&&O(a),d=!1,Mt(T)}}}function Pn(S,y,x){let A,u,e,s,i,n;ne(S,Ve,w=>x(10,A=w)),ne(S,ye,w=>x(11,u=w)),ne(S,Se,w=>x(12,e=w)),ne(S,ke,w=>x(13,s=w)),ne(S,mt,w=>x(3,i=w)),ne(S,Ne,w=>x(4,n=w));const{Composite:g,Common:l,Bodies:f,World:r,Body:t,Runner:o,Events:a,Mouse:v,MouseConstraint:d}=Ye;let T;function C(){s&&r.remove(A.world,s),oe(ke,s=f.rectangle(h/2,m,h,20,{isStatic:!0}),s),oe(ke,s.render.fillStyle="#444",s),g.add(A.world,[s])}At(()=>{x(1,h=document.documentElement.clientWidth),x(2,m=document.documentElement.clientHeight),l.setDecomp(kt),a.on(A,"beforeUpdate",()=>{const L=g.allBodies(A.world);for(const k of L)!k.isStatic&&(k.position.y>m||k.position.x<-100||k.position.x>h+100||k.position.y<-100)&&r.remove(A.world,k)});const w=o.create();w.isFixed=!0,o.run(w,A),C();const E=v.create(T),B=d.create(A,{mouse:E,constraint:{stiffness:.2,render:{visible:!0}}});g.add(A.world,B);const R=T.getContext("2d");(function L(){const k=g.allBodies(A.world);window.requestAnimationFrame(L),R.fillStyle="#ffffff",R.fillRect(0,0,T.width,T.height);for(const D of k)for(const V of D.parts){const b=V.vertices;R.beginPath(),R.moveTo(b[0].x,b[0].y);for(const N of b)R.lineTo(N.x,N.y);R.lineTo(b[0].x,b[0].y),R.closePath(),R.lineWidth=0,R.strokeStyle="rgba(1, 1, 1, 0)",R.globalAlpha=V.render.opacity,R.fillStyle=V.render.fillStyle,R.fill()}})()});let h=600,m=600;const p=(w,E)=>Math.random()*(E-w+1)+w;function c(){for(let w=0;w<e;w++){const E=p(16,32),B=f.circle(p(60,h-60),0,E);t.setMass(B,E),B.restitution=1,B.friction=u,B.render.fillStyle=Jt({hue:"monochrome",luminosity:"light"}),r.add(A.world,B)}}const M=()=>{x(1,h=document.documentElement.clientWidth),x(2,m=document.documentElement.clientHeight),C()};function P(w){Et[w?"unshift":"push"](()=>{T=w,x(0,T)})}return[T,h,m,i,n,C,c,M,P,()=>oe(Ne,n=!n,n)]}class In extends we{constructor(y){super(),Ce(this,y,Pn,Cn,Pe,{})}}export{In as default};
